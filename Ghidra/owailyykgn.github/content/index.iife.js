var MR=Object.defineProperty;var AR=(Fl,M,js)=>M in Fl?MR(Fl,M,{enumerable:!0,configurable:!0,writable:!0,value:js}):Fl[M]=js;var U=(Fl,M,js)=>AR(Fl,typeof M!="symbol"?M+"":M,js);(function(){"use strict";var Fv,zE,DE;function Fl(h,u){for(var n=0;n<u.length;n++){const r=u[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in h)){const d=Object.getOwnPropertyDescriptor(r,s);d&&Object.defineProperty(h,s,d.get?d:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}))}const M=h=>{console.debug(`[Content Script]: ${h}`)};var js={};class z1{constructor(u,n){U(this,"wildcardListeners",new Set);U(this,"eventHistory",[]);U(this,"maxHistorySize",100);U(this,"isEnabled",!0);U(this,"listeners",new Map);U(this,"onceListeners",new Map);U(this,"maxListeners",50);U(this,"isEmittingErrorEvent",!1);u!==void 0&&(this.maxListeners=u),n!==void 0&&(this.maxHistorySize=n)}emit(u,n){if(!this.isEnabled)return;const r=Date.now();this.eventHistory.push({event:u,data:n,timestamp:r}),this.eventHistory.length>this.maxHistorySize&&this.eventHistory.shift();const s=this.listeners.get(u);s&&[...s].forEach(p=>{try{p(n)}catch(v){if(console.error(`[EventBus] Error in listener for event "${String(u)}":`,v),!this.isEmittingErrorEvent&&u!=="error:unhandled"){this.isEmittingErrorEvent=!0;try{this.emit("error:unhandled",{error:v,context:`event-listener-${String(u)}`})}finally{this.isEmittingErrorEvent=!1}}}});const d=this.onceListeners.get(u);if(d){const p=[...d];this.onceListeners.delete(u),p.forEach(v=>{try{v(n)}catch(w){if(console.error(`[EventBus] Error in once listener for event "${String(u)}":`,w),!this.isEmittingErrorEvent&&u!=="error:unhandled"){this.isEmittingErrorEvent=!0;try{this.emit("error:unhandled",{error:w,context:`once-event-listener-${String(u)}`})}finally{this.isEmittingErrorEvent=!1}}}})}[...this.wildcardListeners].forEach(p=>{try{p({event:u,data:n})}catch(v){if(console.error("[EventBus] Error in wildcard event listener:",v),!this.isEmittingErrorEvent&&u!=="error:unhandled"){this.isEmittingErrorEvent=!0;try{this.emit("error:unhandled",{error:v,context:"wildcard-event-listener"})}finally{this.isEmittingErrorEvent=!1}}}}),typeof process<"u"&&js&&js.NODE_ENV==="development"&&console.debug(`[EventBus] Emitted "${String(u)}":`,n)}on(u,n){this.listeners.has(u)||this.listeners.set(u,new Set);const r=this.listeners.get(u);return r.size>=this.maxListeners&&console.warn(`[EventBus] Max listeners (${this.maxListeners}) reached for event "${String(u)}". This might indicate a memory leak.`),r.add(n),()=>this.off(u,n)}once(u,n){this.onceListeners.has(u)||this.onceListeners.set(u,new Set);const r=this.onceListeners.get(u);return r.size>=this.maxListeners&&console.warn(`[EventBus] Max listeners (${this.maxListeners}) reached for event (once) "${String(u)}". This might indicate a memory leak.`),r.add(n),()=>{const s=this.onceListeners.get(u);s&&(s.delete(n),s.size===0&&this.onceListeners.delete(u))}}off(u,n){const r=this.listeners.get(u);r&&(r.delete(n),r.size===0&&this.listeners.delete(u));const s=this.onceListeners.get(u);s&&(s.delete(n),s.size===0&&this.onceListeners.delete(u))}removeAllListeners(u){u?(this.listeners.delete(u),this.onceListeners.delete(u)):(this.listeners.clear(),this.onceListeners.clear())}getListenerCount(u){var s,d;const n=((s=this.listeners.get(u))==null?void 0:s.size)||0,r=((d=this.onceListeners.get(u))==null?void 0:d.size)||0;return n+r}setMaxListeners(u){u>0?this.maxListeners=u:console.warn("[EventBus] Max listeners must be a positive number.")}onAny(u){return this.wildcardListeners.add(u),()=>{this.wildcardListeners.delete(u)}}getEventHistory(){return[...this.eventHistory]}getEventNames(){const u=new Set;return this.listeners.forEach((n,r)=>u.add(r)),this.onceListeners.forEach((n,r)=>u.add(r)),Array.from(u)}enable(){this.isEnabled=!0,console.debug("[EventBus] Enabled.")}disable(){this.isEnabled=!1,console.debug("[EventBus] Disabled.")}debugInfo(){const u={};this.listeners.forEach((r,s)=>{u[String(s)]=r.size});const n={};return this.onceListeners.forEach((r,s)=>{n[String(s)]=r.size}),{isEnabled:this.isEnabled,maxListeners:this.maxListeners,activeListeners:u,onceListeners:n,wildcardListenerCount:this.wildcardListeners.size,eventHistorySize:this.eventHistory.length,maxHistorySize:this.maxHistorySize,totalListenerRegistrations:Array.from(this.listeners.values()).reduce((r,s)=>r+s.size,0)+Array.from(this.onceListeners.values()).reduce((r,s)=>r+s.size,0)+this.wildcardListeners.size}}}const ge=new z1;typeof process<"u"&&js&&js.NODE_ENV==="development"&&typeof window<"u"&&(window.__eventBus=ge,window.__eventBusDebug=()=>ge.debugInfo());async function D1(){console.debug("[MCPSuperAssistant] Event bus initialized.")}var N1={};class I1{constructor(u={}){U(this,"initialized",!1);U(this,"messageListeners",new Map);U(this,"pendingRequests",new Map);U(this,"config");U(this,"isExtensionContextValid",!0);U(this,"lastHealthCheck",0);U(this,"HEALTH_CHECK_INTERVAL",3e4);this.config={enableLogging:N1.NODE_ENV==="development",maxRetries:3,retryDelay:1e3,...u}}initialize(){if(this.initialized){console.warn("[ContextBridge] Already initialized");return}try{if(!this.validateExtensionContext())throw new Error("Chrome extension context is not available");chrome.runtime.onMessage.addListener(this.handleChromeMessage.bind(this)),chrome.tabs&&chrome.tabs.onUpdated&&chrome.tabs.onUpdated.addListener(this.handleTabUpdated.bind(this)),this.setupEventBusIntegration(),this.startHealthCheck(),this.initialized=!0,console.debug("[ContextBridge] Initialized successfully"),ge.emit("context:bridge-initialized",{timestamp:Date.now()})}catch(u){const n=u instanceof Error?u.message:String(u);throw console.error("[ContextBridge] Initialization failed:",n),this.isExtensionContextValid=!1,u}}validateExtensionContext(){try{return typeof chrome>"u"||!chrome.runtime?(console.error("[ContextBridge] Chrome runtime API not available"),this.isExtensionContextValid=!1,!1):chrome.runtime.id?typeof chrome.runtime.sendMessage!="function"?(console.error("[ContextBridge] Chrome runtime.sendMessage not available"),this.isExtensionContextValid=!1,!1):(chrome.runtime.getManifest(),this.isExtensionContextValid=!0,!0):(console.error("[ContextBridge] Chrome extension ID not available"),this.isExtensionContextValid=!1,!1)}catch(u){return console.error("[ContextBridge] Extension context validation failed:",u),this.isExtensionContextValid=!1,ge.emit("context:bridge-invalidated",{timestamp:Date.now(),error:u instanceof Error?u.message:String(u)}),!1}}startHealthCheck(){const u=()=>{const n=Date.now();if(!(n-this.lastHealthCheck<this.HEALTH_CHECK_INTERVAL)){this.lastHealthCheck=n;try{if(!chrome.runtime||!chrome.runtime.id)throw new Error("Extension context invalidated");this.isExtensionContextValid||(this.isExtensionContextValid=!0,console.debug("[ContextBridge] Extension context restored"),ge.emit("context:bridge-restored",{timestamp:n}))}catch(r){this.isExtensionContextValid&&(this.isExtensionContextValid=!1,console.error("[ContextBridge] Extension context invalidated:",r),ge.emit("context:bridge-invalidated",{timestamp:n,error:r instanceof Error?r.message:String(r)}))}}};u(),setInterval(u,this.HEALTH_CHECK_INTERVAL)}handleChromeMessage(u,n,r){try{if(this.config.enableLogging&&console.debug("[ContextBridge] Received Chrome message:",u,"from:",n),!u||typeof u!="object")return console.warn("[ContextBridge] Invalid message received:",u),r({error:"Invalid message format"}),!1;const s={type:u.type||u.command||"unknown",payload:u.payload,origin:u.origin||this.inferOrigin(n),timestamp:u.timestamp||Date.now(),id:u.id};if(u.id&&this.pendingRequests.has(u.id)){const p=this.pendingRequests.get(u.id);return clearTimeout(p.timeout),this.pendingRequests.delete(u.id),this.config.enableLogging&&console.debug(`[ContextBridge] Resolving pending request ${u.id}`),u.error?p.reject(new Error(u.error)):p.resolve(u.payload!==void 0?u.payload:u),!1}this.config.enableLogging&&console.debug("[ContextBridge] Processed ContextMessage:",s),ge.emit("context:message-received",{message:s,sender:n});const d=this.messageListeners.get(s.type);return d&&d.length>0&&d.forEach(p=>{try{p(s)}catch(v){console.error("[ContextBridge] Error in message listener:",v)}}),u.expectResponse?!0:(r({received:!0,timestamp:Date.now()}),!1)}catch(s){return console.error("[ContextBridge] Error handling Chrome message:",s),r({error:s instanceof Error?s.message:String(s)}),!1}}handleTabUpdated(u,n,r){n.status==="complete"&&r.url&&ge.emit("context:tab-updated",{tabId:u,url:r.url,changeInfo:n})}inferOrigin(u){var n,r;return u.tab?"content":(n=u.url)!=null&&n.includes("popup.html")?"popup":(r=u.url)!=null&&r.includes("options.html")?"options":"background"}setupEventBusIntegration(){ge.on("context:broadcast",({event:u,data:n,excludeOrigin:r})=>{this.broadcast(u,n,r)}),ge.on("connection:status-changed",u=>{this.broadcast("connection:status-changed",u)}),ge.on("adapter:activated",u=>{this.broadcast("adapter:activated",u)}),ge.on("tool:execution-completed",u=>{this.broadcast("tool:execution-completed",u)})}async sendMessage(u,n,r,s={}){if(!this.isExtensionContextValid)throw new Error("Extension context is invalid - cannot send message");if(!this.initialized)throw new Error("ContextBridge not initialized");const d=s.retries??this.config.maxRetries??3,p=s.timeout||5e3;let v=null;for(let w=0;w<=d;w++)try{return await this.attemptSendMessage(u,n,r,p)}catch(S){if(v=S instanceof Error?S:new Error(String(S)),this.isNonRetryableError(v))throw v;if(w<d){const k=this.config.retryDelay*Math.pow(2,w);this.config.enableLogging&&console.debug(`[ContextBridge] Retry ${w+1}/${d} for ${n} in ${k}ms`),await new Promise(I=>setTimeout(I,k))}}throw new Error(`Failed to send message after ${d} retries: ${v==null?void 0:v.message}`)}async attemptSendMessage(u,n,r,s=5e3){const d=this.generateMessageId(),p={type:n,payload:r,origin:"content",timestamp:Date.now(),id:d};return this.config.enableLogging&&console.debug("[ContextBridge] Sending message:",p,"to:",u),new Promise((v,w)=>{const S=setTimeout(()=>{this.pendingRequests.delete(d),w(new Error(`Message timeout after ${s}ms for ${n} to ${u}`))},s);this.pendingRequests.set(d,{resolve:v,reject:w,timeout:S});try{if(!chrome.runtime||!chrome.runtime.sendMessage)throw new Error("Chrome runtime not available");u==="background"?chrome.runtime.sendMessage({...p,expectResponse:!0},k=>{if(clearTimeout(S),this.pendingRequests.delete(d),chrome.runtime.lastError){const I=`Chrome runtime error: ${chrome.runtime.lastError.message}`;this.config.enableLogging&&console.error("[ContextBridge]",I),w(new Error(I));return}k?k.error?w(new Error(k.error)):v(k.payload!==void 0?k.payload:k):v(null)}):chrome.runtime.sendMessage({...p,target:u,expectResponse:!0},k=>{if(clearTimeout(S),this.pendingRequests.delete(d),chrome.runtime.lastError){const I=`Chrome runtime error: ${chrome.runtime.lastError.message}`;this.config.enableLogging&&console.error("[ContextBridge]",I),w(new Error(I));return}k?k.error?w(new Error(k.error)):v(k.payload!==void 0?k.payload:k):v(null)})}catch(k){clearTimeout(S),this.pendingRequests.delete(d),k instanceof Error&&k.message.includes("Extension context invalidated")&&(this.isExtensionContextValid=!1,ge.emit("context:bridge-invalidated",{timestamp:Date.now(),error:k.message})),this.config.enableLogging&&console.error("[ContextBridge] Error sending message:",k),w(k)}})}isNonRetryableError(u){const n=u.message.toLowerCase();return n.includes("extension context invalidated")||n.includes("chrome runtime not available")||n.includes("invalid arguments")||n.includes("permission denied")}broadcast(u,n,r){if(!this.isExtensionContextValid){this.config.enableLogging&&console.warn("[ContextBridge] Cannot broadcast - extension context is invalid");return}const s={type:u,payload:n,origin:"content",timestamp:Date.now()};this.config.enableLogging&&console.debug("[ContextBridge] Broadcasting message:",s);try{if(!chrome.runtime||!chrome.runtime.sendMessage)throw new Error("Chrome runtime not available");chrome.runtime.sendMessage({...s,broadcast:!0,excludeOrigin:r})}catch(d){console.error("[ContextBridge] Error broadcasting message:",d),d instanceof Error&&(d.message.includes("Extension context invalidated")||d.message.includes("Chrome runtime not available"))&&(this.isExtensionContextValid=!1,ge.emit("context:bridge-invalidated",{timestamp:Date.now(),error:d.message}))}}onMessage(u,n){return this.messageListeners.has(u)||this.messageListeners.set(u,[]),this.messageListeners.get(u).push(n),()=>{const r=this.messageListeners.get(u);if(r){const s=r.indexOf(n);s>-1&&r.splice(s,1),r.length===0&&this.messageListeners.delete(u)}}}syncStore(u,n){this.broadcast("store:sync",{storeName:u,state:n})}async requestStoreState(u,n="background"){return this.sendMessage(n,"store:request",{storeName:u})}generateMessageId(){return`msg_${Date.now()}_${Math.random().toString(36).substring(2,11)}`}async getConnectionStatus(){const u={};try{const n=await this.sendMessage("background","ping",{},{timeout:2e3});u.background=!!n}catch{u.background=!1}return u}cleanup(){for(const[,u]of this.pendingRequests)clearTimeout(u.timeout),u.reject(new Error("Context bridge cleanup"));this.pendingRequests.clear(),this.messageListeners.clear(),this.initialized=!1,console.debug("[ContextBridge] Cleaned up")}}const fi=new I1,YS=h=>{let u;const n=new Set,r=(S,k)=>{const I=typeof S=="function"?S(u):S;if(!Object.is(I,u)){const R=u;u=k??(typeof I!="object"||I===null)?I:Object.assign({},u,I),n.forEach(A=>A(u,R))}},s=()=>u,v={setState:r,getState:s,getInitialState:()=>w,subscribe:S=>(n.add(S),()=>n.delete(S))},w=u=h(r,s,v);return v},U1=h=>h?YS(h):YS;function XS(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var sv={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS;function P1(){if(ZS)return Rt;ZS=1;var h=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),I=Symbol.iterator;function R($){return $===null||typeof $!="object"?null:($=I&&$[I]||$["@@iterator"],typeof $=="function"?$:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,H={};function re($,P,fe){this.props=$,this.context=P,this.refs=H,this.updater=fe||A}re.prototype.isReactComponent={},re.prototype.setState=function($,P){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,P,"setState")},re.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function G(){}G.prototype=re.prototype;function ue($,P,fe){this.props=$,this.context=P,this.refs=H,this.updater=fe||A}var ye=ue.prototype=new G;ye.constructor=ue,_(ye,re.prototype),ye.isPureReactComponent=!0;var ce=Array.isArray,be={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function he($,P,fe,ne,ke,Be){return fe=Be.ref,{$$typeof:h,type:$,key:P,ref:fe!==void 0?fe:null,props:Be}}function ie($,P){return he($.type,P,void 0,void 0,void 0,$.props)}function Ee($){return typeof $=="object"&&$!==null&&$.$$typeof===h}function de($){var P={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(fe){return P[fe]})}var Ue=/\/+/g;function ze($,P){return typeof $=="object"&&$!==null&&$.key!=null?de(""+$.key):P.toString(36)}function Fe(){}function Ge($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(Fe,Fe):($.status="pending",$.then(function(P){$.status==="pending"&&($.status="fulfilled",$.value=P)},function(P){$.status==="pending"&&($.status="rejected",$.reason=P)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function Xe($,P,fe,ne,ke){var Be=typeof $;(Be==="undefined"||Be==="boolean")&&($=null);var Te=!1;if($===null)Te=!0;else switch(Be){case"bigint":case"string":case"number":Te=!0;break;case"object":switch($.$$typeof){case h:case u:Te=!0;break;case k:return Te=$._init,Xe(Te($._payload),P,fe,ne,ke)}}if(Te)return ke=ke($),Te=ne===""?"."+ze($,0):ne,ce(ke)?(fe="",Te!=null&&(fe=Te.replace(Ue,"$&/")+"/"),Xe(ke,P,fe,"",function($e){return $e})):ke!=null&&(Ee(ke)&&(ke=ie(ke,fe+(ke.key==null||$&&$.key===ke.key?"":(""+ke.key).replace(Ue,"$&/")+"/")+Te)),P.push(ke)),1;Te=0;var Pe=ne===""?".":ne+":";if(ce($))for(var Me=0;Me<$.length;Me++)ne=$[Me],Be=Pe+ze(ne,Me),Te+=Xe(ne,P,fe,Be,ke);else if(Me=R($),typeof Me=="function")for($=Me.call($),Me=0;!(ne=$.next()).done;)ne=ne.value,Be=Pe+ze(ne,Me++),Te+=Xe(ne,P,fe,Be,ke);else if(Be==="object"){if(typeof $.then=="function")return Xe(Ge($),P,fe,ne,ke);throw P=String($),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return Te}function Q($,P,fe){if($==null)return $;var ne=[],ke=0;return Xe($,ne,"","",function(Be){return P.call(fe,Be,ke++)}),ne}function V($){if($._status===-1){var P=$._result;P=P(),P.then(function(fe){($._status===0||$._status===-1)&&($._status=1,$._result=fe)},function(fe){($._status===0||$._status===-1)&&($._status=2,$._result=fe)}),$._status===-1&&($._status=0,$._result=P)}if($._status===1)return $._result.default;throw $._result}var ee=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function Oe(){}return Rt.Children={map:Q,forEach:function($,P,fe){Q($,function(){P.apply(this,arguments)},fe)},count:function($){var P=0;return Q($,function(){P++}),P},toArray:function($){return Q($,function(P){return P})||[]},only:function($){if(!Ee($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Rt.Component=re,Rt.Fragment=n,Rt.Profiler=s,Rt.PureComponent=ue,Rt.StrictMode=r,Rt.Suspense=w,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=be,Rt.__COMPILER_RUNTIME={__proto__:null,c:function($){return be.H.useMemoCache($)}},Rt.cache=function($){return function(){return $.apply(null,arguments)}},Rt.cloneElement=function($,P,fe){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var ne=_({},$.props),ke=$.key,Be=void 0;if(P!=null)for(Te in P.ref!==void 0&&(Be=void 0),P.key!==void 0&&(ke=""+P.key),P)!J.call(P,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&P.ref===void 0||(ne[Te]=P[Te]);var Te=arguments.length-2;if(Te===1)ne.children=fe;else if(1<Te){for(var Pe=Array(Te),Me=0;Me<Te;Me++)Pe[Me]=arguments[Me+2];ne.children=Pe}return he($.type,ke,void 0,void 0,Be,ne)},Rt.createContext=function($){return $={$$typeof:p,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:d,_context:$},$},Rt.createElement=function($,P,fe){var ne,ke={},Be=null;if(P!=null)for(ne in P.key!==void 0&&(Be=""+P.key),P)J.call(P,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ke[ne]=P[ne]);var Te=arguments.length-2;if(Te===1)ke.children=fe;else if(1<Te){for(var Pe=Array(Te),Me=0;Me<Te;Me++)Pe[Me]=arguments[Me+2];ke.children=Pe}if($&&$.defaultProps)for(ne in Te=$.defaultProps,Te)ke[ne]===void 0&&(ke[ne]=Te[ne]);return he($,Be,void 0,void 0,null,ke)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function($){return{$$typeof:v,render:$}},Rt.isValidElement=Ee,Rt.lazy=function($){return{$$typeof:k,_payload:{_status:-1,_result:$},_init:V}},Rt.memo=function($,P){return{$$typeof:S,type:$,compare:P===void 0?null:P}},Rt.startTransition=function($){var P=be.T,fe={};be.T=fe;try{var ne=$(),ke=be.S;ke!==null&&ke(fe,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(Oe,ee)}catch(Be){ee(Be)}finally{be.T=P}},Rt.unstable_useCacheRefresh=function(){return be.H.useCacheRefresh()},Rt.use=function($){return be.H.use($)},Rt.useActionState=function($,P,fe){return be.H.useActionState($,P,fe)},Rt.useCallback=function($,P){return be.H.useCallback($,P)},Rt.useContext=function($){return be.H.useContext($)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function($,P){return be.H.useDeferredValue($,P)},Rt.useEffect=function($,P,fe){var ne=be.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect($,P)},Rt.useId=function(){return be.H.useId()},Rt.useImperativeHandle=function($,P,fe){return be.H.useImperativeHandle($,P,fe)},Rt.useInsertionEffect=function($,P){return be.H.useInsertionEffect($,P)},Rt.useLayoutEffect=function($,P){return be.H.useLayoutEffect($,P)},Rt.useMemo=function($,P){return be.H.useMemo($,P)},Rt.useOptimistic=function($,P){return be.H.useOptimistic($,P)},Rt.useReducer=function($,P,fe){return be.H.useReducer($,P,fe)},Rt.useRef=function($){return be.H.useRef($)},Rt.useState=function($){return be.H.useState($)},Rt.useSyncExternalStore=function($,P,fe){return be.H.useSyncExternalStore($,P,fe)},Rt.useTransition=function(){return be.H.useTransition()},Rt.version="19.1.0",Rt}var Kh={exports:{}};Kh.exports;var QS;function $1(){return QS||(QS=1,function(h,u){var n={};/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */n.NODE_ENV!=="production"&&function(){function r(z,Y){Object.defineProperty(p.prototype,z,{get:function(){console.warn("%s(...) is deprecated in plain JavaScript React classes. %s",Y[0],Y[1])}})}function s(z){return z===null||typeof z!="object"?null:(z=lt&&z[lt]||z["@@iterator"],typeof z=="function"?z:null)}function d(z,Y){z=(z=z.constructor)&&(z.displayName||z.name)||"ReactClass";var Ie=z+"."+Y;ht[Ie]||(console.error("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",Y,z),ht[Ie]=!0)}function p(z,Y,Ie){this.props=z,this.context=Y,this.refs=_e,this.updater=Ie||Vt}function v(){}function w(z,Y,Ie){this.props=z,this.context=Y,this.refs=_e,this.updater=Ie||Vt}function S(z){return""+z}function k(z){try{S(z);var Y=!1}catch{Y=!0}if(Y){Y=console;var Ie=Y.error,je=typeof Symbol=="function"&&Symbol.toStringTag&&z[Symbol.toStringTag]||z.constructor.name||"Object";return Ie.call(Y,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",je),S(z)}}function I(z){if(z==null)return null;if(typeof z=="function")return z.$$typeof===Un?null:z.displayName||z.name||null;if(typeof z=="string")return z;switch(z){case P:return"Fragment";case ne:return"Profiler";case fe:return"StrictMode";case Pe:return"Suspense";case Me:return"SuspenseList";case Ke:return"Activity"}if(typeof z=="object")switch(typeof z.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),z.$$typeof){case $:return"Portal";case Be:return(z.displayName||"Context")+".Provider";case ke:return(z._context.displayName||"Context")+".Consumer";case Te:var Y=z.render;return z=z.displayName,z||(z=Y.displayName||Y.name||"",z=z!==""?"ForwardRef("+z+")":"ForwardRef"),z;case $e:return Y=z.displayName||null,Y!==null?Y:I(z.type)||"Memo";case it:Y=z._payload,z=z._init;try{return I(z(Y))}catch{}}return null}function R(z){if(z===P)return"<>";if(typeof z=="object"&&z!==null&&z.$$typeof===it)return"<...>";try{var Y=I(z);return Y?"<"+Y+">":"<...>"}catch{return"<...>"}}function A(){var z=Ae.A;return z===null?null:z.getOwner()}function _(){return Error("react-stack-top-frame")}function H(z){if(gt.call(z,"key")){var Y=Object.getOwnPropertyDescriptor(z,"key").get;if(Y&&Y.isReactWarning)return!1}return z.key!==void 0}function re(z,Y){function Ie(){Rn||(Rn=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",Y))}Ie.isReactWarning=!0,Object.defineProperty(z,"key",{get:Ie,configurable:!0})}function G(){var z=I(this.type);return Ne[z]||(Ne[z]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),z=this.props.ref,z!==void 0?z:null}function ue(z,Y,Ie,je,Ze,At,vt,$t){return Ie=At.ref,z={$$typeof:Oe,type:z,key:Y,props:At,_owner:Ze},(Ie!==void 0?Ie:null)!==null?Object.defineProperty(z,"ref",{enumerable:!1,get:G}):Object.defineProperty(z,"ref",{enumerable:!1,value:null}),z._store={},Object.defineProperty(z._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(z,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(z,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:vt}),Object.defineProperty(z,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:$t}),Object.freeze&&(Object.freeze(z.props),Object.freeze(z)),z}function ye(z,Y){return Y=ue(z.type,Y,void 0,void 0,z._owner,z.props,z._debugStack,z._debugTask),z._store&&(Y._store.validated=z._store.validated),Y}function ce(z){return typeof z=="object"&&z!==null&&z.$$typeof===Oe}function be(z){var Y={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Ie){return Y[Ie]})}function J(z,Y){return typeof z=="object"&&z!==null&&z.key!=null?(k(z.key),be(""+z.key)):Y.toString(36)}function he(){}function ie(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(he,he):(z.status="pending",z.then(function(Y){z.status==="pending"&&(z.status="fulfilled",z.value=Y)},function(Y){z.status==="pending"&&(z.status="rejected",z.reason=Y)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Ee(z,Y,Ie,je,Ze){var At=typeof z;(At==="undefined"||At==="boolean")&&(z=null);var vt=!1;if(z===null)vt=!0;else switch(At){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(z.$$typeof){case Oe:case $:vt=!0;break;case it:return vt=z._init,Ee(vt(z._payload),Y,Ie,je,Ze)}}if(vt){vt=z,Ze=Ze(vt);var $t=je===""?"."+J(vt,0):je;return Jt(Ze)?(Ie="",$t!=null&&(Ie=$t.replace(lr,"$&/")+"/"),Ee(Ze,Y,Ie,"",function(jn){return jn})):Ze!=null&&(ce(Ze)&&(Ze.key!=null&&(vt&&vt.key===Ze.key||k(Ze.key)),Ie=ye(Ze,Ie+(Ze.key==null||vt&&vt.key===Ze.key?"":(""+Ze.key).replace(lr,"$&/")+"/")+$t),je!==""&&vt!=null&&ce(vt)&&vt.key==null&&vt._store&&!vt._store.validated&&(Ie._store.validated=2),Ze=Ie),Y.push(Ze)),1}if(vt=0,$t=je===""?".":je+":",Jt(z))for(var pt=0;pt<z.length;pt++)je=z[pt],At=$t+J(je,pt),vt+=Ee(je,Y,Ie,At,Ze);else if(pt=s(z),typeof pt=="function")for(pt===z.entries&&(hn||console.warn("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),hn=!0),z=pt.call(z),pt=0;!(je=z.next()).done;)je=je.value,At=$t+J(je,pt++),vt+=Ee(je,Y,Ie,At,Ze);else if(At==="object"){if(typeof z.then=="function")return Ee(ie(z),Y,Ie,je,Ze);throw Y=String(z),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return vt}function de(z,Y,Ie){if(z==null)return z;var je=[],Ze=0;return Ee(z,je,"","",function(At){return Y.call(Ie,At,Ze++)}),je}function Ue(z){if(z._status===-1){var Y=z._result;Y=Y(),Y.then(function(Ie){(z._status===0||z._status===-1)&&(z._status=1,z._result=Ie)},function(Ie){(z._status===0||z._status===-1)&&(z._status=2,z._result=Ie)}),z._status===-1&&(z._status=0,z._result=Y)}if(z._status===1)return Y=z._result,Y===void 0&&console.error(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,Y),"default"in Y||console.error(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,Y),Y.default;throw z._result}function ze(){var z=Ae.H;return z===null&&console.error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem.`),z}function Fe(){}function Ge(z){if(Zi===null)try{var Y=("require"+Math.random()).slice(0,7);Zi=(h&&h[Y]).call(h,"timers").setImmediate}catch{Zi=function(je){En===!1&&(En=!0,typeof MessageChannel>"u"&&console.error("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var Ze=new MessageChannel;Ze.port1.onmessage=je,Ze.port2.postMessage(void 0)}}return Zi(z)}function Xe(z){return 1<z.length&&typeof AggregateError=="function"?new AggregateError(z):z[0]}function Q(z,Y){Y!==Qi-1&&console.error("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),Qi=Y}function V(z,Y,Ie){var je=Ae.actQueue;if(je!==null)if(je.length!==0)try{ee(je),Ge(function(){return V(z,Y,Ie)});return}catch(Ze){Ae.thrownErrors.push(Ze)}else Ae.actQueue=null;0<Ae.thrownErrors.length?(je=Xe(Ae.thrownErrors),Ae.thrownErrors.length=0,Ie(je)):Y(z)}function ee(z){if(!Ga){Ga=!0;var Y=0;try{for(;Y<z.length;Y++){var Ie=z[Y];do{Ae.didUsePromise=!1;var je=Ie(!1);if(je!==null){if(Ae.didUsePromise){z[Y]=Ie,z.splice(0,Y);return}Ie=je}else break}while(!0)}z.length=0}catch(Ze){z.splice(0,Y+1),Ae.thrownErrors.push(Ze)}finally{Ga=!1}}}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var Oe=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),ke=Symbol.for("react.consumer"),Be=Symbol.for("react.context"),Te=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),Ke=Symbol.for("react.activity"),lt=Symbol.iterator,ht={},Vt={isMounted:function(){return!1},enqueueForceUpdate:function(z){d(z,"forceUpdate")},enqueueReplaceState:function(z){d(z,"replaceState")},enqueueSetState:function(z){d(z,"setState")}},ca=Object.assign,_e={};Object.freeze(_e),p.prototype.isReactComponent={},p.prototype.setState=function(z,Y){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Y,"setState")},p.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};var ot={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},Yt;for(Yt in ot)ot.hasOwnProperty(Yt)&&r(Yt,ot[Yt]);v.prototype=p.prototype,ot=w.prototype=new v,ot.constructor=w,ca(ot,p.prototype),ot.isPureReactComponent=!0;var Jt=Array.isArray,Un=Symbol.for("react.client.reference"),Ae={H:null,A:null,T:null,S:null,V:null,actQueue:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1,didUsePromise:!1,thrownErrors:[],getCurrentStack:null,recentlyCreatedOwnerStacks:0},gt=Object.prototype.hasOwnProperty,Xt=console.createTask?console.createTask:function(){return null};ot={"react-stack-bottom-frame":function(z){return z()}};var Rn,Ve,Ne={},qe=ot["react-stack-bottom-frame"].bind(ot,_)(),gn=Xt(R(_)),hn=!1,lr=/\/+/g,Kr=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},En=!1,Zi=null,Qi=0,ua=!1,Ga=!1,Oi=typeof queueMicrotask=="function"?function(z){queueMicrotask(function(){return queueMicrotask(z)})}:Ge;ot=Object.freeze({__proto__:null,c:function(z){return ze().useMemoCache(z)}}),u.Children={map:de,forEach:function(z,Y,Ie){de(z,function(){Y.apply(this,arguments)},Ie)},count:function(z){var Y=0;return de(z,function(){Y++}),Y},toArray:function(z){return de(z,function(Y){return Y})||[]},only:function(z){if(!ce(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},u.Component=p,u.Fragment=P,u.Profiler=ne,u.PureComponent=w,u.StrictMode=fe,u.Suspense=Pe,u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ae,u.__COMPILER_RUNTIME=ot,u.act=function(z){var Y=Ae.actQueue,Ie=Qi;Qi++;var je=Ae.actQueue=Y!==null?Y:[],Ze=!1;try{var At=z()}catch(pt){Ae.thrownErrors.push(pt)}if(0<Ae.thrownErrors.length)throw Q(Y,Ie),z=Xe(Ae.thrownErrors),Ae.thrownErrors.length=0,z;if(At!==null&&typeof At=="object"&&typeof At.then=="function"){var vt=At;return Oi(function(){Ze||ua||(ua=!0,console.error("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),{then:function(pt,jn){Ze=!0,vt.then(function(ko){if(Q(Y,Ie),Ie===0){try{ee(je),Ge(function(){return V(ko,pt,jn)})}catch(Mo){Ae.thrownErrors.push(Mo)}if(0<Ae.thrownErrors.length){var hp=Xe(Ae.thrownErrors);Ae.thrownErrors.length=0,jn(hp)}}else pt(ko)},function(ko){Q(Y,Ie),0<Ae.thrownErrors.length&&(ko=Xe(Ae.thrownErrors),Ae.thrownErrors.length=0),jn(ko)})}}}var $t=At;if(Q(Y,Ie),Ie===0&&(ee(je),je.length!==0&&Oi(function(){Ze||ua||(ua=!0,console.error("A component suspended inside an `act` scope, but the `act` call was not awaited. When testing React components that depend on asynchronous data, you must await the result:\n\nawait act(() => ...)"))}),Ae.actQueue=null),0<Ae.thrownErrors.length)throw z=Xe(Ae.thrownErrors),Ae.thrownErrors.length=0,z;return{then:function(pt,jn){Ze=!0,Ie===0?(Ae.actQueue=je,Ge(function(){return V($t,pt,jn)})):pt($t)}}},u.cache=function(z){return function(){return z.apply(null,arguments)}},u.captureOwnerStack=function(){var z=Ae.getCurrentStack;return z===null?null:z()},u.cloneElement=function(z,Y,Ie){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var je=ca({},z.props),Ze=z.key,At=z._owner;if(Y!=null){var vt;e:{if(gt.call(Y,"ref")&&(vt=Object.getOwnPropertyDescriptor(Y,"ref").get)&&vt.isReactWarning){vt=!1;break e}vt=Y.ref!==void 0}vt&&(At=A()),H(Y)&&(k(Y.key),Ze=""+Y.key);for($t in Y)!gt.call(Y,$t)||$t==="key"||$t==="__self"||$t==="__source"||$t==="ref"&&Y.ref===void 0||(je[$t]=Y[$t])}var $t=arguments.length-2;if($t===1)je.children=Ie;else if(1<$t){vt=Array($t);for(var pt=0;pt<$t;pt++)vt[pt]=arguments[pt+2];je.children=vt}for(je=ue(z.type,Ze,void 0,void 0,At,je,z._debugStack,z._debugTask),Ze=2;Ze<arguments.length;Ze++)At=arguments[Ze],ce(At)&&At._store&&(At._store.validated=1);return je},u.createContext=function(z){return z={$$typeof:Be,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:ke,_context:z},z._currentRenderer=null,z._currentRenderer2=null,z},u.createElement=function(z,Y,Ie){for(var je=2;je<arguments.length;je++){var Ze=arguments[je];ce(Ze)&&Ze._store&&(Ze._store.validated=1)}if(je={},Ze=null,Y!=null)for(pt in Ve||!("__self"in Y)||"key"in Y||(Ve=!0,console.warn("Your app (or one of its dependencies) is using an outdated JSX transform. Update to the modern JSX transform for faster performance: https://react.dev/link/new-jsx-transform")),H(Y)&&(k(Y.key),Ze=""+Y.key),Y)gt.call(Y,pt)&&pt!=="key"&&pt!=="__self"&&pt!=="__source"&&(je[pt]=Y[pt]);var At=arguments.length-2;if(At===1)je.children=Ie;else if(1<At){for(var vt=Array(At),$t=0;$t<At;$t++)vt[$t]=arguments[$t+2];Object.freeze&&Object.freeze(vt),je.children=vt}if(z&&z.defaultProps)for(pt in At=z.defaultProps,At)je[pt]===void 0&&(je[pt]=At[pt]);Ze&&re(je,typeof z=="function"?z.displayName||z.name||"Unknown":z);var pt=1e4>Ae.recentlyCreatedOwnerStacks++;return ue(z,Ze,void 0,void 0,A(),je,pt?Error("react-stack-top-frame"):qe,pt?Xt(R(z)):gn)},u.createRef=function(){var z={current:null};return Object.seal(z),z},u.forwardRef=function(z){z!=null&&z.$$typeof===$e?console.error("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof z!="function"?console.error("forwardRef requires a render function but was given %s.",z===null?"null":typeof z):z.length!==0&&z.length!==2&&console.error("forwardRef render functions accept exactly two parameters: props and ref. %s",z.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),z!=null&&z.defaultProps!=null&&console.error("forwardRef render functions do not support defaultProps. Did you accidentally pass a React component?");var Y={$$typeof:Te,render:z},Ie;return Object.defineProperty(Y,"displayName",{enumerable:!1,configurable:!0,get:function(){return Ie},set:function(je){Ie=je,z.name||z.displayName||(Object.defineProperty(z,"name",{value:je}),z.displayName=je)}}),Y},u.isValidElement=ce,u.lazy=function(z){return{$$typeof:it,_payload:{_status:-1,_result:z},_init:Ue}},u.memo=function(z,Y){z==null&&console.error("memo: The first argument must be a component. Instead received: %s",z===null?"null":typeof z),Y={$$typeof:$e,type:z,compare:Y===void 0?null:Y};var Ie;return Object.defineProperty(Y,"displayName",{enumerable:!1,configurable:!0,get:function(){return Ie},set:function(je){Ie=je,z.name||z.displayName||(Object.defineProperty(z,"name",{value:je}),z.displayName=je)}}),Y},u.startTransition=function(z){var Y=Ae.T,Ie={};Ae.T=Ie,Ie._updatedFibers=new Set;try{var je=z(),Ze=Ae.S;Ze!==null&&Ze(Ie,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(Fe,Kr)}catch(At){Kr(At)}finally{Y===null&&Ie._updatedFibers&&(z=Ie._updatedFibers.size,Ie._updatedFibers.clear(),10<z&&console.warn("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table.")),Ae.T=Y}},u.unstable_useCacheRefresh=function(){return ze().useCacheRefresh()},u.use=function(z){return ze().use(z)},u.useActionState=function(z,Y,Ie){return ze().useActionState(z,Y,Ie)},u.useCallback=function(z,Y){return ze().useCallback(z,Y)},u.useContext=function(z){var Y=ze();return z.$$typeof===ke&&console.error("Calling useContext(Context.Consumer) is not supported and will cause bugs. Did you mean to call useContext(Context) instead?"),Y.useContext(z)},u.useDebugValue=function(z,Y){return ze().useDebugValue(z,Y)},u.useDeferredValue=function(z,Y){return ze().useDeferredValue(z,Y)},u.useEffect=function(z,Y,Ie){z==null&&console.warn("React Hook useEffect requires an effect callback. Did you forget to pass a callback to the hook?");var je=ze();if(typeof Ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return je.useEffect(z,Y)},u.useId=function(){return ze().useId()},u.useImperativeHandle=function(z,Y,Ie){return ze().useImperativeHandle(z,Y,Ie)},u.useInsertionEffect=function(z,Y){return z==null&&console.warn("React Hook useInsertionEffect requires an effect callback. Did you forget to pass a callback to the hook?"),ze().useInsertionEffect(z,Y)},u.useLayoutEffect=function(z,Y){return z==null&&console.warn("React Hook useLayoutEffect requires an effect callback. Did you forget to pass a callback to the hook?"),ze().useLayoutEffect(z,Y)},u.useMemo=function(z,Y){return ze().useMemo(z,Y)},u.useOptimistic=function(z,Y){return ze().useOptimistic(z,Y)},u.useReducer=function(z,Y,Ie){return ze().useReducer(z,Y,Ie)},u.useRef=function(z){return ze().useRef(z)},u.useState=function(z){return ze().useState(z)},u.useSyncExternalStore=function(z,Y,Ie){return ze().useSyncExternalStore(z,Y,Ie)},u.useTransition=function(){return ze().useTransition()},u.version="19.1.0",typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()}(Kh,Kh.exports)),Kh.exports}var KS;function df(){if(KS)return sv.exports;KS=1;var h={};return h.NODE_ENV==="production"?sv.exports=P1():sv.exports=$1(),sv.exports}var Z=df();const xu=XS(Z),tr=Fl({__proto__:null,default:xu},[Z]),_1=h=>h;function j1(h,u=_1){const n=xu.useSyncExternalStore(h.subscribe,()=>u(h.getState()),()=>u(h.getInitialState()));return xu.useDebugValue(n),n}const L1=h=>{const u=U1(h),n=r=>j1(u,r);return Object.assign(n,u),n},ff=h=>L1,JS={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Jh=new Map,lv=h=>{const u=Jh.get(h);return u?Object.fromEntries(Object.entries(u.stores).map(([n,r])=>[n,r.getState()])):{}},B1=(h,u,n)=>{if(h===void 0)return{type:"untracked",connection:u.connect(n)};const r=Jh.get(n.name);if(r)return{type:"tracked",store:h,...r};const s={connection:u.connect(n),stores:{}};return Jh.set(n.name,s),{type:"tracked",store:h,...s}},H1=(h,u)=>{if(u===void 0)return;const n=Jh.get(h);n&&(delete n.stores[u],Object.keys(n.stores).length===0&&Jh.delete(h))},F1=h=>{var u,n;if(!h)return;const r=h.split(`
`),s=r.findIndex(p=>p.includes("api.setState"));if(s<0)return;const d=((u=r[s+1])==null?void 0:u.trim())||"";return(n=/.+ (.+) .+/.exec(d))==null?void 0:n[1]},gf=(h,u={})=>(n,r,s)=>{const{enabled:d,anonymousActionType:p,store:v,...w}=u;let S;try{S=(d??(JS?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!S)return h(n,r,s);const{connection:k,...I}=B1(v,S,w);let R=!0;s.setState=(H,re,G)=>{const ue=n(H,re);if(!R)return ue;const ye=F1(new Error().stack),ce=G===void 0?{type:p||ye||"anonymous"}:typeof G=="string"?{type:G}:G;return v===void 0?(k==null||k.send(ce,r()),ue):(k==null||k.send({...ce,type:`${v}/${ce.type}`},{...lv(w.name),[v]:s.getState()}),ue)},s.devtools={cleanup:()=>{k&&typeof k.unsubscribe=="function"&&k.unsubscribe(),H1(w.name,v)}};const A=(...H)=>{const re=R;R=!1,n(...H),R=re},_=h(s.setState,r,s);if(I.type==="untracked"?k==null||k.init(_):(I.stores[I.store]=s,k==null||k.init(Object.fromEntries(Object.entries(I.stores).map(([H,re])=>[H,H===I.store?_:re.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let H=!1;const re=s.dispatch;s.dispatch=(...G)=>{(JS?"production":void 0)!=="production"&&G[0].type==="__setState"&&!H&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),H=!0),re(...G)}}return k.subscribe(H=>{var re;switch(H.type){case"ACTION":if(typeof H.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return N0(H.payload,G=>{if(G.type==="__setState"){if(v===void 0){A(G.state);return}Object.keys(G.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const ue=G.state[v];if(ue==null)return;JSON.stringify(s.getState())!==JSON.stringify(ue)&&A(ue);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(G)});case"DISPATCH":switch(H.payload.type){case"RESET":return A(_),v===void 0?k==null?void 0:k.init(s.getState()):k==null?void 0:k.init(lv(w.name));case"COMMIT":if(v===void 0){k==null||k.init(s.getState());return}return k==null?void 0:k.init(lv(w.name));case"ROLLBACK":return N0(H.state,G=>{if(v===void 0){A(G),k==null||k.init(s.getState());return}A(G[v]),k==null||k.init(lv(w.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return N0(H.state,G=>{if(v===void 0){A(G);return}JSON.stringify(s.getState())!==JSON.stringify(G[v])&&A(G[v])});case"IMPORT_STATE":{const{nextLiftedState:G}=H.payload,ue=(re=G.computedStates.slice(-1)[0])==null?void 0:re.state;if(!ue)return;A(v===void 0?ue:ue[v]),k==null||k.send(null,G);return}case"PAUSE_RECORDING":return R=!R}return}}),_},N0=(h,u)=>{let n;try{n=JSON.parse(h)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&u(n)};function cv(h,u){let n;try{n=h()}catch{return}return{getItem:s=>{var d;const p=w=>w===null?null:JSON.parse(w,void 0),v=(d=n.getItem(s))!=null?d:null;return v instanceof Promise?v.then(p):p(v)},setItem:(s,d)=>n.setItem(s,JSON.stringify(d,void 0)),removeItem:s=>n.removeItem(s)}}const I0=h=>u=>{try{const n=h(u);return n instanceof Promise?n:{then(r){return I0(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return I0(r)(n)}}}},U0=(h,u)=>(n,r,s)=>{let d={storage:cv(()=>localStorage),partialize:H=>H,version:0,merge:(H,re)=>({...re,...H}),...u},p=!1;const v=new Set,w=new Set;let S=d.storage;if(!S)return h((...H)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),n(...H)},r,s);const k=()=>{const H=d.partialize({...r()});return S.setItem(d.name,{state:H,version:d.version})},I=s.setState;s.setState=(H,re)=>{I(H,re),k()};const R=h((...H)=>{n(...H),k()},r,s);s.getInitialState=()=>R;let A;const _=()=>{var H,re;if(!S)return;p=!1,v.forEach(ue=>{var ye;return ue((ye=r())!=null?ye:R)});const G=((re=d.onRehydrateStorage)==null?void 0:re.call(d,(H=r())!=null?H:R))||void 0;return I0(S.getItem.bind(S))(d.name).then(ue=>{if(ue)if(typeof ue.version=="number"&&ue.version!==d.version){if(d.migrate){const ye=d.migrate(ue.state,ue.version);return ye instanceof Promise?ye.then(ce=>[!0,ce]):[!0,ye]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,ue.state];return[!1,void 0]}).then(ue=>{var ye;const[ce,be]=ue;if(A=d.merge(be,(ye=r())!=null?ye:R),n(A,!0),ce)return k()}).then(()=>{G==null||G(A,void 0),A=r(),p=!0,w.forEach(ue=>ue(A))}).catch(ue=>{G==null||G(void 0,ue)})};return s.persist={setOptions:H=>{d={...d,...H},H.storage&&(S=H.storage)},clearStorage:()=>{S==null||S.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>_(),hasHydrated:()=>p,onHydrate:H=>(v.add(H),()=>{v.delete(H)}),onFinishHydration:H=>(w.add(H),()=>{w.delete(H)})},d.skipHydration||_(),A||R};var q1={};class G1{constructor(){U(this,"unsubscribeFunctions",[])}_logEvent(u){return n=>{q1.NODE_ENV==="development"&&console.debug(`[GlobalEventHandlers] Event "${String(u)}":`,n)}}init(){this.destroy(),console.debug("[GlobalEventHandlers] Initializing global event handlers..."),this.unsubscribeFunctions.push(ge.on("app:initialized",this._logEvent("app:initialized"))),this.unsubscribeFunctions.push(ge.on("app:shutdown",this._logEvent("app:shutdown"))),this.unsubscribeFunctions.push(ge.on("app:site-changed",this._logEvent("app:site-changed"))),this.unsubscribeFunctions.push(ge.on("app:settings-updated",this._logEvent("app:settings-updated"))),this.unsubscribeFunctions.push(ge.on("connection:status-changed",this._logEvent("connection:status-changed"))),this.unsubscribeFunctions.push(ge.on("connection:error",this._logEvent("connection:error"))),this.unsubscribeFunctions.push(ge.on("adapter:activated",this._logEvent("adapter:activated"))),this.unsubscribeFunctions.push(ge.on("adapter:deactivated",this._logEvent("adapter:deactivated"))),this.unsubscribeFunctions.push(ge.on("adapter:error",this._logEvent("adapter:error"))),this.unsubscribeFunctions.push(ge.on("plugin:registered",this._logEvent("plugin:registered"))),this.unsubscribeFunctions.push(ge.on("plugin:unregistered",this._logEvent("plugin:unregistered"))),this.unsubscribeFunctions.push(ge.on("plugin:activation-failed",this._logEvent("plugin:activation-failed"))),this.unsubscribeFunctions.push(ge.on("error:unhandled",u=>{var n;try{console.error('[GlobalEventHandlers] Event "error:unhandled":',u.error,"Context:",u.context,"Stack:",(n=u.error)==null?void 0:n.stack)}catch(r){console.error("[GlobalEventHandlers] Error in error:unhandled handler:",r)}})),this.unsubscribeFunctions.push(ge.on("error:circuit-breaker-opened",this._logEvent("error:circuit-breaker-opened"))),this.unsubscribeFunctions.push(ge.on("error:circuit-breaker-closed",this._logEvent("error:circuit-breaker-closed"))),this.unsubscribeFunctions.push(ge.on("performance:measurement",this._logEvent("performance:measurement"))),console.debug("[GlobalEventHandlers] Global event handlers initialized.")}destroy(){console.debug("[GlobalEventHandlers] Destroying global event handlers..."),this.unsubscribeFunctions.forEach(u=>u()),this.unsubscribeFunctions=[],console.debug("[GlobalEventHandlers] Global event handlers destroyed.")}}const WS=new G1,V1=()=>{WS.init()},Y1=()=>{WS.destroy()},X1={status:"disconnected",serverConfig:{uri:"http://localhost:3006/sse",connectionType:"sse",timeout:5e3,retryAttempts:3,retryDelay:2e3},lastConnectedAt:null,connectionAttempts:0,error:null,isReconnecting:!1},Oa=ff()(gf((h,u)=>({...X1,setStatus:n=>{const r=u().status;h({status:n}),console.debug(`[ConnectionStore] Status changed from ${r} to: ${n}`),ge.emit("connection:status-changed",{status:n,error:u().error||void 0})},setServerConfig:n=>{h(r=>({serverConfig:{...r.serverConfig,...n}})),console.debug("[ConnectionStore] Server config updated:",u().serverConfig)},setLastError:n=>{h({error:n}),n&&(console.error("[ConnectionStore] Error set:",n),ge.emit("connection:error",{error:n}))},incrementAttempts:()=>{const n=u().connectionAttempts+1;h({connectionAttempts:n}),console.debug(`[ConnectionStore] Connection attempts: ${n}`),ge.emit("connection:attempt",{attempt:n,maxAttempts:u().serverConfig.retryAttempts})},resetAttempts:()=>{h({connectionAttempts:0}),console.debug("[ConnectionStore] Connection attempts reset.")},setConnected:n=>{h({status:"connected",lastConnectedAt:n,connectionAttempts:0,error:null,isReconnecting:!1}),console.debug(`[ConnectionStore] Connected at: ${new Date(n).toISOString()}`),ge.emit("connection:status-changed",{status:"connected"})},setDisconnected:n=>{h(r=>({status:n?"error":"disconnected",error:n||r.error,isReconnecting:!1})),console.debug(`[ConnectionStore] Disconnected. ${n?"Error: "+n:""}`),ge.emit("connection:status-changed",{status:u().status,error:n||u().error||void 0})},startReconnecting:()=>{u().status!=="connected"&&(h({isReconnecting:!0,status:"reconnecting"}),console.debug("[ConnectionStore] Reconnecting started..."),ge.emit("connection:status-changed",{status:"reconnecting"}))},stopReconnecting:()=>{if(u().isReconnecting){const n=u().error?"error":"disconnected";h({isReconnecting:!1,status:n}),console.debug("[ConnectionStore] Reconnecting stopped.")}}}),{name:"ConnectionStore",store:"connection"})),P0="mcp_tool_enablement",Z1=async()=>{try{if(!chrome.storage||!chrome.storage.local)return M("[Storage] Chrome storage API not available"),new Set;const h=await chrome.storage.local.get(P0),u=h&&typeof h=="object"?h[P0]:void 0;return!u||!Array.isArray(u)?(M("[Storage] No stored tool enablement state found, returning empty set"),new Set):(M(`[Storage] Retrieved tool enablement state: ${u.length} enabled tools`),new Set(u))}catch(h){return M(`[Storage] Error retrieving tool enablement state: ${h instanceof Error?h.message:String(h)}`),new Set}},Wh=async h=>{try{if(!chrome.storage||!chrome.storage.local){M("[Storage] Chrome storage API not available");return}const u=Array.from(h);await chrome.storage.local.set({[P0]:u}),M(`[Storage] Saved tool enablement state: ${u.length} enabled tools`)}catch(u){M(`[Storage] Error saving tool enablement state: ${u instanceof Error?u.message:String(u)}`)}},Q1={availableTools:[],detectedTools:[],toolExecutions:{},isExecuting:!1,lastExecutionId:null,enabledTools:new Set,isLoadingEnablement:!1},Yi=ff()(gf((h,u)=>({...Q1,setAvailableTools:n=>{h({availableTools:n}),console.debug("[ToolStore] Available tools updated:",n),ge.emit("tool:list-updated",{tools:n}),u().loadToolEnablementState()},addDetectedTool:n=>{h(r=>({detectedTools:[...r.detectedTools,n]})),console.debug("[ToolStore] Tool detected:",n),ge.emit("tool:detected",{tools:[n],source:n.source||"unknown"})},clearDetectedTools:()=>{h({detectedTools:[]}),console.debug("[ToolStore] Detected tools cleared.")},startToolExecution:(n,r)=>{const s=`exec_${n}_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,d={id:s,toolName:n,parameters:r,status:"pending",timestamp:Date.now(),result:null};return h(p=>({toolExecutions:{...p.toolExecutions,[s]:d},isExecuting:!0,lastExecutionId:s})),console.debug(`[ToolStore] Starting execution for ${n} (ID: ${s})`,r),ge.emit("tool:execution-started",{toolName:n,callId:s}),s},updateToolExecution:n=>{const{id:r,...s}=n,d=u().toolExecutions[r];if(d){const p={...d,...s,timestamp:Date.now()};h(v=>({toolExecutions:{...v.toolExecutions,[r]:p},isExecuting:p.status==="pending"})),console.debug(`[ToolStore] Execution updated (ID: ${r}):`,p),(p.status==="success"||p.status==="error")&&ge.emit("tool:execution-completed",{execution:p})}else console.warn(`[ToolStore] Attempted to update non-existent execution (ID: ${r})`)},completeToolExecution:(n,r,s,d)=>{const p=u().toolExecutions[n];if(p){const v={...p,result:r,status:s,error:d,timestamp:Date.now()};h(w=>({toolExecutions:{...w.toolExecutions,[n]:v},isExecuting:Object.values(w.toolExecutions).some(S=>S.id!==n&&S.status==="pending")})),console.debug(`[ToolStore] Execution ${s} (ID: ${n}):`,v),ge.emit("tool:execution-completed",{execution:v}),s==="error"&&ge.emit("tool:execution-failed",{toolName:p.toolName,error:d||"Unknown execution error",callId:n})}else console.warn(`[ToolStore] Attempted to complete non-existent execution (ID: ${n})`)},getToolExecution:n=>u().toolExecutions[n],enableTool:n=>{h(r=>{const s=new Set([...r.enabledTools,n]);return Wh(s).catch(d=>console.error("[ToolStore] Failed to save tool enablement state:",d)),{enabledTools:s}}),console.debug(`[ToolStore] Tool enabled: ${n}`)},disableTool:n=>{h(r=>{const s=new Set(r.enabledTools);return s.delete(n),Wh(s).catch(d=>console.error("[ToolStore] Failed to save tool enablement state:",d)),{enabledTools:s}}),console.debug(`[ToolStore] Tool disabled: ${n}`)},enableAllTools:()=>{h(n=>{const r=new Set(n.availableTools.map(s=>s.name));return Wh(r).catch(s=>console.error("[ToolStore] Failed to save tool enablement state:",s)),{enabledTools:r}}),console.debug("[ToolStore] All tools enabled")},disableAllTools:()=>{const n=new Set;h({enabledTools:n}),Wh(n).catch(r=>console.error("[ToolStore] Failed to save tool enablement state:",r)),console.debug("[ToolStore] All tools disabled")},isToolEnabled:n=>u().enabledTools.has(n),loadToolEnablementState:async()=>{h({isLoadingEnablement:!0});try{const n=await Z1(),r=u();if(n.size===0&&r.availableTools.length>0){const s=new Set(r.availableTools.map(d=>d.name));h({enabledTools:s,isLoadingEnablement:!1}),await Wh(s),console.debug("[ToolStore] No stored state found, enabled all tools by default")}else h({enabledTools:n,isLoadingEnablement:!1}),console.debug(`[ToolStore] Tool enablement state loaded: ${n.size} tools enabled`)}catch(n){console.error("[ToolStore] Failed to load tool enablement state:",n),h({isLoadingEnablement:!1})}}}),{name:"ToolStore",store:"tool"})),Qr=class Qr{constructor(){U(this,"isInitialized",!1);U(this,"heartbeatInterval",null);U(this,"HEARTBEAT_INTERVAL",3e4);this.initialize()}initialize(){if(this.isInitialized){M("[McpClient] Already initialized");return}try{M("[McpClient] Starting initialization..."),fi.initialize(),M("[McpClient] Context bridge initialized"),this.setupMessageListeners(),M("[McpClient] Message listeners setup complete"),this.startHeartbeat(),M("[McpClient] Heartbeat started"),this.isInitialized=!0,this.requestInitialState().catch(u=>{M(`[McpClient] Initial state request failed (non-blocking): ${u instanceof Error?u.message:String(u)}`)}),M("[McpClient] Initialized successfully")}catch(u){const n=u instanceof Error?u.message:String(u);throw M(`[McpClient] Initialization failed: ${n}`),this.isInitialized=!1,ge.emit("error:unhandled",{error:u instanceof Error?u:new Error(n),context:"mcp-client-initialization"}),u}}async requestInitialState(){let n=0;for(;n<3;)try{M(`[McpClient] Requesting initial state from background (attempt ${n+1}/3)...`);try{const r=await this.getCurrentConnectionStatus();if(r){M(`[McpClient] Initial connection status: ${r.status} (isConnected: ${r.isConnected})`);const s=r.status;this.handleConnectionStatusChange(s,void 0)}}catch(r){M(`[McpClient] Failed to get initial connection status: ${r instanceof Error?r.message:String(r)}`)}try{const r=await this.getServerConfig();Oa.getState().setServerConfig(r),M(`[McpClient] Initial server config loaded: ${JSON.stringify(r)}`)}catch(r){M(`[McpClient] Failed to get server config: ${r instanceof Error?r.message:String(r)}`),Oa.getState().setServerConfig({uri:"http://localhost:3006/sse",connectionType:"sse",timeout:5e3,retryAttempts:3,retryDelay:2e3})}try{const r=await this.getAvailableTools(!0);M(`[McpClient] Initial tools loaded: ${r.length} tools`)}catch(r){M(`[McpClient] Failed to get initial tools: ${r instanceof Error?r.message:String(r)}`)}M("[McpClient] Initial state request completed successfully");return}catch(r){n++;const s=r instanceof Error?r.message:String(r);if(M(`[McpClient] Initial state request attempt ${n} failed: ${s}`),n>=3){M("[McpClient] All 3 initial state request attempts failed. Continuing with degraded functionality."),ge.emit("error:unhandled",{error:r instanceof Error?r:new Error(s),context:"mcp-client-initial-state"});return}const d=Math.min(1e3*Math.pow(2,n-1),5e3);M(`[McpClient] Retrying in ${d}ms...`),await new Promise(p=>setTimeout(p,d))}}setupMessageListeners(){fi.onMessage("connection:status-changed",u=>{try{const{status:n,error:r,isConnected:s}=u.payload??{};M(`[McpClient] Received connection status message: ${JSON.stringify(u)}`),n?(M(`[McpClient] Processing status: ${n}, error: ${r}, isConnected: ${s}`),this.handleConnectionStatusChange(n,r)):M(`[McpClient] Warning: No status in connection message payload. Received: ${JSON.stringify(u)}`)}catch(n){M(`[McpClient] Error processing connection status message: ${n instanceof Error?n.message:String(n)}`)}}),fi.onMessage("mcp:tool-update",u=>{try{const n=Array.isArray(u.payload)?u.payload:[];M(`[McpClient] Received tool update: ${n.length} tools`),this.handleToolUpdate(n)}catch(n){M(`[McpClient] Error processing tool update: ${n instanceof Error?n.message:String(n)}`)}}),fi.onMessage("mcp:server-config-updated",u=>{try{const{config:n}=u.payload??{};n?(M(`[McpClient] Received server config update: ${JSON.stringify(n)}`),this.handleServerConfigUpdate(n)):M("[McpClient] Warning: No config in server config update message")}catch(n){M(`[McpClient] Error processing server config update: ${n instanceof Error?n.message:String(n)}`)}}),fi.onMessage("mcp:heartbeat-response",u=>{try{const{timestamp:n,isConnected:r}=u.payload??{};if(n){if(typeof r=="boolean"){const s=Oa.getState().status,d=r?"connected":"disconnected";s!==d&&(M(`[McpClient] Heartbeat indicates status should be ${d}, updating from ${s}`),this.handleConnectionStatusChange(d))}this.handleHeartbeatResponse(n)}else M("[McpClient] Warning: No timestamp in heartbeat response")}catch(n){M(`[McpClient] Error processing heartbeat response: ${n instanceof Error?n.message:String(n)}`)}}),M("[McpClient] Message listeners configured successfully")}handleConnectionStatusChange(u,n){const r=Oa.getState();switch(M(`[McpClient] Connection status changed to: ${u}${n?` (${n})`:""}`),u){case"connected":r.setConnected(Date.now()),ge.emit("connection:status-changed",{status:u,error:void 0}),M("[McpClient] Emitted connected status to event bus"),this.getAvailableTools(!0).then(s=>{M(`[McpClient] Auto-fetched ${s.length} tools after connection`)}).catch(s=>{M(`[McpClient] Failed to auto-fetch tools after connection: ${s instanceof Error?s.message:String(s)}`)});break;case"reconnecting":r.startReconnecting(),ge.emit("connection:status-changed",{status:u,error:void 0}),M("[McpClient] Emitted reconnecting status to event bus");break;case"error":r.setDisconnected(n??"Unknown connection error"),ge.emit("connection:status-changed",{status:u,error:n??"Unknown connection error"}),M("[McpClient] Emitted error status to event bus");break;case"disconnected":default:r.setDisconnected(n),ge.emit("connection:status-changed",{status:"disconnected",error:n}),M("[McpClient] Emitted disconnected status to event bus")}}handleToolUpdate(u){M(`[McpClient] Received tool update with ${u.length} tools`);const n=u.map(r=>({name:r.name,description:r.description||"",input_schema:r.input_schema||r.schema||{},schema:typeof r.schema=="string"?r.schema:JSON.stringify(r.input_schema||{})}));Yi.getState().setAvailableTools(n),ge.emit("tool:list-updated",{tools:n})}handleServerConfigUpdate(u){M("[McpClient] Server config updated from background"),Oa.getState().setServerConfig(u)}handleHeartbeatResponse(u){ge.emit("connection:heartbeat",{timestamp:u})}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=window.setInterval(()=>{this.sendHeartbeat().catch(u=>{M(`[McpClient] Heartbeat failed: ${u instanceof Error?u.message:String(u)}`)})},this.HEARTBEAT_INTERVAL),M("[McpClient] Heartbeat started")}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null,M("[McpClient] Heartbeat stopped"))}async sendHeartbeat(){try{await fi.sendMessage("background","mcp:heartbeat",{timestamp:Date.now()},{timeout:5e3})}catch(u){const n=u instanceof Error?u.message:String(u);M(`[McpClient] Heartbeat failed: ${n}`)}}async callTool(u,n){if(!this.isInitialized)throw new Error("McpClient not initialized");if(!u||typeof u!="string")throw new Error("Tool name is required and must be a string");const r=Oa.getState();if(r.status!=="connected")throw new Error(`Not connected to MCP server. Current status: ${r.status}. Please check your connection.`);M(`[McpClient] Calling tool: ${u} with args: ${JSON.stringify(n)}`);const s=Yi.getState().startToolExecution(u,n);try{const d=await fi.sendMessage("background","mcp:call-tool",{toolName:u,args:n},{timeout:3e4});return M(`[McpClient] Tool call successful: ${u}`),Yi.getState().completeToolExecution(s,d,"success"),ge.emit("tool:execution-completed",{execution:{id:s,toolName:u,parameters:n,result:d,timestamp:Date.now(),status:"success"}}),d}catch(d){const p=d instanceof Error?d.message:String(d);throw M(`[McpClient] Tool call failed: ${u} - ${p}`),Yi.getState().completeToolExecution(s,null,"error",p),ge.emit("tool:execution-failed",{toolName:u,error:p,callId:s}),this.isConnectionError(p)&&(M("[McpClient] Tool call failed due to connection issue, updating connection status"),r.setDisconnected(`Tool call failed: ${p}`)),d}}isConnectionError(u){return[/connection refused/i,/econnrefused/i,/timeout/i,/etimedout/i,/network error/i,/server unavailable/i,/could not connect/i,/connection failed/i,/transport error/i,/fetch failed/i,/chrome runtime error/i].some(r=>r.test(u))}async getAvailableTools(u=!1){if(!this.isInitialized)throw new Error("McpClient not initialized");M(`[McpClient] Getting available tools (forceRefresh: ${u})`);try{const n=await fi.sendMessage("background","mcp:get-tools",{forceRefresh:u},{timeout:1e4}),s=(Array.isArray(n)?n:[]).map(d=>({name:d.name,description:d.description||"",input_schema:d.input_schema||d.schema||{},schema:typeof d.schema=="string"?d.schema:JSON.stringify(d.input_schema||{})}));return Yi.getState().setAvailableTools(s),M(`[McpClient] Retrieved ${s.length} tools`),s}catch(n){const r=n instanceof Error?n.message:String(n);throw M(`[McpClient] Failed to get available tools: ${r}`),n}}async forceReconnect(){if(!this.isInitialized)throw new Error("McpClient not initialized");M("[McpClient] Force reconnect requested");const u=Oa.getState();try{u.startReconnecting(),ge.emit("connection:status-changed",{status:"reconnecting",error:void 0});const n=await fi.sendMessage("background","mcp:force-reconnect",{},{timeout:25e3}),r=(n==null?void 0:n.isConnected)??!1;if(r){u.setConnected(Date.now()),M("[McpClient] Force reconnect successful"),ge.emit("connection:status-changed",{status:"connected",error:void 0});try{await this.getAvailableTools(!0),M("[McpClient] Tools refreshed after successful reconnection")}catch(s){M(`[McpClient] Failed to refresh tools after reconnect: ${s instanceof Error?s.message:String(s)}`)}}else{const s=(n==null?void 0:n.error)||"Reconnect attempt failed";u.setDisconnected(s),M(`[McpClient] Force reconnect failed: ${s}`),ge.emit("connection:status-changed",{status:"disconnected",error:s})}return r}catch(n){const r=n instanceof Error?n.message:String(n);throw u.setDisconnected(`Reconnect failed: ${r}`),M(`[McpClient] Force reconnect error: ${r}`),ge.emit("connection:status-changed",{status:"error",error:`Reconnect failed: ${r}`}),n}}async forceConnectionStatusCheck(){if(!this.isInitialized)throw new Error("McpClient not initialized");M("[McpClient] Forcing immediate connection status check");try{const u=await this.getCurrentConnectionStatus();if(u){M(`[McpClient] Immediate connection status: ${u.status} (isConnected: ${u.isConnected})`);const n=u.status;this.handleConnectionStatusChange(n,void 0)}}catch(u){const n=u instanceof Error?u.message:String(u);M(`[McpClient] Failed to get immediate connection status: ${n}`)}}async getServerConfig(){if(!this.isInitialized)throw new Error("McpClient not initialized");M("[McpClient] Getting server config");try{const u=await fi.sendMessage("background","mcp:get-server-config",{},{timeout:5e3});return M("[McpClient] Server config retrieved successfully"),u}catch(u){const n=u instanceof Error?u.message:String(u);throw M(`[McpClient] Failed to get server config: ${n}`),u}}async getCurrentConnectionStatus(){if(!this.isInitialized)throw new Error("McpClient not initialized");M("[McpClient] Getting current connection status");try{const u=await fi.sendMessage("background","mcp:get-connection-status",{},{timeout:5e3});return M(`[McpClient] Current connection status retrieved: ${u.status}`),u}catch(u){const n=u instanceof Error?u.message:String(u);throw M(`[McpClient] Failed to get current connection status: ${n}`),u}}async updateServerConfig(u){if(!this.isInitialized)throw new Error("McpClient not initialized");M(`[McpClient] Updating server config: ${JSON.stringify(u)}`);try{const n=await fi.sendMessage("background","mcp:update-server-config",{config:u},{timeout:15e3}),r=!!(n!=null&&n.success);return r?(Oa.getState().setServerConfig(u),M("[McpClient] Server config updated successfully")):M("[McpClient] Server config update failed"),r}catch(n){const r=n instanceof Error?n.message:String(n);throw M(`[McpClient] Failed to update server config: ${r}`),n}}getConnectionStatus(){return Oa.getState().status}isReady(){return this.isInitialized}cleanup(){this.stopHeartbeat(),this.isInitialized=!1,M("[McpClient] Cleanup completed")}static getInstance(){return Qr.instance||(Qr.instance=new Qr),Qr.instance}static resetInstance(){Qr.instance&&(Qr.instance.cleanup(),Qr.instance=null)}};U(Qr,"instance",null);let $0=Qr;const nr=$0.getInstance(),K1=async()=>console.debug("Plugin registry initialized (placeholder)"),ew={isInitialized:!1,initializationError:null,currentSite:window.location.href,currentHost:window.location.hostname,globalSettings:{theme:"system",autoSubmit:!1,debugMode:!1,sidebarWidth:320,isPushMode:!1,language:navigator.language||"en-US",notifications:!0}},ar=ff()(gf(U0((h,u)=>({...ew,initialize:async()=>{if(u().isInitialized){console.debug("[AppStore] Already initialized.");return}console.debug("[AppStore] Initializing...");try{h({initializationError:null}),await K1(),h({isInitialized:!0,initializationError:null}),console.debug("[AppStore] Initialization complete."),ge.emit("app:initialized",{version:"0.1.0",timestamp:Date.now()})}catch(n){const r=n instanceof Error?n.message:"Unknown initialization error";console.error("[AppStore] Initialization failed:",r,n),h({isInitialized:!1,initializationError:r})}},setCurrentSite:n=>{h({currentSite:n.site,currentHost:n.host}),console.debug(`[AppStore] Site changed to: ${n.site}`),ge.emit("app:site-changed",{site:n.site,hostname:n.host})},updateSettings:n=>{h(r=>({globalSettings:{...r.globalSettings,...n}})),console.debug("[AppStore] Settings updated:",n),ge.emit("app:settings-updated",{settings:n})},resetState:()=>{console.debug("[AppStore] Resetting state."),h(ew)}}),{name:"mcp-super-assistant-app-store",storage:cv(()=>localStorage),partialize:h=>({globalSettings:h.globalSettings})}),{name:"AppStore",store:"app"}));typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener((h,u,n)=>{if(h.type==="NAVIGATION_COMPLETED"&&h.url){const r=new URL(h.url),s=ar.getState().currentHost;r.hostname!==s&&ar.getState().setCurrentSite({site:h.url,host:r.hostname})}return!1});const J1={isVisible:!1,isMinimized:!1,position:"left",width:320},tw={autoSubmit:!1,autoInsert:!1,autoExecute:!1,notifications:!0,theme:"system",language:navigator.language||"en-US",isPushMode:!1,sidebarWidth:320,isMinimized:!1,customInstructions:"",customInstructionsEnabled:!1},W1={sidebar:J1,preferences:tw,notifications:[],activeModal:null,isLoading:!1,theme:tw.theme,mcpEnabled:!1},za=ff()(gf(U0((h,u)=>({...W1,toggleSidebar:n=>{const r=!u().sidebar.isVisible;h(s=>({sidebar:{...s.sidebar,isVisible:r}})),console.debug(`[UIStore] Sidebar toggled to ${r?"visible":"hidden"}. Reason: ${n||"user action"}`),ge.emit("ui:sidebar-toggle",{visible:r,reason:n||"user action"})},toggleMinimize:n=>{const r=!u().sidebar.isMinimized;h(s=>({sidebar:{...s.sidebar,isMinimized:r},preferences:{...s.preferences,isMinimized:r}})),console.debug(`[UIStore] Sidebar ${r?"minimized":"expanded"}. Reason: ${n||"user action"}`),ge.emit("ui:sidebar-minimize",{minimized:r,reason:n||"user action"})},resizeSidebar:n=>{h(r=>({sidebar:{...r.sidebar,width:n}})),console.debug(`[UIStore] Sidebar resized to: ${n}px`),ge.emit("ui:sidebar-resize",{width:n})},setSidebarVisibility:(n,r)=>{h(s=>({sidebar:{...s.sidebar,isVisible:n}})),console.debug(`[UIStore] Sidebar visibility set to ${n}. Reason: ${r||"programmatic"}`),ge.emit("ui:sidebar-toggle",{visible:n,reason:r||"programmatic"})},updatePreferences:n=>{const r=u().preferences,s={...r,...n};h({preferences:s}),console.debug("[UIStore] Preferences updated:",s),ge.emit("ui:preferences-updated",{preferences:s}),n.theme&&n.theme!==r.theme&&u().setTheme(n.theme)},addNotification:n=>{const r={...n,id:`notif_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,timestamp:Date.now()};return h(s=>({notifications:[...s.notifications,r]})),console.debug("[UIStore] Notification added:",r),ge.emit("ui:notification-added",{notification:r}),r.id},addRemoteNotification:n=>{const{useConfigStore:r}=require("./config.store"),s=r.getState();if(!s.notificationConfig.enabled)return console.debug("[UIStore] Remote notifications disabled, ignoring:",n.id),"";const d=new Date().toDateString();if(u().notifications.filter(w=>new Date(w.timestamp).toDateString()===d&&w.source==="remote").length>=s.notificationConfig.maxPerDay)return console.debug("[UIStore] Daily notification limit reached, ignoring:",n.id),ge.emit("notification:frequency-limited",{notificationId:n.id,reason:"Daily limit exceeded"}),"";const v={id:n.id||`remote_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,type:n.type,title:n.title,message:n.message,duration:n.duration,timestamp:Date.now(),source:"remote",campaignId:n.campaignId,actions:n.actions,priority:n.priority||1};return h(w=>({notifications:[...w.notifications,v].sort((S,k)=>(k.priority||1)-(S.priority||1))})),s.markNotificationShown(v.id),s.addNotificationToHistory(v.id),ge.emit("ui:notification-added",{notification:v}),ge.emit("notification:shown",{notificationId:v.id,source:"remote",timestamp:Date.now()}),ge.emit("analytics:track",{event:"notification_shown",parameters:{notification_id:v.id,campaign_id:n.campaignId,type:n.type,source:"remote"}}),console.debug("[UIStore] Remote notification added:",v),v.id},removeNotification:n=>{h(r=>({notifications:r.notifications.filter(s=>s.id!==n)})),console.debug(`[UIStore] Notification removed: ${n}`),ge.emit("ui:notification-removed",{id:n})},dismissNotification:(n,r)=>{const s=u().notifications.find(d=>d.id===n);s&&s.source==="remote"&&(ge.emit("notification:dismissed",{notificationId:n,reason:r||"user_dismissed",timestamp:Date.now()}),ge.emit("analytics:track",{event:"notification_dismissed",parameters:{notification_id:n,campaign_id:s.campaignId,reason:r||"user_dismissed",source:"remote"}})),u().removeNotification(n)},clearNotifications:()=>{u().notifications.forEach(n=>ge.emit("ui:notification-removed",{id:n.id})),h({notifications:[]}),console.debug("[UIStore] All notifications cleared.")},openModal:n=>{h({activeModal:n}),console.debug(`[UIStore] Modal opened: ${n}`)},closeModal:()=>{console.debug(`[UIStore] Modal closed: ${u().activeModal}`),h({activeModal:null})},setGlobalLoading:n=>{h({isLoading:n}),console.debug(`[UIStore] Global loading state: ${n}`)},setTheme:n=>{h({theme:n}),console.debug(`[UIStore] Theme changed to: ${n}`),ge.emit("ui:theme-changed",{theme:n}),u().preferences.theme!==n&&(h(r=>({preferences:{...r.preferences,theme:n}})),ge.emit("ui:preferences-updated",{preferences:u().preferences}))},setMCPEnabled:(n,r)=>{const s=u().mcpEnabled;h({mcpEnabled:n}),console.debug(`[UIStore] MCP toggle set to ${n}. Reason: ${r||"user action"}`),n!==s&&u().setSidebarVisibility(n,r||"mcp-toggle"),ge.emit("ui:mcp-toggle",{enabled:n,reason:r||"user action",previousState:s})}}),{name:"mcp-super-assistant-ui-store",storage:cv(()=>localStorage),partialize:h=>({sidebar:{width:h.sidebar.width,position:h.sidebar.position,isVisible:h.sidebar.isVisible,isMinimized:h.sidebar.isMinimized},preferences:h.preferences,theme:h.theme,mcpEnabled:h.mcpEnabled})}),{name:"UIStore",store:"ui"}));ar.subscribe((h,u)=>{const n=h.globalSettings.theme,r=u.globalSettings.theme;n&&n!==r&&n!==za.getState().theme&&(console.debug("[UIStore] Theme changed in AppStore, syncing to UIStore:",n),za.getState().setTheme(n)),h.globalSettings.sidebarWidth!==u.globalSettings.sidebarWidth&&za.getState().sidebar.width!==h.globalSettings.sidebarWidth&&(console.debug("[UIStore] Syncing sidebar width from AppStore globalSettings:",h.globalSettings.sidebarWidth),za.getState().resizeSidebar(h.globalSettings.sidebarWidth))});const eT=Object.freeze(Object.defineProperty({__proto__:null,useUIStore:za},Symbol.toStringTag,{value:"Module"})),tT={extensionVersion:((DE=(zE=(Fv=chrome==null?void 0:chrome.runtime)==null?void 0:Fv.getManifest)==null?void 0:zE.call(Fv))==null?void 0:DE.version)||"0.0.0",installDate:new Date().toISOString(),usageDays:0,featuresUsed:[],userSegment:"new",sessionCount:0,lastActiveDate:new Date().toISOString(),browserVersion:navigator.userAgent,platform:navigator.platform,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},nw={featureFlags:{},lastFetchTime:null,lastUpdateTime:null,isLoading:!1,error:null,userProperties:tT,userSegment:"new",notificationConfig:{enabled:!0,maxPerDay:3,cooldownHours:4,respectDoNotDisturb:!0,channels:["in-app"]},shownNotifications:[],notificationHistory:[]};function nT(h){const u=JSON.stringify({version:h.extensionVersion,install:h.installDate.split("T")[0],segment:h.userSegment,platform:h.platform,language:h.language});let n=0;for(let r=0;r<u.length;r++){const s=u.charCodeAt(r);n=(n<<5)-n+s,n=n&n}return Math.abs(n)}const hf=ff()(gf(U0((h,u)=>({...nw,updateFeatureFlags:n=>{h(r=>({featureFlags:{...r.featureFlags,...n},lastUpdateTime:Date.now()}))},setUserProperties:n=>{h(r=>{const s={...r.userProperties,...n};let d="new";return s.usageDays>30?d="power":s.usageDays>7?d="regular":s.sessionCount>5&&(d="engaged"),{userProperties:s,userSegment:d}})},setUserSegment:n=>{h({userSegment:n})},updateNotificationConfig:n=>{h(r=>({notificationConfig:{...r.notificationConfig,...n}}))},markNotificationShown:n=>{h(r=>({shownNotifications:[...r.shownNotifications,n]}))},addNotificationToHistory:(n,r)=>{h(s=>({notificationHistory:[...s.notificationHistory,{id:n,shownAt:Date.now(),action:r}].slice(-100)}))},isFeatureEnabled:n=>{const r=u(),s=r.featureFlags[n];if(!s||!s.enabled)return!1;if(s.rollout<100){const d=nT(r.userProperties),p=s.rollout/100*100;if(d%100>=p)return!1}if(s.targeting){const{userProperties:d,userSegment:p}=r;if(s.targeting.versions&&s.targeting.versions.length>0){const v=d.extensionVersion;if(!s.targeting.versions.some(S=>v.startsWith(S)))return!1}if(s.targeting.userSegments&&s.targeting.userSegments.length>0&&!s.targeting.userSegments.includes(p))return!1}return!0},getFeatureConfig:n=>u().featureFlags[n],setLoading:n=>{h({isLoading:n})},setError:n=>{h({error:n})},updateLastFetchTime:n=>{h({lastFetchTime:n})},canShowNotification:n=>{const r=u(),{notificationConfig:s,shownNotifications:d,notificationHistory:p}=r;if(!s.enabled||d.includes(n.id)||n.expiresAt&&new Date(n.expiresAt)<new Date)return!1;const v=new Date().toDateString();if(p.filter(I=>new Date(I.shownAt).toDateString()===v).length>=s.maxPerDay)return!1;const S=Math.max(...p.map(I=>I.shownAt),0),k=s.cooldownHours*60*60*1e3;if(Date.now()-S<k)return!1;if(n.targeting){const{userProperties:I,userSegment:R}=r;if(n.targeting.versions&&n.targeting.versions.length>0&&!n.targeting.versions.some(_=>I.extensionVersion.startsWith(_))||n.targeting.userSegments&&n.targeting.userSegments.length>0&&!n.targeting.userSegments.includes(R))return!1;if(n.targeting.installDateRange){const A=new Date(I.installDate),{start:_,end:H}=n.targeting.installDateRange;if(_&&A<new Date(_)||H&&A>new Date(H))return!1}}return!0},resetState:()=>{h(nw)}}),{name:"config-store",storage:cv(()=>localStorage),partialize:h=>({featureFlags:h.featureFlags,userProperties:h.userProperties,userSegment:h.userSegment,notificationConfig:h.notificationConfig,shownNotifications:h.shownNotifications,notificationHistory:h.notificationHistory,lastFetchTime:h.lastFetchTime})}),{name:"ConfigStore"})),aT={registeredPlugins:{},activeAdapterName:null,currentCapabilities:[],lastAdapterError:null},Xi=ff()(gf((h,u)=>({...aT,registerPlugin:async(n,r)=>{if(u().registeredPlugins[n.name])return console.warn(`[AdapterStore] Plugin "${n.name}" already registered.`),!1;const s={plugin:n,config:r,registeredAt:Date.now(),status:"registered"};return h(d=>({registeredPlugins:{...d.registeredPlugins,[n.name]:s}})),console.debug(`[AdapterStore] Plugin "${n.name}" registered.`),ge.emit("plugin:registered",{name:n.name,version:n.version}),!0},unregisterPlugin:async n=>{const r=u().registeredPlugins[n];if(!r){console.warn(`[AdapterStore] Plugin "${n}" not found for unregistration.`);return}if(u().activeAdapterName===n&&r.instance)try{await r.instance.deactivate(),await r.instance.cleanup()}catch(p){console.error(`[AdapterStore] Error deactivating/cleaning up plugin "${n}" during unregistration:`,p)}const{[n]:s,...d}=u().registeredPlugins;h({registeredPlugins:d,activeAdapterName:u().activeAdapterName===n?null:u().activeAdapterName,currentCapabilities:u().activeAdapterName===n?[]:u().currentCapabilities}),console.debug(`[AdapterStore] Plugin "${n}" unregistered.`),ge.emit("plugin:unregistered",{name:n})},activateAdapter:async n=>{var d;const r=u().registeredPlugins[n];if(!r)return console.error(`[AdapterStore] Cannot activate: Plugin "${n}" not registered.`),u().setPluginError(n,`Plugin "${n}" not registered.`),!1;if(!r.config.enabled)return console.warn(`[AdapterStore] Cannot activate: Plugin "${n}" is disabled by config.`),u().setPluginError(n,`Plugin "${n}" is disabled.`),!1;const s=u().getActiveAdapter();if(s&&s.plugin.name!==n)try{console.debug(`[AdapterStore] Deactivating current adapter "${s.plugin.name}".`),await((d=s.instance)==null?void 0:d.deactivate()),ge.emit("adapter:deactivated",{pluginName:s.plugin.name,reason:"switching adapter",timestamp:Date.now()})}catch(p){console.error(`[AdapterStore] Error deactivating previous adapter "${s.plugin.name}":`,p)}try{if(!r.instance){const p={eventBus:ge,stores:{},utils:{},chrome,logger:console};await r.plugin.initialize(p),r.instance=r.plugin,r.status="initialized",ge.emit("plugin:initialization-complete",{name:n})}return console.debug(`[AdapterStore] Activating adapter "${n}".`),await r.instance.activate(),r.status="active",r.lastUsedAt=Date.now(),h({activeAdapterName:n,currentCapabilities:r.plugin.capabilities,lastAdapterError:null,registeredPlugins:{...u().registeredPlugins,[n]:r}}),console.debug(`[AdapterStore] Adapter "${n}" activated with capabilities:`,r.plugin.capabilities),ge.emit("adapter:activated",{pluginName:n,timestamp:Date.now()}),ge.emit("adapter:capability-changed",{name:n,capabilities:r.plugin.capabilities}),!0}catch(p){return p instanceof Error?p.message:String(p),console.error(`[AdapterStore] Error activating adapter "${n}":`,p),r.status="error",r.error=p,h({lastAdapterError:{name:n,error:p},registeredPlugins:{...u().registeredPlugins,[n]:r}}),ge.emit("plugin:activation-failed",{name:n,error:p}),ge.emit("adapter:error",{name:n,error:p}),!1}},deactivateAdapter:async(n,r)=>{var d;const s=u().registeredPlugins[n];if(!s||u().activeAdapterName!==n){console.warn(`[AdapterStore] Adapter "${n}" is not active or not registered.`);return}try{await((d=s.instance)==null?void 0:d.deactivate()),s.status="inactive",h({activeAdapterName:null,currentCapabilities:[],registeredPlugins:{...u().registeredPlugins,[n]:s}}),console.debug(`[AdapterStore] Adapter "${n}" deactivated. Reason: ${r||"user action"}`),ge.emit("adapter:deactivated",{pluginName:n,reason:r||"user action",timestamp:Date.now()})}catch(p){p instanceof Error?p.message:String(p),console.error(`[AdapterStore] Error deactivating adapter "${n}":`,p),s.status="error",s.error=p,h({lastAdapterError:{name:n,error:p},registeredPlugins:{...u().registeredPlugins,[n]:s}}),ge.emit("adapter:error",{name:n,error:p})}},getPlugin:n=>u().registeredPlugins[n],getActiveAdapter:()=>{const n=u().activeAdapterName;return n?u().registeredPlugins[n]:void 0},updatePluginConfig:(n,r)=>{const s=u().registeredPlugins[n];s?(s.config={...s.config,...r},h(d=>({registeredPlugins:{...d.registeredPlugins,[n]:s}})),console.debug(`[AdapterStore] Config updated for plugin "${n}":`,s.config),n===u().activeAdapterName&&s.config.enabled===!1&&u().deactivateAdapter(n,"disabled by config update")):console.warn(`[AdapterStore] Cannot update config: Plugin "${n}" not found.`)},setPluginError:(n,r)=>{const s=u().registeredPlugins[n];s?(s.status="error",s.error=r,h(d=>({registeredPlugins:{...d.registeredPlugins,[n]:s},lastAdapterError:{name:n,error:r}}))):h({lastAdapterError:{name:n,error:r}}),console.error(`[AdapterStore] Error set for plugin/adapter "${n}":`,r),ge.emit("adapter:error",{name:n,error:r})}}),{name:"AdapterStore",store:"adapter"})),iT=Object.freeze(Object.defineProperty({__proto__:null,useAdapterStore:Xi},Symbol.toStringTag,{value:"Module"}));async function oT(){var u,n,r;console.debug("[Stores] Initializing all stores..."),Oa.getState(),Yi.getState(),za.getState(),Xi.getState(),hf.getState().setUserProperties({extensionVersion:((r=(n=(u=chrome==null?void 0:chrome.runtime)==null?void 0:u.getManifest)==null?void 0:n.call(u))==null?void 0:r.version)||"0.0.0",lastActiveDate:new Date().toISOString(),browserVersion:navigator.userAgent,platform:navigator.platform,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}),ar.getState().isInitialized||await ar.getState().initialize(),console.debug("[Stores] All stores accessed/initialized.")}class rT{constructor(u={failureThreshold:5,resetTimeout:6e4,monitoringWindow:3e5}){U(this,"state","closed");U(this,"failureCount",0);U(this,"successCount",0);U(this,"lastFailureTime",0);U(this,"nextAttemptTime",0);U(this,"eventBus");this.config=u}initialize(u){u!=null&&u.eventBus?this.eventBus=u.eventBus:this.eventBus=ge,console.debug("[CircuitBreaker] Initialized with config:",this.config)}async execute(u,n="unknown"){var r,s;if(this.state==="open")if(Date.now()<this.nextAttemptTime){const d=new Error(`Circuit breaker is OPEN for operation: ${n}`);throw(r=this.eventBus)==null||r.emit("error:circuit-breaker-blocked",{operation:n,state:this.state,nextAttemptTime:this.nextAttemptTime,error:d}),d}else this.state="half-open",(s=this.eventBus)==null||s.emit("error:circuit-breaker-half-open",{operation:n,state:this.state});try{const d=await u();return this.onSuccess(n),d}catch(d){throw this.onFailure(d,n),d}}executeSync(u,n="unknown"){var r,s;if(this.state==="open")if(Date.now()<this.nextAttemptTime){const d=new Error(`Circuit breaker is OPEN for operation: ${n}`);throw(r=this.eventBus)==null||r.emit("error:circuit-breaker-blocked",{operation:n,state:this.state,nextAttemptTime:this.nextAttemptTime,error:d}),d}else this.state="half-open",(s=this.eventBus)==null||s.emit("error:circuit-breaker-half-open",{operation:n,state:this.state});try{const d=u();return this.onSuccess(n),d}catch(d){throw this.onFailure(d,n),d}}onSuccess(u){var n;this.successCount++,this.state==="half-open"&&(this.state="closed",this.failureCount=0,(n=this.eventBus)==null||n.emit("error:circuit-breaker-closed",{operation:u,state:this.state,stats:this.getStats()}))}onFailure(u,n){var s;this.failureCount++,this.lastFailureTime=Date.now();const r=Date.now()-this.config.monitoringWindow;this.lastFailureTime<r&&(this.failureCount=1),this.failureCount>=this.config.failureThreshold&&(this.state="open",this.nextAttemptTime=Date.now()+this.config.resetTimeout,(s=this.eventBus)==null||s.emit("error:circuit-breaker-opened",{operation:n,state:this.state,error:u,failureCount:this.failureCount,nextAttemptTime:this.nextAttemptTime,stats:this.getStats()}))}getStats(){return{state:this.state,failureCount:this.failureCount,successCount:this.successCount,lastFailureTime:this.lastFailureTime,nextAttemptTime:this.nextAttemptTime}}forceOpen(u){var n;this.state="open",this.nextAttemptTime=Date.now()+(u||this.config.resetTimeout),(n=this.eventBus)==null||n.emit("error:circuit-breaker-forced-open",{state:this.state,nextAttemptTime:this.nextAttemptTime})}forceClose(){var u;this.state="closed",this.failureCount=0,this.nextAttemptTime=0,(u=this.eventBus)==null||u.emit("error:circuit-breaker-forced-closed",{state:this.state})}isOperational(){return this.state==="closed"||this.state==="half-open"||this.state==="open"&&Date.now()>=this.nextAttemptTime}cleanup(){this.state="closed",this.failureCount=0,this.successCount=0,this.lastFailureTime=0,this.nextAttemptTime=0,console.debug("[CircuitBreaker] Cleaned up")}}const pf=new rT;class sT{constructor(){U(this,"initialized",!1);U(this,"errorReports",[]);U(this,"maxReports",100);U(this,"circuitBreaker");U(this,"errorCounts",new Map)}initialize(u,n){if(this.initialized){console.warn("[GlobalErrorHandler] Already initialized");return}this.circuitBreaker=n,this.setupGlobalHandlers(),this.setupEventBusIntegration(),this.initialized=!0,console.debug("[GlobalErrorHandler] Initialized successfully")}setupGlobalHandlers(){window.addEventListener("error",u=>{this.handleError(u.error||new Error(u.message),{component:"window",operation:"global-error",metadata:{filename:u.filename,lineno:u.lineno,colno:u.colno}})}),window.addEventListener("unhandledrejection",u=>{const n=u.reason instanceof Error?u.reason:new Error(String(u.reason));this.handleError(n,{component:"window",operation:"unhandled-promise-rejection"})}),typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage.addListener((u,n,r)=>!1)}setupEventBusIntegration(){ge.on("error:unhandled",({error:u,context:n})=>{try{const r=typeof n=="string"?{operation:n,fromEventBus:!0}:{...n,fromEventBus:!0};this.handleError(u,r)}catch(r){console.error("[GlobalErrorHandler] Error in error:unhandled handler:",r)}}),ge.on("plugin:activation-failed",({name:u,error:n})=>{const r=n instanceof Error?n:new Error(String(n));this.handleError(r,{component:"plugin-system",operation:"plugin-activation",metadata:{pluginName:u}})}),ge.on("connection:error",({error:u})=>{this.handleError(new Error(u),{component:"connection",operation:"mcp-connection"})})}handleError(u,n={},r="medium"){const s=this.generateErrorId(),d={error:u,context:n,timestamp:Date.now(),id:s,severity:r,handled:!0};this.addErrorReport(d),this.updateErrorCounts(u,n),this.logError(d),!n.fromEventBus&&n.operation!=="event-listener-error:unhandled"&&n.operation!=="once-event-listener-error:unhandled"&&n.operation!=="wildcard-event-listener"&&ge.emit("error:unhandled",{error:u,context:n}),this.circuitBreaker&&r==="critical"&&this.attemptRecovery(u,n),this.checkErrorPatterns(u,n)}captureException(u,n={},r="low"){this.handleError(u,n,r)}addBreadcrumb(u,n="default",r){ge.emit("error:breadcrumb",{message:u,category:n,data:r,timestamp:Date.now()})}getErrorStats(){const u={},n={};return this.errorReports.forEach(r=>{const s=r.context.component||"unknown";u[s]=(u[s]||0)+1,n[r.severity]=(n[r.severity]||0)+1}),{totalErrors:this.errorReports.length,errorsByComponent:u,errorsBySeverity:n,recentErrors:this.errorReports.slice(-10)}}clearErrorReports(){this.errorReports=[],this.errorCounts.clear(),console.debug("[GlobalErrorHandler] Error reports cleared")}addErrorReport(u){this.errorReports.push(u),this.errorReports.length>this.maxReports&&this.errorReports.shift()}updateErrorCounts(u,n){const r=`${u.name}:${n.component||"unknown"}:${n.operation||"unknown"}`,s=this.errorCounts.get(r)||{count:0};this.errorCounts.set(r,{count:s.count+1,lastSeen:Date.now()})}logError(u){(u.severity==="critical"||u.severity==="high"?console.error:u.severity==="medium"?console.warn:console.log)(`[GlobalErrorHandler] ${u.severity.toUpperCase()} Error [${u.id}]:`,u.error.message,`
Context:`,u.context,`
Stack:`,u.error.stack)}attemptRecovery(u,n){const r=this.determineRecoveryStrategy(u,n);switch(ge.emit("error:recovery-attempted",{error:u,strategy:r}),r){case"reload-page":console.warn("[GlobalErrorHandler] Attempting page reload recovery"),setTimeout(()=>window.location.reload(),1e3);break;case"reset-component":console.warn("[GlobalErrorHandler] Attempting component reset recovery"),ge.emit("component:reset",{component:n.component});break;case"fallback-mode":console.warn("[GlobalErrorHandler] Switching to fallback mode"),ge.emit("app:fallback-mode",{reason:u.message});break;default:console.warn("[GlobalErrorHandler] No recovery strategy available")}}determineRecoveryStrategy(u,n){return u.message.includes("Extension context invalidated")?"reload-page":n.component==="sidebar"||n.component==="ui"?"reset-component":n.component==="plugin-system"?"fallback-mode":"none"}checkErrorPatterns(u,n){const r=`${u.name}:${n.component||"unknown"}:${n.operation||"unknown"}`,s=this.errorCounts.get(r);s&&s.count>=5&&(console.warn(`[GlobalErrorHandler] Error pattern detected: ${r} occurred ${s.count} times`),ge.emit("error:pattern-detected",{pattern:r,count:s.count,error:u,context:n}))}generateErrorId(){return`err_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}cleanup(){this.errorReports=[],this.errorCounts.clear(),this.initialized=!1,console.debug("[GlobalErrorHandler] Cleaned up")}}const Ri=new sT;class lT{constructor(){U(this,"initialized",!1);U(this,"measurements",[]);U(this,"memorySnapshots",[]);U(this,"maxMeasurements",1e3);U(this,"slowThreshold",1e3);U(this,"memoryCheckInterval");U(this,"performanceObserver")}initialize(u){if(this.initialized){console.warn("[PerformanceMonitor] Already initialized");return}this.setupPerformanceObserver(),this.setupMemoryMonitoring(),this.setupEventBusIntegration(),this.initialized=!0,console.debug("[PerformanceMonitor] Initialized successfully")}setupPerformanceObserver(){if(typeof PerformanceObserver<"u")try{this.performanceObserver=new PerformanceObserver(u=>{u.getEntries().forEach(r=>{r.duration>0&&this.recordMeasurement({name:r.name||"browser-performance",duration:r.duration,timestamp:r.startTime+performance.timeOrigin,type:"async",context:{entryType:r.entryType,startTime:r.startTime}})})}),this.performanceObserver.observe({entryTypes:["measure","navigation","resource"]})}catch(u){console.warn("[PerformanceMonitor] Failed to set up PerformanceObserver:",u)}}setupMemoryMonitoring(){typeof performance<"u"&&"memory"in performance&&(this.memoryCheckInterval=setInterval(()=>{this.captureMemorySnapshot()},3e4))}setupEventBusIntegration(){ge.on("error:unhandled",({error:u,context:n})=>{this.mark("error-occurred",{error:u.message,context:n})}),ge.on("plugin:activation-failed",({name:u,error:n})=>{this.mark("plugin-activation-failed",{plugin:u,error:String(n)})})}time(u,n,r){const s=performance.now();try{const d=n();if(d instanceof Promise)return d.finally(()=>{const p=performance.now()-s;this.recordMeasurement({name:u,duration:p,timestamp:Date.now(),type:"async",context:r})});{const p=performance.now()-s;return this.recordMeasurement({name:u,duration:p,timestamp:Date.now(),type:"sync",context:r}),d}}catch(d){const p=performance.now()-s;throw this.recordMeasurement({name:`${u}_error`,duration:p,timestamp:Date.now(),type:"sync",context:{...r,error:String(d)}}),d}}mark(u,n){this.recordMeasurement({name:u,duration:0,timestamp:Date.now(),type:"sync",context:n})}measure(u,n,r){const s=this.measurements,d=s.find(w=>w.name===n);if(!d)return console.warn(`[PerformanceMonitor] Start mark '${n}' not found`),null;const p=r?s.find(w=>w.name===r):{timestamp:Date.now()};if(!p)return console.warn(`[PerformanceMonitor] End mark '${r}' not found`),null;const v={name:u,duration:p.timestamp-d.timestamp,timestamp:d.timestamp,type:"sync",context:{startMark:n,endMark:r}};return this.recordMeasurement(v),v}getMemoryUsage(){if(typeof performance<"u"&&"memory"in performance){const u=performance.memory;return{usedJSHeapSize:u.usedJSHeapSize,totalJSHeapSize:u.totalJSHeapSize,jsHeapSizeLimit:u.jsHeapSizeLimit,timestamp:Date.now()}}return null}captureMemorySnapshot(){const u=this.getMemoryUsage();u&&(this.memorySnapshots.push(u),this.memorySnapshots.length>100&&this.memorySnapshots.shift(),ge.emit("performance:memory-usage",u),this.checkMemoryLeaks())}checkMemoryLeaks(){if(this.memorySnapshots.length<5)return;const u=this.memorySnapshots.slice(-5),n=u.map(s=>s.usedJSHeapSize);let r=0;for(let s=1;s<n.length;s++)n[s]>n[s-1]&&r++;r>=4&&(console.warn("[PerformanceMonitor] Potential memory leak detected"),ge.emit("performance:memory-leak-detected",{snapshots:u,trend:n}))}recordMeasurement(u){this.measurements.push(u),this.measurements.length>this.maxMeasurements&&this.measurements.shift(),ge.emit("performance:measurement",u),u.duration>this.slowThreshold&&ge.emit("performance:slow-operation",u)}getStats(){const u=this.measurements.filter(s=>s.duration>this.slowThreshold),n={},r=this.measurements.reduce((s,d)=>(s[d.name]||(s[d.name]=[]),s[d.name].push(d.duration),s),{});return Object.entries(r).forEach(([s,d])=>{d.length>0&&(n[s]=d.reduce((p,v)=>p+v,0)/d.length)}),{measurements:[...this.measurements],memorySnapshots:[...this.memorySnapshots],slowOperations:u,averageDurations:n}}clear(){this.measurements=[],this.memorySnapshots=[],console.debug("[PerformanceMonitor] Performance data cleared")}getReport(){const u=this.getStats(),n=u.measurements.length,r=u.slowOperations.length,s=n>0?(r/n*100).toFixed(2):"0";let d=`Performance Report:
`;return d+=`Total measurements: ${n}
`,d+=`Slow operations: ${r} (${s}%)
`,d+=`Memory snapshots: ${u.memorySnapshots.length}

`,Object.keys(u.averageDurations).length>0&&(d+=`Average durations:
`,Object.entries(u.averageDurations).sort(([,p],[,v])=>v-p).slice(0,10).forEach(([p,v])=>{d+=`  ${p}: ${v.toFixed(2)}ms
`})),d}cleanup(){this.memoryCheckInterval&&clearInterval(this.memoryCheckInterval),this.performanceObserver&&this.performanceObserver.disconnect(),this.measurements=[],this.memorySnapshots=[],this.initialized=!1,console.debug("[PerformanceMonitor] Cleaned up")}}const Vn=new lT;var uv={exports:{}},ep={},dv={exports:{}},_0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw;function cT(){return aw||(aw=1,function(h){function u(Q,V){var ee=Q.length;Q.push(V);e:for(;0<ee;){var Oe=ee-1>>>1,$=Q[Oe];if(0<s($,V))Q[Oe]=V,Q[ee]=$,ee=Oe;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var V=Q[0],ee=Q.pop();if(ee!==V){Q[0]=ee;e:for(var Oe=0,$=Q.length,P=$>>>1;Oe<P;){var fe=2*(Oe+1)-1,ne=Q[fe],ke=fe+1,Be=Q[ke];if(0>s(ne,ee))ke<$&&0>s(Be,ne)?(Q[Oe]=Be,Q[ke]=ee,Oe=ke):(Q[Oe]=ne,Q[fe]=ee,Oe=fe);else if(ke<$&&0>s(Be,ee))Q[Oe]=Be,Q[ke]=ee,Oe=ke;else break e}}return V}function s(Q,V){var ee=Q.sortIndex-V.sortIndex;return ee!==0?ee:Q.id-V.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;h.unstable_now=function(){return d.now()}}else{var p=Date,v=p.now();h.unstable_now=function(){return p.now()-v}}var w=[],S=[],k=1,I=null,R=3,A=!1,_=!1,H=!1,re=!1,G=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;function ce(Q){for(var V=n(S);V!==null;){if(V.callback===null)r(S);else if(V.startTime<=Q)r(S),V.sortIndex=V.expirationTime,u(w,V);else break;V=n(S)}}function be(Q){if(H=!1,ce(Q),!_)if(n(w)!==null)_=!0,J||(J=!0,ze());else{var V=n(S);V!==null&&Xe(be,V.startTime-Q)}}var J=!1,he=-1,ie=5,Ee=-1;function de(){return re?!0:!(h.unstable_now()-Ee<ie)}function Ue(){if(re=!1,J){var Q=h.unstable_now();Ee=Q;var V=!0;try{e:{_=!1,H&&(H=!1,ue(he),he=-1),A=!0;var ee=R;try{t:{for(ce(Q),I=n(w);I!==null&&!(I.expirationTime>Q&&de());){var Oe=I.callback;if(typeof Oe=="function"){I.callback=null,R=I.priorityLevel;var $=Oe(I.expirationTime<=Q);if(Q=h.unstable_now(),typeof $=="function"){I.callback=$,ce(Q),V=!0;break t}I===n(w)&&r(w),ce(Q)}else r(w);I=n(w)}if(I!==null)V=!0;else{var P=n(S);P!==null&&Xe(be,P.startTime-Q),V=!1}}break e}finally{I=null,R=ee,A=!1}V=void 0}}finally{V?ze():J=!1}}}var ze;if(typeof ye=="function")ze=function(){ye(Ue)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,Ge=Fe.port2;Fe.port1.onmessage=Ue,ze=function(){Ge.postMessage(null)}}else ze=function(){G(Ue,0)};function Xe(Q,V){he=G(function(){Q(h.unstable_now())},V)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(Q){Q.callback=null},h.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<Q?Math.floor(1e3/Q):5},h.unstable_getCurrentPriorityLevel=function(){return R},h.unstable_next=function(Q){switch(R){case 1:case 2:case 3:var V=3;break;default:V=R}var ee=R;R=V;try{return Q()}finally{R=ee}},h.unstable_requestPaint=function(){re=!0},h.unstable_runWithPriority=function(Q,V){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ee=R;R=Q;try{return V()}finally{R=ee}},h.unstable_scheduleCallback=function(Q,V,ee){var Oe=h.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Oe+ee:Oe):ee=Oe,Q){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ee+$,Q={id:k++,callback:V,priorityLevel:Q,startTime:ee,expirationTime:$,sortIndex:-1},ee>Oe?(Q.sortIndex=ee,u(S,Q),n(w)===null&&Q===n(S)&&(H?(ue(he),he=-1):H=!0,Xe(be,ee-Oe))):(Q.sortIndex=$,u(w,Q),_||A||(_=!0,J||(J=!0,ze()))),Q},h.unstable_shouldYield=de,h.unstable_wrapCallback=function(Q){var V=R;return function(){var ee=R;R=V;try{return Q.apply(this,arguments)}finally{R=ee}}}}(_0)),_0}var j0={},iw;function uT(){return iw||(iw=1,function(h){var u={};/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */u.NODE_ENV!=="production"&&function(){function n(){if(J=!1,de){var V=h.unstable_now();Fe=V;var ee=!0;try{e:{ce=!1,be&&(be=!1,ie(Ue),Ue=-1),ye=!0;var Oe=ue;try{t:{for(v(V),G=s(_);G!==null&&!(G.expirationTime>V&&S());){var $=G.callback;if(typeof $=="function"){G.callback=null,ue=G.priorityLevel;var P=$(G.expirationTime<=V);if(V=h.unstable_now(),typeof P=="function"){G.callback=P,v(V),ee=!0;break t}G===s(_)&&d(_),v(V)}else d(_);G=s(_)}if(G!==null)ee=!0;else{var fe=s(H);fe!==null&&k(w,fe.startTime-V),ee=!1}}break e}finally{G=null,ue=Oe,ye=!1}ee=void 0}}finally{ee?Ge():de=!1}}}function r(V,ee){var Oe=V.length;V.push(ee);e:for(;0<Oe;){var $=Oe-1>>>1,P=V[$];if(0<p(P,ee))V[$]=ee,V[Oe]=P,Oe=$;else break e}}function s(V){return V.length===0?null:V[0]}function d(V){if(V.length===0)return null;var ee=V[0],Oe=V.pop();if(Oe!==ee){V[0]=Oe;e:for(var $=0,P=V.length,fe=P>>>1;$<fe;){var ne=2*($+1)-1,ke=V[ne],Be=ne+1,Te=V[Be];if(0>p(ke,Oe))Be<P&&0>p(Te,ke)?(V[$]=Te,V[Be]=Oe,$=Be):(V[$]=ke,V[ne]=Oe,$=ne);else if(Be<P&&0>p(Te,Oe))V[$]=Te,V[Be]=Oe,$=Be;else break e}}return ee}function p(V,ee){var Oe=V.sortIndex-ee.sortIndex;return Oe!==0?Oe:V.id-ee.id}function v(V){for(var ee=s(H);ee!==null;){if(ee.callback===null)d(H);else if(ee.startTime<=V)d(H),ee.sortIndex=ee.expirationTime,r(_,ee);else break;ee=s(H)}}function w(V){if(be=!1,v(V),!ce)if(s(_)!==null)ce=!0,de||(de=!0,Ge());else{var ee=s(H);ee!==null&&k(w,ee.startTime-V)}}function S(){return J?!0:!(h.unstable_now()-Fe<ze)}function k(V,ee){Ue=he(function(){V(h.unstable_now())},ee)}if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error()),h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var I=performance;h.unstable_now=function(){return I.now()}}else{var R=Date,A=R.now();h.unstable_now=function(){return R.now()-A}}var _=[],H=[],re=1,G=null,ue=3,ye=!1,ce=!1,be=!1,J=!1,he=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,Ee=typeof setImmediate<"u"?setImmediate:null,de=!1,Ue=-1,ze=5,Fe=-1;if(typeof Ee=="function")var Ge=function(){Ee(n)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,Q=Xe.port2;Xe.port1.onmessage=n,Ge=function(){Q.postMessage(null)}}else Ge=function(){he(n,0)};h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(V){V.callback=null},h.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ze=0<V?Math.floor(1e3/V):5},h.unstable_getCurrentPriorityLevel=function(){return ue},h.unstable_next=function(V){switch(ue){case 1:case 2:case 3:var ee=3;break;default:ee=ue}var Oe=ue;ue=ee;try{return V()}finally{ue=Oe}},h.unstable_requestPaint=function(){J=!0},h.unstable_runWithPriority=function(V,ee){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Oe=ue;ue=V;try{return ee()}finally{ue=Oe}},h.unstable_scheduleCallback=function(V,ee,Oe){var $=h.unstable_now();switch(typeof Oe=="object"&&Oe!==null?(Oe=Oe.delay,Oe=typeof Oe=="number"&&0<Oe?$+Oe:$):Oe=$,V){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=Oe+P,V={id:re++,callback:ee,priorityLevel:V,startTime:Oe,expirationTime:P,sortIndex:-1},Oe>$?(V.sortIndex=Oe,r(H,V),s(_)===null&&V===s(H)&&(be?(ie(Ue),Ue=-1):be=!0,k(w,Oe-$))):(V.sortIndex=P,r(_,V),ce||ye||(ce=!0,de||(de=!0,Ge()))),V},h.unstable_shouldYield=S,h.unstable_wrapCallback=function(V){var ee=ue;return function(){var Oe=ue;ue=ee;try{return V.apply(this,arguments)}finally{ue=Oe}}},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()}(j0)),j0}var ow;function rw(){if(ow)return dv.exports;ow=1;var h={};return h.NODE_ENV==="production"?dv.exports=cT():dv.exports=uT(),dv.exports}var fv={exports:{}},Ha={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function dT(){if(sw)return Ha;sw=1;var h=df();function u(w){var S="https://react.dev/errors/"+w;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)S+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+w+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(u(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function d(w,S,k){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:I==null?null:""+I,children:w,containerInfo:S,implementation:k}}var p=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(w,S){if(w==="font")return"";if(typeof S=="string")return S==="use-credentials"?S:""}return Ha.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ha.createPortal=function(w,S){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S||S.nodeType!==1&&S.nodeType!==9&&S.nodeType!==11)throw Error(u(299));return d(w,S,null,k)},Ha.flushSync=function(w){var S=p.T,k=r.p;try{if(p.T=null,r.p=2,w)return w()}finally{p.T=S,r.p=k,r.d.f()}},Ha.preconnect=function(w,S){typeof w=="string"&&(S?(S=S.crossOrigin,S=typeof S=="string"?S==="use-credentials"?S:"":void 0):S=null,r.d.C(w,S))},Ha.prefetchDNS=function(w){typeof w=="string"&&r.d.D(w)},Ha.preinit=function(w,S){if(typeof w=="string"&&S&&typeof S.as=="string"){var k=S.as,I=v(k,S.crossOrigin),R=typeof S.integrity=="string"?S.integrity:void 0,A=typeof S.fetchPriority=="string"?S.fetchPriority:void 0;k==="style"?r.d.S(w,typeof S.precedence=="string"?S.precedence:void 0,{crossOrigin:I,integrity:R,fetchPriority:A}):k==="script"&&r.d.X(w,{crossOrigin:I,integrity:R,fetchPriority:A,nonce:typeof S.nonce=="string"?S.nonce:void 0})}},Ha.preinitModule=function(w,S){if(typeof w=="string")if(typeof S=="object"&&S!==null){if(S.as==null||S.as==="script"){var k=v(S.as,S.crossOrigin);r.d.M(w,{crossOrigin:k,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0})}}else S==null&&r.d.M(w)},Ha.preload=function(w,S){if(typeof w=="string"&&typeof S=="object"&&S!==null&&typeof S.as=="string"){var k=S.as,I=v(k,S.crossOrigin);r.d.L(w,k,{crossOrigin:I,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0,type:typeof S.type=="string"?S.type:void 0,fetchPriority:typeof S.fetchPriority=="string"?S.fetchPriority:void 0,referrerPolicy:typeof S.referrerPolicy=="string"?S.referrerPolicy:void 0,imageSrcSet:typeof S.imageSrcSet=="string"?S.imageSrcSet:void 0,imageSizes:typeof S.imageSizes=="string"?S.imageSizes:void 0,media:typeof S.media=="string"?S.media:void 0})}},Ha.preloadModule=function(w,S){if(typeof w=="string")if(S){var k=v(S.as,S.crossOrigin);r.d.m(w,{as:typeof S.as=="string"&&S.as!=="script"?S.as:void 0,crossOrigin:k,integrity:typeof S.integrity=="string"?S.integrity:void 0})}else r.d.m(w)},Ha.requestFormReset=function(w){r.d.r(w)},Ha.unstable_batchedUpdates=function(w,S){return w(S)},Ha.useFormState=function(w,S,k){return p.H.useFormState(w,S,k)},Ha.useFormStatus=function(){return p.H.useHostTransitionStatus()},Ha.version="19.1.0",Ha}var Fa={},lw;function fT(){if(lw)return Fa;lw=1;var h={};/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return h.NODE_ENV!=="production"&&function(){function u(){}function n(R){return""+R}function r(R,A,_){var H=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;try{n(H);var re=!1}catch{re=!0}return re&&(console.error("The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",typeof Symbol=="function"&&Symbol.toStringTag&&H[Symbol.toStringTag]||H.constructor.name||"Object"),n(H)),{$$typeof:k,key:H==null?null:""+H,children:R,containerInfo:A,implementation:_}}function s(R,A){if(R==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}function d(R){return R===null?"`null`":R===void 0?"`undefined`":R===""?"an empty string":'something with type "'+typeof R+'"'}function p(R){return R===null?"`null`":R===void 0?"`undefined`":R===""?"an empty string":typeof R=="string"?JSON.stringify(R):typeof R=="number"?"`"+R+"`":'something with type "'+typeof R+'"'}function v(){var R=I.H;return R===null&&console.error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem.`),R}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var w=df(),S={d:{f:u,r:function(){throw Error("Invalid form element. requestFormReset must be passed a form that was rendered by React.")},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},k=Symbol.for("react.portal"),I=w.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;typeof Map=="function"&&Map.prototype!=null&&typeof Map.prototype.forEach=="function"&&typeof Set=="function"&&Set.prototype!=null&&typeof Set.prototype.clear=="function"&&typeof Set.prototype.forEach=="function"||console.error("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),Fa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Fa.createPortal=function(R,A){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error("Target container is not a DOM element.");return r(R,A,null,_)},Fa.flushSync=function(R){var A=I.T,_=S.p;try{if(I.T=null,S.p=2,R)return R()}finally{I.T=A,S.p=_,S.d.f()&&console.error("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task.")}},Fa.preconnect=function(R,A){typeof R=="string"&&R?A!=null&&typeof A!="object"?console.error("ReactDOM.preconnect(): Expected the `options` argument (second) to be an object but encountered %s instead. The only supported option at this time is `crossOrigin` which accepts a string.",p(A)):A!=null&&typeof A.crossOrigin!="string"&&console.error("ReactDOM.preconnect(): Expected the `crossOrigin` option (second argument) to be a string but encountered %s instead. Try removing this option or passing a string value instead.",d(A.crossOrigin)):console.error("ReactDOM.preconnect(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.",d(R)),typeof R=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,S.d.C(R,A))},Fa.prefetchDNS=function(R){if(typeof R!="string"||!R)console.error("ReactDOM.prefetchDNS(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.",d(R));else if(1<arguments.length){var A=arguments[1];typeof A=="object"&&A.hasOwnProperty("crossOrigin")?console.error("ReactDOM.prefetchDNS(): Expected only one argument, `href`, but encountered %s as a second argument instead. This argument is reserved for future options and is currently disallowed. It looks like the you are attempting to set a crossOrigin property for this DNS lookup hint. Browsers do not perform DNS queries using CORS and setting this attribute on the resource hint has no effect. Try calling ReactDOM.prefetchDNS() with just a single string argument, `href`.",p(A)):console.error("ReactDOM.prefetchDNS(): Expected only one argument, `href`, but encountered %s as a second argument instead. This argument is reserved for future options and is currently disallowed. Try calling ReactDOM.prefetchDNS() with just a single string argument, `href`.",p(A))}typeof R=="string"&&S.d.D(R)},Fa.preinit=function(R,A){if(typeof R=="string"&&R?A==null||typeof A!="object"?console.error("ReactDOM.preinit(): Expected the `options` argument (second) to be an object with an `as` property describing the type of resource to be preinitialized but encountered %s instead.",p(A)):A.as!=="style"&&A.as!=="script"&&console.error('ReactDOM.preinit(): Expected the `as` property in the `options` argument (second) to contain a valid value describing the type of resource to be preinitialized but encountered %s instead. Valid values for `as` are "style" and "script".',p(A.as)):console.error("ReactDOM.preinit(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.",d(R)),typeof R=="string"&&A&&typeof A.as=="string"){var _=A.as,H=s(_,A.crossOrigin),re=typeof A.integrity=="string"?A.integrity:void 0,G=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;_==="style"?S.d.S(R,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:H,integrity:re,fetchPriority:G}):_==="script"&&S.d.X(R,{crossOrigin:H,integrity:re,fetchPriority:G,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Fa.preinitModule=function(R,A){var _="";if(typeof R=="string"&&R||(_+=" The `href` argument encountered was "+d(R)+"."),A!==void 0&&typeof A!="object"?_+=" The `options` argument encountered was "+d(A)+".":A&&"as"in A&&A.as!=="script"&&(_+=" The `as` option encountered was "+p(A.as)+"."),_)console.error("ReactDOM.preinitModule(): Expected up to two arguments, a non-empty `href` string and, optionally, an `options` object with a valid `as` property.%s",_);else switch(_=A&&typeof A.as=="string"?A.as:"script",_){case"script":break;default:_=p(_),console.error('ReactDOM.preinitModule(): Currently the only supported "as" type for this function is "script" but received "%s" instead. This warning was generated for `href` "%s". In the future other module types will be supported, aligning with the import-attributes proposal. Learn more here: (https://github.com/tc39/proposal-import-attributes)',_,R)}typeof R=="string"&&(typeof A=="object"&&A!==null?(A.as==null||A.as==="script")&&(_=s(A.as,A.crossOrigin),S.d.M(R,{crossOrigin:_,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})):A==null&&S.d.M(R))},Fa.preload=function(R,A){var _="";if(typeof R=="string"&&R||(_+=" The `href` argument encountered was "+d(R)+"."),A==null||typeof A!="object"?_+=" The `options` argument encountered was "+d(A)+".":typeof A.as=="string"&&A.as||(_+=" The `as` option encountered was "+d(A.as)+"."),_&&console.error('ReactDOM.preload(): Expected two arguments, a non-empty `href` string and an `options` object with an `as` property valid for a `<link rel="preload" as="..." />` tag.%s',_),typeof R=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){_=A.as;var H=s(_,A.crossOrigin);S.d.L(R,_,{crossOrigin:H,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Fa.preloadModule=function(R,A){var _="";typeof R=="string"&&R||(_+=" The `href` argument encountered was "+d(R)+"."),A!==void 0&&typeof A!="object"?_+=" The `options` argument encountered was "+d(A)+".":A&&"as"in A&&typeof A.as!="string"&&(_+=" The `as` option encountered was "+d(A.as)+"."),_&&console.error('ReactDOM.preloadModule(): Expected two arguments, a non-empty `href` string and, optionally, an `options` object with an `as` property valid for a `<link rel="modulepreload" as="..." />` tag.%s',_),typeof R=="string"&&(A?(_=s(A.as,A.crossOrigin),S.d.m(R,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:_,integrity:typeof A.integrity=="string"?A.integrity:void 0})):S.d.m(R))},Fa.requestFormReset=function(R){S.d.r(R)},Fa.unstable_batchedUpdates=function(R,A){return R(A)},Fa.useFormState=function(R,A,_){return v().useFormState(R,A,_)},Fa.useFormStatus=function(){return v().useHostTransitionStatus()},Fa.version="19.1.0",typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}(),Fa}var cw;function L0(){if(cw)return fv.exports;cw=1;var h={};function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function")){if(h.NODE_ENV!=="production")throw new Error("^_^");try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}}return h.NODE_ENV==="production"?(u(),fv.exports=dT()):fv.exports=fT(),fv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function gT(){if(uw)return ep;uw=1;var h=rw(),u=df(),n=L0();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function d(a){var o=a,l=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,o.flags&4098&&(l=o.return),a=o.return;while(a)}return o.tag===3?l:null}function p(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function v(a){if(d(a)!==a)throw Error(r(188))}function w(a){var o=a.alternate;if(!o){if(o=d(a),o===null)throw Error(r(188));return o!==a?null:a}for(var l=a,f=o;;){var b=l.return;if(b===null)break;var y=b.alternate;if(y===null){if(f=b.return,f!==null){l=f;continue}break}if(b.child===y.child){for(y=b.child;y;){if(y===l)return v(b),a;if(y===f)return v(b),o;y=y.sibling}throw Error(r(188))}if(l.return!==f.return)l=b,f=y;else{for(var T=!1,O=b.child;O;){if(O===l){T=!0,l=b,f=y;break}if(O===f){T=!0,f=b,l=y;break}O=O.sibling}if(!T){for(O=y.child;O;){if(O===l){T=!0,l=y,f=b;break}if(O===f){T=!0,f=y,l=b;break}O=O.sibling}if(!T)throw Error(r(189))}}if(l.alternate!==f)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?a:o}function S(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=S(a),o!==null)return o;a=a.sibling}return null}var k=Object.assign,I=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),ue=Symbol.for("react.consumer"),ye=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),Ee=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),Ue=Symbol.iterator;function ze(a){return a===null||typeof a!="object"?null:(a=Ue&&a[Ue]||a["@@iterator"],typeof a=="function"?a:null)}var Fe=Symbol.for("react.client.reference");function Ge(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Fe?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case _:return"Fragment";case re:return"Profiler";case H:return"StrictMode";case be:return"Suspense";case J:return"SuspenseList";case Ee:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case A:return"Portal";case ye:return(a.displayName||"Context")+".Provider";case ue:return(a._context.displayName||"Context")+".Consumer";case ce:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case he:return o=a.displayName||null,o!==null?o:Ge(a.type)||"Memo";case ie:o=a._payload,a=a._init;try{return Ge(a(o))}catch{}}return null}var Xe=Array.isArray,Q=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},Oe=[],$=-1;function P(a){return{current:a}}function fe(a){0>$||(a.current=Oe[$],Oe[$]=null,$--)}function ne(a,o){$++,Oe[$]=a.current,a.current=o}var ke=P(null),Be=P(null),Te=P(null),Pe=P(null);function Me(a,o){switch(ne(Te,o),ne(Be,a),ne(ke,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?Po(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=Po(o),a=Ur(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}fe(ke),ne(ke,a)}function $e(){fe(ke),fe(Be),fe(Te)}function it(a){a.memoizedState!==null&&ne(Pe,a);var o=ke.current,l=Ur(o,a.type);o!==l&&(ne(Be,a),ne(ke,l))}function Ke(a){Be.current===a&&(fe(ke),fe(Be)),Pe.current===a&&(fe(Pe),ba._currentValue=ee)}var lt=Object.prototype.hasOwnProperty,ht=h.unstable_scheduleCallback,Vt=h.unstable_cancelCallback,ca=h.unstable_shouldYield,_e=h.unstable_requestPaint,ot=h.unstable_now,Yt=h.unstable_getCurrentPriorityLevel,Jt=h.unstable_ImmediatePriority,Un=h.unstable_UserBlockingPriority,Ae=h.unstable_NormalPriority,gt=h.unstable_LowPriority,Xt=h.unstable_IdlePriority,Rn=h.log,Ve=h.unstable_setDisableYieldValue,Ne=null,qe=null;function gn(a){if(typeof Rn=="function"&&Ve(a),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Ne,a)}catch{}}var hn=Math.clz32?Math.clz32:En,lr=Math.log,Kr=Math.LN2;function En(a){return a>>>=0,a===0?32:31-(lr(a)/Kr|0)|0}var Zi=256,Qi=4194304;function ua(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Ga(a,o,l){var f=a.pendingLanes;if(f===0)return 0;var b=0,y=a.suspendedLanes,T=a.pingedLanes;a=a.warmLanes;var O=f&134217727;return O!==0?(f=O&~y,f!==0?b=ua(f):(T&=O,T!==0?b=ua(T):l||(l=O&~a,l!==0&&(b=ua(l))))):(O=f&~y,O!==0?b=ua(O):T!==0?b=ua(T):l||(l=f&~a,l!==0&&(b=ua(l)))),b===0?0:o!==0&&o!==b&&!(o&y)&&(y=b&-b,l=o&-o,y>=l||y===32&&(l&4194048)!==0)?o:b}function Oi(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function z(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y(){var a=Zi;return Zi<<=1,!(Zi&4194048)&&(Zi=256),a}function Ie(){var a=Qi;return Qi<<=1,!(Qi&62914560)&&(Qi=4194304),a}function je(a){for(var o=[],l=0;31>l;l++)o.push(a);return o}function Ze(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function At(a,o,l,f,b,y){var T=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var O=a.entanglements,j=a.expirationTimes,K=a.hiddenUpdates;for(l=T&~l;0<l;){var Se=31-hn(l),Ce=1<<Se;O[Se]=0,j[Se]=-1;var te=K[Se];if(te!==null)for(K[Se]=null,Se=0;Se<te.length;Se++){var le=te[Se];le!==null&&(le.lane&=-536870913)}l&=~Ce}f!==0&&vt(a,f,0),y!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=y&~(T&~o))}function vt(a,o,l){a.pendingLanes|=o,a.suspendedLanes&=~o;var f=31-hn(o);a.entangledLanes|=o,a.entanglements[f]=a.entanglements[f]|1073741824|l&4194090}function $t(a,o){var l=a.entangledLanes|=o;for(a=a.entanglements;l;){var f=31-hn(l),b=1<<f;b&o|a[f]&o&&(a[f]|=o),l&=~b}}function pt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function jn(a){return a&=-a,2<a?8<a?a&134217727?32:268435456:8:2}function ko(){var a=V.p;return a!==0?a:(a=window.event,a===void 0?32:Zy(a.type))}function hp(a,o){var l=V.p;try{return V.p=a,o()}finally{V.p=l}}var Mo=Math.random().toString(36).slice(2),dn="__reactFiber$"+Mo,wa="__reactProps$"+Mo,Ys="__reactContainer$"+Mo,pp="__reactEvents$"+Mo,qv="__reactListeners$"+Mo,Gv="__reactHandles$"+Mo,Mu="__reactResources$"+Mo,Au="__reactMarker$"+Mo;function nt(a){delete a[dn],delete a[wa],delete a[pp],delete a[qv],delete a[Gv]}function Jr(a){var o=a[dn];if(o)return o;for(var l=a.parentNode;l;){if(o=l[Ys]||l[dn]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(a=Ol(a);a!==null;){if(l=a[dn])return l;a=Ol(a)}return o}a=l,l=a.parentNode}return null}function da(a){if(a=a[dn]||a[Ys]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function Kl(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function Jl(a){var o=a[Mu];return o||(o=a[Mu]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Pn(a){a[Au]=!0}var mp=new Set,Ru={};function Wn(a,o){Xs(a,o),Xs(a+"Capture",o)}function Xs(a,o){for(Ru[a]=o,a=0;a<o.length;a++)mp.add(o[a])}var bp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vp={},Pf={};function Vv(a){return lt.call(Pf,a)?!0:lt.call(vp,a)?!1:bp.test(a)?Pf[a]=!0:(vp[a]=!0,!1)}function Ou(a,o,l){if(Vv(o))if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+l)}}function cr(a,o,l){if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+l)}}function Ao(a,o,l,f){if(f===null)a.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(o,l,""+f)}}var $f,yp;function Zs(a){if($f===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);$f=o&&o[1]||"",yp=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$f+a+yp}var _f=!1;function Ia(a,o){if(!a||_f)return"";_f=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(le){var te=le}Reflect.construct(a,[],Ce)}else{try{Ce.call()}catch(le){te=le}a.call(Ce.prototype)}}else{try{throw Error()}catch(le){te=le}(Ce=a())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(le){if(le&&te&&typeof le.stack=="string")return[le.stack,te.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),T=y[0],O=y[1];if(T&&O){var j=T.split(`
`),K=O.split(`
`);for(b=f=0;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;for(;b<K.length&&!K[b].includes("DetermineComponentFrameRoot");)b++;if(f===j.length||b===K.length)for(f=j.length-1,b=K.length-1;1<=f&&0<=b&&j[f]!==K[b];)b--;for(;1<=f&&0<=b;f--,b--)if(j[f]!==K[b]){if(f!==1||b!==1)do if(f--,b--,0>b||j[f]!==K[b]){var Se=`
`+j[f].replace(" at new "," at ");return a.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",a.displayName)),Se}while(1<=f&&0<=b);break}}}finally{_f=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?Zs(l):""}function Wl(a){switch(a.tag){case 26:case 27:case 5:return Zs(a.type);case 16:return Zs("Lazy");case 13:return Zs("Suspense");case 19:return Zs("SuspenseList");case 0:case 15:return Ia(a.type,!1);case 11:return Ia(a.type.render,!1);case 1:return Ia(a.type,!0);case 31:return Zs("Activity");default:return""}}function Wr(a){try{var o="";do o+=Wl(a),a=a.return;while(a);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function gi(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ec(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function jf(a){var o=ec(a)?"checked":"value",l=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),f=""+a[o];if(!a.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var b=l.get,y=l.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return b.call(this)},set:function(T){f=""+T,y.call(this,T)}}),Object.defineProperty(a,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function tc(a){a._valueTracker||(a._valueTracker=jf(a))}function nc(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return a&&(f=ec(a)?a.checked?"true":"false":a.value),a=f,a!==l?(o.setValue(a),!0):!1}function ur(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var xp=/[\n"\\]/g;function zi(a){return a.replace(xp,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Sp(a,o,l,f,b,y,T,O){a.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.type=T:a.removeAttribute("type"),o!=null?T==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+gi(o)):a.value!==""+gi(o)&&(a.value=""+gi(o)):T!=="submit"&&T!=="reset"||a.removeAttribute("value"),o!=null?zu(a,T,gi(o)):l!=null?zu(a,T,gi(l)):f!=null&&a.removeAttribute("value"),b==null&&y!=null&&(a.defaultChecked=!!y),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.name=""+gi(O):a.removeAttribute("name")}function wp(a,o,l,f,b,y,T,O){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(a.type=y),o!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;l=l!=null?""+gi(l):"",o=o!=null?""+gi(o):l,O||o===a.value||(a.value=o),a.defaultValue=o}f=f??b,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=O?a.checked:!!f,a.defaultChecked=!!f,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.name=T)}function zu(a,o,l){o==="number"&&ur(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function es(a,o,l,f){if(a=a.options,o){o={};for(var b=0;b<l.length;b++)o["$"+l[b]]=!0;for(l=0;l<a.length;l++)b=o.hasOwnProperty("$"+a[l].value),a[l].selected!==b&&(a[l].selected=b),b&&f&&(a[l].defaultSelected=!0)}else{for(l=""+gi(l),o=null,b=0;b<a.length;b++){if(a[b].value===l){a[b].selected=!0,f&&(a[b].defaultSelected=!0);return}o!==null||a[b].disabled||(o=a[b])}o!==null&&(o.selected=!0)}}function Ep(a,o,l){if(o!=null&&(o=""+gi(o),o!==a.value&&(a.value=o),l==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=l!=null?""+gi(l):""}function Cp(a,o,l,f){if(o==null){if(f!=null){if(l!=null)throw Error(r(92));if(Xe(f)){if(1<f.length)throw Error(r(93));f=f[0]}l=f}l==null&&(l=""),o=l}l=gi(o),a.defaultValue=l,f=a.textContent,f===l&&f!==""&&f!==null&&(a.value=f)}function Qs(a,o){if(o){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=o;return}}a.textContent=o}var Mx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tp(a,o,l){var f=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":f?a.setProperty(o,l):typeof l!="number"||l===0||Mx.has(o)?o==="float"?a.cssFloat=l:a[o]=(""+l).trim():a[o]=l+"px"}function Lf(a,o,l){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var b in o)f=o[b],o.hasOwnProperty(b)&&l[b]!==f&&Tp(a,b,f)}else for(var y in o)o.hasOwnProperty(y)&&Tp(a,y,o[y])}function ac(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Du=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ax=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nu(a){return Ax.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Bf=null;function Ks(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Js=null,ic=null;function Yv(a){var o=da(a);if(o&&(a=o.stateNode)){var l=a[wa]||null;e:switch(a=o.stateNode,o.type){case"input":if(Sp(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+zi(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==a&&f.form===a.form){var b=f[wa]||null;if(!b)throw Error(r(90));Sp(f,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<l.length;o++)f=l[o],f.form===a.form&&nc(f)}break e;case"textarea":Ep(a,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&es(a,!!l.multiple,o,!1)}}}var kp=!1;function Xv(a,o,l){if(kp)return a(o,l);kp=!0;try{var f=a(o);return f}finally{if(kp=!1,(Js!==null||ic!==null)&&(Cd(),Js&&(o=Js,a=ic,ic=Js=null,Yv(o),a)))for(o=0;o<a.length;o++)Yv(a[o])}}function dr(a,o){var l=a.stateNode;if(l===null)return null;var f=l[wa]||null;if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hf=!1;if(Ki)try{var oc={};Object.defineProperty(oc,"passive",{get:function(){Hf=!0}}),window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{Hf=!1}var Di=null,Ff=null,Ws=null;function Iu(){if(Ws)return Ws;var a,o=Ff,l=o.length,f,b="value"in Di?Di.value:Di.textContent,y=b.length;for(a=0;a<l&&o[a]===b[a];a++);var T=l-a;for(f=1;f<=T&&o[l-f]===b[y-f];f++);return Ws=b.slice(a,1<f?1-f:void 0)}function Uu(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function fa(){return!0}function Zv(){return!1}function Ea(a){function o(l,f,b,y,T){this._reactName=l,this._targetInst=b,this.type=f,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(l=a[O],this[O]=l?l(y):y[O]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?fa:Zv,this.isPropagationStopped=Zv,this}return k(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),o}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pu=Ea(ts),$u=k({},ts,{view:0,detail:0}),Rx=Ea($u),qf,Mp,rc,Gf=k({},$u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==rc&&(rc&&a.type==="mousemove"?(qf=a.screenX-rc.screenX,Mp=a.screenY-rc.screenY):Mp=qf=0,rc=a),qf)},movementY:function(a){return"movementY"in a?a.movementY:Mp}}),_u=Ea(Gf),Qv=k({},Gf,{dataTransfer:0}),Kv=Ea(Qv),Jv=k({},$u,{relatedTarget:0}),Ap=Ea(Jv),Ox=k({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),zx=Ea(Ox),Dx=k({},ts,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Nx=Ea(Dx),ju=k({},ts,{data:0}),Rp=Ea(ju),Wv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ty={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Op(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=ty[a])?!!o[a]:!1}function Vf(){return Op}var el=k({},$u,{key:function(a){if(a.key){var o=Wv[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Uu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ey[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(a){return a.type==="keypress"?Uu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Uu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),tl=Ea(el),Ji=k({},Gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Va=Ea(Ji),Yf=k({},$u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),Xf=Ea(Yf),zp=k({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ya=Ea(zp),ny=k({},Gf,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zf=Ea(ny),nl=k({},ts,{newState:0,oldState:0}),Dp=Ea(nl),ay=[9,13,27,32],Qf=Ki&&"CompositionEvent"in window,al=null;Ki&&"documentMode"in document&&(al=document.documentMode);var Ix=Ki&&"TextEvent"in window&&!al,Kf=Ki&&(!Qf||al&&8<al&&11>=al),Ro=" ",Np=!1;function Jf(a,o){switch(a){case"keyup":return ay.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ni=!1;function Ip(a,o){switch(a){case"compositionend":return Lu(o);case"keypress":return o.which!==32?null:(Np=!0,Ro);case"textInput":return a=o.data,a===Ro&&Np?null:a;default:return null}}function Up(a,o){if(Ni)return a==="compositionend"||!Qf&&Jf(a,o)?(a=Iu(),Ws=Ff=Di=null,Ni=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Kf&&o.locale!=="ko"?null:o.data;default:return null}}var il={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pp(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!il[a.type]:o==="textarea"}function Wf(a,o,l,f){Js?ic?ic.push(f):ic=[f]:Js=f,o=Rs(o,"onChange"),0<o.length&&(l=new Pu("onChange","change",null,l,f),a.push({event:l,listeners:o}))}var ol=null,Wi=null;function rl(a){Ir(a,0)}function sc(a){var o=Kl(a);if(nc(o))return a}function ns(a,o){if(a==="change")return o}var $p=!1;if(Ki){var eg;if(Ki){var sl="oninput"in document;if(!sl){var lc=document.createElement("div");lc.setAttribute("oninput","return;"),sl=typeof lc.oninput=="function"}eg=sl}else eg=!1;$p=eg&&(!document.documentMode||9<document.documentMode)}function _p(){ol&&(ol.detachEvent("onpropertychange",cc),Wi=ol=null)}function cc(a){if(a.propertyName==="value"&&sc(Wi)){var o=[];Wf(o,Wi,a,Ks(a)),Xv(rl,o)}}function iy(a,o,l){a==="focusin"?(_p(),ol=o,Wi=l,ol.attachEvent("onpropertychange",cc)):a==="focusout"&&_p()}function tg(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return sc(Wi)}function as(a,o){if(a==="click")return sc(o)}function fr(a,o){if(a==="input"||a==="change")return sc(o)}function jp(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Ua=typeof Object.is=="function"?Object.is:jp;function gr(a,o){if(Ua(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var l=Object.keys(a),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var b=l[f];if(!lt.call(o,b)||!Ua(a[b],o[b]))return!1}return!0}function Bu(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function is(a,o){var l=Bu(a);a=0;for(var f;l;){if(l.nodeType===3){if(f=a+l.textContent.length,a<=o&&f>=o)return{node:l,offset:o-a};a=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Bu(l)}}function bn(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?bn(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Hu(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=ur(a.document);o instanceof a.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)a=o.contentWindow;else break;o=ur(a.document)}return o}function ng(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var Lp=Ki&&"documentMode"in document&&11>=document.documentMode,Ii=null,ll=null,hi=null,uc=!1;function dc(a,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;uc||Ii==null||Ii!==ur(f)||(f=Ii,"selectionStart"in f&&ng(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),hi&&gr(hi,f)||(hi=f,f=Rs(ll,"onSelect"),0<f.length&&(o=new Pu("onSelect","select",null,o,l),a.push({event:o,listeners:f}),o.target=Ii)))}function hr(a,o){var l={};return l[a.toLowerCase()]=o.toLowerCase(),l["Webkit"+a]="webkit"+o,l["Moz"+a]="moz"+o,l}var os={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},ag={},eo={};Ki&&(eo=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function Ca(a){if(ag[a])return ag[a];if(!os[a])return a;var o=os[a],l;for(l in o)if(o.hasOwnProperty(l)&&l in eo)return ag[a]=o[l];return a}var Fu=Ca("animationend"),oy=Ca("animationiteration"),Bp=Ca("animationstart"),Ux=Ca("transitionrun"),Hp=Ca("transitionstart"),ig=Ca("transitioncancel"),Fp=Ca("transitionend"),qp=new Map,og="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");og.push("scrollEnd");function Xa(a,o){qp.set(a,o),Wn(o,[a])}var Gp=new WeakMap;function pi(a,o){if(typeof a=="object"&&a!==null){var l=Gp.get(a);return l!==void 0?l:(o={value:a,source:o,stack:Wr(o)},Gp.set(a,o),o)}return{value:a,source:o,stack:Wr(o)}}var mi=[],rs=0,qu=0;function to(){for(var a=rs,o=qu=rs=0;o<a;){var l=mi[o];mi[o++]=null;var f=mi[o];mi[o++]=null;var b=mi[o];mi[o++]=null;var y=mi[o];if(mi[o++]=null,f!==null&&b!==null){var T=f.pending;T===null?b.next=b:(b.next=T.next,T.next=b),f.pending=b}y!==0&&fc(l,b,y)}}function no(a,o,l,f){mi[rs++]=a,mi[rs++]=o,mi[rs++]=l,mi[rs++]=f,qu|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function cl(a,o,l,f){return no(a,o,l,f),ss(a)}function pr(a,o){return no(a,null,null,o),ss(a)}function fc(a,o,l){a.lanes|=l;var f=a.alternate;f!==null&&(f.lanes|=l);for(var b=!1,y=a.return;y!==null;)y.childLanes|=l,f=y.alternate,f!==null&&(f.childLanes|=l),y.tag===22&&(a=y.stateNode,a===null||a._visibility&1||(b=!0)),a=y,y=y.return;return a.tag===3?(y=a.stateNode,b&&o!==null&&(b=31-hn(l),a=y.hiddenUpdates,f=a[b],f===null?a[b]=[o]:f.push(o),o.lane=l|536870912),y):null}function ss(a){if(50<Gc)throw Gc=0,Vg=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var ul={};function Px(a,o,l,f){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Za(a,o,l,f){return new Px(a,o,l,f)}function rg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ao(a,o){var l=a.alternate;return l===null?(l=Za(a.tag,o,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=o,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,o=a.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function sg(a,o){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,o=l.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Ct(a,o,l,f,b,y){var T=0;if(f=a,typeof a=="function")rg(a)&&(T=1);else if(typeof a=="string")T=Hy(a,l,ke.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case Ee:return a=Za(31,l,o,b),a.elementType=Ee,a.lanes=y,a;case _:return Re(l.children,b,y,o);case H:T=8,b|=24;break;case re:return a=Za(12,l,o,b|2),a.elementType=re,a.lanes=y,a;case be:return a=Za(13,l,o,b),a.elementType=be,a.lanes=y,a;case J:return a=Za(19,l,o,b),a.elementType=J,a.lanes=y,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case G:case ye:T=10;break e;case ue:T=9;break e;case ce:T=11;break e;case he:T=14;break e;case ie:T=16,f=null;break e}T=29,l=Error(r(130,a===null?"null":typeof a,"")),f=null}return o=Za(T,l,o,b),o.elementType=a,o.type=f,o.lanes=y,o}function Re(a,o,l,f){return a=Za(7,a,f,o),a.lanes=l,a}function ls(a,o,l){return a=Za(6,a,null,o),a.lanes=l,a}function gc(a,o,l){return o=Za(4,a.children!==null?a.children:[],a.key,o),o.lanes=l,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var pn=[],cs=0,hc=null,Gu=0,Qa=[],Ui=0,mr=null,io=1,oo="";function Ln(a,o){pn[cs++]=Gu,pn[cs++]=hc,hc=a,Gu=o}function Wt(a,o,l){Qa[Ui++]=io,Qa[Ui++]=oo,Qa[Ui++]=mr,mr=a;var f=io;a=oo;var b=32-hn(f)-1;f&=~(1<<b),l+=1;var y=32-hn(o)+b;if(30<y){var T=b-b%5;y=(f&(1<<T)-1).toString(32),f>>=T,b-=T,io=1<<32-hn(o)+b|l<<b|f,oo=y+a}else io=1<<y|l<<b|f,oo=a}function Vu(a){a.return!==null&&(Ln(a,1),Wt(a,1,0))}function dl(a){for(;a===hc;)hc=pn[--cs],pn[cs]=null,Gu=pn[--cs],pn[cs]=null;for(;a===mr;)mr=Qa[--Ui],Qa[Ui]=null,oo=Qa[--Ui],Qa[Ui]=null,io=Qa[--Ui],Qa[Ui]=null}var On=null,on=null,Tt=!1,br=null,Pa=!1,Yu=Error(r(519));function ro(a){var o=Error(r(418,""));throw bc(pi(o,a)),Yu}function lg(a){var o=a.stateNode,l=a.type,f=a.memoizedProps;switch(o[dn]=a,o[wa]=f,l){case"dialog":xt("cancel",o),xt("close",o);break;case"iframe":case"object":case"embed":xt("load",o);break;case"video":case"audio":for(l=0;l<mt.length;l++)xt(mt[l],o);break;case"source":xt("error",o);break;case"img":case"image":case"link":xt("error",o),xt("load",o);break;case"details":xt("toggle",o);break;case"input":xt("invalid",o),wp(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),tc(o);break;case"select":xt("invalid",o);break;case"textarea":xt("invalid",o),Cp(o,f.value,f.defaultValue,f.children),tc(o)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||f.suppressHydrationWarning===!0||jy(o.textContent,l)?(f.popover!=null&&(xt("beforetoggle",o),xt("toggle",o)),f.onScroll!=null&&xt("scroll",o),f.onScrollEnd!=null&&xt("scrollend",o),f.onClick!=null&&(o.onclick=Dd),o=!0):o=!1,o||ro(a)}function Xu(a){for(On=a.return;On;)switch(On.tag){case 5:case 13:Pa=!1;return;case 27:case 3:Pa=!0;return;default:On=On.return}}function pc(a){if(a!==On)return!1;if(!Tt)return Xu(a),Tt=!0,!1;var o=a.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||Rl(a.type,a.memoizedProps)),l=!l),l&&on&&ro(a),Xu(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(l=a.data,l==="/$"){if(o===0){on=xo(a.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;a=a.nextSibling}on=null}}else o===27?(o=on,pa(a.type)?(a=db,db=null,on=a):on=o):on=On?xo(a.stateNode.nextSibling):null;return!0}function mc(){on=On=null,Tt=!1}function Vp(){var a=br;return a!==null&&(_a===null?_a=a:_a.push.apply(_a,a),br=null),a}function bc(a){br===null?br=[a]:br.push(a)}var cg=P(null),vr=null,so=null;function Oo(a,o,l){ne(cg,o._currentValue),o._currentValue=l}function zo(a){a._currentValue=cg.current,fe(cg)}function ug(a,o,l){for(;a!==null;){var f=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),a===l)break;a=a.return}}function dg(a,o,l,f){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var y=b.dependencies;if(y!==null){var T=b.child;y=y.firstContext;e:for(;y!==null;){var O=y;y=b;for(var j=0;j<o.length;j++)if(O.context===o[j]){y.lanes|=l,O=y.alternate,O!==null&&(O.lanes|=l),ug(y.return,l,a),f||(T=null);break e}y=O.next}}else if(b.tag===18){if(T=b.return,T===null)throw Error(r(341));T.lanes|=l,y=T.alternate,y!==null&&(y.lanes|=l),ug(T,l,a),T=null}else T=b.child;if(T!==null)T.return=b;else for(T=b;T!==null;){if(T===a){T=null;break}if(b=T.sibling,b!==null){b.return=T.return,T=b;break}T=T.return}b=T}}function Zu(a,o,l,f){a=null;for(var b=o,y=!1;b!==null;){if(!y){if(b.flags&524288)y=!0;else if(b.flags&262144)break}if(b.tag===10){var T=b.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var O=b.type;Ua(b.pendingProps.value,T.value)||(a!==null?a.push(O):a=[O])}}else if(b===Pe.current){if(T=b.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(ba):a=[ba])}b=b.return}a!==null&&dg(o,a,l,f),o.flags|=262144}function Qu(a){for(a=a.firstContext;a!==null;){if(!Ua(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function us(a){vr=a,so=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ga(a){return Yp(vr,a)}function vc(a,o){return vr===null&&us(a),Yp(a,o)}function Yp(a,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},so===null){if(a===null)throw Error(r(308));so=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else so=so.next=o;return l}var ry=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(l,f){a.push(f)}};this.abort=function(){o.aborted=!0,a.forEach(function(l){return l()})}},yc=h.unstable_scheduleCallback,fg=h.unstable_NormalPriority,Bn={$$typeof:ye,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xp(){return{controller:new ry,data:new Map,refCount:0}}function ds(a){a.refCount--,a.refCount===0&&yc(fg,function(){a.controller.abort()})}var Do=null,xc=0,fs=0,Pi=null;function Ka(a,o){if(Do===null){var l=Do=[];xc=0,fs=nh(),Pi={status:"pending",value:void 0,then:function(f){l.push(f)}}}return xc++,o.then(Ku,Ku),o}function Ku(){if(--xc===0&&Do!==null){Pi!==null&&(Pi.status="fulfilled");var a=Do;Do=null,fs=0,Pi=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function Zp(a,o){var l=[],f={status:"pending",value:null,reason:null,then:function(b){l.push(b)}};return a.then(function(){f.status="fulfilled",f.value=o;for(var b=0;b<l.length;b++)(0,l[b])(o)},function(b){for(f.status="rejected",f.reason=b,b=0;b<l.length;b++)(0,l[b])(void 0)}),f}var Qp=Q.S;Q.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Ka(a,o),Qp!==null&&Qp(a,o)};var yr=P(null);function Sc(){var a=yr.current;return a!==null?a:sn.pooledCache}function wc(a,o){o===null?ne(yr,yr.current):ne(yr,o.pool)}function Ju(){var a=Sc();return a===null?null:{parent:Bn._currentValue,pool:a}}var fl=Error(r(460)),Wu=Error(r(474)),Ec=Error(r(542)),gg={then:function(){}};function Kp(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Cc(){}function Jp(a,o,l){switch(l=a[l],l===void 0?a.push(o):l!==o&&(o.then(Cc,Cc),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Wp(a),a;default:if(typeof o.status=="string")o.then(Cc,Cc);else{if(a=sn,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(f){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=f}},function(f){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Wp(a),a}throw Tc=o,fl}}var Tc=null;function hg(){if(Tc===null)throw Error(r(459));var a=Tc;return Tc=null,a}function Wp(a){if(a===fl||a===Ec)throw Error(r(483))}var xr=!1;function ed(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pg(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Sr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ja(a,o,l){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,en&2){var b=f.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),f.pending=o,o=ss(a),fc(a,null,l),o}return no(a,f,o,l),ss(a)}function gl(a,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var f=o.lanes;f&=a.pendingLanes,l|=f,o.lanes=l,$t(a,l)}}function td(a,o){var l=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var b=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?b=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?b=y=o:y=y.next=o}else b=y=o;l={baseState:f.baseState,firstBaseUpdate:b,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=o:a.next=o,l.lastBaseUpdate=o}var em=!1;function nd(){if(em){var a=Pi;if(a!==null)throw a}}function kc(a,o,l,f){em=!1;var b=a.updateQueue;xr=!1;var y=b.firstBaseUpdate,T=b.lastBaseUpdate,O=b.shared.pending;if(O!==null){b.shared.pending=null;var j=O,K=j.next;j.next=null,T===null?y=K:T.next=K,T=j;var Se=a.alternate;Se!==null&&(Se=Se.updateQueue,O=Se.lastBaseUpdate,O!==T&&(O===null?Se.firstBaseUpdate=K:O.next=K,Se.lastBaseUpdate=j))}if(y!==null){var Ce=b.baseState;T=0,Se=K=j=null,O=y;do{var te=O.lane&-536870913,le=te!==O.lane;if(le?(Lt&te)===te:(f&te)===te){te!==0&&te===fs&&(em=!0),Se!==null&&(Se=Se.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var ct=a,st=O;te=o;var Kt=l;switch(st.tag){case 1:if(ct=st.payload,typeof ct=="function"){Ce=ct.call(Kt,Ce,te);break e}Ce=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=st.payload,te=typeof ct=="function"?ct.call(Kt,Ce,te):ct,te==null)break e;Ce=k({},Ce,te);break e;case 2:xr=!0}}te=O.callback,te!==null&&(a.flags|=64,le&&(a.flags|=8192),le=b.callbacks,le===null?b.callbacks=[te]:le.push(te))}else le={lane:te,tag:O.tag,payload:O.payload,callback:O.callback,next:null},Se===null?(K=Se=le,j=Ce):Se=Se.next=le,T|=te;if(O=O.next,O===null){if(O=b.shared.pending,O===null)break;le=O,O=le.next,le.next=null,b.lastBaseUpdate=le,b.shared.pending=null}}while(!0);Se===null&&(j=Ce),b.baseState=j,b.firstBaseUpdate=K,b.lastBaseUpdate=Se,y===null&&(b.shared.lanes=0),ws|=T,a.lanes=T,a.memoizedState=Ce}}function Mc(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function mg(a,o){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)Mc(l[a],o)}var wr=P(null),ad=P(0);function tm(a,o){a=zr,ne(ad,a),ne(wr,o),zr=a|o.baseLanes}function Yn(){ne(ad,zr),ne(wr,wr.current)}function Ac(){zr=ad.current,fe(wr),fe(ad)}var lo=0,yt=null,Zt=null,Mn=null,hl=!1,pl=!1,Wa=!1,id=0,$i=0,ei=null,bg=0;function An(){throw Error(r(321))}function od(a,o){if(o===null)return!1;for(var l=0;l<o.length&&l<a.length;l++)if(!Ua(a[l],o[l]))return!1;return!0}function vg(a,o,l,f,b,y){return lo=y,yt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Q.H=a===null||a.memoizedState===null?hy:xm,Wa=!1,y=l(f,b),Wa=!1,pl&&(y=gs(o,l,f,b)),nm(a),y}function nm(a){Q.H=pd;var o=Zt!==null&&Zt.next!==null;if(lo=0,Mn=Zt=yt=null,hl=!1,$i=0,ei=null,o)throw Error(r(300));a===null||zt||(a=a.dependencies,a!==null&&Qu(a)&&(zt=!0))}function gs(a,o,l,f){yt=a;var b=0;do{if(pl&&(ei=null),$i=0,pl=!1,25<=b)throw Error(r(301));if(b+=1,Mn=Zt=null,a.updateQueue!=null){var y=a.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Q.H=py,y=o(l,f)}while(pl);return y}function sy(){var a=Q.H,o=a.useState()[0];return o=typeof o.then=="function"?ml(o):o,a=a.useState()[0],(Zt!==null?Zt.memoizedState:null)!==a&&(yt.flags|=1024),o}function yg(){var a=id!==0;return id=0,a}function xg(a,o,l){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~l}function Rc(a){if(hl){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}hl=!1}lo=0,Mn=Zt=yt=null,pl=!1,$i=id=0,ei=null}function $a(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?yt.memoizedState=Mn=a:Mn=Mn.next=a,Mn}function zn(){if(Zt===null){var a=yt.alternate;a=a!==null?a.memoizedState:null}else a=Zt.next;var o=Mn===null?yt.memoizedState:Mn.next;if(o!==null)Mn=o,Zt=a;else{if(a===null)throw yt.alternate===null?Error(r(467)):Error(r(310));Zt=a,a={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},Mn===null?yt.memoizedState=Mn=a:Mn=Mn.next=a}return Mn}function rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(a){var o=$i;return $i+=1,ei===null&&(ei=[]),a=Jp(ei,a,o),o=yt,(Mn===null?o.memoizedState:Mn.next)===null&&(o=o.alternate,Q.H=o===null||o.memoizedState===null?hy:xm),a}function Sg(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ml(a);if(a.$$typeof===ye)return ga(a)}throw Error(r(438,String(a)))}function Xn(a){var o=null,l=yt.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var f=yt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=rd(),yt.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(a),f=0;f<a;f++)l[f]=de;return o.index++,l}function No(a,o){return typeof o=="function"?o(a):o}function sd(a){var o=zn();return wg(o,Zt,a)}function wg(a,o,l){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var b=a.baseQueue,y=f.pending;if(y!==null){if(b!==null){var T=b.next;b.next=y.next,y.next=T}o.baseQueue=b=y,f.pending=null}if(y=a.baseState,b===null)a.memoizedState=y;else{o=b.next;var O=T=null,j=null,K=o,Se=!1;do{var Ce=K.lane&-536870913;if(Ce!==K.lane?(Lt&Ce)===Ce:(lo&Ce)===Ce){var te=K.revertLane;if(te===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),Ce===fs&&(Se=!0);else if((lo&te)===te){K=K.next,te===fs&&(Se=!0);continue}else Ce={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},j===null?(O=j=Ce,T=y):j=j.next=Ce,yt.lanes|=te,ws|=te;Ce=K.action,Wa&&l(y,Ce),y=K.hasEagerState?K.eagerState:l(y,Ce)}else te={lane:Ce,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},j===null?(O=j=te,T=y):j=j.next=te,yt.lanes|=Ce,ws|=Ce;K=K.next}while(K!==null&&K!==o);if(j===null?T=y:j.next=O,!Ua(y,a.memoizedState)&&(zt=!0,Se&&(l=Pi,l!==null)))throw l;a.memoizedState=y,a.baseState=T,a.baseQueue=j,f.lastRenderedState=y}return b===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function Eg(a){var o=zn(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=l.dispatch,b=l.pending,y=o.memoizedState;if(b!==null){l.pending=null;var T=b=b.next;do y=a(y,T.action),T=T.next;while(T!==b);Ua(y,o.memoizedState)||(zt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,f]}function am(a,o,l){var f=yt,b=zn(),y=Tt;if(y){if(l===void 0)throw Error(r(407));l=l()}else l=o();var T=!Ua((Zt||b).memoizedState,l);T&&(b.memoizedState=l,zt=!0),b=b.queue;var O=im.bind(null,f,b,a);if(Er(2048,8,O,[a]),b.getSnapshot!==o||T||Mn!==null&&Mn.memoizedState.tag&1){if(f.flags|=2048,hs(9,_i(),Cg.bind(null,f,b,l,o),null),sn===null)throw Error(r(349));y||lo&124||ld(f,o,l)}return l}function ld(a,o,l){a.flags|=16384,a={getSnapshot:o,value:l},o=yt.updateQueue,o===null?(o=rd(),yt.updateQueue=o,o.stores=[a]):(l=o.stores,l===null?o.stores=[a]:l.push(a))}function Cg(a,o,l,f){o.value=l,o.getSnapshot=f,om(o)&&rm(a)}function im(a,o,l){return l(function(){om(o)&&rm(a)})}function om(a){var o=a.getSnapshot;a=a.value;try{var l=o();return!Ua(a,l)}catch{return!0}}function rm(a){var o=pr(a,2);o!==null&&li(o,a,2)}function cd(a){var o=$a();if(typeof a=="function"){var l=a;if(a=l(),Wa){gn(!0);try{l()}finally{gn(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:a},o}function Tg(a,o,l,f){return a.baseState=l,wg(a,Zt,typeof f=="function"?f:No)}function sm(a,o,l,f,b){if(Dc(a))throw Error(r(485));if(a=o.action,a!==null){var y={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};Q.T!==null?l(!0):y.isTransition=!1,f(y),l=o.pending,l===null?(y.next=o.pending=y,lm(o,y)):(y.next=l.next,o.pending=l.next=y)}}function lm(a,o){var l=o.action,f=o.payload,b=a.state;if(o.isTransition){var y=Q.T,T={};Q.T=T;try{var O=l(b,f),j=Q.S;j!==null&&j(T,O),kg(a,o,O)}catch(K){dd(a,o,K)}finally{Q.T=y}}else try{y=l(b,f),kg(a,o,y)}catch(K){dd(a,o,K)}}function kg(a,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){ud(a,o,f)},function(f){return dd(a,o,f)}):ud(a,o,l)}function ud(a,o,l){o.status="fulfilled",o.value=l,cm(o),a.state=l,o=a.pending,o!==null&&(l=o.next,l===o?a.pending=null:(l=l.next,o.next=l,lm(a,l)))}function dd(a,o,l){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=l,cm(o),o=o.next;while(o!==f)}a.action=null}function cm(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function um(a,o){return o}function Mg(a,o){if(Tt){var l=sn.formState;if(l!==null){e:{var f=yt;if(Tt){if(on){t:{for(var b=on,y=Pa;b.nodeType!==8;){if(!y){b=null;break t}if(b=xo(b.nextSibling),b===null){b=null;break t}}y=b.data,b=y==="F!"||y==="F"?b:null}if(b){on=xo(b.nextSibling),f=b.data==="F!";break e}}ro(f)}f=!1}f&&(o=l[0])}}return l=$a(),l.memoizedState=l.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:um,lastRenderedState:o},l.queue=f,l=Og.bind(null,yt,f),f.dispatch=l,f=cd(!1),y=gd.bind(null,yt,!1,f.queue),f=$a(),b={state:o,dispatch:null,action:a,pending:null},f.queue=b,l=sm.bind(null,yt,b,y,l),b.dispatch=l,f.memoizedState=a,[o,l,!1]}function dm(a){var o=zn();return Io(o,Zt,a)}function Io(a,o,l){if(o=wg(a,o,um)[0],a=sd(No)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=ml(o)}catch(T){throw T===fl?Ec:T}else f=o;o=zn();var b=o.queue,y=b.dispatch;return l!==o.memoizedState&&(yt.flags|=2048,hs(9,_i(),fm.bind(null,b,l),null)),[f,y,a]}function fm(a,o){a.action=o}function ly(a){var o=zn(),l=Zt;if(l!==null)return Io(o,l,a);zn(),o=o.memoizedState,l=zn();var f=l.queue.dispatch;return l.memoizedState=a,[o,f,!1]}function hs(a,o,l,f){return a={tag:a,create:l,deps:f,inst:o,next:null},o=yt.updateQueue,o===null&&(o=rd(),yt.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=a.next=a:(f=l.next,l.next=a,a.next=f,o.lastEffect=a),a}function _i(){return{destroy:void 0,resource:void 0}}function gm(){return zn().memoizedState}function bl(a,o,l,f){var b=$a();f=f===void 0?null:f,yt.flags|=a,b.memoizedState=hs(1|o,_i(),l,f)}function Er(a,o,l,f){var b=zn();f=f===void 0?null:f;var y=b.memoizedState.inst;Zt!==null&&f!==null&&od(f,Zt.memoizedState.deps)?b.memoizedState=hs(o,y,l,f):(yt.flags|=a,b.memoizedState=hs(1|o,y,l,f))}function vn(a,o){bl(8390656,8,a,o)}function cy(a,o){Er(2048,8,a,o)}function uy(a,o){return Er(4,2,a,o)}function hm(a,o){return Er(4,4,a,o)}function co(a,o){if(typeof o=="function"){a=a();var l=o(a);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function pm(a,o,l){l=l!=null?l.concat([a]):null,Er(4,4,co.bind(null,o,a),l)}function fd(){}function Oc(a,o){var l=zn();o=o===void 0?null:o;var f=l.memoizedState;return o!==null&&od(o,f[1])?f[0]:(l.memoizedState=[a,o],a)}function vl(a,o){var l=zn();o=o===void 0?null:o;var f=l.memoizedState;if(o!==null&&od(o,f[1]))return f[0];if(f=a(),Wa){gn(!0);try{a()}finally{gn(!1)}}return l.memoizedState=[f,o],f}function Ag(a,o,l){return l===void 0||lo&1073741824?a.memoizedState=o:(a.memoizedState=l,a=My(),yt.lanes|=a,ws|=a,l)}function Rg(a,o,l,f){return Ua(l,o)?l:wr.current!==null?(a=Ag(a,l,f),Ua(a,o)||(zt=!0),a):lo&42?(a=My(),yt.lanes|=a,ws|=a,o):(zt=!0,a.memoizedState=l)}function mm(a,o,l,f,b){var y=V.p;V.p=y!==0&&8>y?y:8;var T=Q.T,O={};Q.T=O,gd(a,!1,o,l);try{var j=b(),K=Q.S;if(K!==null&&K(O,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var Se=Zp(j,f);zc(a,o,Se,Si(a))}else zc(a,o,f,Si(a))}catch(Ce){zc(a,o,{then:function(){},status:"rejected",reason:Ce},Si())}finally{V.p=y,Q.T=T}}function $x(){}function bm(a,o,l,f){if(a.tag!==5)throw Error(r(476));var b=vm(a).queue;mm(a,b,o,ee,l===null?$x:function(){return dy(a),l(f)})}function vm(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:ee},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:l},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function dy(a){var o=vm(a).next.queue;zc(a,o,{},Si())}function yl(){return ga(ba)}function uo(){return zn().memoizedState}function ym(){return zn().memoizedState}function _x(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var l=Si();a=Sr(l);var f=Ja(o,a,l);f!==null&&(li(f,o,l),gl(f,o,l)),o={cache:Xp()},a.payload=o;return}o=o.return}}function fy(a,o,l){var f=Si();l={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Dc(a)?hd(o,l):(l=cl(a,o,l,f),l!==null&&(li(l,a,f),gy(l,o,f)))}function Og(a,o,l){var f=Si();zc(a,o,l,f)}function zc(a,o,l,f){var b={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Dc(a))hd(o,b);else{var y=a.alternate;if(a.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var T=o.lastRenderedState,O=y(T,l);if(b.hasEagerState=!0,b.eagerState=O,Ua(O,T))return no(a,o,b,0),sn===null&&to(),!1}catch{}finally{}if(l=cl(a,o,b,f),l!==null)return li(l,a,f),gy(l,o,f),!0}return!1}function gd(a,o,l,f){if(f={lane:2,revertLane:nh(),action:f,hasEagerState:!1,eagerState:null,next:null},Dc(a)){if(o)throw Error(r(479))}else o=cl(a,l,f,2),o!==null&&li(o,a,2)}function Dc(a){var o=a.alternate;return a===yt||o!==null&&o===yt}function hd(a,o){pl=hl=!0;var l=a.pending;l===null?o.next=o:(o.next=l.next,l.next=o),a.pending=o}function gy(a,o,l){if(l&4194048){var f=o.lanes;f&=a.pendingLanes,l|=f,o.lanes=l,$t(a,l)}}var pd={readContext:ga,use:Sg,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useLayoutEffect:An,useInsertionEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useSyncExternalStore:An,useId:An,useHostTransitionStatus:An,useFormState:An,useActionState:An,useOptimistic:An,useMemoCache:An,useCacheRefresh:An},hy={readContext:ga,use:Sg,useCallback:function(a,o){return $a().memoizedState=[a,o===void 0?null:o],a},useContext:ga,useEffect:vn,useImperativeHandle:function(a,o,l){l=l!=null?l.concat([a]):null,bl(4194308,4,co.bind(null,o,a),l)},useLayoutEffect:function(a,o){return bl(4194308,4,a,o)},useInsertionEffect:function(a,o){bl(4,2,a,o)},useMemo:function(a,o){var l=$a();o=o===void 0?null:o;var f=a();if(Wa){gn(!0);try{a()}finally{gn(!1)}}return l.memoizedState=[f,o],f},useReducer:function(a,o,l){var f=$a();if(l!==void 0){var b=l(o);if(Wa){gn(!0);try{l(o)}finally{gn(!1)}}}else b=o;return f.memoizedState=f.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},f.queue=a,a=a.dispatch=fy.bind(null,yt,a),[f.memoizedState,a]},useRef:function(a){var o=$a();return a={current:a},o.memoizedState=a},useState:function(a){a=cd(a);var o=a.queue,l=Og.bind(null,yt,o);return o.dispatch=l,[a.memoizedState,l]},useDebugValue:fd,useDeferredValue:function(a,o){var l=$a();return Ag(l,a,o)},useTransition:function(){var a=cd(!1);return a=mm.bind(null,yt,a.queue,!0,!1),$a().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,l){var f=yt,b=$a();if(Tt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),sn===null)throw Error(r(349));Lt&124||ld(f,o,l)}b.memoizedState=l;var y={value:l,getSnapshot:o};return b.queue=y,vn(im.bind(null,f,y,a),[a]),f.flags|=2048,hs(9,_i(),Cg.bind(null,f,y,l,o),null),l},useId:function(){var a=$a(),o=sn.identifierPrefix;if(Tt){var l=oo,f=io;l=(f&~(1<<32-hn(f)-1)).toString(32)+l,o="«"+o+"R"+l,l=id++,0<l&&(o+="H"+l.toString(32)),o+="»"}else l=bg++,o="«"+o+"r"+l.toString(32)+"»";return a.memoizedState=o},useHostTransitionStatus:yl,useFormState:Mg,useActionState:Mg,useOptimistic:function(a){var o=$a();o.memoizedState=o.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=gd.bind(null,yt,!0,l),l.dispatch=o,[a,o]},useMemoCache:Xn,useCacheRefresh:function(){return $a().memoizedState=_x.bind(null,yt)}},xm={readContext:ga,use:Sg,useCallback:Oc,useContext:ga,useEffect:cy,useImperativeHandle:pm,useInsertionEffect:uy,useLayoutEffect:hm,useMemo:vl,useReducer:sd,useRef:gm,useState:function(){return sd(No)},useDebugValue:fd,useDeferredValue:function(a,o){var l=zn();return Rg(l,Zt.memoizedState,a,o)},useTransition:function(){var a=sd(No)[0],o=zn().memoizedState;return[typeof a=="boolean"?a:ml(a),o]},useSyncExternalStore:am,useId:uo,useHostTransitionStatus:yl,useFormState:dm,useActionState:dm,useOptimistic:function(a,o){var l=zn();return Tg(l,Zt,a,o)},useMemoCache:Xn,useCacheRefresh:ym},py={readContext:ga,use:Sg,useCallback:Oc,useContext:ga,useEffect:cy,useImperativeHandle:pm,useInsertionEffect:uy,useLayoutEffect:hm,useMemo:vl,useReducer:Eg,useRef:gm,useState:function(){return Eg(No)},useDebugValue:fd,useDeferredValue:function(a,o){var l=zn();return Zt===null?Ag(l,a,o):Rg(l,Zt.memoizedState,a,o)},useTransition:function(){var a=Eg(No)[0],o=zn().memoizedState;return[typeof a=="boolean"?a:ml(a),o]},useSyncExternalStore:am,useId:uo,useHostTransitionStatus:yl,useFormState:ly,useActionState:ly,useOptimistic:function(a,o){var l=zn();return Zt!==null?Tg(l,Zt,a,o):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:Xn,useCacheRefresh:ym},ti=null,Nc=0;function md(a){var o=Nc;return Nc+=1,ti===null&&(ti=[]),Jp(ti,a,o)}function bd(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Ic(a,o){throw o.$$typeof===I?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function ni(a){var o=a._init;return o(a._payload)}function Sm(a){function o(X,q){if(a){var W=X.deletions;W===null?(X.deletions=[q],X.flags|=16):W.push(q)}}function l(X,q){if(!a)return null;for(;q!==null;)o(X,q),q=q.sibling;return null}function f(X){for(var q=new Map;X!==null;)X.key!==null?q.set(X.key,X):q.set(X.index,X),X=X.sibling;return q}function b(X,q){return X=ao(X,q),X.index=0,X.sibling=null,X}function y(X,q,W){return X.index=W,a?(W=X.alternate,W!==null?(W=W.index,W<q?(X.flags|=67108866,q):W):(X.flags|=67108866,q)):(X.flags|=1048576,q)}function T(X){return a&&X.alternate===null&&(X.flags|=67108866),X}function O(X,q,W,we){return q===null||q.tag!==6?(q=ls(W,X.mode,we),q.return=X,q):(q=b(q,W),q.return=X,q)}function j(X,q,W,we){var Ye=W.type;return Ye===_?Se(X,q,W.props.children,we,W.key):q!==null&&(q.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===ie&&ni(Ye)===q.type)?(q=b(q,W.props),bd(q,W),q.return=X,q):(q=Ct(W.type,W.key,W.props,null,X.mode,we),bd(q,W),q.return=X,q)}function K(X,q,W,we){return q===null||q.tag!==4||q.stateNode.containerInfo!==W.containerInfo||q.stateNode.implementation!==W.implementation?(q=gc(W,X.mode,we),q.return=X,q):(q=b(q,W.children||[]),q.return=X,q)}function Se(X,q,W,we,Ye){return q===null||q.tag!==7?(q=Re(W,X.mode,we,Ye),q.return=X,q):(q=b(q,W),q.return=X,q)}function Ce(X,q,W){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=ls(""+q,X.mode,W),q.return=X,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case R:return W=Ct(q.type,q.key,q.props,null,X.mode,W),bd(W,q),W.return=X,W;case A:return q=gc(q,X.mode,W),q.return=X,q;case ie:var we=q._init;return q=we(q._payload),Ce(X,q,W)}if(Xe(q)||ze(q))return q=Re(q,X.mode,W,null),q.return=X,q;if(typeof q.then=="function")return Ce(X,md(q),W);if(q.$$typeof===ye)return Ce(X,vc(X,q),W);Ic(X,q)}return null}function te(X,q,W,we){var Ye=q!==null?q.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ye!==null?null:O(X,q,""+W,we);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case R:return W.key===Ye?j(X,q,W,we):null;case A:return W.key===Ye?K(X,q,W,we):null;case ie:return Ye=W._init,W=Ye(W._payload),te(X,q,W,we)}if(Xe(W)||ze(W))return Ye!==null?null:Se(X,q,W,we,null);if(typeof W.then=="function")return te(X,q,md(W),we);if(W.$$typeof===ye)return te(X,q,vc(X,W),we);Ic(X,W)}return null}function le(X,q,W,we,Ye){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return X=X.get(W)||null,O(q,X,""+we,Ye);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case R:return X=X.get(we.key===null?W:we.key)||null,j(q,X,we,Ye);case A:return X=X.get(we.key===null?W:we.key)||null,K(q,X,we,Ye);case ie:var kt=we._init;return we=kt(we._payload),le(X,q,W,we,Ye)}if(Xe(we)||ze(we))return X=X.get(W)||null,Se(q,X,we,Ye,null);if(typeof we.then=="function")return le(X,q,W,md(we),Ye);if(we.$$typeof===ye)return le(X,q,W,vc(q,we),Ye);Ic(q,we)}return null}function ct(X,q,W,we){for(var Ye=null,kt=null,rt=q,ut=q=0,oa=null;rt!==null&&ut<W.length;ut++){rt.index>ut?(oa=rt,rt=null):oa=rt.sibling;var qt=te(X,rt,W[ut],we);if(qt===null){rt===null&&(rt=oa);break}a&&rt&&qt.alternate===null&&o(X,rt),q=y(qt,q,ut),kt===null?Ye=qt:kt.sibling=qt,kt=qt,rt=oa}if(ut===W.length)return l(X,rt),Tt&&Ln(X,ut),Ye;if(rt===null){for(;ut<W.length;ut++)rt=Ce(X,W[ut],we),rt!==null&&(q=y(rt,q,ut),kt===null?Ye=rt:kt.sibling=rt,kt=rt);return Tt&&Ln(X,ut),Ye}for(rt=f(rt);ut<W.length;ut++)oa=le(rt,X,ut,W[ut],we),oa!==null&&(a&&oa.alternate!==null&&rt.delete(oa.key===null?ut:oa.key),q=y(oa,q,ut),kt===null?Ye=oa:kt.sibling=oa,kt=oa);return a&&rt.forEach(function(Fo){return o(X,Fo)}),Tt&&Ln(X,ut),Ye}function st(X,q,W,we){if(W==null)throw Error(r(151));for(var Ye=null,kt=null,rt=q,ut=q=0,oa=null,qt=W.next();rt!==null&&!qt.done;ut++,qt=W.next()){rt.index>ut?(oa=rt,rt=null):oa=rt.sibling;var Fo=te(X,rt,qt.value,we);if(Fo===null){rt===null&&(rt=oa);break}a&&rt&&Fo.alternate===null&&o(X,rt),q=y(Fo,q,ut),kt===null?Ye=Fo:kt.sibling=Fo,kt=Fo,rt=oa}if(qt.done)return l(X,rt),Tt&&Ln(X,ut),Ye;if(rt===null){for(;!qt.done;ut++,qt=W.next())qt=Ce(X,qt.value,we),qt!==null&&(q=y(qt,q,ut),kt===null?Ye=qt:kt.sibling=qt,kt=qt);return Tt&&Ln(X,ut),Ye}for(rt=f(rt);!qt.done;ut++,qt=W.next())qt=le(rt,X,ut,qt.value,we),qt!==null&&(a&&qt.alternate!==null&&rt.delete(qt.key===null?ut:qt.key),q=y(qt,q,ut),kt===null?Ye=qt:kt.sibling=qt,kt=qt);return a&&rt.forEach(function(Xx){return o(X,Xx)}),Tt&&Ln(X,ut),Ye}function Kt(X,q,W,we){if(typeof W=="object"&&W!==null&&W.type===_&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case R:e:{for(var Ye=W.key;q!==null;){if(q.key===Ye){if(Ye=W.type,Ye===_){if(q.tag===7){l(X,q.sibling),we=b(q,W.props.children),we.return=X,X=we;break e}}else if(q.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===ie&&ni(Ye)===q.type){l(X,q.sibling),we=b(q,W.props),bd(we,W),we.return=X,X=we;break e}l(X,q);break}else o(X,q);q=q.sibling}W.type===_?(we=Re(W.props.children,X.mode,we,W.key),we.return=X,X=we):(we=Ct(W.type,W.key,W.props,null,X.mode,we),bd(we,W),we.return=X,X=we)}return T(X);case A:e:{for(Ye=W.key;q!==null;){if(q.key===Ye)if(q.tag===4&&q.stateNode.containerInfo===W.containerInfo&&q.stateNode.implementation===W.implementation){l(X,q.sibling),we=b(q,W.children||[]),we.return=X,X=we;break e}else{l(X,q);break}else o(X,q);q=q.sibling}we=gc(W,X.mode,we),we.return=X,X=we}return T(X);case ie:return Ye=W._init,W=Ye(W._payload),Kt(X,q,W,we)}if(Xe(W))return ct(X,q,W,we);if(ze(W)){if(Ye=ze(W),typeof Ye!="function")throw Error(r(150));return W=Ye.call(W),st(X,q,W,we)}if(typeof W.then=="function")return Kt(X,q,md(W),we);if(W.$$typeof===ye)return Kt(X,q,vc(X,W),we);Ic(X,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,q!==null&&q.tag===6?(l(X,q.sibling),we=b(q,W),we.return=X,X=we):(l(X,q),we=ls(W,X.mode,we),we.return=X,X=we),T(X)):l(X,q)}return function(X,q,W,we){try{Nc=0;var Ye=Kt(X,q,W,we);return ti=null,Ye}catch(rt){if(rt===fl||rt===Ec)throw rt;var kt=Za(29,rt,null,X.mode);return kt.lanes=we,kt.return=X,kt}finally{}}}var ea=Sm(!0),wm=Sm(!1),Hn=P(null),fo=null;function ai(a){var o=a.alternate;ne($n,$n.current&1),ne(Hn,a),fo===null&&(o===null||wr.current!==null||o.memoizedState!==null)&&(fo=a)}function Em(a){if(a.tag===22){if(ne($n,$n.current),ne(Hn,a),fo===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(fo=a)}}else Ta()}function Ta(){ne($n,$n.current),ne(Hn,Hn.current)}function go(a){fe(Hn),fo===a&&(fo=null),fe($n)}var $n=P(0);function bi(a){for(var o=a;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||cb(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function zg(a,o,l,f){o=a.memoizedState,l=l(f,o),l=l==null?o:k({},o,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var ps={enqueueSetState:function(a,o,l){a=a._reactInternals;var f=Si(),b=Sr(f);b.payload=o,l!=null&&(b.callback=l),o=Ja(a,b,f),o!==null&&(li(o,a,f),gl(o,a,f))},enqueueReplaceState:function(a,o,l){a=a._reactInternals;var f=Si(),b=Sr(f);b.tag=1,b.payload=o,l!=null&&(b.callback=l),o=Ja(a,b,f),o!==null&&(li(o,a,f),gl(o,a,f))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var l=Si(),f=Sr(l);f.tag=2,o!=null&&(f.callback=o),o=Ja(a,f,l),o!==null&&(li(o,a,l),gl(o,a,l))}};function Cm(a,o,l,f,b,y,T){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,y,T):o.prototype&&o.prototype.isPureReactComponent?!gr(l,f)||!gr(b,y):!0}function Uc(a,o,l,f){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==a&&ps.enqueueReplaceState(o,o.state,null)}function ji(a,o){var l=o;if("ref"in o){l={};for(var f in o)f!=="ref"&&(l[f]=o[f])}if(a=a.defaultProps){l===o&&(l=k({},l));for(var b in a)l[b]===void 0&&(l[b]=a[b])}return l}var vd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function Tm(a){vd(a)}function Pc(a){console.error(a)}function km(a){vd(a)}function xl(a,o){try{var l=a.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function Mm(a,o,l){try{var f=a.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Dg(a,o,l){return l=Sr(l),l.tag=3,l.payload={element:null},l.callback=function(){xl(a,o)},l}function my(a){return a=Sr(a),a.tag=3,a}function Am(a,o,l,f){var b=l.type.getDerivedStateFromError;if(typeof b=="function"){var y=f.value;a.payload=function(){return b(y)},a.callback=function(){Mm(o,l,f)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(a.callback=function(){Mm(o,l,f),typeof b!="function"&&(Uo===null?Uo=new Set([this]):Uo.add(this));var O=f.stack;this.componentDidCatch(f.value,{componentStack:O!==null?O:""})})}function vi(a,o,l,f,b){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=l.alternate,o!==null&&Zu(o,l,b,!0),l=Hn.current,l!==null){switch(l.tag){case 13:return fo===null?ks():l.alternate===null&&Nn===0&&(Nn=3),l.flags&=-257,l.flags|=65536,l.lanes=b,f===gg?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([f]):o.add(f),kd(a,f,b)),!1;case 22:return l.flags|=65536,f===gg?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([f]):l.add(f)),kd(a,f,b)),!1}throw Error(r(435,l.tag))}return kd(a,f,b),ks(),!1}if(Tt)return o=Hn.current,o!==null?(!(o.flags&65536)&&(o.flags|=256),o.flags|=65536,o.lanes=b,f!==Yu&&(a=Error(r(422),{cause:f}),bc(pi(a,l)))):(f!==Yu&&(o=Error(r(423),{cause:f}),bc(pi(o,l))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,f=pi(f,l),b=Dg(a.stateNode,f,b),td(a,b),Nn!==4&&(Nn=2)),!1;var y=Error(r(520),{cause:f});if(y=pi(y,l),Ed===null?Ed=[y]:Ed.push(y),Nn!==4&&(Nn=2),o===null)return!0;f=pi(f,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,a=b&-b,l.lanes|=a,a=Dg(l.stateNode,f,a),td(l,a),!1;case 1:if(o=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Uo===null||!Uo.has(y))))return l.flags|=65536,b&=-b,l.lanes|=b,b=my(b),Am(b,a,l,f),td(l,b),!1}l=l.return}while(l!==null);return!1}var Rm=Error(r(461)),zt=!1;function ta(a,o,l,f){o.child=a===null?wm(o,null,l,f):ea(o,a.child,l,f)}function Om(a,o,l,f,b){l=l.render;var y=o.ref;if("ref"in f){var T={};for(var O in f)O!=="ref"&&(T[O]=f[O])}else T=f;return us(o),f=vg(a,o,l,T,y,b),O=yg(),a!==null&&!zt?(xg(a,o,b),ho(a,o,b)):(Tt&&O&&Vu(o),o.flags|=1,ta(a,o,f,b),o.child)}function by(a,o,l,f,b){if(a===null){var y=l.type;return typeof y=="function"&&!rg(y)&&y.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=y,Cr(a,o,y,f,b)):(a=Ct(l.type,null,f,o,o.mode,b),a.ref=o.ref,a.return=o,o.child=a)}if(y=a.child,!_g(a,b)){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:gr,l(T,f)&&a.ref===o.ref)return ho(a,o,b)}return o.flags|=1,a=ao(y,f),a.ref=o.ref,a.return=o,o.child=a}function Cr(a,o,l,f,b){if(a!==null){var y=a.memoizedProps;if(gr(y,f)&&a.ref===o.ref)if(zt=!1,o.pendingProps=f=y,_g(a,b))a.flags&131072&&(zt=!0);else return o.lanes=a.lanes,ho(a,o,b)}return Ig(a,o,l,f,b)}function Sl(a,o,l){var f=o.pendingProps,b=f.children,y=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if(o.flags&128){if(f=y!==null?y.baseLanes|l:l,a!==null){for(b=o.child=a.child,y=0;b!==null;)y=y|b.lanes|b.childLanes,b=b.sibling;o.childLanes=y&~f}else o.childLanes=0,o.child=null;return Ng(a,o,f,l)}if(l&536870912)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&wc(o,y!==null?y.cachePool:null),y!==null?tm(o,y):Yn(),Em(o);else return o.lanes=o.childLanes=536870912,Ng(a,o,y!==null?y.baseLanes|l:l,l)}else y!==null?(wc(o,y.cachePool),tm(o,y),Ta(),o.memoizedState=null):(a!==null&&wc(o,null),Yn(),Ta());return ta(a,o,b,l),o.child}function Ng(a,o,l,f){var b=Sc();return b=b===null?null:{parent:Bn._currentValue,pool:b},o.memoizedState={baseLanes:l,cachePool:b},a!==null&&wc(o,null),Yn(),Em(o),a!==null&&Zu(a,o,f,!0),null}function Tr(a,o){var l=o.ref;if(l===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(a===null||a.ref!==l)&&(o.flags|=4194816)}}function Ig(a,o,l,f,b){return us(o),l=vg(a,o,l,f,void 0,b),f=yg(),a!==null&&!zt?(xg(a,o,b),ho(a,o,b)):(Tt&&f&&Vu(o),o.flags|=1,ta(a,o,l,b),o.child)}function zm(a,o,l,f,b,y){return us(o),o.updateQueue=null,l=gs(o,f,l,b),nm(a),f=yg(),a!==null&&!zt?(xg(a,o,y),ho(a,o,y)):(Tt&&f&&Vu(o),o.flags|=1,ta(a,o,l,y),o.child)}function Dm(a,o,l,f,b){if(us(o),o.stateNode===null){var y=ul,T=l.contextType;typeof T=="object"&&T!==null&&(y=ga(T)),y=new l(f,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ps,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=f,y.state=o.memoizedState,y.refs={},ed(o),T=l.contextType,y.context=typeof T=="object"&&T!==null?ga(T):ul,y.state=o.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(zg(o,l,T,f),y.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&ps.enqueueReplaceState(y,y.state,null),kc(o,f,y,b),nd(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(a===null){y=o.stateNode;var O=o.memoizedProps,j=ji(l,O);y.props=j;var K=y.context,Se=l.contextType;T=ul,typeof Se=="object"&&Se!==null&&(T=ga(Se));var Ce=l.getDerivedStateFromProps;Se=typeof Ce=="function"||typeof y.getSnapshotBeforeUpdate=="function",O=o.pendingProps!==O,Se||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(O||K!==T)&&Uc(o,y,f,T),xr=!1;var te=o.memoizedState;y.state=te,kc(o,f,y,b),nd(),K=o.memoizedState,O||te!==K||xr?(typeof Ce=="function"&&(zg(o,l,Ce,f),K=o.memoizedState),(j=xr||Cm(o,l,j,f,te,K,T))?(Se||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=K),y.props=f,y.state=K,y.context=T,f=j):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{y=o.stateNode,pg(a,o),T=o.memoizedProps,Se=ji(l,T),y.props=Se,Ce=o.pendingProps,te=y.context,K=l.contextType,j=ul,typeof K=="object"&&K!==null&&(j=ga(K)),O=l.getDerivedStateFromProps,(K=typeof O=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==Ce||te!==j)&&Uc(o,y,f,j),xr=!1,te=o.memoizedState,y.state=te,kc(o,f,y,b),nd();var le=o.memoizedState;T!==Ce||te!==le||xr||a!==null&&a.dependencies!==null&&Qu(a.dependencies)?(typeof O=="function"&&(zg(o,l,O,f),le=o.memoizedState),(Se=xr||Cm(o,l,Se,f,te,le,j)||a!==null&&a.dependencies!==null&&Qu(a.dependencies))?(K||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,le,j),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,le,j)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===a.memoizedProps&&te===a.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&te===a.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=le),y.props=f,y.state=le,y.context=j,f=Se):(typeof y.componentDidUpdate!="function"||T===a.memoizedProps&&te===a.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&te===a.memoizedState||(o.flags|=1024),f=!1)}return y=f,Tr(a,o),f=(o.flags&128)!==0,y||f?(y=o.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,a!==null&&f?(o.child=ea(o,a.child,null,b),o.child=ea(o,null,l,b)):ta(a,o,l,b),o.memoizedState=y.state,a=o.child):a=ho(a,o,b),a}function Ug(a,o,l,f){return mc(),o.flags|=256,ta(a,o,l,f),o.child}var yd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pg(a){return{baseLanes:a,cachePool:Ju()}}function Nm(a,o,l){return a=a!==null?a.childLanes&~l:0,o&&(a|=Zn),a}function vy(a,o,l){var f=o.pendingProps,b=!1,y=(o.flags&128)!==0,T;if((T=y)||(T=a!==null&&a.memoizedState===null?!1:($n.current&2)!==0),T&&(b=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,a===null){if(Tt){if(b?ai(o):Ta(),Tt){var O=on,j;if(j=O){e:{for(j=O,O=Pa;j.nodeType!==8;){if(!O){O=null;break e}if(j=xo(j.nextSibling),j===null){O=null;break e}}O=j}O!==null?(o.memoizedState={dehydrated:O,treeContext:mr!==null?{id:io,overflow:oo}:null,retryLane:536870912,hydrationErrors:null},j=Za(18,null,null,0),j.stateNode=O,j.return=o,o.child=j,On=o,on=null,j=!0):j=!1}j||ro(o)}if(O=o.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return cb(O)?o.lanes=32:o.lanes=536870912,null;go(o)}return O=f.children,f=f.fallback,b?(Ta(),b=o.mode,O=xd({mode:"hidden",children:O},b),f=Re(f,b,l,null),O.return=o,f.return=o,O.sibling=f,o.child=O,b=o.child,b.memoizedState=Pg(l),b.childLanes=Nm(a,T,l),o.memoizedState=yd,f):(ai(o),$g(o,O))}if(j=a.memoizedState,j!==null&&(O=j.dehydrated,O!==null)){if(y)o.flags&256?(ai(o),o.flags&=-257,o=Im(a,o,l)):o.memoizedState!==null?(Ta(),o.child=a.child,o.flags|=128,o=null):(Ta(),b=f.fallback,O=o.mode,f=xd({mode:"visible",children:f.children},O),b=Re(b,O,l,null),b.flags|=2,f.return=o,b.return=o,f.sibling=b,o.child=f,ea(o,a.child,null,l),f=o.child,f.memoizedState=Pg(l),f.childLanes=Nm(a,T,l),o.memoizedState=yd,o=b);else if(ai(o),cb(O)){if(T=O.nextSibling&&O.nextSibling.dataset,T)var K=T.dgst;T=K,f=Error(r(419)),f.stack="",f.digest=T,bc({value:f,source:null,stack:null}),o=Im(a,o,l)}else if(zt||Zu(a,o,l,!1),T=(l&a.childLanes)!==0,zt||T){if(T=sn,T!==null&&(f=l&-l,f=f&42?1:pt(f),f=f&(T.suspendedLanes|l)?0:f,f!==0&&f!==j.retryLane))throw j.retryLane=f,pr(a,f),li(T,a,f),Rm;O.data==="$?"||ks(),o=Im(a,o,l)}else O.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=j.treeContext,on=xo(O.nextSibling),On=o,Tt=!0,br=null,Pa=!1,a!==null&&(Qa[Ui++]=io,Qa[Ui++]=oo,Qa[Ui++]=mr,io=a.id,oo=a.overflow,mr=o),o=$g(o,f.children),o.flags|=4096);return o}return b?(Ta(),b=f.fallback,O=o.mode,j=a.child,K=j.sibling,f=ao(j,{mode:"hidden",children:f.children}),f.subtreeFlags=j.subtreeFlags&65011712,K!==null?b=ao(K,b):(b=Re(b,O,l,null),b.flags|=2),b.return=o,f.return=o,f.sibling=b,o.child=f,f=b,b=o.child,O=a.child.memoizedState,O===null?O=Pg(l):(j=O.cachePool,j!==null?(K=Bn._currentValue,j=j.parent!==K?{parent:K,pool:K}:j):j=Ju(),O={baseLanes:O.baseLanes|l,cachePool:j}),b.memoizedState=O,b.childLanes=Nm(a,T,l),o.memoizedState=yd,f):(ai(o),l=a.child,a=l.sibling,l=ao(l,{mode:"visible",children:f.children}),l.return=o,l.sibling=null,a!==null&&(T=o.deletions,T===null?(o.deletions=[a],o.flags|=16):T.push(a)),o.child=l,o.memoizedState=null,l)}function $g(a,o){return o=xd({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function xd(a,o){return a=Za(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Im(a,o,l){return ea(o,a.child,null,l),a=$g(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function wl(a,o,l){a.lanes|=o;var f=a.alternate;f!==null&&(f.lanes|=o),ug(a.return,o,l)}function $c(a,o,l,f,b){var y=a.memoizedState;y===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:b}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=l,y.tailMode=b)}function Um(a,o,l){var f=o.pendingProps,b=f.revealOrder,y=f.tail;if(ta(a,o,f.children,l),f=$n.current,f&2)f=f&1|2,o.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&wl(a,l,o);else if(a.tag===19)wl(a,l,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(ne($n,f),b){case"forwards":for(l=o.child,b=null;l!==null;)a=l.alternate,a!==null&&bi(a)===null&&(b=l),l=l.sibling;l=b,l===null?(b=o.child,o.child=null):(b=l.sibling,l.sibling=null),$c(o,!1,b,l,y);break;case"backwards":for(l=null,b=o.child,o.child=null;b!==null;){if(a=b.alternate,a!==null&&bi(a)===null){o.child=b;break}a=b.sibling,b.sibling=l,l=b,b=a}$c(o,!0,l,null,y);break;case"together":$c(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ho(a,o,l){if(a!==null&&(o.dependencies=a.dependencies),ws|=o.lanes,!(l&o.childLanes))if(a!==null){if(Zu(a,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,l=ao(a,a.pendingProps),o.child=l,l.return=o;a.sibling!==null;)a=a.sibling,l=l.sibling=ao(a,a.pendingProps),l.return=o;l.sibling=null}return o.child}function _g(a,o){return a.lanes&o?!0:(a=a.dependencies,!!(a!==null&&Qu(a)))}function yy(a,o,l){switch(o.tag){case 3:Me(o,o.stateNode.containerInfo),Oo(o,Bn,a.memoizedState.cache),mc();break;case 27:case 5:it(o);break;case 4:Me(o,o.stateNode.containerInfo);break;case 10:Oo(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(ai(o),o.flags|=128,null):l&o.child.childLanes?vy(a,o,l):(ai(o),a=ho(a,o,l),a!==null?a.sibling:null);ai(o);break;case 19:var b=(a.flags&128)!==0;if(f=(l&o.childLanes)!==0,f||(Zu(a,o,l,!1),f=(l&o.childLanes)!==0),b){if(f)return Um(a,o,l);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ne($n,$n.current),f)break;return null;case 22:case 23:return o.lanes=0,Sl(a,o,l);case 24:Oo(o,Bn,a.memoizedState.cache)}return ho(a,o,l)}function Pm(a,o,l){if(a!==null)if(a.memoizedProps!==o.pendingProps)zt=!0;else{if(!_g(a,l)&&!(o.flags&128))return zt=!1,yy(a,o,l);zt=!!(a.flags&131072)}else zt=!1,Tt&&o.flags&1048576&&Wt(o,Gu,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var f=o.elementType,b=f._init;if(f=b(f._payload),o.type=f,typeof f=="function")rg(f)?(a=ji(f,a),o.tag=1,o=Dm(null,o,f,a,l)):(o.tag=0,o=Ig(null,o,f,a,l));else{if(f!=null){if(b=f.$$typeof,b===ce){o.tag=11,o=Om(null,o,f,a,l);break e}else if(b===he){o.tag=14,o=by(null,o,f,a,l);break e}}throw o=Ge(f)||f,Error(r(306,o,""))}}return o;case 0:return Ig(a,o,o.type,o.pendingProps,l);case 1:return f=o.type,b=ji(f,o.pendingProps),Dm(a,o,f,b,l);case 3:e:{if(Me(o,o.stateNode.containerInfo),a===null)throw Error(r(387));f=o.pendingProps;var y=o.memoizedState;b=y.element,pg(a,o),kc(o,f,null,l);var T=o.memoizedState;if(f=T.cache,Oo(o,Bn,f),f!==y.cache&&dg(o,[Bn],l,!0),nd(),f=T.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=Ug(a,o,f,l);break e}else if(f!==b){b=pi(Error(r(424)),o),bc(b),o=Ug(a,o,f,l);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(on=xo(a.firstChild),On=o,Tt=!0,br=null,Pa=!0,l=wm(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(mc(),f===b){o=ho(a,o,l);break e}ta(a,o,f,l)}o=o.child}return o;case 26:return Tr(a,o),a===null?(l=fh(o.type,null,o.pendingProps,null))?o.memoizedState=l:Tt||(l=o.type,a=o.pendingProps,f=Jc(Te.current).createElement(l),f[dn]=o,f[wa]=a,oe(f,l,a),Pn(f),o.stateNode=f):o.memoizedState=fh(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return it(o),a===null&&Tt&&(f=o.stateNode=ma(o.type,o.pendingProps,Te.current),On=o,Pa=!0,b=on,pa(o.type)?(db=b,on=xo(f.firstChild)):on=b),ta(a,o,o.pendingProps.children,l),Tr(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Tt&&((b=f=on)&&(f=lb(f,o.type,o.pendingProps,Pa),f!==null?(o.stateNode=f,On=o,on=xo(f.firstChild),Pa=!1,b=!0):b=!1),b||ro(o)),it(o),b=o.type,y=o.pendingProps,T=a!==null?a.memoizedProps:null,f=y.children,Rl(b,y)?f=null:T!==null&&Rl(b,T)&&(o.flags|=32),o.memoizedState!==null&&(b=vg(a,o,sy,null,null,l),ba._currentValue=b),Tr(a,o),ta(a,o,f,l),o.child;case 6:return a===null&&Tt&&((a=l=on)&&(l=Wc(l,o.pendingProps,Pa),l!==null?(o.stateNode=l,On=o,on=null,a=!0):a=!1),a||ro(o)),null;case 13:return vy(a,o,l);case 4:return Me(o,o.stateNode.containerInfo),f=o.pendingProps,a===null?o.child=ea(o,null,f,l):ta(a,o,f,l),o.child;case 11:return Om(a,o,o.type,o.pendingProps,l);case 7:return ta(a,o,o.pendingProps,l),o.child;case 8:return ta(a,o,o.pendingProps.children,l),o.child;case 12:return ta(a,o,o.pendingProps.children,l),o.child;case 10:return f=o.pendingProps,Oo(o,o.type,f.value),ta(a,o,f.children,l),o.child;case 9:return b=o.type._context,f=o.pendingProps.children,us(o),b=ga(b),f=f(b),o.flags|=1,ta(a,o,f,l),o.child;case 14:return by(a,o,o.type,o.pendingProps,l);case 15:return Cr(a,o,o.type,o.pendingProps,l);case 19:return Um(a,o,l);case 31:return f=o.pendingProps,l=o.mode,f={mode:f.mode,children:f.children},a===null?(l=xd(f,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=ao(a.child,f),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return Sl(a,o,l);case 24:return us(o),f=ga(Bn),a===null?(b=Sc(),b===null&&(b=sn,y=Xp(),b.pooledCache=y,y.refCount++,y!==null&&(b.pooledCacheLanes|=l),b=y),o.memoizedState={parent:f,cache:b},ed(o),Oo(o,Bn,b)):(a.lanes&l&&(pg(a,o),kc(o,null,null,l),nd()),b=a.memoizedState,y=o.memoizedState,b.parent!==f?(b={parent:f,cache:f},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),Oo(o,Bn,f)):(f=y.cache,Oo(o,Bn,f),f!==b.cache&&dg(o,[Bn],l,!0))),ta(a,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function kr(a){a.flags|=4}function $m(a,o){if(o.type!=="stylesheet"||o.state.loading&4)a.flags&=-16777217;else if(a.flags|=16777216,!pb(o)){if(o=Hn.current,o!==null&&((Lt&4194048)===Lt?fo!==null:(Lt&62914560)!==Lt&&!(Lt&536870912)||o!==fo))throw Tc=gg,Wu;a.flags|=8192}}function ms(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Ie():536870912,a.lanes|=o,Fc|=o)}function _c(a,o){if(!Tt)switch(a.tailMode){case"hidden":o=a.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function Cn(a){var o=a.alternate!==null&&a.alternate.child===a.child,l=0,f=0;if(o)for(var b=a.child;b!==null;)l|=b.lanes|b.childLanes,f|=b.subtreeFlags&65011712,f|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)l|=b.lanes|b.childLanes,f|=b.subtreeFlags,f|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=f,a.childLanes=l,o}function rn(a,o,l){var f=o.pendingProps;switch(dl(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(o),null;case 1:return Cn(o),null;case 3:return l=o.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),zo(Bn),$e(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(pc(o)?kr(o):a===null||a.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Vp())),Cn(o),null;case 26:return l=o.memoizedState,a===null?(kr(o),l!==null?(Cn(o),$m(o,l)):(Cn(o),o.flags&=-16777217)):l?l!==a.memoizedState?(kr(o),Cn(o),$m(o,l)):(Cn(o),o.flags&=-16777217):(a.memoizedProps!==f&&kr(o),Cn(o),o.flags&=-16777217),null;case 27:Ke(o),l=Te.current;var b=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==f&&kr(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Cn(o),null}a=ke.current,pc(o)?lg(o):(a=ma(b,f,l),o.stateNode=a,kr(o))}return Cn(o),null;case 5:if(Ke(o),l=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&kr(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Cn(o),null}if(a=ke.current,pc(o))lg(o);else{switch(b=Jc(Te.current),a){case 1:a=b.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:a=b.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":a=b.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":a=b.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?b.createElement("select",{is:f.is}):b.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?b.createElement(l,{is:f.is}):b.createElement(l)}}a[dn]=o,a[wa]=f;e:for(b=o.child;b!==null;){if(b.tag===5||b.tag===6)a.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===o)break e;for(;b.sibling===null;){if(b.return===null||b.return===o)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}o.stateNode=a;e:switch(oe(a,l,f),l){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&kr(o)}}return Cn(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==f&&kr(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(a=Te.current,pc(o)){if(a=o.stateNode,l=o.memoizedProps,f=null,b=On,b!==null)switch(b.tag){case 27:case 5:f=b.memoizedProps}a[dn]=o,a=!!(a.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||jy(a.nodeValue,l)),a||ro(o)}else a=Jc(a).createTextNode(f),a[dn]=o,o.stateNode=a}return Cn(o),null;case 13:if(f=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=pc(o),f!==null&&f.dehydrated!==null){if(a===null){if(!b)throw Error(r(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[dn]=o}else mc(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Cn(o),b=!1}else b=Vp(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(go(o),o):(go(o),null)}if(go(o),o.flags&128)return o.lanes=l,o;if(l=f!==null,a=a!==null&&a.memoizedState!==null,l){f=o.child,b=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(b=f.alternate.memoizedState.cachePool.pool);var y=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==b&&(f.flags|=2048)}return l!==a&&l&&(o.child.flags|=8192),ms(o,o.updateQueue),Cn(o),null;case 4:return $e(),a===null&&Od(o.stateNode.containerInfo),Cn(o),null;case 10:return zo(o.type),Cn(o),null;case 19:if(fe($n),b=o.memoizedState,b===null)return Cn(o),null;if(f=(o.flags&128)!==0,y=b.rendering,y===null)if(f)_c(b,!1);else{if(Nn!==0||a!==null&&a.flags&128)for(a=o.child;a!==null;){if(y=bi(a),y!==null){for(o.flags|=128,_c(b,!1),a=y.updateQueue,o.updateQueue=a,ms(o,a),o.subtreeFlags=0,a=l,l=o.child;l!==null;)sg(l,a),l=l.sibling;return ne($n,$n.current&1|2),o.child}a=a.sibling}b.tail!==null&&ot()>Fg&&(o.flags|=128,f=!0,_c(b,!1),o.lanes=4194304)}else{if(!f)if(a=bi(y),a!==null){if(o.flags|=128,f=!0,a=a.updateQueue,o.updateQueue=a,ms(o,a),_c(b,!0),b.tail===null&&b.tailMode==="hidden"&&!y.alternate&&!Tt)return Cn(o),null}else 2*ot()-b.renderingStartTime>Fg&&l!==536870912&&(o.flags|=128,f=!0,_c(b,!1),o.lanes=4194304);b.isBackwards?(y.sibling=o.child,o.child=y):(a=b.last,a!==null?a.sibling=y:o.child=y,b.last=y)}return b.tail!==null?(o=b.tail,b.rendering=o,b.tail=o.sibling,b.renderingStartTime=ot(),o.sibling=null,a=$n.current,ne($n,f?a&1|2:a&1),o):(Cn(o),null);case 22:case 23:return go(o),Ac(),f=o.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?l&536870912&&!(o.flags&128)&&(Cn(o),o.subtreeFlags&6&&(o.flags|=8192)):Cn(o),l=o.updateQueue,l!==null&&ms(o,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==l&&(o.flags|=2048),a!==null&&fe(yr),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),zo(Bn),Cn(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function _m(a,o){switch(dl(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return zo(Bn),$e(),a=o.flags,a&65536&&!(a&128)?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return Ke(o),null;case 13:if(go(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));mc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return fe($n),null;case 4:return $e(),null;case 10:return zo(o.type),null;case 22:case 23:return go(o),Ac(),a!==null&&fe(yr),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return zo(Bn),null;case 25:return null;default:return null}}function xy(a,o){switch(dl(o),o.tag){case 3:zo(Bn),$e();break;case 26:case 27:case 5:Ke(o);break;case 4:$e();break;case 13:go(o);break;case 19:fe($n);break;case 10:zo(o.type);break;case 22:case 23:go(o),Ac(),a!==null&&fe(yr);break;case 24:zo(Bn)}}function jc(a,o){try{var l=o.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var b=f.next;l=b;do{if((l.tag&a)===a){f=void 0;var y=l.create,T=l.inst;f=y(),T.destroy=f}l=l.next}while(l!==b)}}catch(O){ln(o,o.return,O)}}function bs(a,o,l){try{var f=o.updateQueue,b=f!==null?f.lastEffect:null;if(b!==null){var y=b.next;f=y;do{if((f.tag&a)===a){var T=f.inst,O=T.destroy;if(O!==void 0){T.destroy=void 0,b=o;var j=l,K=O;try{K()}catch(Se){ln(b,j,Se)}}}f=f.next}while(f!==y)}}catch(Se){ln(o,o.return,Se)}}function Sy(a){var o=a.updateQueue;if(o!==null){var l=a.stateNode;try{mg(o,l)}catch(f){ln(a,a.return,f)}}}function jg(a,o,l){l.props=ji(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(f){ln(a,o,f)}}function Lc(a,o){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof l=="function"?a.refCleanup=l(f):l.current=f}}catch(b){ln(a,o,b)}}function po(a,o){var l=a.ref,f=a.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(b){ln(a,o,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(b){ln(a,o,b)}else l.current=null}function jm(a){var o=a.type,l=a.memoizedProps,f=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(b){ln(a,a.return,b)}}function El(a,o,l){try{var f=a.stateNode;Qt(f,a.type,l,o),f[wa]=o}catch(b){ln(a,a.return,b)}}function wy(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&pa(a.type)||a.tag===4}function Lm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||wy(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&pa(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Li(a,o,l){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(a),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Dd));else if(f!==4&&(f===27&&pa(a.type)&&(l=a.stateNode,o=null),a=a.child,a!==null))for(Li(a,o,l),a=a.sibling;a!==null;)Li(a,o,l),a=a.sibling}function vs(a,o,l){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?l.insertBefore(a,o):l.appendChild(a);else if(f!==4&&(f===27&&pa(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(vs(a,o,l),a=a.sibling;a!==null;)vs(a,o,l),a=a.sibling}function Ey(a){var o=a.stateNode,l=a.memoizedProps;try{for(var f=a.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);oe(o,f,l),o[dn]=a,o[wa]=l}catch(y){ln(a,a.return,y)}}var mo=!1,Dn=!1,Lg=!1,Bm=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function Cy(a,o){if(a=a.containerInfo,rb=Ld,a=Hu(a),ng(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var b=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,O=-1,j=-1,K=0,Se=0,Ce=a,te=null;t:for(;;){for(var le;Ce!==l||b!==0&&Ce.nodeType!==3||(O=T+b),Ce!==y||f!==0&&Ce.nodeType!==3||(j=T+f),Ce.nodeType===3&&(T+=Ce.nodeValue.length),(le=Ce.firstChild)!==null;)te=Ce,Ce=le;for(;;){if(Ce===a)break t;if(te===l&&++K===b&&(O=T),te===y&&++Se===f&&(j=T),(le=Ce.nextSibling)!==null)break;Ce=te,te=Ce.parentNode}Ce=le}l=O===-1||j===-1?null:{start:O,end:j}}else l=null}l=l||{start:0,end:0}}else l=null;for(Nd={focusedElem:a,selectionRange:l},Ld=!1,Fn=o;Fn!==null;)if(o=Fn,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,Fn=a;else for(;Fn!==null;){switch(o=Fn,y=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if(a&1024&&y!==null){a=void 0,l=o,b=y.memoizedProps,y=y.memoizedState,f=l.stateNode;try{var ct=ji(l.type,b,l.elementType===l.type);a=f.getSnapshotBeforeUpdate(ct,y),f.__reactInternalSnapshotBeforeUpdate=a}catch(st){ln(l,l.return,st)}}break;case 3:if(a&1024){if(a=o.stateNode.containerInfo,l=a.nodeType,l===9)Id(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Id(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(a&1024)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,Fn=a;break}Fn=o.return}}function Bg(a,o,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:Mr(a,l),f&4&&jc(5,l);break;case 1:if(Mr(a,l),f&4)if(a=l.stateNode,o===null)try{a.componentDidMount()}catch(T){ln(l,l.return,T)}else{var b=ji(l.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(b,o,a.__reactInternalSnapshotBeforeUpdate)}catch(T){ln(l,l.return,T)}}f&64&&Sy(l),f&512&&Lc(l,l.return);break;case 3:if(Mr(a,l),f&64&&(a=l.updateQueue,a!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{mg(a,o)}catch(T){ln(l,l.return,T)}}break;case 27:o===null&&f&4&&Ey(l);case 26:case 5:Mr(a,l),o===null&&f&4&&jm(l),f&512&&Lc(l,l.return);break;case 12:Mr(a,l);break;case 13:Mr(a,l),f&4&&Dt(a,l),f&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=Py.bind(null,l),ub(a,l))));break;case 22:if(f=l.memoizedState!==null||mo,!f){o=o!==null&&o.memoizedState!==null||Dn,b=mo;var y=Dn;mo=f,(Dn=o)&&!y?xn(a,l,(l.subtreeFlags&8772)!==0):Mr(a,l),mo=b,Dn=y}break;case 30:break;default:Mr(a,l)}}function Hm(a){var o=a.alternate;o!==null&&(a.alternate=null,Hm(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&nt(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var yn=null,ii=!1;function Bi(a,o,l){for(l=l.child;l!==null;)Fm(a,o,l),l=l.sibling}function Fm(a,o,l){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Ne,l)}catch{}switch(l.tag){case 26:Dn||po(l,o),Bi(a,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Dn||po(l,o);var f=yn,b=ii;pa(l.type)&&(yn=l.stateNode,ii=!1),Bi(a,o,l),He(l.stateNode),yn=f,ii=b;break;case 5:Dn||po(l,o);case 6:if(f=yn,b=ii,yn=null,Bi(a,o,l),yn=f,ii=b,yn!==null)if(ii)try{(yn.nodeType===9?yn.body:yn.nodeName==="HTML"?yn.ownerDocument.body:yn).removeChild(l.stateNode)}catch(y){ln(l,o,y)}else try{yn.removeChild(l.stateNode)}catch(y){ln(l,o,y)}break;case 18:yn!==null&&(ii?(a=yn,By(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),ou(a)):By(yn,l.stateNode));break;case 4:f=yn,b=ii,yn=l.stateNode.containerInfo,ii=!0,Bi(a,o,l),yn=f,ii=b;break;case 0:case 11:case 14:case 15:Dn||bs(2,l,o),Dn||bs(4,l,o),Bi(a,o,l);break;case 1:Dn||(po(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"&&jg(l,o,f)),Bi(a,o,l);break;case 21:Bi(a,o,l);break;case 22:Dn=(f=Dn)||l.memoizedState!==null,Bi(a,o,l),Dn=f;break;default:Bi(a,o,l)}}function Dt(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{ou(a)}catch(l){ln(o,o.return,l)}}function qm(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new Bm),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new Bm),o;default:throw Error(r(435,a.tag))}}function Sd(a,o){var l=qm(a);o.forEach(function(f){var b=jx.bind(null,a,f);l.has(f)||(l.add(f),f.then(b,b))})}function oi(a,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var b=l[f],y=a,T=o,O=T;e:for(;O!==null;){switch(O.tag){case 27:if(pa(O.type)){yn=O.stateNode,ii=!1;break e}break;case 5:yn=O.stateNode,ii=!1;break e;case 3:case 4:yn=O.stateNode.containerInfo,ii=!0;break e}O=O.return}if(yn===null)throw Error(r(160));Fm(y,T,b),yn=null,ii=!1,y=b.alternate,y!==null&&(y.return=null),b.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Bc(o,a),o=o.sibling}var yi=null;function Bc(a,o){var l=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:oi(o,a),ka(a),f&4&&(bs(3,a,a.return),jc(3,a),bs(5,a,a.return));break;case 1:oi(o,a),ka(a),f&512&&(Dn||l===null||po(l,l.return)),f&64&&mo&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var b=yi;if(oi(o,a),ka(a),f&512&&(Dn||l===null||po(l,l.return)),f&4){var y=l!==null?l.memoizedState:null;if(f=a.memoizedState,l===null)if(f===null)if(a.stateNode===null){e:{f=a.type,l=a.memoizedProps,b=b.ownerDocument||b;t:switch(f){case"title":y=b.getElementsByTagName("title")[0],(!y||y[Au]||y[dn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=b.createElement(f),b.head.insertBefore(y,b.querySelector("head > title"))),oe(y,f,l),y[dn]=a,Pn(y),f=y;break e;case"link":var T=tu("link","href",b).get(f+(l.href||""));if(T){for(var O=0;O<T.length;O++)if(y=T[O],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(O,1);break t}}y=b.createElement(f),oe(y,f,l),b.head.appendChild(y);break;case"meta":if(T=tu("meta","content",b).get(f+(l.content||""))){for(O=0;O<T.length;O++)if(y=T[O],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(O,1);break t}}y=b.createElement(f),oe(y,f,l),b.head.appendChild(y);break;default:throw Error(r(468,f))}y[dn]=a,Pn(y),f=y}a.stateNode=f}else hb(b,a.type,a.stateNode);else a.stateNode=gh(b,f,a.memoizedProps);else y!==f?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,f===null?hb(b,a.type,a.stateNode):gh(b,f,a.memoizedProps)):f===null&&a.stateNode!==null&&El(a,a.memoizedProps,l.memoizedProps)}break;case 27:oi(o,a),ka(a),f&512&&(Dn||l===null||po(l,l.return)),l!==null&&f&4&&El(a,a.memoizedProps,l.memoizedProps);break;case 5:if(oi(o,a),ka(a),f&512&&(Dn||l===null||po(l,l.return)),a.flags&32){b=a.stateNode;try{Qs(b,"")}catch(le){ln(a,a.return,le)}}f&4&&a.stateNode!=null&&(b=a.memoizedProps,El(a,b,l!==null?l.memoizedProps:b)),f&1024&&(Lg=!0);break;case 6:if(oi(o,a),ka(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,l=a.stateNode;try{l.nodeValue=f}catch(le){ln(a,a.return,le)}}break;case 3:if($d=null,b=yi,yi=aa(o.containerInfo),oi(o,a),yi=b,ka(a),f&4&&l!==null&&l.memoizedState.isDehydrated)try{ou(o.containerInfo)}catch(le){ln(a,a.return,le)}Lg&&(Lg=!1,Cl(a));break;case 4:f=yi,yi=aa(a.stateNode.containerInfo),oi(o,a),ka(a),yi=f;break;case 12:oi(o,a),ka(a);break;case 13:oi(o,a),ka(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Qm=ot()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Sd(a,f)));break;case 22:b=a.memoizedState!==null;var j=l!==null&&l.memoizedState!==null,K=mo,Se=Dn;if(mo=K||b,Dn=Se||j,oi(o,a),Dn=Se,mo=K,ka(a),f&8192)e:for(o=a.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(l===null||j||mo||Dn||Ar(a)),l=null,o=a;;){if(o.tag===5||o.tag===26){if(l===null){j=l=o;try{if(y=j.stateNode,b)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{O=j.stateNode;var Ce=j.memoizedProps.style,te=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;O.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(le){ln(j,j.return,le)}}}else if(o.tag===6){if(l===null){j=o;try{j.stateNode.nodeValue=b?"":j.memoizedProps}catch(le){ln(j,j.return,le)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=a.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,Sd(a,l))));break;case 19:oi(o,a),ka(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Sd(a,f)));break;case 30:break;case 21:break;default:oi(o,a),ka(a)}}function ka(a){var o=a.flags;if(o&2){try{for(var l,f=a.return;f!==null;){if(wy(f)){l=f;break}f=f.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var b=l.stateNode,y=Lm(a);vs(a,y,b);break;case 5:var T=l.stateNode;l.flags&32&&(Qs(T,""),l.flags&=-33);var O=Lm(a);vs(a,O,T);break;case 3:case 4:var j=l.stateNode.containerInfo,K=Lm(a);Li(a,K,j);break;default:throw Error(r(161))}}catch(Se){ln(a,a.return,Se)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function Cl(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;Cl(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Mr(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Bg(a,o.alternate,o),o=o.sibling}function Ar(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:bs(4,o,o.return),Ar(o);break;case 1:po(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&jg(o,o.return,l),Ar(o);break;case 27:He(o.stateNode);case 26:case 5:po(o,o.return),Ar(o);break;case 22:o.memoizedState===null&&Ar(o);break;case 30:Ar(o);break;default:Ar(o)}a=a.sibling}}function xn(a,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,b=a,y=o,T=y.flags;switch(y.tag){case 0:case 11:case 15:xn(b,y,l),jc(4,y);break;case 1:if(xn(b,y,l),f=y,b=f.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(K){ln(f,f.return,K)}if(f=y,b=f.updateQueue,b!==null){var O=f.stateNode;try{var j=b.shared.hiddenCallbacks;if(j!==null)for(b.shared.hiddenCallbacks=null,b=0;b<j.length;b++)Mc(j[b],O)}catch(K){ln(f,f.return,K)}}l&&T&64&&Sy(y),Lc(y,y.return);break;case 27:Ey(y);case 26:case 5:xn(b,y,l),l&&f===null&&T&4&&jm(y),Lc(y,y.return);break;case 12:xn(b,y,l);break;case 13:xn(b,y,l),l&&T&4&&Dt(b,y);break;case 22:y.memoizedState===null&&xn(b,y,l),Lc(y,y.return);break;case 30:break;default:xn(b,y,l)}o=o.sibling}}function Gm(a,o){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&ds(l))}function Hi(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&ds(a))}function bo(a,o,l,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Rr(a,o,l,f),o=o.sibling}function Rr(a,o,l,f){var b=o.flags;switch(o.tag){case 0:case 11:case 15:bo(a,o,l,f),b&2048&&jc(9,o);break;case 1:bo(a,o,l,f);break;case 3:bo(a,o,l,f),b&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&ds(a)));break;case 12:if(b&2048){bo(a,o,l,f),a=o.stateNode;try{var y=o.memoizedProps,T=y.id,O=y.onPostCommit;typeof O=="function"&&O(T,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(j){ln(o,o.return,j)}}else bo(a,o,l,f);break;case 13:bo(a,o,l,f);break;case 23:break;case 22:y=o.stateNode,T=o.alternate,o.memoizedState!==null?y._visibility&2?bo(a,o,l,f):ys(a,o):y._visibility&2?bo(a,o,l,f):(y._visibility|=2,Tl(a,o,l,f,(o.subtreeFlags&10256)!==0)),b&2048&&Gm(T,o);break;case 24:bo(a,o,l,f),b&2048&&Hi(o.alternate,o);break;default:bo(a,o,l,f)}}function Tl(a,o,l,f,b){for(b=b&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=a,T=o,O=l,j=f,K=T.flags;switch(T.tag){case 0:case 11:case 15:Tl(y,T,O,j,b),jc(8,T);break;case 23:break;case 22:var Se=T.stateNode;T.memoizedState!==null?Se._visibility&2?Tl(y,T,O,j,b):ys(y,T):(Se._visibility|=2,Tl(y,T,O,j,b)),b&&K&2048&&Gm(T.alternate,T);break;case 24:Tl(y,T,O,j,b),b&&K&2048&&Hi(T.alternate,T);break;default:Tl(y,T,O,j,b)}o=o.sibling}}function ys(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=a,f=o,b=f.flags;switch(f.tag){case 22:ys(l,f),b&2048&&Gm(f.alternate,f);break;case 24:ys(l,f),b&2048&&Hi(f.alternate,f);break;default:ys(l,f)}o=o.sibling}}var Ht=8192;function xs(a){if(a.subtreeFlags&Ht)for(a=a.child;a!==null;)na(a),a=a.sibling}function na(a){switch(a.tag){case 26:xs(a),a.flags&Ht&&a.memoizedState!==null&&qy(yi,a.memoizedState,a.memoizedProps);break;case 5:xs(a);break;case 3:case 4:var o=yi;yi=aa(a.stateNode.containerInfo),xs(a),yi=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=Ht,Ht=16777216,xs(a),Ht=o):xs(a));break;default:xs(a)}}function Ty(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Hc(a){var o=a.deletions;if(a.flags&16){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];Fn=f,xi(f,a)}Ty(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Hg(a),a=a.sibling}function Hg(a){switch(a.tag){case 0:case 11:case 15:Hc(a),a.flags&2048&&bs(9,a,a.return);break;case 3:Hc(a);break;case 12:Hc(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,wd(a)):Hc(a);break;default:Hc(a)}}function wd(a){var o=a.deletions;if(a.flags&16){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];Fn=f,xi(f,a)}Ty(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:bs(8,o,o.return),wd(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,wd(o));break;default:wd(o)}a=a.sibling}}function xi(a,o){for(;Fn!==null;){var l=Fn;switch(l.tag){case 0:case 11:case 15:bs(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:ds(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,Fn=f;else e:for(l=a;Fn!==null;){f=Fn;var b=f.sibling,y=f.return;if(Hm(f),f===l){Fn=null;break e}if(b!==null){b.return=y,Fn=b;break e}Fn=y}}}var ky={getCacheForType:function(a){var o=ga(Bn),l=o.data.get(a);return l===void 0&&(l=a(),o.data.set(a,l)),l}},Vm=typeof WeakMap=="function"?WeakMap:Map,en=0,sn=null,Nt=null,Lt=0,Ft=0,ri=null,Or=!1,Ss=!1,Ym=!1,zr=0,Nn=0,ws=0,Es=0,Xm=0,Zn=0,Fc=0,Ed=null,_a=null,Zm=!1,Qm=0,Fg=1/0,qg=null,Uo=null,ha=0,Cs=null,Ts=null,qc=0,si=0,Gg=null,Km=null,Gc=0,Vg=null;function Si(){if(en&2&&Lt!==0)return Lt&-Lt;if(Q.T!==null){var a=fs;return a!==0?a:nh()}return ko()}function My(){Zn===0&&(Zn=!(Lt&536870912)||Tt?Y():536870912);var a=Hn.current;return a!==null&&(a.flags|=32),Zn}function li(a,o,l){(a===sn&&(Ft===2||Ft===9)||a.cancelPendingCommit!==null)&&(vo(a,0),Dr(a,Lt,Zn,!1)),Ze(a,l),(!(en&2)||a!==sn)&&(a===sn&&(!(en&2)&&(Es|=l),Nn===4&&Dr(a,Lt,Zn,!1)),yo(a))}function Ay(a,o,l){if(en&6)throw Error(r(327));var f=!l&&(o&124)===0&&(o&a.expiredLanes)===0||Oi(a,o),b=f?Xg(a,o):kl(a,o,!0),y=f;do{if(b===0){Ss&&!f&&Dr(a,o,0,!1);break}else{if(l=a.current.alternate,y&&!Yg(l)){b=kl(a,o,!1),y=!1;continue}if(b===2){if(y=o,a.errorRecoveryDisabledLanes&y)var T=0;else T=a.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var O=a;b=Ed;var j=O.current.memoizedState.isDehydrated;if(j&&(vo(O,T).flags|=256),T=kl(O,T,!1),T!==2){if(Ym&&!j){O.errorRecoveryDisabledLanes|=y,Es|=y,b=4;break e}y=_a,_a=b,y!==null&&(_a===null?_a=y:_a.push.apply(_a,y))}b=T}if(y=!1,b!==2)continue}}if(b===1){vo(a,0),Dr(a,o,0,!0);break}e:{switch(f=a,y=b,y){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Dr(f,o,Zn,!Or);break e;case 2:_a=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(b=Qm+300-ot(),10<b)){if(Dr(f,o,Zn,!Or),Ga(f,0,!0)!==0)break e;f.timeoutHandle=_o(Vc.bind(null,f,l,_a,qg,Zm,o,Zn,Es,Fc,Or,y,2,-0,0),b);break e}Vc(f,l,_a,qg,Zm,o,Zn,Es,Fc,Or,y,0,-0,0)}}break}while(!0);yo(a)}function Vc(a,o,l,f,b,y,T,O,j,K,Se,Ce,te,le){if(a.timeoutHandle=-1,Ce=o.subtreeFlags,(Ce&8192||(Ce&16785408)===16785408)&&(nu={stylesheets:null,count:0,unsuspend:Fy},na(o),Ce=Gy(),Ce!==null)){a.cancelPendingCommit=Ce(zy.bind(null,a,o,y,l,f,b,T,O,j,Se,1,te,le)),Dr(a,y,T,!K);return}zy(a,o,y,l,f,b,T,O,j)}function Yg(a){for(var o=a;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var b=l[f],y=b.getSnapshot;b=b.value;try{if(!Ua(y(),b))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dr(a,o,l,f){o&=~Xm,o&=~Es,a.suspendedLanes|=o,a.pingedLanes&=~o,f&&(a.warmLanes|=o),f=a.expirationTimes;for(var b=o;0<b;){var y=31-hn(b),T=1<<y;f[y]=-1,b&=~T}l!==0&&vt(a,l,o)}function Cd(){return en&6?!0:(Nr(0),!1)}function Yc(){if(Nt!==null){if(Ft===0)var a=Nt.return;else a=Nt,so=vr=null,Rc(a),ti=null,Nc=0,a=Nt;for(;a!==null;)xy(a.alternate,a),a=a.return;Nt=null}}function vo(a,o){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,sb(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),Yc(),sn=a,Nt=l=ao(a.current,null),Lt=o,Ft=0,ri=null,Or=!1,Ss=Oi(a,o),Ym=!1,Fc=Zn=Xm=Es=ws=Nn=0,_a=Ed=null,Zm=!1,o&8&&(o|=o&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=o;0<f;){var b=31-hn(f),y=1<<b;o|=a[b],f&=~y}return zr=o,to(),l}function Xc(a,o){yt=null,Q.H=pd,o===fl||o===Ec?(o=hg(),Ft=3):o===Wu?(o=hg(),Ft=4):Ft=o===Rm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ri=o,Nt===null&&(Nn=1,xl(a,pi(o,a.current)))}function Jm(){var a=Q.H;return Q.H=pd,a===null?pd:a}function Ry(){var a=Q.A;return Q.A=ky,a}function ks(){Nn=4,Or||(Lt&4194048)!==Lt&&Hn.current!==null||(Ss=!0),!(ws&134217727)&&!(Es&134217727)||sn===null||Dr(sn,Lt,Zn,!1)}function kl(a,o,l){var f=en;en|=2;var b=Jm(),y=Ry();(sn!==a||Lt!==o)&&(qg=null,vo(a,o)),o=!1;var T=Nn;e:do try{if(Ft!==0&&Nt!==null){var O=Nt,j=ri;switch(Ft){case 8:Yc(),T=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(o=!0);var K=Ft;if(Ft=0,ri=null,Ml(a,O,j,K),l&&Ss){T=0;break e}break;default:K=Ft,Ft=0,ri=null,Ml(a,O,j,K)}}Oy(),T=Nn;break}catch(Se){Xc(a,Se)}while(!0);return o&&a.shellSuspendCounter++,so=vr=null,en=f,Q.H=b,Q.A=y,Nt===null&&(sn=null,Lt=0,to()),T}function Oy(){for(;Nt!==null;)Zg(Nt)}function Xg(a,o){var l=en;en|=2;var f=Jm(),b=Ry();sn!==a||Lt!==o?(qg=null,Fg=ot()+500,vo(a,o)):Ss=Oi(a,o);e:do try{if(Ft!==0&&Nt!==null){o=Nt;var y=ri;t:switch(Ft){case 1:Ft=0,ri=null,Ml(a,o,y,1);break;case 2:case 9:if(Kp(y)){Ft=0,ri=null,eb(o);break}o=function(){Ft!==2&&Ft!==9||sn!==a||(Ft=7),yo(a)},y.then(o,o);break e;case 3:Ft=7;break e;case 4:Ft=5;break e;case 7:Kp(y)?(Ft=0,ri=null,eb(o)):(Ft=0,ri=null,Ml(a,o,y,7));break;case 5:var T=null;switch(Nt.tag){case 26:T=Nt.memoizedState;case 5:case 27:var O=Nt;if(!T||pb(T)){Ft=0,ri=null;var j=O.sibling;if(j!==null)Nt=j;else{var K=O.return;K!==null?(Nt=K,Qg(K)):Nt=null}break t}}Ft=0,ri=null,Ml(a,o,y,5);break;case 6:Ft=0,ri=null,Ml(a,o,y,6);break;case 8:Yc(),Nn=6;break e;default:throw Error(r(462))}}Wm();break}catch(Se){Xc(a,Se)}while(!0);return so=vr=null,Q.H=f,Q.A=b,en=l,Nt!==null?0:(sn=null,Lt=0,to(),Nn)}function Wm(){for(;Nt!==null&&!ca();)Zg(Nt)}function Zg(a){var o=Pm(a.alternate,a,zr);a.memoizedProps=a.pendingProps,o===null?Qg(a):Nt=o}function eb(a){var o=a,l=o.alternate;switch(o.tag){case 15:case 0:o=zm(l,o,o.pendingProps,o.type,void 0,Lt);break;case 11:o=zm(l,o,o.pendingProps,o.type.render,o.ref,Lt);break;case 5:Rc(o);default:xy(l,o),o=Nt=sg(o,zr),o=Pm(l,o,zr)}a.memoizedProps=a.pendingProps,o===null?Qg(a):Nt=o}function Ml(a,o,l,f){so=vr=null,Rc(o),ti=null,Nc=0;var b=o.return;try{if(vi(a,b,o,l,Lt)){Nn=1,xl(a,pi(l,a.current)),Nt=null;return}}catch(y){if(b!==null)throw Nt=b,y;Nn=1,xl(a,pi(l,a.current)),Nt=null;return}o.flags&32768?(Tt||f===1?a=!0:Ss||Lt&536870912?a=!1:(Or=a=!0,(f===2||f===9||f===3||f===6)&&(f=Hn.current,f!==null&&f.tag===13&&(f.flags|=16384))),tb(o,a)):Qg(o)}function Qg(a){var o=a;do{if(o.flags&32768){tb(o,Or);return}a=o.return;var l=rn(o.alternate,o,zr);if(l!==null){Nt=l;return}if(o=o.sibling,o!==null){Nt=o;return}Nt=o=a}while(o!==null);Nn===0&&(Nn=5)}function tb(a,o){do{var l=_m(a.alternate,a);if(l!==null){l.flags&=32767,Nt=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(a=a.sibling,a!==null)){Nt=a;return}Nt=a=l}while(a!==null);Nn=6,Nt=null}function zy(a,o,l,f,b,y,T,O,j){a.cancelPendingCommit=null;do Jg();while(ha!==0);if(en&6)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(y=o.lanes|o.childLanes,y|=qu,At(a,l,y,T,O,j),a===sn&&(Nt=sn=null,Lt=0),Ts=o,Cs=a,qc=l,si=y,Gg=b,Km=f,o.subtreeFlags&10256||o.flags&10256?(a.callbackNode=null,a.callbackPriority=0,Lx(Ae,function(){return Iy(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(o.flags&13878)!==0,o.subtreeFlags&13878||f){f=Q.T,Q.T=null,b=V.p,V.p=2,T=en,en|=4;try{Cy(a,o,l)}finally{en=T,V.p=b,Q.T=f}}ha=1,Dy(),Ny(),Td()}}function Dy(){if(ha===1){ha=0;var a=Cs,o=Ts,l=(o.flags&13878)!==0;if(o.subtreeFlags&13878||l){l=Q.T,Q.T=null;var f=V.p;V.p=2;var b=en;en|=4;try{Bc(o,a);var y=Nd,T=Hu(a.containerInfo),O=y.focusedElem,j=y.selectionRange;if(T!==O&&O&&O.ownerDocument&&bn(O.ownerDocument.documentElement,O)){if(j!==null&&ng(O)){var K=j.start,Se=j.end;if(Se===void 0&&(Se=K),"selectionStart"in O)O.selectionStart=K,O.selectionEnd=Math.min(Se,O.value.length);else{var Ce=O.ownerDocument||document,te=Ce&&Ce.defaultView||window;if(te.getSelection){var le=te.getSelection(),ct=O.textContent.length,st=Math.min(j.start,ct),Kt=j.end===void 0?st:Math.min(j.end,ct);!le.extend&&st>Kt&&(T=Kt,Kt=st,st=T);var X=is(O,st),q=is(O,Kt);if(X&&q&&(le.rangeCount!==1||le.anchorNode!==X.node||le.anchorOffset!==X.offset||le.focusNode!==q.node||le.focusOffset!==q.offset)){var W=Ce.createRange();W.setStart(X.node,X.offset),le.removeAllRanges(),st>Kt?(le.addRange(W),le.extend(q.node,q.offset)):(W.setEnd(q.node,q.offset),le.addRange(W))}}}}for(Ce=[],le=O;le=le.parentNode;)le.nodeType===1&&Ce.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<Ce.length;O++){var we=Ce[O];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}Ld=!!rb,Nd=rb=null}finally{en=b,V.p=f,Q.T=l}}a.current=o,ha=2}}function Ny(){if(ha===2){ha=0;var a=Cs,o=Ts,l=(o.flags&8772)!==0;if(o.subtreeFlags&8772||l){l=Q.T,Q.T=null;var f=V.p;V.p=2;var b=en;en|=4;try{Bg(a,o.alternate,o)}finally{en=b,V.p=f,Q.T=l}}ha=3}}function Td(){if(ha===4||ha===3){ha=0,_e();var a=Cs,o=Ts,l=qc,f=Km;o.subtreeFlags&10256||o.flags&10256?ha=5:(ha=0,Ts=Cs=null,Kg(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(Uo=null),jn(l),o=o.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Ne,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=Q.T,b=V.p,V.p=2,Q.T=null;try{for(var y=a.onRecoverableError,T=0;T<f.length;T++){var O=f[T];y(O.value,{componentStack:O.stack})}}finally{Q.T=o,V.p=b}}qc&3&&Jg(),yo(a),b=a.pendingLanes,l&4194090&&b&42?a===Vg?Gc++:(Gc=0,Vg=a):Gc=0,Nr(0)}}function Kg(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,ds(o)))}function Jg(a){return Dy(),Ny(),Td(),Iy()}function Iy(){if(ha!==5)return!1;var a=Cs,o=si;si=0;var l=jn(qc),f=Q.T,b=V.p;try{V.p=32>l?32:l,Q.T=null,l=Gg,Gg=null;var y=Cs,T=qc;if(ha=0,Ts=Cs=null,qc=0,en&6)throw Error(r(331));var O=en;if(en|=4,Hg(y.current),Rr(y,y.current,T,l),en=O,Nr(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Ne,y)}catch{}return!0}finally{V.p=b,Q.T=f,Kg(a,o)}}function nb(a,o,l){o=pi(l,o),o=Dg(a.stateNode,o,2),a=Ja(a,o,2),a!==null&&(Ze(a,2),yo(a))}function ln(a,o,l){if(a.tag===3)nb(a,a,l);else for(;o!==null;){if(o.tag===3){nb(o,a,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Uo===null||!Uo.has(f))){a=pi(l,a),l=my(2),f=Ja(o,l,2),f!==null&&(Am(l,f,o,a),Ze(f,2),yo(f));break}}o=o.return}}function kd(a,o,l){var f=a.pingCache;if(f===null){f=a.pingCache=new Vm;var b=new Set;f.set(o,b)}else b=f.get(o),b===void 0&&(b=new Set,f.set(o,b));b.has(l)||(Ym=!0,b.add(l),a=Uy.bind(null,a,o,l),o.then(a,a))}function Uy(a,o,l){var f=a.pingCache;f!==null&&f.delete(o),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,sn===a&&(Lt&l)===l&&(Nn===4||Nn===3&&(Lt&62914560)===Lt&&300>ot()-Qm?!(en&2)&&vo(a,0):Xm|=l,Fc===Lt&&(Fc=0)),yo(a)}function Wg(a,o){o===0&&(o=Ie()),a=pr(a,o),a!==null&&(Ze(a,o),yo(a))}function Py(a){var o=a.memoizedState,l=0;o!==null&&(l=o.retryLane),Wg(a,l)}function jx(a,o){var l=0;switch(a.tag){case 13:var f=a.stateNode,b=a.memoizedState;b!==null&&(l=b.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(o),Wg(a,l)}function Lx(a,o){return ht(a,o)}var eh=null,Zc=null,Md=!1,Qc=!1,Ad=!1,Ms=0;function yo(a){a!==Zc&&a.next===null&&(Zc===null?eh=Zc=a:Zc=Zc.next=a),Qc=!0,Md||(Md=!0,th())}function Nr(a,o){if(!Ad&&Qc){Ad=!0;do for(var l=!1,f=eh;f!==null;){if(a!==0){var b=f.pendingLanes;if(b===0)var y=0;else{var T=f.suspendedLanes,O=f.pingedLanes;y=(1<<31-hn(42|a)+1)-1,y&=b&~(T&~O),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,$y(f,y))}else y=Lt,y=Ga(f,f===sn?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),!(y&3)||Oi(f,y)||(l=!0,$y(f,y));f=f.next}while(l);Ad=!1}}function Bx(){ab()}function ab(){Qc=Md=!1;var a=0;Ms!==0&&(ch()&&(a=Ms),Ms=0);for(var o=ot(),l=null,f=eh;f!==null;){var b=f.next,y=Rd(f,o);y===0?(f.next=null,l===null?eh=b:l.next=b,b===null&&(Zc=l)):(l=f,(a!==0||y&3)&&(Qc=!0)),f=b}Nr(a)}function Rd(a,o){for(var l=a.suspendedLanes,f=a.pingedLanes,b=a.expirationTimes,y=a.pendingLanes&-62914561;0<y;){var T=31-hn(y),O=1<<T,j=b[T];j===-1?(!(O&l)||O&f)&&(b[T]=z(O,o)):j<=o&&(a.expiredLanes|=O),y&=~O}if(o=sn,l=Lt,l=Ga(a,a===o?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,l===0||a===o&&(Ft===2||Ft===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&Vt(f),a.callbackNode=null,a.callbackPriority=0;if(!(l&3)||Oi(a,l)){if(o=l&-l,o===a.callbackPriority)return o;switch(f!==null&&Vt(f),jn(l)){case 2:case 8:l=Un;break;case 32:l=Ae;break;case 268435456:l=Xt;break;default:l=Ae}return f=ib.bind(null,a),l=ht(l,f),a.callbackPriority=o,a.callbackNode=l,o}return f!==null&&f!==null&&Vt(f),a.callbackPriority=2,a.callbackNode=null,2}function ib(a,o){if(ha!==0&&ha!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(Jg()&&a.callbackNode!==l)return null;var f=Lt;return f=Ga(a,a===sn?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(Ay(a,f,o),Rd(a,ot()),a.callbackNode!=null&&a.callbackNode===l?ib.bind(null,a):null)}function $y(a,o){if(Jg())return null;Ay(a,o,!0)}function th(){qx(function(){en&6?ht(Jt,Bx):ab()})}function nh(){return Ms===0&&(Ms=Y()),Ms}function Kc(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Nu(""+a)}function ah(a,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,a.id&&l.setAttribute("form",a.id),o.parentNode.insertBefore(l,o),a=new FormData(a),l.parentNode.removeChild(l),a}function ih(a,o,l,f,b){if(o==="submit"&&l&&l.stateNode===b){var y=Kc((b[wa]||null).action),T=f.submitter;T&&(o=(o=T[wa]||null)?Kc(o.formAction):T.getAttribute("formAction"),o!==null&&(y=o,T=null));var O=new Pu("action","action",null,f,b);a.push({event:O,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ms!==0){var j=T?ah(b,T):new FormData(b);bm(l,{pending:!0,data:j,method:b.method,action:y},null,j)}}else typeof y=="function"&&(O.preventDefault(),j=T?ah(b,T):new FormData(b),bm(l,{pending:!0,data:j,method:b.method,action:y},y,j))},currentTarget:b}]})}}for(var oh=0;oh<og.length;oh++){var In=og[oh],ob=In.toLowerCase(),Hx=In[0].toUpperCase()+In.slice(1);Xa(ob,"on"+Hx)}Xa(Fu,"onAnimationEnd"),Xa(oy,"onAnimationIteration"),Xa(Bp,"onAnimationStart"),Xa("dblclick","onDoubleClick"),Xa("focusin","onFocus"),Xa("focusout","onBlur"),Xa(Ux,"onTransitionRun"),Xa(Hp,"onTransitionStart"),Xa(ig,"onTransitionCancel"),Xa(Fp,"onTransitionEnd"),Xs("onMouseEnter",["mouseout","mouseover"]),Xs("onMouseLeave",["mouseout","mouseover"]),Xs("onPointerEnter",["pointerout","pointerover"]),Xs("onPointerLeave",["pointerout","pointerover"]),Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mt));function Ir(a,o){o=(o&4)!==0;for(var l=0;l<a.length;l++){var f=a[l],b=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var T=f.length-1;0<=T;T--){var O=f[T],j=O.instance,K=O.currentTarget;if(O=O.listener,j!==y&&b.isPropagationStopped())break e;y=O,b.currentTarget=K;try{y(b)}catch(Se){vd(Se)}b.currentTarget=null,y=j}else for(T=0;T<f.length;T++){if(O=f[T],j=O.instance,K=O.currentTarget,O=O.listener,j!==y&&b.isPropagationStopped())break e;y=O,b.currentTarget=K;try{y(b)}catch(Se){vd(Se)}b.currentTarget=null,y=j}}}}function xt(a,o){var l=o[pp];l===void 0&&(l=o[pp]=new Set);var f=a+"__bubble";l.has(f)||(_y(o,a,2,!1),l.add(f))}function As(a,o,l){var f=0;o&&(f|=4),_y(l,a,f,o)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Od(a){if(!a[Al]){a[Al]=!0,mp.forEach(function(l){l!=="selectionchange"&&(Fx.has(l)||As(l,!1,a),As(l,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Al]||(o[Al]=!0,As("selectionchange",!1,o))}}function _y(a,o,l,f){switch(Zy(o)){case 2:var b=Yy;break;case 8:b=Xy;break;default:b=bh}l=b.bind(null,o,l,a),b=void 0,!Hf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),f?b!==void 0?a.addEventListener(o,l,{capture:!0,passive:b}):a.addEventListener(o,l,!0):b!==void 0?a.addEventListener(o,l,{passive:b}):a.addEventListener(o,l,!1)}function zd(a,o,l,f,b){var y=f;if(!(o&1)&&!(o&2)&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var O=f.stateNode.containerInfo;if(O===b)break;if(T===4)for(T=f.return;T!==null;){var j=T.tag;if((j===3||j===4)&&T.stateNode.containerInfo===b)return;T=T.return}for(;O!==null;){if(T=Jr(O),T===null)return;if(j=T.tag,j===5||j===6||j===26||j===27){f=y=T;continue e}O=O.parentNode}}f=f.return}Xv(function(){var K=y,Se=Ks(l),Ce=[];e:{var te=qp.get(a);if(te!==void 0){var le=Pu,ct=a;switch(a){case"keypress":if(Uu(l)===0)break e;case"keydown":case"keyup":le=tl;break;case"focusin":ct="focus",le=Ap;break;case"focusout":ct="blur",le=Ap;break;case"beforeblur":case"afterblur":le=Ap;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Kv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Xf;break;case Fu:case oy:case Bp:le=zx;break;case Fp:le=Ya;break;case"scroll":case"scrollend":le=Rx;break;case"wheel":le=Zf;break;case"copy":case"cut":case"paste":le=Nx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Va;break;case"toggle":case"beforetoggle":le=Dp}var st=(o&4)!==0,Kt=!st&&(a==="scroll"||a==="scrollend"),X=st?te!==null?te+"Capture":null:te;st=[];for(var q=K,W;q!==null;){var we=q;if(W=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||W===null||X===null||(we=dr(q,X),we!=null&&st.push(ci(q,we,W))),Kt)break;q=q.return}0<st.length&&(te=new le(te,ct,null,l,Se),Ce.push({event:te,listeners:st}))}}if(!(o&7)){e:{if(te=a==="mouseover"||a==="pointerover",le=a==="mouseout"||a==="pointerout",te&&l!==Bf&&(ct=l.relatedTarget||l.fromElement)&&(Jr(ct)||ct[Ys]))break e;if((le||te)&&(te=Se.window===Se?Se:(te=Se.ownerDocument)?te.defaultView||te.parentWindow:window,le?(ct=l.relatedTarget||l.toElement,le=K,ct=ct?Jr(ct):null,ct!==null&&(Kt=d(ct),st=ct.tag,ct!==Kt||st!==5&&st!==27&&st!==6)&&(ct=null)):(le=null,ct=K),le!==ct)){if(st=_u,we="onMouseLeave",X="onMouseEnter",q="mouse",(a==="pointerout"||a==="pointerover")&&(st=Va,we="onPointerLeave",X="onPointerEnter",q="pointer"),Kt=le==null?te:Kl(le),W=ct==null?te:Kl(ct),te=new st(we,q+"leave",le,l,Se),te.target=Kt,te.relatedTarget=W,we=null,Jr(Se)===K&&(st=new st(X,q+"enter",ct,l,Se),st.target=W,st.relatedTarget=Kt,we=st),Kt=we,le&&ct)t:{for(st=le,X=ct,q=0,W=st;W;W=Os(W))q++;for(W=0,we=X;we;we=Os(we))W++;for(;0<q-W;)st=Os(st),q--;for(;0<W-q;)X=Os(X),W--;for(;q--;){if(st===X||X!==null&&st===X.alternate)break t;st=Os(st),X=Os(X)}st=null}else st=null;le!==null&&rh(Ce,te,le,st,!1),ct!==null&&Kt!==null&&rh(Ce,Kt,ct,st,!0)}}e:{if(te=K?Kl(K):window,le=te.nodeName&&te.nodeName.toLowerCase(),le==="select"||le==="input"&&te.type==="file")var Ye=ns;else if(Pp(te))if($p)Ye=fr;else{Ye=tg;var kt=iy}else le=te.nodeName,!le||le.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?K&&ac(K.elementType)&&(Ye=ns):Ye=as;if(Ye&&(Ye=Ye(a,K))){Wf(Ce,Ye,l,Se);break e}kt&&kt(a,te,K),a==="focusout"&&K&&te.type==="number"&&K.memoizedProps.value!=null&&zu(te,"number",te.value)}switch(kt=K?Kl(K):window,a){case"focusin":(Pp(kt)||kt.contentEditable==="true")&&(Ii=kt,ll=K,hi=null);break;case"focusout":hi=ll=Ii=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,dc(Ce,l,Se);break;case"selectionchange":if(Lp)break;case"keydown":case"keyup":dc(Ce,l,Se)}var rt;if(Qf)e:{switch(a){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else Ni?Jf(a,l)&&(ut="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(ut="onCompositionStart");ut&&(Kf&&l.locale!=="ko"&&(Ni||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&Ni&&(rt=Iu()):(Di=Se,Ff="value"in Di?Di.value:Di.textContent,Ni=!0)),kt=Rs(K,ut),0<kt.length&&(ut=new Rp(ut,a,null,l,Se),Ce.push({event:ut,listeners:kt}),rt?ut.data=rt:(rt=Lu(l),rt!==null&&(ut.data=rt)))),(rt=Ix?Ip(a,l):Up(a,l))&&(ut=Rs(K,"onBeforeInput"),0<ut.length&&(kt=new Rp("onBeforeInput","beforeinput",null,l,Se),Ce.push({event:kt,listeners:ut}),kt.data=rt)),ih(Ce,a,K,l,Se)}Ir(Ce,o)})}function ci(a,o,l){return{instance:a,listener:o,currentTarget:l}}function Rs(a,o){for(var l=o+"Capture",f=[];a!==null;){var b=a,y=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||y===null||(b=dr(a,l),b!=null&&f.unshift(ci(a,b,y)),b=dr(a,o),b!=null&&f.push(ci(a,b,y))),a.tag===3)return f;a=a.return}return[]}function Os(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function rh(a,o,l,f,b){for(var y=o._reactName,T=[];l!==null&&l!==f;){var O=l,j=O.alternate,K=O.stateNode;if(O=O.tag,j!==null&&j===f)break;O!==5&&O!==26&&O!==27||K===null||(j=K,b?(K=dr(l,y),K!=null&&T.unshift(ci(l,K,j))):b||(K=dr(l,y),K!=null&&T.push(ci(l,K,j)))),l=l.return}T.length!==0&&a.push({event:o,listeners:T})}var sh=/\r\n?/g,wi=/\u0000|\uFFFD/g;function lh(a){return(typeof a=="string"?a:""+a).replace(sh,`
`).replace(wi,"")}function jy(a,o){return o=lh(o),lh(a)===o}function Dd(){}function cn(a,o,l,f,b,y){switch(l){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Qs(a,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Qs(a,""+f);break;case"className":cr(a,"class",f);break;case"tabIndex":cr(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(a,l,f);break;case"style":Lf(a,f,y);break;case"data":if(o!=="object"){cr(a,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||l!=="href")){a.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(l);break}f=Nu(""+f),a.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(o!=="input"&&cn(a,o,"name",b.name,b,null),cn(a,o,"formEncType",b.formEncType,b,null),cn(a,o,"formMethod",b.formMethod,b,null),cn(a,o,"formTarget",b.formTarget,b,null)):(cn(a,o,"encType",b.encType,b,null),cn(a,o,"method",b.method,b,null),cn(a,o,"target",b.target,b,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(l);break}f=Nu(""+f),a.setAttribute(l,f);break;case"onClick":f!=null&&(a.onclick=Dd);break;case"onScroll":f!=null&&xt("scroll",a);break;case"onScrollEnd":f!=null&&xt("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(l=f.__html,l!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=l}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}l=Nu(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,""+f):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":f===!0?a.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,f):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(l,f):a.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(l):a.setAttribute(l,f);break;case"popover":xt("beforetoggle",a),xt("toggle",a),Ou(a,"popover",f);break;case"xlinkActuate":Ao(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ao(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ao(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ao(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ao(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ao(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ao(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ao(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ao(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Ou(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Du.get(l)||l,Ou(a,l,f))}}function Qn(a,o,l,f,b,y){switch(l){case"style":Lf(a,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(l=f.__html,l!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=l}}break;case"children":typeof f=="string"?Qs(a,f):(typeof f=="number"||typeof f=="bigint")&&Qs(a,""+f);break;case"onScroll":f!=null&&xt("scroll",a);break;case"onScrollEnd":f!=null&&xt("scrollend",a);break;case"onClick":f!=null&&(a.onclick=Dd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ru.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(b=l.endsWith("Capture"),o=l.slice(2,b?l.length-7:void 0),y=a[wa]||null,y=y!=null?y[l]:null,typeof y=="function"&&a.removeEventListener(o,y,b),typeof f=="function")){typeof y!="function"&&y!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(o,f,b);break e}l in a?a[l]=f:f===!0?a.setAttribute(l,""):Ou(a,l,f)}}}function oe(a,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",a),xt("load",a);var f=!1,b=!1,y;for(y in l)if(l.hasOwnProperty(y)){var T=l[y];if(T!=null)switch(y){case"src":f=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:cn(a,o,y,T,l,null)}}b&&cn(a,o,"srcSet",l.srcSet,l,null),f&&cn(a,o,"src",l.src,l,null);return;case"input":xt("invalid",a);var O=y=T=b=null,j=null,K=null;for(f in l)if(l.hasOwnProperty(f)){var Se=l[f];if(Se!=null)switch(f){case"name":b=Se;break;case"type":T=Se;break;case"checked":j=Se;break;case"defaultChecked":K=Se;break;case"value":y=Se;break;case"defaultValue":O=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(r(137,o));break;default:cn(a,o,f,Se,l,null)}}wp(a,y,O,j,K,T,b,!1),tc(a);return;case"select":xt("invalid",a),f=T=y=null;for(b in l)if(l.hasOwnProperty(b)&&(O=l[b],O!=null))switch(b){case"value":y=O;break;case"defaultValue":T=O;break;case"multiple":f=O;default:cn(a,o,b,O,l,null)}o=y,l=T,a.multiple=!!f,o!=null?es(a,!!f,o,!1):l!=null&&es(a,!!f,l,!0);return;case"textarea":xt("invalid",a),y=b=f=null;for(T in l)if(l.hasOwnProperty(T)&&(O=l[T],O!=null))switch(T){case"value":f=O;break;case"defaultValue":b=O;break;case"children":y=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:cn(a,o,T,O,l,null)}Cp(a,f,b,y),tc(a);return;case"option":for(j in l)if(l.hasOwnProperty(j)&&(f=l[j],f!=null))switch(j){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:cn(a,o,j,f,l,null)}return;case"dialog":xt("beforetoggle",a),xt("toggle",a),xt("cancel",a),xt("close",a);break;case"iframe":case"object":xt("load",a);break;case"video":case"audio":for(f=0;f<mt.length;f++)xt(mt[f],a);break;case"image":xt("error",a),xt("load",a);break;case"details":xt("toggle",a);break;case"embed":case"source":case"link":xt("error",a),xt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(f=l[K],f!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:cn(a,o,K,f,l,null)}return;default:if(ac(o)){for(Se in l)l.hasOwnProperty(Se)&&(f=l[Se],f!==void 0&&Qn(a,o,Se,f,l,void 0));return}}for(O in l)l.hasOwnProperty(O)&&(f=l[O],f!=null&&cn(a,o,O,f,l,null))}function Qt(a,o,l,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,y=null,T=null,O=null,j=null,K=null,Se=null;for(le in l){var Ce=l[le];if(l.hasOwnProperty(le)&&Ce!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":j=Ce;default:f.hasOwnProperty(le)||cn(a,o,le,null,f,Ce)}}for(var te in f){var le=f[te];if(Ce=l[te],f.hasOwnProperty(te)&&(le!=null||Ce!=null))switch(te){case"type":y=le;break;case"name":b=le;break;case"checked":K=le;break;case"defaultChecked":Se=le;break;case"value":T=le;break;case"defaultValue":O=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,o));break;default:le!==Ce&&cn(a,o,te,le,f,Ce)}}Sp(a,T,O,j,K,Se,y,b);return;case"select":le=T=O=te=null;for(y in l)if(j=l[y],l.hasOwnProperty(y)&&j!=null)switch(y){case"value":break;case"multiple":le=j;default:f.hasOwnProperty(y)||cn(a,o,y,null,f,j)}for(b in f)if(y=f[b],j=l[b],f.hasOwnProperty(b)&&(y!=null||j!=null))switch(b){case"value":te=y;break;case"defaultValue":O=y;break;case"multiple":T=y;default:y!==j&&cn(a,o,b,y,f,j)}o=O,l=T,f=le,te!=null?es(a,!!l,te,!1):!!f!=!!l&&(o!=null?es(a,!!l,o,!0):es(a,!!l,l?[]:"",!1));return;case"textarea":le=te=null;for(O in l)if(b=l[O],l.hasOwnProperty(O)&&b!=null&&!f.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:cn(a,o,O,null,f,b)}for(T in f)if(b=f[T],y=l[T],f.hasOwnProperty(T)&&(b!=null||y!=null))switch(T){case"value":te=b;break;case"defaultValue":le=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==y&&cn(a,o,T,b,f,y)}Ep(a,te,le);return;case"option":for(var ct in l)if(te=l[ct],l.hasOwnProperty(ct)&&te!=null&&!f.hasOwnProperty(ct))switch(ct){case"selected":a.selected=!1;break;default:cn(a,o,ct,null,f,te)}for(j in f)if(te=f[j],le=l[j],f.hasOwnProperty(j)&&te!==le&&(te!=null||le!=null))switch(j){case"selected":a.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:cn(a,o,j,te,f,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in l)te=l[st],l.hasOwnProperty(st)&&te!=null&&!f.hasOwnProperty(st)&&cn(a,o,st,null,f,te);for(K in f)if(te=f[K],le=l[K],f.hasOwnProperty(K)&&te!==le&&(te!=null||le!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,o));break;default:cn(a,o,K,te,f,le)}return;default:if(ac(o)){for(var Kt in l)te=l[Kt],l.hasOwnProperty(Kt)&&te!==void 0&&!f.hasOwnProperty(Kt)&&Qn(a,o,Kt,void 0,f,te);for(Se in f)te=f[Se],le=l[Se],!f.hasOwnProperty(Se)||te===le||te===void 0&&le===void 0||Qn(a,o,Se,te,f,le);return}}for(var X in l)te=l[X],l.hasOwnProperty(X)&&te!=null&&!f.hasOwnProperty(X)&&cn(a,o,X,null,f,te);for(Ce in f)te=f[Ce],le=l[Ce],!f.hasOwnProperty(Ce)||te===le||te==null&&le==null||cn(a,o,Ce,te,f,le)}var rb=null,Nd=null;function Jc(a){return a.nodeType===9?a:a.ownerDocument}function Po(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ur(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Rl(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var $o=null;function ch(){var a=window.event;return a&&a.type==="popstate"?a===$o?!1:($o=a,!0):($o=null,!1)}var _o=typeof setTimeout=="function"?setTimeout:void 0,sb=typeof clearTimeout=="function"?clearTimeout:void 0,Ly=typeof Promise=="function"?Promise:void 0,qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ly<"u"?function(a){return Ly.resolve(null).then(a).catch(Gx)}:_o;function Gx(a){setTimeout(function(){throw a})}function pa(a){return a==="head"}function By(a,o){var l=o,f=0,b=0;do{var y=l.nextSibling;if(a.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"){if(0<f&&8>f){l=f;var T=a.ownerDocument;if(l&1&&He(T.documentElement),l&2&&He(T.body),l&4)for(l=T.head,He(l),T=l.firstChild;T;){var O=T.nextSibling,j=T.nodeName;T[Au]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=O}}if(b===0){a.removeChild(y),ou(o);return}b--}else l==="$"||l==="$?"||l==="$!"?b++:f=l.charCodeAt(0)-48;else f=0;l=y}while(l);ou(o)}function Id(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Id(l),nt(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function lb(a,o,l,f){for(;a.nodeType===1;){var b=l;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[Au])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(y=a.getAttribute("rel"),y==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(y!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(y=a.getAttribute("src"),(y!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&y&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var y=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===y)return a}else return a;if(a=xo(a.nextSibling),a===null)break}return null}function Wc(a,o,l){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=xo(a.nextSibling),a===null))return null;return a}function cb(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function ub(a,o){var l=a.ownerDocument;if(a.data!=="$?"||l.readyState==="complete")o();else{var f=function(){o(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function xo(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var db=null;function Ol(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return a;o--}else l==="/$"&&o++}a=a.previousSibling}return null}function ma(a,o,l){switch(o=Jc(l),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function He(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);nt(a)}var _n=new Map,Fi=new Set;function aa(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Pr=V.d;V.d={f:Vx,r:uh,D:jo,C:_r,L:dh,m:zs,X:ui,S:Ma,M:Ds};function Vx(){var a=Pr.f(),o=Cd();return a||o}function uh(a){var o=da(a);o!==null&&o.tag===5&&o.type==="form"?dy(o):Pr.r(a)}var $r=typeof document>"u"?null:document;function Ei(a,o,l){var f=$r;if(f&&typeof o=="string"&&o){var b=zi(o);b='link[rel="'+a+'"][href="'+b+'"]',typeof l=="string"&&(b+='[crossorigin="'+l+'"]'),Fi.has(b)||(Fi.add(b),a={rel:a,crossOrigin:l,href:o},f.querySelector(b)===null&&(o=f.createElement("link"),oe(o,"link",a),Pn(o),f.head.appendChild(o)))}}function jo(a){Pr.D(a),Ei("dns-prefetch",a,null)}function _r(a,o){Pr.C(a,o),Ei("preconnect",a,o)}function dh(a,o,l){Pr.L(a,o,l);var f=$r;if(f&&a&&o){var b='link[rel="preload"][as="'+zi(o)+'"]';o==="image"&&l&&l.imageSrcSet?(b+='[imagesrcset="'+zi(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(b+='[imagesizes="'+zi(l.imageSizes)+'"]')):b+='[href="'+zi(a)+'"]';var y=b;switch(o){case"style":y=eu(a);break;case"script":y=zl(a)}_n.has(y)||(a=k({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:a,as:o},l),_n.set(y,a),f.querySelector(b)!==null||o==="style"&&f.querySelector(Ud(y))||o==="script"&&f.querySelector(So(y))||(o=f.createElement("link"),oe(o,"link",a),Pn(o),f.head.appendChild(o)))}}function zs(a,o){Pr.m(a,o);var l=$r;if(l&&a){var f=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+zi(f)+'"][href="'+zi(a)+'"]',y=b;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=zl(a)}if(!_n.has(y)&&(a=k({rel:"modulepreload",href:a},o),_n.set(y,a),l.querySelector(b)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(So(y)))return}f=l.createElement("link"),oe(f,"link",a),Pn(f),l.head.appendChild(f)}}}function Ma(a,o,l){Pr.S(a,o,l);var f=$r;if(f&&a){var b=Jl(f).hoistableStyles,y=eu(a);o=o||"default";var T=b.get(y);if(!T){var O={loading:0,preload:null};if(T=f.querySelector(Ud(y)))O.loading=5;else{a=k({rel:"stylesheet",href:a,"data-precedence":o},l),(l=_n.get(y))&&gb(a,l);var j=T=f.createElement("link");Pn(j),oe(j,"link",a),j._p=new Promise(function(K,Se){j.onload=K,j.onerror=Se}),j.addEventListener("load",function(){O.loading|=1}),j.addEventListener("error",function(){O.loading|=2}),O.loading|=4,hh(T,o,f)}T={type:"stylesheet",instance:T,count:1,state:O},b.set(y,T)}}}function ui(a,o){Pr.X(a,o);var l=$r;if(l&&a){var f=Jl(l).hoistableScripts,b=zl(a),y=f.get(b);y||(y=l.querySelector(So(b)),y||(a=k({src:a,async:!0},o),(o=_n.get(b))&&ph(a,o),y=l.createElement("script"),Pn(y),oe(y,"link",a),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(b,y))}}function Ds(a,o){Pr.M(a,o);var l=$r;if(l&&a){var f=Jl(l).hoistableScripts,b=zl(a),y=f.get(b);y||(y=l.querySelector(So(b)),y||(a=k({src:a,async:!0,type:"module"},o),(o=_n.get(b))&&ph(a,o),y=l.createElement("script"),Pn(y),oe(y,"link",a),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(b,y))}}function fh(a,o,l,f){var b=(b=Te.current)?aa(b):null;if(!b)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=eu(l.href),l=Jl(b).hoistableStyles,f=l.get(o),f||(f={type:"style",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=eu(l.href);var y=Jl(b).hoistableStyles,T=y.get(a);if(T||(b=b.ownerDocument||b,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(a,T),(y=b.querySelector(Ud(a)))&&!y._p&&(T.instance=y,T.state.loading=5),_n.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},_n.set(a,l),y||Pd(b,a,l,T.state))),o&&f===null)throw Error(r(528,""));return T}if(o&&f!==null)throw Error(r(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=zl(l),l=Jl(b).hoistableScripts,f=l.get(o),f||(f={type:"script",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function eu(a){return'href="'+zi(a)+'"'}function Ud(a){return'link[rel="stylesheet"]['+a+"]"}function fb(a){return k({},a,{"data-precedence":a.precedence,precedence:null})}function Pd(a,o,l,f){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=a.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),oe(o,"link",l),Pn(o),a.head.appendChild(o))}function zl(a){return'[src="'+zi(a)+'"]'}function So(a){return"script[async]"+a}function gh(a,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var f=a.querySelector('style[data-href~="'+zi(l.href)+'"]');if(f)return o.instance=f,Pn(f),f;var b=k({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),Pn(f),oe(f,"style",b),hh(f,l.precedence,a),o.instance=f;case"stylesheet":b=eu(l.href);var y=a.querySelector(Ud(b));if(y)return o.state.loading|=4,o.instance=y,Pn(y),y;f=fb(l),(b=_n.get(b))&&gb(f,b),y=(a.ownerDocument||a).createElement("link"),Pn(y);var T=y;return T._p=new Promise(function(O,j){T.onload=O,T.onerror=j}),oe(y,"link",f),o.state.loading|=4,hh(y,l.precedence,a),o.instance=y;case"script":return y=zl(l.src),(b=a.querySelector(So(y)))?(o.instance=b,Pn(b),b):(f=l,(b=_n.get(y))&&(f=k({},l),ph(f,b)),a=a.ownerDocument||a,b=a.createElement("script"),Pn(b),oe(b,"link",f),a.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&!(o.state.loading&4)&&(f=o.instance,o.state.loading|=4,hh(f,l.precedence,a));return o.instance}function hh(a,o,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=f.length?f[f.length-1]:null,y=b,T=0;T<f.length;T++){var O=f[T];if(O.dataset.precedence===o)y=O;else if(y!==b)break}y?y.parentNode.insertBefore(a,y.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(a,o.firstChild))}function gb(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function ph(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var $d=null;function tu(a,o,l){if($d===null){var f=new Map,b=$d=new Map;b.set(l,f)}else b=$d,f=b.get(l),f||(f=new Map,b.set(l,f));if(f.has(a))return f;for(f.set(a,null),l=l.getElementsByTagName(a),b=0;b<l.length;b++){var y=l[b];if(!(y[Au]||y[dn]||a==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(o)||"";T=a+T;var O=f.get(T);O?O.push(y):f.set(T,[y])}}return f}function hb(a,o,l){a=a.ownerDocument||a,a.head.insertBefore(l,o==="title"?a.querySelector("head > title"):null)}function Hy(a,o,l){if(l===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function pb(a){return!(a.type==="stylesheet"&&!(a.state.loading&3))}var nu=null;function Fy(){}function qy(a,o,l){if(nu===null)throw Error(r(475));var f=nu;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&!(o.state.loading&4)){if(o.instance===null){var b=eu(l.href),y=a.querySelector(Ud(b));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=au.bind(f),a.then(f,f)),o.state.loading|=4,o.instance=y,Pn(y);return}y=a.ownerDocument||a,l=fb(l),(b=_n.get(b))&&gb(l,b),y=y.createElement("link"),Pn(y);var T=y;T._p=new Promise(function(O,j){T.onload=O,T.onerror=j}),oe(y,"link",l),o.instance=y}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,a),(a=o.state.preload)&&!(o.state.loading&3)&&(f.count++,o=au.bind(f),a.addEventListener("load",o),a.addEventListener("error",o))}}function Gy(){if(nu===null)throw Error(r(475));var a=nu;return a.stylesheets&&a.count===0&&jd(a,a.stylesheets),0<a.count?function(o){var l=setTimeout(function(){if(a.stylesheets&&jd(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(l)}}:null}function au(){if(this.count--,this.count===0){if(this.stylesheets)jd(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var _d=null;function jd(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,_d=new Map,o.forEach(mb,a),_d=null,au.call(a))}function mb(a,o){if(!(o.state.loading&4)){var l=_d.get(a);if(l)var f=l.get(null);else{l=new Map,_d.set(a,l);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<b.length;y++){var T=b[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),f=T)}f&&l.set(null,f)}b=o.instance,T=b.getAttribute("data-precedence"),y=l.get(T)||f,y===f&&l.set(null,b),l.set(T,b),this.count++,f=au.bind(this),b.addEventListener("load",f),b.addEventListener("error",f),y?y.parentNode.insertBefore(b,y.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),o.state.loading|=4}}var ba={$$typeof:ye,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function Lo(a,o,l,f,b,y,T,O){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=f,this.onUncaughtError=b,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Vy(a,o,l,f,b,y,T,O,j,K,Se,Ce){return a=new Lo(a,o,l,T,O,j,K,Ce),o=1,y===!0&&(o|=24),y=Za(3,null,null,o),a.current=y,y.stateNode=a,o=Xp(),o.refCount++,a.pooledCache=o,o.refCount++,y.memoizedState={element:f,isDehydrated:l,cache:o},ed(y),a}function bb(a){return a?(a=ul,a):ul}function vb(a,o,l,f,b,y){b=bb(b),f.context===null?f.context=b:f.pendingContext=b,f=Sr(o),f.payload={element:l},y=y===void 0?null:y,y!==null&&(f.callback=y),l=Ja(a,f,o),l!==null&&(li(l,a,o),gl(l,a,o))}function yb(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<o?l:o}}function mh(a,o){yb(a,o),(a=a.alternate)&&yb(a,o)}function xb(a){if(a.tag===13){var o=pr(a,67108864);o!==null&&li(o,a,67108864),mh(a,67108864)}}var Ld=!0;function Yy(a,o,l,f){var b=Q.T;Q.T=null;var y=V.p;try{V.p=2,bh(a,o,l,f)}finally{V.p=y,Q.T=b}}function Xy(a,o,l,f){var b=Q.T;Q.T=null;var y=V.p;try{V.p=8,bh(a,o,l,f)}finally{V.p=y,Q.T=b}}function bh(a,o,l,f){if(Ld){var b=Sb(f);if(b===null)zd(a,o,f,Bd,l),Eb(a,f);else if(Cb(b,a,o,l,f))f.stopPropagation();else if(Eb(a,f),o&4&&-1<Yx.indexOf(a)){for(;b!==null;){var y=da(b);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=ua(y.pendingLanes);if(T!==0){var O=y;for(O.pendingLanes|=2,O.entangledLanes|=2;T;){var j=1<<31-hn(T);O.entanglements[1]|=j,T&=~j}yo(y),!(en&6)&&(Fg=ot()+500,Nr(0))}}break;case 13:O=pr(y,2),O!==null&&li(O,y,2),Cd(),mh(y,2)}if(y=Sb(f),y===null&&zd(a,o,f,Bd,l),y===b)break;b=y}b!==null&&f.stopPropagation()}else zd(a,o,f,null,l)}}function Sb(a){return a=Ks(a),wb(a)}var Bd=null;function wb(a){if(Bd=null,a=Jr(a),a!==null){var o=d(a);if(o===null)a=null;else{var l=o.tag;if(l===13){if(a=p(o),a!==null)return a;a=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Bd=a,null}function Zy(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yt()){case Jt:return 2;case Un:return 8;case Ae:case gt:return 32;case Xt:return 268435456;default:return 32}default:return 32}}var vh=!1,wo=null,Bo=null,jr=null,iu=new Map,Hd=new Map,Ns=[],Yx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Eb(a,o){switch(a){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":iu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hd.delete(o.pointerId)}}function Ho(a,o,l,f,b,y){return a===null||a.nativeEvent!==y?(a={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:y,targetContainers:[b]},o!==null&&(o=da(o),o!==null&&xb(o)),a):(a.eventSystemFlags|=f,o=a.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),a)}function Cb(a,o,l,f,b){switch(o){case"focusin":return wo=Ho(wo,a,o,l,f,b),!0;case"dragenter":return Bo=Ho(Bo,a,o,l,f,b),!0;case"mouseover":return jr=Ho(jr,a,o,l,f,b),!0;case"pointerover":var y=b.pointerId;return iu.set(y,Ho(iu.get(y)||null,a,o,l,f,b)),!0;case"gotpointercapture":return y=b.pointerId,Hd.set(y,Ho(Hd.get(y)||null,a,o,l,f,b)),!0}return!1}function Tb(a){var o=Jr(a.target);if(o!==null){var l=d(o);if(l!==null){if(o=l.tag,o===13){if(o=p(l),o!==null){a.blockedOn=o,hp(a.priority,function(){if(l.tag===13){var f=Si();f=pt(f);var b=pr(l,f);b!==null&&li(b,l,f),mh(l,f)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Fd(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var l=Sb(a.nativeEvent);if(l===null){l=a.nativeEvent;var f=new l.constructor(l.type,l);Bf=f,l.target.dispatchEvent(f),Bf=null}else return o=da(l),o!==null&&xb(o),a.blockedOn=l,!1;o.shift()}return!0}function kb(a,o,l){Fd(a)&&l.delete(o)}function yh(){vh=!1,wo!==null&&Fd(wo)&&(wo=null),Bo!==null&&Fd(Bo)&&(Bo=null),jr!==null&&Fd(jr)&&(jr=null),iu.forEach(kb),Hd.forEach(kb)}function Lr(a,o){a.blockedOn===o&&(a.blockedOn=null,vh||(vh=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,yh)))}var xh=null;function qd(a){xh!==a&&(xh=a,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){xh===a&&(xh=null);for(var o=0;o<a.length;o+=3){var l=a[o],f=a[o+1],b=a[o+2];if(typeof f!="function"){if(wb(f||l)===null)continue;break}var y=da(l);y!==null&&(a.splice(o,3),o-=3,bm(y,{pending:!0,data:b,method:l.method,action:f},f,b))}}))}function ou(a){function o(j){return Lr(j,a)}wo!==null&&Lr(wo,a),Bo!==null&&Lr(Bo,a),jr!==null&&Lr(jr,a),iu.forEach(o),Hd.forEach(o);for(var l=0;l<Ns.length;l++){var f=Ns[l];f.blockedOn===a&&(f.blockedOn=null)}for(;0<Ns.length&&(l=Ns[0],l.blockedOn===null);)Tb(l),l.blockedOn===null&&Ns.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var b=l[f],y=l[f+1],T=b[wa]||null;if(typeof y=="function")T||qd(l);else if(T){var O=null;if(y&&y.hasAttribute("formAction")){if(b=y,T=y[wa]||null)O=T.formAction;else if(wb(b)!==null)continue}else O=T.action;typeof O=="function"?l[f+1]=O:(l.splice(f,3),f-=3),qd(l)}}}function Is(a){this._internalRoot=a}Sh.prototype.render=Is.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var l=o.current,f=Si();vb(l,f,a,o,null,null)},Sh.prototype.unmount=Is.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;vb(a.current,2,null,a,null,null),Cd(),o[Ys]=null}};function Sh(a){this._internalRoot=a}Sh.prototype.unstable_scheduleHydration=function(a){if(a){var o=ko();a={blockedOn:null,target:a,priority:o};for(var l=0;l<Ns.length&&o!==0&&o<Ns[l].priority;l++);Ns.splice(l,0,a),l===0&&Tb(a)}};var Qy=u.version;if(Qy!=="19.1.0")throw Error(r(527,Qy,"19.1.0"));V.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=w(o),a=a!==null?S(a):null,a=a===null?null:a.stateNode,a};var Ky={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{Ne=ia.inject(Ky),qe=ia}catch{}}return ep.createRoot=function(a,o){if(!s(a))throw Error(r(299));var l=!1,f="",b=Tm,y=Pc,T=km,O=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(O=o.unstable_transitionCallbacks)),o=Vy(a,1,!1,null,null,l,f,b,y,T,O,null),a[Ys]=o.current,Od(a),new Is(o)},ep.hydrateRoot=function(a,o,l){if(!s(a))throw Error(r(299));var f=!1,b="",y=Tm,T=Pc,O=km,j=null,K=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(b=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(O=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(j=l.unstable_transitionCallbacks),l.formState!==void 0&&(K=l.formState)),o=Vy(a,1,!0,o,l??null,f,b,y,T,O,j,K),o.context=bb(null),l=o.current,f=Si(),f=pt(f),b=Sr(f),b.callback=null,Ja(l,b,f),l=f,o.current.lanes=l,Ze(o,l),yo(o),a[Ys]=o.current,Od(a),new Sh(o)},ep.version="19.1.0",ep}var tp={},dw;function hT(){if(dw)return tp;dw=1;var h={};/**
 * @license React
 * react-dom-client.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return h.NODE_ENV!=="production"&&function(){function u(e,t){for(e=e.memoizedState;e!==null&&0<t;)e=e.next,t--;return e}function n(e,t,i,c){if(i>=t.length)return c;var g=t[i],m=Qn(e)?e.slice():mt({},e);return m[g]=n(e[g],t,i+1,c),m}function r(e,t,i){if(t.length!==i.length)console.warn("copyWithRename() expects paths of the same length");else{for(var c=0;c<i.length-1;c++)if(t[c]!==i[c]){console.warn("copyWithRename() expects paths to be the same except for the deepest key");return}return s(e,t,i,0)}}function s(e,t,i,c){var g=t[c],m=Qn(e)?e.slice():mt({},e);return c+1===t.length?(m[i[c]]=m[g],Qn(m)?m.splice(g,1):delete m[g]):m[g]=s(e[g],t,i,c+1),m}function d(e,t,i){var c=t[i],g=Qn(e)?e.slice():mt({},e);return i+1===t.length?(Qn(g)?g.splice(c,1):delete g[c],g):(g[c]=d(e[c],t,i+1),g)}function p(){return!1}function v(){return null}function w(){}function S(){console.error("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://react.dev/link/rules-of-hooks")}function k(){console.error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")}function I(){}function R(e){var t=[];return e.forEach(function(i){t.push(i)}),t.sort().join(", ")}function A(e,t,i,c){return new Ix(e,t,i,c)}function _(e,t){e.context===ru&&(kd(e.current,2,t,e,null,null),Sl())}function H(e,t){if(Go!==null){var i=t.staleFamilies;t=t.updatedFamilies,ms(),al(e.current,t,i),Sl()}}function re(e){Go=e}function G(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ue(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function ye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ce(e){if(ue(e)!==e)throw Error("Unable to find node on an unmounted component.")}function be(e){var t=e.alternate;if(!t){if(t=ue(e),t===null)throw Error("Unable to find node on an unmounted component.");return t!==e?null:e}for(var i=e,c=t;;){var g=i.return;if(g===null)break;var m=g.alternate;if(m===null){if(c=g.return,c!==null){i=c;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===i)return ce(g),e;if(m===c)return ce(g),t;m=m.sibling}throw Error("Unable to find node on an unmounted component.")}if(i.return!==c.return)i=g,c=m;else{for(var x=!1,E=g.child;E;){if(E===i){x=!0,i=g,c=m;break}if(E===c){x=!0,c=g,i=m;break}E=E.sibling}if(!x){for(E=m.child;E;){if(E===i){x=!0,i=m,c=g;break}if(E===c){x=!0,c=m,i=g;break}E=E.sibling}if(!x)throw Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(i.alternate!==c)throw Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(i.tag!==3)throw Error("Unable to find node on an unmounted component.");return i.stateNode.current===i?e:t}function J(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=J(e),t!==null)return t;e=e.sibling}return null}function he(e){return e===null||typeof e!="object"?null:(e=Dd&&e[Dd]||e["@@iterator"],typeof e=="function"?e:null)}function ie(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===cn?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case As:return"Fragment";case Od:return"Profiler";case Al:return"StrictMode";case Os:return"Suspense";case rh:return"SuspenseList";case lh:return"Activity"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case xt:return"Portal";case ci:return(e.displayName||"Context")+".Provider";case zd:return(e._context.displayName||"Context")+".Consumer";case Rs:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sh:return t=e.displayName||null,t!==null?t:ie(e.type)||"Memo";case wi:t=e._payload,e=e._init;try{return ie(e(t))}catch{}}return null}function Ee(e){return typeof e.tag=="number"?de(e):typeof e.name=="string"?e.name:null}function de(e){var t=e.type;switch(e.tag){case 31:return"Activity";case 24:return"Cache";case 9:return(t._context.displayName||"Context")+".Consumer";case 10:return(t.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 26:case 27:case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(t);case 8:return t===Al?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;break;case 29:if(t=e._debugInfo,t!=null){for(var i=t.length-1;0<=i;i--)if(typeof t[i].name=="string")return t[i].name}if(e.return!==null)return de(e.return)}return null}function Ue(e){return{current:e}}function ze(e,t){0>Po?console.error("Unexpected pop."):(t!==Jc[Po]&&console.error("Unexpected Fiber popped."),e.current=Nd[Po],Nd[Po]=null,Jc[Po]=null,Po--)}function Fe(e,t,i){Po++,Nd[Po]=e.current,Jc[Po]=i,e.current=t}function Ge(e){return e===null&&console.error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue."),e}function Xe(e,t){Fe($o,t,e),Fe(Rl,e,e),Fe(Ur,null,e);var i=t.nodeType;switch(i){case 9:case 11:i=i===9?"#document":"#fragment",t=(t=t.documentElement)&&(t=t.namespaceURI)?ri(t):Ll;break;default:if(i=t.tagName,t=t.namespaceURI)t=ri(t),t=Or(t,i);else switch(i){case"svg":t=Zh;break;case"math":t=k0;break;default:t=Ll}}i=i.toLowerCase(),i=Cp(null,i),i={context:t,ancestorInfo:i},ze(Ur,e),Fe(Ur,i,e)}function Q(e){ze(Ur,e),ze(Rl,e),ze($o,e)}function V(){return Ge(Ur.current)}function ee(e){e.memoizedState!==null&&Fe(ch,e,e);var t=Ge(Ur.current),i=e.type,c=Or(t.context,i);i=Cp(t.ancestorInfo,i),c={context:c,ancestorInfo:i},t!==c&&(Fe(Rl,e,e),Fe(Ur,c,e))}function Oe(e){Rl.current===e&&(ze(Ur,e),ze(Rl,e)),ch.current===e&&(ze(ch,e),iv._currentValue=uf)}function $(e){return typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}function P(e){try{return fe(e),!1}catch{return!0}}function fe(e){return""+e}function ne(e,t){if(P(e))return console.error("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before using it here.",t,$(e)),fe(e)}function ke(e,t){if(P(e))return console.error("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before using it here.",t,$(e)),fe(e)}function Be(e){if(P(e))return console.error("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before using it here.",$(e)),fe(e)}function Te(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled)return!0;if(!t.supportsFiber)return console.error("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://react.dev/link/react-devtools"),!0;try{Ol=t.inject(e),ma=t}catch(i){console.error("React instrumentation encountered an error: %s.",i)}return!!t.checkDCE}function Pe(e){if(typeof xo=="function"&&db(e),ma&&typeof ma.setStrictMode=="function")try{ma.setStrictMode(Ol,e)}catch(t){_n||(_n=!0,console.error("React instrumentation encountered an error: %s",t))}}function Me(e){He=e}function $e(){He!==null&&typeof He.markCommitStopped=="function"&&He.markCommitStopped()}function it(e){He!==null&&typeof He.markComponentRenderStarted=="function"&&He.markComponentRenderStarted(e)}function Ke(){He!==null&&typeof He.markComponentRenderStopped=="function"&&He.markComponentRenderStopped()}function lt(e){He!==null&&typeof He.markRenderStarted=="function"&&He.markRenderStarted(e)}function ht(){He!==null&&typeof He.markRenderStopped=="function"&&He.markRenderStopped()}function Vt(e,t){He!==null&&typeof He.markStateUpdateScheduled=="function"&&He.markStateUpdateScheduled(e,t)}function ca(e){return e>>>=0,e===0?32:31-(Pr(e)/Vx|0)|0}function _e(e){if(e&1)return"SyncHydrationLane";if(e&2)return"Sync";if(e&4)return"InputContinuousHydration";if(e&8)return"InputContinuous";if(e&16)return"DefaultHydration";if(e&32)return"Default";if(e&128)return"TransitionHydration";if(e&4194048)return"Transition";if(e&62914560)return"Retry";if(e&67108864)return"SelectiveHydration";if(e&134217728)return"IdleHydration";if(e&268435456)return"Idle";if(e&536870912)return"Offscreen";if(e&1073741824)return"Deferred"}function ot(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return console.error("Should have found matching lanes. This is a bug in React."),e}}function Yt(e,t,i){var c=e.pendingLanes;if(c===0)return 0;var g=0,m=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var E=c&134217727;return E!==0?(c=E&~m,c!==0?g=ot(c):(x&=E,x!==0?g=ot(x):i||(i=E&~e,i!==0&&(g=ot(i))))):(E=c&~m,E!==0?g=ot(E):x!==0?g=ot(x):i||(i=c&~e,i!==0&&(g=ot(i)))),g===0?0:t!==0&&t!==g&&!(t&m)&&(m=g&-g,i=t&-t,m>=i||m===32&&(i&4194048)!==0)?t:g}function Jt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Un(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return console.error("Should have found matching lanes. This is a bug in React."),-1}}function Ae(){var e=uh;return uh<<=1,!(uh&4194048)&&(uh=256),e}function gt(){var e=$r;return $r<<=1,!($r&62914560)&&($r=4194304),e}function Xt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Rn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ve(e,t,i,c,g,m){var x=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var E=e.entanglements,D=e.expirationTimes,N=e.hiddenUpdates;for(i=x&~i;0<i;){var se=31-aa(i),me=1<<se;E[se]=0,D[se]=-1;var ae=N[se];if(ae!==null)for(N[se]=null,se=0;se<ae.length;se++){var ve=ae[se];ve!==null&&(ve.lane&=-536870913)}i&=~me}c!==0&&Ne(e,c,0),m!==0&&g===0&&e.tag!==0&&(e.suspendedLanes|=m&~(x&~t))}function Ne(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var c=31-aa(t);e.entangledLanes|=t,e.entanglements[c]=e.entanglements[c]|1073741824|i&4194090}function qe(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var c=31-aa(i),g=1<<c;g&t|e[c]&t&&(e[c]|=t),i&=~g}}function gn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function hn(e,t,i){if(Fi)for(e=e.pendingUpdatersLaneMap;0<i;){var c=31-aa(i),g=1<<c;e[c].add(t),i&=~g}}function lr(e,t){if(Fi)for(var i=e.pendingUpdatersLaneMap,c=e.memoizedUpdaters;0<t;){var g=31-aa(t);e=1<<g,g=i[g],0<g.size&&(g.forEach(function(m){var x=m.alternate;x!==null&&c.has(x)||c.add(m)}),g.clear()),t&=~e}}function Kr(e){return e&=-e,Ei<e?jo<e?e&134217727?_r:dh:jo:Ei}function En(){var e=Qt.p;return e!==0?e:(e=window.event,e===void 0?_r:Ms(e.type))}function Zi(e,t){var i=Qt.p;try{return Qt.p=e,t()}finally{Qt.p=i}}function Qi(e){delete e[Ma],delete e[ui],delete e[fh],delete e[eu],delete e[Ud]}function ua(e){var t=e[Ma];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ds]||i[Ma]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Vg(e);e!==null;){if(i=e[Ma])return i;e=Vg(e)}return t}e=i,i=e.parentNode}return null}function Ga(e){if(e=e[Ma]||e[Ds]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Oi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error("getNodeFromInstance: Invalid argument.")}function z(e){var t=e[fb];return t||(t=e[fb]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Y(e){e[Pd]=!0}function Ie(e,t){je(e,t),je(e+"Capture",t)}function je(e,t){So[e]&&console.error("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",e),So[e]=t;var i=e.toLowerCase();for(gh[i]=e,e==="onDoubleClick"&&(gh.ondblclick=e),e=0;e<t.length;e++)zl.add(t[e])}function Ze(e,t){hh[t.type]||t.onChange||t.onInput||t.readOnly||t.disabled||t.value==null||console.error(e==="select"?"You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set `onChange`.":"You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),t.onChange||t.readOnly||t.disabled||t.checked==null||console.error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function At(e){return _o.call($d,e)?!0:_o.call(ph,e)?!1:gb.test(e)?$d[e]=!0:(ph[e]=!0,console.error("Invalid attribute name: `%s`",e),!1)}function vt(e,t,i){if(At(t)){if(!e.hasAttribute(t)){switch(typeof i){case"symbol":case"object":return i;case"function":return i;case"boolean":if(i===!1)return i}return i===void 0?void 0:null}return e=e.getAttribute(t),e===""&&i===!0?!0:(ne(i,t),e===""+i?i:e)}}function $t(e,t,i){if(At(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var c=t.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(t);return}}ne(i,t),e.setAttribute(t,""+i)}}function pt(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}ne(i,t),e.setAttribute(t,""+i)}}function jn(e,t,i,c){if(c===null)e.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}ne(c,i),e.setAttributeNS(t,i,""+c)}}function ko(){}function hp(){if(tu===0){hb=console.log,Hy=console.info,pb=console.warn,nu=console.error,Fy=console.group,qy=console.groupCollapsed,Gy=console.groupEnd;var e={configurable:!0,enumerable:!0,value:ko,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}tu++}function Mo(){if(tu--,tu===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:mt({},e,{value:hb}),info:mt({},e,{value:Hy}),warn:mt({},e,{value:pb}),error:mt({},e,{value:nu}),group:mt({},e,{value:Fy}),groupCollapsed:mt({},e,{value:qy}),groupEnd:mt({},e,{value:Gy})})}0>tu&&console.error("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}function dn(e){if(au===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);au=t&&t[1]||"",_d=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+au+e+_d}function wa(e,t){if(!e||jd)return"";var i=mb.get(e);if(i!==void 0)return i;jd=!0,i=Error.prepareStackTrace,Error.prepareStackTrace=void 0;var c=null;c=oe.H,oe.H=null,hp();try{var g={DetermineComponentFrameRoot:function(){try{if(t){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Je){var ve=Je}Reflect.construct(e,[],ae)}else{try{ae.call()}catch(Je){ve=Je}e.call(ae.prototype)}}else{try{throw Error()}catch(Je){ve=Je}(ae=e())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Je){if(Je&&ve&&typeof Je.stack=="string")return[Je.stack,ve.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=g.DetermineComponentFrameRoot(),E=x[0],D=x[1];if(E&&D){var N=E.split(`
`),se=D.split(`
`);for(x=m=0;m<N.length&&!N[m].includes("DetermineComponentFrameRoot");)m++;for(;x<se.length&&!se[x].includes("DetermineComponentFrameRoot");)x++;if(m===N.length||x===se.length)for(m=N.length-1,x=se.length-1;1<=m&&0<=x&&N[m]!==se[x];)x--;for(;1<=m&&0<=x;m--,x--)if(N[m]!==se[x]){if(m!==1||x!==1)do if(m--,x--,0>x||N[m]!==se[x]){var me=`
`+N[m].replace(" at new "," at ");return e.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",e.displayName)),typeof e=="function"&&mb.set(e,me),me}while(1<=m&&0<=x);break}}}finally{jd=!1,oe.H=c,Mo(),Error.prepareStackTrace=i}return N=(N=e?e.displayName||e.name:"")?dn(N):"",typeof e=="function"&&mb.set(e,N),N}function Ys(e){var t=Error.prepareStackTrace;if(Error.prepareStackTrace=void 0,e=e.stack,Error.prepareStackTrace=t,e.startsWith(`Error: react-stack-top-frame
`)&&(e=e.slice(29)),t=e.indexOf(`
`),t!==-1&&(e=e.slice(t+1)),t=e.indexOf("react-stack-bottom-frame"),t!==-1&&(t=e.lastIndexOf(`
`,t)),t!==-1)e=e.slice(0,t);else return"";return e}function pp(e){switch(e.tag){case 26:case 27:case 5:return dn(e.type);case 16:return dn("Lazy");case 13:return dn("Suspense");case 19:return dn("SuspenseList");case 0:case 15:return wa(e.type,!1);case 11:return wa(e.type.render,!1);case 1:return wa(e.type,!0);case 31:return dn("Activity");default:return""}}function qv(e){try{var t="";do{t+=pp(e);var i=e._debugInfo;if(i)for(var c=i.length-1;0<=c;c--){var g=i[c];if(typeof g.name=="string"){var m=t,x=g.env,E=dn(g.name+(x?" ["+x+"]":""));t=m+E}}e=e.return}while(e);return t}catch(D){return`
Error generating stack: `+D.message+`
`+D.stack}}function Gv(e){return(e=e?e.displayName||e.name:"")?dn(e):""}function Mu(){if(ba===null)return null;var e=ba._debugOwner;return e!=null?Ee(e):null}function Au(){if(ba===null)return"";var e=ba;try{var t="";switch(e.tag===6&&(e=e.return),e.tag){case 26:case 27:case 5:t+=dn(e.type);break;case 13:t+=dn("Suspense");break;case 19:t+=dn("SuspenseList");break;case 31:t+=dn("Activity");break;case 30:case 0:case 15:case 1:e._debugOwner||t!==""||(t+=Gv(e.type));break;case 11:e._debugOwner||t!==""||(t+=Gv(e.type.render))}for(;e;)if(typeof e.tag=="number"){var i=e;e=i._debugOwner;var c=i._debugStack;e&&c&&(typeof c!="string"&&(i._debugStack=c=Ys(c)),c!==""&&(t+=`
`+c))}else if(e.debugStack!=null){var g=e.debugStack;(e=e.owner)&&g&&(t+=`
`+Ys(g))}else break;var m=t}catch(x){m=`
Error generating stack: `+x.message+`
`+x.stack}return m}function nt(e,t,i,c,g,m,x){var E=ba;Jr(e);try{return e!==null&&e._debugTask?e._debugTask.run(t.bind(null,i,c,g,m,x)):t(i,c,g,m,x)}finally{Jr(E)}throw Error("runWithFiberInDEV should never be called in production. This is a bug in React.")}function Jr(e){oe.getCurrentStack=e===null?null:Au,Lo=!1,ba=e}function da(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return Be(e),e;default:return""}}function Kl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jl(e){var t=Kl(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);Be(e[t]);var c=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var g=i.get,m=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return g.call(this)},set:function(x){Be(x),c=""+x,m.call(this,x)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(x){Be(x),c=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pn(e){e._valueTracker||(e._valueTracker=Jl(e))}function mp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),c="";return e&&(c=Kl(e)?e.checked?"true":"false":e.value),e=c,e!==i?(t.setValue(e),!0):!1}function Ru(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wn(e){return e.replace(Vy,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Xs(e,t){t.checked===void 0||t.defaultChecked===void 0||vb||(console.error("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://react.dev/link/controlled-components",Mu()||"A component",t.type),vb=!0),t.value===void 0||t.defaultValue===void 0||bb||(console.error("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://react.dev/link/controlled-components",Mu()||"A component",t.type),bb=!0)}function bp(e,t,i,c,g,m,x,E){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?(ne(x,"type"),e.type=x):e.removeAttribute("type"),t!=null?x==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+da(t)):e.value!==""+da(t)&&(e.value=""+da(t)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),t!=null?Pf(e,x,da(t)):i!=null?Pf(e,x,da(i)):c!=null&&e.removeAttribute("value"),g==null&&m!=null&&(e.defaultChecked=!!m),g!=null&&(e.checked=g&&typeof g!="function"&&typeof g!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?(ne(E,"name"),e.name=""+da(E)):e.removeAttribute("name")}function vp(e,t,i,c,g,m,x,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(ne(m,"type"),e.type=m),t!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||t!=null))return;i=i!=null?""+da(i):"",t=t!=null?""+da(t):i,E||t===e.value||(e.value=t),e.defaultValue=t}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=E?e.checked:!!c,e.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(ne(x,"name"),e.name=x)}function Pf(e,t,i){t==="number"&&Ru(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Vv(e,t){t.value==null&&(typeof t.children=="object"&&t.children!==null?ob.Children.forEach(t.children,function(i){i==null||typeof i=="string"||typeof i=="number"||typeof i=="bigint"||mh||(mh=!0,console.error("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>."))}):t.dangerouslySetInnerHTML==null||xb||(xb=!0,console.error("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected."))),t.selected==null||yb||(console.error("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),yb=!0)}function Ou(){var e=Mu();return e?`

Check the render method of \``+e+"`.":""}function cr(e,t,i,c){if(e=e.options,t){t={};for(var g=0;g<i.length;g++)t["$"+i[g]]=!0;for(i=0;i<e.length;i++)g=t.hasOwnProperty("$"+e[i].value),e[i].selected!==g&&(e[i].selected=g),g&&c&&(e[i].defaultSelected=!0)}else{for(i=""+da(i),t=null,g=0;g<e.length;g++){if(e[g].value===i){e[g].selected=!0,c&&(e[g].defaultSelected=!0);return}t!==null||e[g].disabled||(t=e[g])}t!==null&&(t.selected=!0)}}function Ao(e,t){for(e=0;e<Yy.length;e++){var i=Yy[e];if(t[i]!=null){var c=Qn(t[i]);t.multiple&&!c?console.error("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",i,Ou()):!t.multiple&&c&&console.error("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",i,Ou())}}t.value===void 0||t.defaultValue===void 0||Ld||(console.error("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://react.dev/link/controlled-components"),Ld=!0)}function $f(e,t){t.value===void 0||t.defaultValue===void 0||Xy||(console.error("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://react.dev/link/controlled-components",Mu()||"A component"),Xy=!0),t.children!=null&&t.value==null&&console.error("Use the `defaultValue` or `value` props instead of setting children on <textarea>.")}function yp(e,t,i){if(t!=null&&(t=""+da(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+da(i):""}function Zs(e,t,i,c){if(t==null){if(c!=null){if(i!=null)throw Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(Qn(c)){if(1<c.length)throw Error("<textarea> can only have at most one child.");c=c[0]}i=c}i==null&&(i=""),t=i}i=da(t),e.defaultValue=i,c=e.textContent,c===i&&c!==""&&c!==null&&(e.value=c)}function _f(e,t){return e.serverProps===void 0&&e.serverTail.length===0&&e.children.length===1&&3<e.distanceFromLeaf&&e.distanceFromLeaf>15-t?_f(e.children[0],t):e}function Ia(e){return"  "+"  ".repeat(e)}function Wl(e){return"+ "+"  ".repeat(e)}function Wr(e){return"- "+"  ".repeat(e)}function gi(e){switch(e.tag){case 26:case 27:case 5:return e.type;case 16:return"Lazy";case 13:return"Suspense";case 19:return"SuspenseList";case 0:case 15:return e=e.type,e.displayName||e.name||null;case 11:return e=e.type.render,e.displayName||e.name||null;case 1:return e=e.type,e.displayName||e.name||null;default:return null}}function ec(e,t){return bh.test(e)?(e=JSON.stringify(e),e.length>t-2?8>t?'{"..."}':"{"+e.slice(0,t-7)+'..."}':"{"+e+"}"):e.length>t?5>t?'{"..."}':e.slice(0,t-3)+"...":e}function jf(e,t,i){var c=120-2*i;if(t===null)return Wl(i)+ec(e,c)+`
`;if(typeof t=="string"){for(var g=0;g<t.length&&g<e.length&&t.charCodeAt(g)===e.charCodeAt(g);g++);return g>c-8&&10<g&&(e="..."+e.slice(g-8),t="..."+t.slice(g-8)),Wl(i)+ec(e,c)+`
`+Wr(i)+ec(t,c)+`
`}return Ia(i)+ec(e,c)+`
`}function tc(e){return Object.prototype.toString.call(e).replace(/^\[object (.*)\]$/,function(t,i){return i})}function nc(e,t){switch(typeof e){case"string":return e=JSON.stringify(e),e.length>t?5>t?'"..."':e.slice(0,t-4)+'..."':e;case"object":if(e===null)return"null";if(Qn(e))return"[...]";if(e.$$typeof===Ir)return(t=ie(e.type))?"<"+t+">":"<...>";var i=tc(e);if(i==="Object"){i="",t-=2;for(var c in e)if(e.hasOwnProperty(c)){var g=JSON.stringify(c);if(g!=='"'+c+'"'&&(c=g),t-=c.length-2,g=nc(e[c],15>t?t:15),t-=g.length,0>t){i+=i===""?"...":", ...";break}i+=(i===""?"":",")+c+":"+g}return"{"+i+"}"}return i;case"function":return(t=e.displayName||e.name)?"function "+t:"function";default:return String(e)}}function ur(e,t){return typeof e!="string"||bh.test(e)?"{"+nc(e,t-2)+"}":e.length>t-2?5>t?'"..."':'"'+e.slice(0,t-5)+'..."':'"'+e+'"'}function xp(e,t,i){var c=120-i.length-e.length,g=[],m;for(m in t)if(t.hasOwnProperty(m)&&m!=="children"){var x=ur(t[m],120-i.length-m.length-1);c-=m.length+x.length+2,g.push(m+"="+x)}return g.length===0?i+"<"+e+`>
`:0<c?i+"<"+e+" "+g.join(" ")+`>
`:i+"<"+e+`
`+i+"  "+g.join(`
`+i+"  ")+`
`+i+`>
`}function zi(e,t,i){var c="",g=mt({},t),m;for(m in e)if(e.hasOwnProperty(m)){delete g[m];var x=120-2*i-m.length-2,E=nc(e[m],x);t.hasOwnProperty(m)?(x=nc(t[m],x),c+=Wl(i)+m+": "+E+`
`,c+=Wr(i)+m+": "+x+`
`):c+=Wl(i)+m+": "+E+`
`}for(var D in g)g.hasOwnProperty(D)&&(e=nc(g[D],120-2*i-D.length-2),c+=Wr(i)+D+": "+e+`
`);return c}function Sp(e,t,i,c){var g="",m=new Map;for(N in i)i.hasOwnProperty(N)&&m.set(N.toLowerCase(),N);if(m.size===1&&m.has("children"))g+=xp(e,t,Ia(c));else{for(var x in t)if(t.hasOwnProperty(x)&&x!=="children"){var E=120-2*(c+1)-x.length-1,D=m.get(x.toLowerCase());if(D!==void 0){m.delete(x.toLowerCase());var N=t[x];D=i[D];var se=ur(N,E);E=ur(D,E),typeof N=="object"&&N!==null&&typeof D=="object"&&D!==null&&tc(N)==="Object"&&tc(D)==="Object"&&(2<Object.keys(N).length||2<Object.keys(D).length||-1<se.indexOf("...")||-1<E.indexOf("..."))?g+=Ia(c+1)+x+`={{
`+zi(N,D,c+2)+Ia(c+1)+`}}
`:(g+=Wl(c+1)+x+"="+se+`
`,g+=Wr(c+1)+x+"="+E+`
`)}else g+=Ia(c+1)+x+"="+ur(t[x],E)+`
`}m.forEach(function(me){if(me!=="children"){var ae=120-2*(c+1)-me.length-1;g+=Wr(c+1)+me+"="+ur(i[me],ae)+`
`}}),g=g===""?Ia(c)+"<"+e+`>
`:Ia(c)+"<"+e+`
`+g+Ia(c)+`>
`}return e=i.children,t=t.children,typeof e=="string"||typeof e=="number"||typeof e=="bigint"?(m="",(typeof t=="string"||typeof t=="number"||typeof t=="bigint")&&(m=""+t),g+=jf(m,""+e,c+1)):(typeof t=="string"||typeof t=="number"||typeof t=="bigint")&&(g=e==null?g+jf(""+t,null,c+1):g+jf(""+t,void 0,c+1)),g}function wp(e,t){var i=gi(e);if(i===null){for(i="",e=e.child;e;)i+=wp(e,t),e=e.sibling;return i}return Ia(t)+"<"+i+`>
`}function zu(e,t){var i=_f(e,t);if(i!==e&&(e.children.length!==1||e.children[0]!==i))return Ia(t)+`...
`+zu(i,t+1);i="";var c=e.fiber._debugInfo;if(c)for(var g=0;g<c.length;g++){var m=c[g].name;typeof m=="string"&&(i+=Ia(t)+"<"+m+`>
`,t++)}if(c="",g=e.fiber.pendingProps,e.fiber.tag===6)c=jf(g,e.serverProps,t),t++;else if(m=gi(e.fiber),m!==null)if(e.serverProps===void 0){c=t;var x=120-2*c-m.length-2,E="";for(N in g)if(g.hasOwnProperty(N)&&N!=="children"){var D=ur(g[N],15);if(x-=N.length+D.length+2,0>x){E+=" ...";break}E+=" "+N+"="+D}c=Ia(c)+"<"+m+E+`>
`,t++}else e.serverProps===null?(c=xp(m,g,Wl(t)),t++):typeof e.serverProps=="string"?console.error("Should not have matched a non HostText fiber to a Text node. This is a bug in React."):(c=Sp(m,g,e.serverProps,t),t++);var N="";for(g=e.fiber.child,m=0;g&&m<e.children.length;)x=e.children[m],x.fiber===g?(N+=zu(x,t),m++):N+=wp(g,t),g=g.sibling;for(g&&0<e.children.length&&(N+=Ia(t)+`...
`),g=e.serverTail,e.serverProps===null&&t--,e=0;e<g.length;e++)m=g[e],N=typeof m=="string"?N+(Wr(t)+ec(m,120-2*t)+`
`):N+xp(m.type,m.props,Wr(t));return i+c+N}function es(e){try{return`

`+zu(e,0)}catch{return""}}function Ep(e,t,i){for(var c=t,g=null,m=0;c;)c===e&&(m=0),g={fiber:c,children:g!==null?[g]:[],serverProps:c===t?i:c===e?null:void 0,serverTail:[],distanceFromLeaf:m},m++,c=c.return;return g!==null?es(g).replaceAll(/^[+-]/gm,">"):""}function Cp(e,t){var i=mt({},e||vh),c={tag:t};return Bd.indexOf(t)!==-1&&(i.aTagInScope=null,i.buttonTagInScope=null,i.nobrTagInScope=null),wb.indexOf(t)!==-1&&(i.pTagInButtonScope=null),Sb.indexOf(t)!==-1&&t!=="address"&&t!=="div"&&t!=="p"&&(i.listItemTagAutoclosing=null,i.dlItemTagAutoclosing=null),i.current=c,t==="form"&&(i.formTag=c),t==="a"&&(i.aTagInScope=c),t==="button"&&(i.buttonTagInScope=c),t==="nobr"&&(i.nobrTagInScope=c),t==="p"&&(i.pTagInButtonScope=c),t==="li"&&(i.listItemTagAutoclosing=c),(t==="dd"||t==="dt")&&(i.dlItemTagAutoclosing=c),t==="#document"||t==="html"?i.containerTagInScope=null:i.containerTagInScope||(i.containerTagInScope=c),e!==null||t!=="#document"&&t!=="html"&&t!=="body"?i.implicitRootScope===!0&&(i.implicitRootScope=!1):i.implicitRootScope=!0,i}function Qs(e,t,i){switch(t){case"select":return e==="hr"||e==="option"||e==="optgroup"||e==="script"||e==="template"||e==="#text";case"optgroup":return e==="option"||e==="#text";case"option":return e==="#text";case"tr":return e==="th"||e==="td"||e==="style"||e==="script"||e==="template";case"tbody":case"thead":case"tfoot":return e==="tr"||e==="style"||e==="script"||e==="template";case"colgroup":return e==="col"||e==="template";case"table":return e==="caption"||e==="colgroup"||e==="tbody"||e==="tfoot"||e==="thead"||e==="style"||e==="script"||e==="template";case"head":return e==="base"||e==="basefont"||e==="bgsound"||e==="link"||e==="meta"||e==="title"||e==="noscript"||e==="noframes"||e==="style"||e==="script"||e==="template";case"html":if(i)break;return e==="head"||e==="body"||e==="frameset";case"frameset":return e==="frame";case"#document":if(!i)return e==="html"}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6";case"rp":case"rt":return Zy.indexOf(t)===-1;case"caption":case"col":case"colgroup":case"frameset":case"frame":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return t==null;case"head":return i||t===null;case"html":return i&&t==="#document"||t===null;case"body":return i&&(t==="#document"||t==="html")||t===null}return!0}function Mx(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null}function Tp(e,t){for(;e;){switch(e.tag){case 5:case 26:case 27:if(e.type===t)return e}e=e.return}return null}function Lf(e,t){t=t||vh;var i=t.current;if(t=(i=Qs(e,i&&i.tag,t.implicitRootScope)?null:i)?null:Mx(e,t),t=i||t,!t)return!0;var c=t.tag;if(t=String(!!i)+"|"+e+"|"+c,wo[t])return!1;wo[t]=!0;var g=(t=ba)?Tp(t.return,c):null,m=t!==null&&g!==null?Ep(g,t,null):"",x="<"+e+">";return i?(i="",c==="table"&&e==="tr"&&(i+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),console.error(`In HTML, %s cannot be a child of <%s>.%s
This will cause a hydration error.%s`,x,c,i,m)):console.error(`In HTML, %s cannot be a descendant of <%s>.
This will cause a hydration error.%s`,x,c,m),t&&(e=t.return,g===null||e===null||g===e&&e._debugOwner===t._debugOwner||nt(g,function(){console.error(`<%s> cannot contain a nested %s.
See this log for the ancestor stack trace.`,c,x)})),!1}function ac(e,t,i){if(i||Qs("#text",t,!1))return!0;if(i="#text|"+t,wo[i])return!1;wo[i]=!0;var c=(i=ba)?Tp(i,t):null;return i=i!==null&&c!==null?Ep(c,i,i.tag!==6?{children:null}:null):"",/\S/.test(e)?console.error(`In HTML, text nodes cannot be a child of <%s>.
This will cause a hydration error.%s`,t,i):console.error(`In HTML, whitespace text nodes cannot be a child of <%s>. Make sure you don't have any extra whitespace between tags on each line of your source code.
This will cause a hydration error.%s`,t,i),!1}function Du(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}function Ax(e){return e.replace(Yx,function(t,i){return i.toUpperCase()})}function Nu(e,t,i){var c=t.indexOf("--")===0;c||(-1<t.indexOf("-")?Ho.hasOwnProperty(t)&&Ho[t]||(Ho[t]=!0,console.error("Unsupported style property %s. Did you mean %s?",t,Ax(t.replace(Ns,"ms-")))):Hd.test(t)?Ho.hasOwnProperty(t)&&Ho[t]||(Ho[t]=!0,console.error("Unsupported vendor-prefixed style property %s. Did you mean %s?",t,t.charAt(0).toUpperCase()+t.slice(1))):!Eb.test(i)||Cb.hasOwnProperty(i)&&Cb[i]||(Cb[i]=!0,console.error(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,t,i.replace(Eb,""))),typeof i=="number"&&(isNaN(i)?Tb||(Tb=!0,console.error("`NaN` is an invalid value for the `%s` css style property.",t)):isFinite(i)||Fd||(Fd=!0,console.error("`Infinity` is an invalid value for the `%s` css style property.",t)))),i==null||typeof i=="boolean"||i===""?c?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":c?e.setProperty(t,i):typeof i!="number"||i===0||kb.has(t)?t==="float"?e.cssFloat=i:(ke(i,t),e[t]=(""+i).trim()):e[t]=i+"px"}function Bf(e,t,i){if(t!=null&&typeof t!="object")throw Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");if(t&&Object.freeze(t),e=e.style,i!=null){if(t){var c={};if(i){for(var g in i)if(i.hasOwnProperty(g)&&!t.hasOwnProperty(g))for(var m=Bo[g]||[g],x=0;x<m.length;x++)c[m[x]]=g}for(var E in t)if(t.hasOwnProperty(E)&&(!i||i[E]!==t[E]))for(g=Bo[E]||[E],m=0;m<g.length;m++)c[g[m]]=E;E={};for(var D in t)for(g=Bo[D]||[D],m=0;m<g.length;m++)E[g[m]]=D;D={};for(var N in c)if(g=c[N],(m=E[N])&&g!==m&&(x=g+","+m,!D[x])){D[x]=!0,x=console;var se=t[g];x.error.call(x,"%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",se==null||typeof se=="boolean"||se===""?"Removing":"Updating",g,m)}}for(var me in i)!i.hasOwnProperty(me)||t!=null&&t.hasOwnProperty(me)||(me.indexOf("--")===0?e.setProperty(me,""):me==="float"?e.cssFloat="":e[me]="");for(var ae in t)N=t[ae],t.hasOwnProperty(ae)&&i[ae]!==N&&Nu(e,ae,N)}else for(c in t)t.hasOwnProperty(c)&&Nu(e,c,t[c])}function Ks(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Js(e){return xh.get(e)||e}function ic(e,t){if(_o.call(Is,t)&&Is[t])return!0;if(Qy.test(t)){if(e="aria-"+t.slice(4).toLowerCase(),e=ou.hasOwnProperty(e)?e:null,e==null)return console.error("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",t),Is[t]=!0;if(t!==e)return console.error("Invalid ARIA attribute `%s`. Did you mean `%s`?",t,e),Is[t]=!0}if(Sh.test(t)){if(e=t.toLowerCase(),e=ou.hasOwnProperty(e)?e:null,e==null)return Is[t]=!0,!1;t!==e&&(console.error("Unknown ARIA attribute `%s`. Did you mean `%s`?",t,e),Is[t]=!0)}return!0}function Yv(e,t){var i=[],c;for(c in t)ic(e,c)||i.push(c);t=i.map(function(g){return"`"+g+"`"}).join(", "),i.length===1?console.error("Invalid aria prop %s on <%s> tag. For details, see https://react.dev/link/invalid-aria-props",t,e):1<i.length&&console.error("Invalid aria props %s on <%s> tag. For details, see https://react.dev/link/invalid-aria-props",t,e)}function kp(e,t,i,c){if(_o.call(ia,t)&&ia[t])return!0;var g=t.toLowerCase();if(g==="onfocusin"||g==="onfocusout")return console.error("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),ia[t]=!0;if(typeof i=="function"&&(e==="form"&&t==="action"||e==="input"&&t==="formAction"||e==="button"&&t==="formAction"))return!0;if(c!=null){if(e=c.possibleRegistrationNames,c.registrationNameDependencies.hasOwnProperty(t))return!0;if(c=e.hasOwnProperty(g)?e[g]:null,c!=null)return console.error("Invalid event handler property `%s`. Did you mean `%s`?",t,c),ia[t]=!0;if(a.test(t))return console.error("Unknown event handler property `%s`. It will be ignored.",t),ia[t]=!0}else if(a.test(t))return o.test(t)&&console.error("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",t),ia[t]=!0;if(l.test(t)||f.test(t))return!0;if(g==="innerhtml")return console.error("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),ia[t]=!0;if(g==="aria")return console.error("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),ia[t]=!0;if(g==="is"&&i!==null&&i!==void 0&&typeof i!="string")return console.error("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof i),ia[t]=!0;if(typeof i=="number"&&isNaN(i))return console.error("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",t),ia[t]=!0;if(qd.hasOwnProperty(g)){if(g=qd[g],g!==t)return console.error("Invalid DOM property `%s`. Did you mean `%s`?",t,g),ia[t]=!0}else if(t!==g)return console.error("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",t,g),ia[t]=!0;switch(t){case"dangerouslySetInnerHTML":case"children":case"style":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":return!0;case"innerText":case"textContent":return!0}switch(typeof i){case"boolean":switch(t){case"autoFocus":case"checked":case"multiple":case"muted":case"selected":case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":case"capture":case"download":case"inert":return!0;default:return g=t.toLowerCase().slice(0,5),g==="data-"||g==="aria-"?!0:(i?console.error('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',i,t,t,i,t):console.error('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',i,t,t,i,t,t,t),ia[t]=!0)}case"function":case"symbol":return ia[t]=!0,!1;case"string":if(i==="false"||i==="true"){switch(t){case"checked":case"selected":case"multiple":case"muted":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":case"inert":break;default:return!0}console.error("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",i,t,i==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',t,i),ia[t]=!0}}return!0}function Xv(e,t,i){var c=[],g;for(g in t)kp(e,g,t[g],i)||c.push(g);t=c.map(function(m){return"`"+m+"`"}).join(", "),c.length===1?console.error("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://react.dev/link/attribute-behavior ",t,e):1<c.length&&console.error("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://react.dev/link/attribute-behavior ",t,e)}function dr(e){return b.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ki(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}function Hf(e){var t=Ga(e);if(t&&(e=t.stateNode)){var i=e[ui]||null;e:switch(e=t.stateNode,t.type){case"input":if(bp(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(ne(t,"name"),i=i.querySelectorAll('input[name="'+Wn(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var c=i[t];if(c!==e&&c.form===e.form){var g=c[ui]||null;if(!g)throw Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");bp(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(t=0;t<i.length;t++)c=i[t],c.form===e.form&&mp(c)}break e;case"textarea":yp(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&cr(e,!!i.multiple,t,!1)}}}function oc(e,t,i){if(j)return e(t,i);j=!0;try{var c=e(t);return c}finally{if(j=!1,(T!==null||O!==null)&&(Sl(),T&&(t=T,e=O,O=T=null,Hf(t),e)))for(t=0;t<e.length;t++)Hf(e[t])}}function Di(e,t){var i=e.stateNode;if(i===null)return null;var c=i[ui]||null;if(c===null)return null;i=c[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error("Expected `"+t+"` listener to be a function, instead got a value of `"+typeof i+"` type.");return i}function Ff(){if(ct)return ct;var e,t=le,i=t.length,c,g="value"in te?te.value:te.textContent,m=g.length;for(e=0;e<i&&t[e]===g[e];e++);var x=i-e;for(c=1;c<=x&&t[i-c]===g[m-c];c++);return ct=g.slice(e,1<c?1-c:void 0)}function Ws(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Iu(){return!0}function Uu(){return!1}function fa(e){function t(i,c,g,m,x){this._reactName=i,this._targetInst=g,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(i=e[E],this[E]=i?i(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Iu:Uu,this.isPropagationStopped=Uu,this}return mt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Iu)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Iu)},persist:function(){},isPersistent:Iu}),t}function Zv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AA[e])?!!t[e]:!1}function Ea(){return Zv}function ts(e,t){switch(e){case"keyup":return LA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==UE;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}function $u(e,t){switch(e){case"compositionend":return Pu(t);case"keypress":return t.which!==$E?null:(jE=!0,_E);case"textInput":return e=t.data,e===_E&&jE?null:e;default:return null}}function Rx(e,t){if(wh)return e==="compositionend"||!Zx&&ts(e,t)?(e=Ff(),ct=le=te=null,wh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return PE&&t.locale!=="ko"?null:t.data;default:return null}}function qf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!HA[e.type]:t==="textarea"}function Mp(e){if(!K)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t=typeof t[e]=="function"),t}function rc(e,t,i,c){T?O?O.push(c):O=[c]:T=c,t=ka(t,"onChange"),0<t.length&&(i=new Kt("onChange","change",null,i,c),e.push({event:i,listeners:t}))}function Gf(e){Fm(e,0)}function _u(e){var t=Oi(e);if(mp(t))return e}function Qv(e,t){if(e==="change")return t}function Kv(){Ab&&(Ab.detachEvent("onpropertychange",Jv),Rb=Ab=null)}function Jv(e){if(e.propertyName==="value"&&_u(Rb)){var t=[];rc(t,Rb,e,Ki(e)),oc(Gf,t)}}function Ap(e,t,i){e==="focusin"?(Kv(),Ab=t,Rb=i,Ab.attachEvent("onpropertychange",Jv)):e==="focusout"&&Kv()}function Ox(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _u(Rb)}function zx(e,t){if(e==="click")return _u(t)}function Dx(e,t){if(e==="input"||e==="change")return _u(t)}function Nx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}function ju(e,t){if(Ci(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),c=Object.keys(t);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var g=i[c];if(!_o.call(t,g)||!Ci(e[g],t[g]))return!1}return!0}function Rp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wv(e,t){var i=Rp(e);e=0;for(var c;i;){if(i.nodeType===3){if(c=e+i.textContent.length,e<=t&&c>=t)return{node:i,offset:t-e};e=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Rp(i)}}function ey(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ey(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ty(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ru(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ru(e.document)}return t}function Op(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Vf(e,t,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Kx||Eh==null||Eh!==Ru(c)||(c=Eh,"selectionStart"in c&&Op(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ob&&ju(Ob,c)||(Ob=c,c=ka(Qx,"onSelect"),0<c.length&&(t=new Kt("onSelect","select",null,t,i),e.push({event:t,listeners:c}),t.target=Eh)))}function el(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}function tl(e){if(Jx[e])return Jx[e];if(!Ch[e])return e;var t=Ch[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in BE)return Jx[e]=t[i];return e}function Ji(e,t){VE.set(e,t),Ie(t,[e])}function Va(e,t){if(typeof e=="object"&&e!==null){var i=eS.get(e);return i!==void 0?i:(t={value:e,source:t,stack:qv(t)},eS.set(e,t),t)}return{value:e,source:t,stack:qv(t)}}function Yf(){for(var e=Th,t=nS=Th=0;t<e;){var i=qo[t];qo[t++]=null;var c=qo[t];qo[t++]=null;var g=qo[t];qo[t++]=null;var m=qo[t];if(qo[t++]=null,c!==null&&g!==null){var x=c.pending;x===null?g.next=g:(g.next=x.next,x.next=g),c.pending=g}m!==0&&ny(i,g,m)}}function Xf(e,t,i,c){qo[Th++]=e,qo[Th++]=t,qo[Th++]=i,qo[Th++]=c,nS|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function zp(e,t,i,c){return Xf(e,t,i,c),Zf(e)}function Ya(e,t){return Xf(e,null,null,t),Zf(e)}function ny(e,t,i){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i);for(var g=!1,m=e.return;m!==null;)m.childLanes|=i,c=m.alternate,c!==null&&(c.childLanes|=i),m.tag===22&&(e=m.stateNode,e===null||e._visibility&tS||(g=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,g&&t!==null&&(g=31-aa(i),e=m.hiddenUpdates,c=e[g],c===null?e[g]=[t]:c.push(t),t.lane=i|536870912),m):null}function Zf(e){if(Jb>dR)throw of=Jb=0,Wb=DS=null,Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");of>fR&&(of=0,Wb=null,console.error("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render.")),e.alternate===null&&e.flags&4098&&jm(e);for(var t=e,i=t.return;i!==null;)t.alternate===null&&t.flags&4098&&jm(e),t=i,i=t.return;return t.tag===3?t.stateNode:null}function nl(e){if(Go===null)return e;var t=Go(e);return t===void 0?e:t.current}function Dp(e){if(Go===null)return e;var t=Go(e);return t===void 0?e!=null&&typeof e.render=="function"&&(t=nl(e.render),e.render!==t)?(t={$$typeof:Rs,render:t},e.displayName!==void 0&&(t.displayName=e.displayName),t):e:t.current}function ay(e,t){if(Go===null)return!1;var i=e.elementType;t=t.type;var c=!1,g=typeof t=="object"&&t!==null?t.$$typeof:null;switch(e.tag){case 1:typeof t=="function"&&(c=!0);break;case 0:(typeof t=="function"||g===wi)&&(c=!0);break;case 11:(g===Rs||g===wi)&&(c=!0);break;case 14:case 15:(g===sh||g===wi)&&(c=!0);break;default:return!1}return!!(c&&(e=Go(i),e!==void 0&&e===Go(t)))}function Qf(e){Go!==null&&typeof WeakSet=="function"&&(kh===null&&(kh=new WeakSet),kh.add(e))}function al(e,t,i){var c=e.alternate,g=e.child,m=e.sibling,x=e.tag,E=e.type,D=null;switch(x){case 0:case 15:case 1:D=E;break;case 11:D=E.render}if(Go===null)throw Error("Expected resolveFamily to be set during hot reload.");var N=!1;E=!1,D!==null&&(D=Go(D),D!==void 0&&(i.has(D)?E=!0:t.has(D)&&(x===1?E=!0:N=!0))),kh!==null&&(kh.has(e)||c!==null&&kh.has(c))&&(E=!0),E&&(e._debugNeedsRemount=!0),(E||N)&&(c=Ya(e,2),c!==null&&zt(c,e,2)),g===null||E||al(g,t,i),m!==null&&al(m,t,i)}function Ix(e,t,i,c){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null,this.actualDuration=-0,this.actualStartTime=-1.1,this.treeBaseDuration=this.selfBaseDuration=-0,this._debugTask=this._debugStack=this._debugOwner=this._debugInfo=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,XE||typeof Object.preventExtensions!="function"||Object.preventExtensions(this)}function Kf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ro(e,t){var i=e.alternate;switch(i===null?(i=A(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i._debugOwner=e._debugOwner,i._debugStack=e._debugStack,i._debugTask=e._debugTask,i._debugHookTypes=e._debugHookTypes,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null,i.actualDuration=-0,i.actualStartTime=-1.1),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext,_debugThenableState:t._debugThenableState},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i.selfBaseDuration=e.selfBaseDuration,i.treeBaseDuration=e.treeBaseDuration,i._debugInfo=e._debugInfo,i._debugNeedsRemount=e._debugNeedsRemount,i.tag){case 0:case 15:i.type=nl(e.type);break;case 1:i.type=nl(e.type);break;case 11:i.type=Dp(e.type)}return i}function Np(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null,e.selfBaseDuration=0,e.treeBaseDuration=0):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext,_debugThenableState:t._debugThenableState},e.selfBaseDuration=i.selfBaseDuration,e.treeBaseDuration=i.treeBaseDuration),e}function Jf(e,t,i,c,g,m){var x=0,E=e;if(typeof e=="function")Kf(e)&&(x=1),E=nl(E);else if(typeof e=="string")x=V(),x=Qg(e,i,x)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case lh:return t=A(31,i,t,g),t.elementType=lh,t.lanes=m,t;case As:return Ni(i.children,g,m,t);case Al:x=8,g|=di,g|=Br;break;case Od:return e=i,c=g,typeof e.id!="string"&&console.error('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof e.id),t=A(12,e,t,c|ja),t.elementType=Od,t.lanes=m,t.stateNode={effectDuration:0,passiveEffectDuration:0},t;case Os:return t=A(13,i,t,g),t.elementType=Os,t.lanes=m,t;case rh:return t=A(19,i,t,g),t.elementType=rh,t.lanes=m,t;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _y:case ci:x=10;break e;case zd:x=9;break e;case Rs:x=11,E=Dp(E);break e;case sh:x=14;break e;case wi:x=16,E=null;break e}E="",(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(E+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),e===null?i="null":Qn(e)?i="array":e!==void 0&&e.$$typeof===Ir?(i="<"+(ie(e.type)||"Unknown")+" />",E=" Did you accidentally export a JSX literal instead of a component?"):i=typeof e,(x=c?Ee(c):null)&&(E+=`

Check the render method of \``+x+"`."),x=29,i=Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: "+(i+"."+E)),E=null}return t=A(x,i,t,g),t.elementType=e,t.type=E,t.lanes=m,t._debugOwner=c,t}function Lu(e,t,i){return t=Jf(e.type,e.key,e.props,e._owner,t,i),t._debugOwner=e._owner,t._debugStack=e._debugStack,t._debugTask=e._debugTask,t}function Ni(e,t,i,c){return e=A(7,e,c,t),e.lanes=i,e}function Ip(e,t,i){return e=A(6,e,null,t),e.lanes=i,e}function Up(e,t,i){return t=A(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function il(e,t){Wi(),Mh[Ah++]=Wy,Mh[Ah++]=Jy,Jy=e,Wy=t}function Pp(e,t,i){Wi(),Vo[Yo++]=Dl,Vo[Yo++]=Nl,Vo[Yo++]=Vd,Vd=e;var c=Dl;e=Nl;var g=32-aa(c)-1;c&=~(1<<g),i+=1;var m=32-aa(t)+g;if(30<m){var x=g-g%5;m=(c&(1<<x)-1).toString(32),c>>=x,g-=x,Dl=1<<32-aa(t)+g|i<<g|c,Nl=m+e}else Dl=1<<m|i<<g|c,Nl=e}function Wf(e){Wi(),e.return!==null&&(il(e,1),Pp(e,1,0))}function ol(e){for(;e===Jy;)Jy=Mh[--Ah],Mh[Ah]=null,Wy=Mh[--Ah],Mh[Ah]=null;for(;e===Vd;)Vd=Vo[--Yo],Vo[Yo]=null,Nl=Vo[--Yo],Vo[Yo]=null,Dl=Vo[--Yo],Vo[Yo]=null}function Wi(){Gt||console.error("Expected to be hydrating. This is a bug in React. Please file an issue.")}function rl(e,t){if(e.return===null){if(Xo===null)Xo={fiber:e,children:[],serverProps:void 0,serverTail:[],distanceFromLeaf:t};else{if(Xo.fiber!==e)throw Error("Saw multiple hydration diff roots in a pass. This is a bug in React.");Xo.distanceFromLeaf>t&&(Xo.distanceFromLeaf=t)}return Xo}var i=rl(e.return,t+1).children;return 0<i.length&&i[i.length-1].fiber===e?(i=i[i.length-1],i.distanceFromLeaf>t&&(i.distanceFromLeaf=t),i):(t={fiber:e,children:[],serverProps:void 0,serverTail:[],distanceFromLeaf:t},i.push(t),t)}function sc(e,t){Il||(e=rl(e,0),e.serverProps=null,t!==null&&(t=Gg(t),e.serverTail.push(t)))}function ns(e){var t="",i=Xo;throw i!==null&&(Xo=null,t=es(i)),cc(Va(Error(`Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:

- A server/client branch \`if (typeof window !== 'undefined')\`.
- Variable input such as \`Date.now()\` or \`Math.random()\` which changes each time it's called.
- Date formatting in a user's locale which doesn't match the server.
- External changing data without sending a snapshot of it along with the HTML.
- Invalid HTML tag nesting.

It can also happen if the client has a browser extension installed which messes with the HTML before React loaded.

https://react.dev/link/hydration-mismatch`+t),e)),aS}function $p(e){var t=e.stateNode,i=e.type,c=e.memoizedProps;switch(t[Ma]=e,t[ui]=c,Ar(i,c),i){case"dialog":Dt("cancel",t),Dt("close",t);break;case"iframe":case"object":case"embed":Dt("load",t);break;case"video":case"audio":for(i=0;i<ev.length;i++)Dt(ev[i],t);break;case"source":Dt("error",t);break;case"img":case"image":case"link":Dt("error",t),Dt("load",t);break;case"details":Dt("toggle",t);break;case"input":Ze("input",c),Dt("invalid",t),Xs(t,c),vp(t,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Pn(t);break;case"option":Vv(t,c);break;case"select":Ze("select",c),Dt("invalid",t),Ao(t,c);break;case"textarea":Ze("textarea",c),Dt("invalid",t),$f(t,c),Zs(t,c.value,c.defaultValue,c.children),Pn(t)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||c.suppressHydrationWarning===!0||Tl(t.textContent,i)?(c.popover!=null&&(Dt("beforetoggle",t),Dt("toggle",t)),c.onScroll!=null&&Dt("scroll",t),c.onScrollEnd!=null&&Dt("scrollend",t),c.onClick!=null&&(t.onclick=ys),t=!0):t=!1,t||ns(e)}function eg(e){for(Ti=e.return;Ti;)switch(Ti.tag){case 5:case 13:Us=!1;return;case 27:case 3:Us=!0;return;default:Ti=Ti.return}}function sl(e){if(e!==Ti)return!1;if(!Gt)return eg(e),Gt=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Ss(e.type,e.memoizedProps)),i=!i),i&&qn){for(i=qn;i;){var c=rl(e,0),g=Gg(i);c.serverTail.push(g),i=g.type==="Suspense"?Gc(i):si(i.nextSibling)}ns(e)}if(eg(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");qn=Gc(e)}else t===27?(t=qn,Zn(e.type)?(e=qS,qS=null,qn=e):qn=t):qn=Ti?si(e.stateNode.nextSibling):null;return!0}function lc(){qn=Ti=null,Il=Gt=!1}function _p(){var e=Yd;return e!==null&&(Ai===null?Ai=e:Ai.push.apply(Ai,e),Yd=null),e}function cc(e){Yd===null?Yd=[e]:Yd.push(e)}function iy(){var e=Xo;if(e!==null){Xo=null;for(var t=es(e);0<e.children.length;)e=e.children[0];nt(e.fiber,function(){console.error(`A tree hydrated but some attributes of the server rendered HTML didn't match the client properties. This won't be patched up. This can happen if a SSR-ed Client Component used:

- A server/client branch \`if (typeof window !== 'undefined')\`.
- Variable input such as \`Date.now()\` or \`Math.random()\` which changes each time it's called.
- Date formatting in a user's locale which doesn't match the server.
- External changing data without sending a snapshot of it along with the HTML.
- Invalid HTML tag nesting.

It can also happen if the client has a browser extension installed which messes with the HTML before React loaded.

%s%s`,"https://react.dev/link/hydration-mismatch",t)})}}function tg(){Rh=e0=null,Oh=!1}function as(e,t,i){Fe(iS,t._currentValue,e),t._currentValue=i,Fe(oS,t._currentRenderer,e),t._currentRenderer!==void 0&&t._currentRenderer!==null&&t._currentRenderer!==JE&&console.error("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),t._currentRenderer=JE}function fr(e,t){e._currentValue=iS.current;var i=oS.current;ze(oS,t),e._currentRenderer=i,ze(iS,t)}function jp(e,t,i){for(;e!==null;){var c=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,c!==null&&(c.childLanes|=t)):c!==null&&(c.childLanes&t)!==t&&(c.childLanes|=t),e===i)break;e=e.return}e!==i&&console.error("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function Ua(e,t,i,c){var g=e.child;for(g!==null&&(g.return=e);g!==null;){var m=g.dependencies;if(m!==null){var x=g.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=g;for(var D=0;D<t.length;D++)if(E.context===t[D]){m.lanes|=i,E=m.alternate,E!==null&&(E.lanes|=i),jp(m.return,i,e),c||(x=null);break e}m=E.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error("We just came from a parent so we must have had a parent. This is a bug in React.");x.lanes|=i,m=x.alternate,m!==null&&(m.lanes|=i),jp(x,i,e),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===e){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function gr(e,t,i,c){e=null;for(var g=t,m=!1;g!==null;){if(!m){if(g.flags&524288)m=!0;else if(g.flags&262144)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error("Should have a current fiber. This is a bug in React.");if(x=x.memoizedProps,x!==null){var E=g.type;Ci(g.pendingProps.value,x.value)||(e!==null?e.push(E):e=[E])}}else if(g===ch.current){if(x=g.alternate,x===null)throw Error("Should have a current fiber. This is a bug in React.");x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(e!==null?e.push(iv):e=[iv])}g=g.return}e!==null&&Ua(t,e,i,c),t.flags|=262144}function Bu(e){for(e=e.firstContext;e!==null;){if(!Ci(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function is(e){e0=e,Rh=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function bn(e){return Oh&&console.error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo()."),ng(e0,e)}function Hu(e,t){return e0===null&&is(e),ng(e,t)}function ng(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Rh===null){if(e===null)throw Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Rh=t,e.dependencies={lanes:0,firstContext:t,_debugThenableState:null},e.flags|=524288}else Rh=Rh.next=t;return i}function Lp(){return{controller:new QA,data:new Map,refCount:0}}function Ii(e){e.controller.signal.aborted&&console.warn("A cache instance was retained after it was already freed. This likely indicates a bug in React."),e.refCount++}function ll(e){e.refCount--,0>e.refCount&&console.warn("A cache instance was released after it was already freed. This likely indicates a bug in React."),e.refCount===0&&KA(JA,function(){e.controller.abort()})}function hi(){var e=Xd;return Xd=0,e}function uc(e){var t=Xd;return Xd=e,t}function dc(e){var t=Xd;return Xd+=e,t}function hr(e){qi=zh(),0>e.actualStartTime&&(e.actualStartTime=qi)}function os(e){if(0<=qi){var t=zh()-qi;e.actualDuration+=t,e.selfBaseDuration=t,qi=-1}}function ag(e){if(0<=qi){var t=zh()-qi;e.actualDuration+=t,qi=-1}}function eo(){if(0<=qi){var e=zh()-qi;qi=-1,Xd+=e}}function Ca(){qi=zh()}function Fu(e){for(var t=e.child;t;)e.actualDuration+=t.actualDuration,t=t.sibling}function oy(e,t){if(zb===null){var i=zb=[];rS=0,Zd=Bg(),Dh={status:"pending",value:void 0,then:function(c){i.push(c)}}}return rS++,t.then(Bp,Bp),t}function Bp(){if(--rS===0&&zb!==null){Dh!==null&&(Dh.status="fulfilled");var e=zb;zb=null,Zd=0,Dh=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ux(e,t){var i=[],c={status:"pending",value:null,reason:null,then:function(g){i.push(g)}};return e.then(function(){c.status="fulfilled",c.value=t;for(var g=0;g<i.length;g++)(0,i[g])(t)},function(g){for(c.status="rejected",c.reason=g,g=0;g<i.length;g++)(0,i[g])(void 0)}),c}function Hp(){var e=Qd.current;return e!==null?e:Sn.pooledCache}function ig(e,t){t===null?Fe(Qd,Qd.current,e):Fe(Qd,t.pool,e)}function Fp(){var e=Hp();return e===null?null:{parent:va._currentValue,pool:e}}function qp(){return{didWarnAboutUncachedPromise:!1,thenables:[]}}function og(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Xa(){}function Gp(e,t,i){oe.actQueue!==null&&(oe.didUsePromise=!0);var c=e.thenables;switch(i=c[i],i===void 0?c.push(t):i!==t&&(e.didWarnAboutUncachedPromise||(e.didWarnAboutUncachedPromise=!0,console.error("A component was suspended by an uncached promise. Creating promises inside a Client Component or hook is not yet supported, except via a Suspense-compatible library or framework.")),t.then(Xa,Xa),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mi(e),e;default:if(typeof t.status=="string")t.then(Xa,Xa);else{if(e=Sn,e!==null&&100<e.shellSuspendCounter)throw Error("An unknown Component is an async Client Component. Only Server Components can be async at the moment. This error is often caused by accidentally adding `'use client'` to a module that was originally written for the server.");e=t,e.status="pending",e.then(function(g){if(t.status==="pending"){var m=t;m.status="fulfilled",m.value=g}},function(g){if(t.status==="pending"){var m=t;m.status="rejected",m.reason=g}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mi(e),e}throw jb=t,r0=!0,_b}}function pi(){if(jb===null)throw Error("Expected a suspended thenable. This is a bug in React. Please file an issue.");var e=jb;return jb=null,r0=!1,e}function mi(e){if(e===_b||e===o0)throw Error("Hooks are not supported inside an async component. This error is often caused by accidentally adding `'use client'` to a module that was originally written for the server.")}function rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function to(e){return{lane:e,tag:aC,payload:null,callback:null,next:null}}function no(e,t,i){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,cS===c&&!rC){var g=de(e);console.error(`An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback.

Please update the following component: %s`,g),rC=!0}return(nn&Mi)!==Eo?(g=c.pending,g===null?t.next=t:(t.next=g.next,g.next=t),c.pending=t,t=Zf(e),ny(e,null,i),t):(Xf(e,c,t,i),Zf(e))}function cl(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var c=t.lanes;c&=e.pendingLanes,i|=c,t.lanes=i,qe(e,i)}}function pr(e,t){var i=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var g=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var x={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?g=m=x:m=m.next=x,i=i.next}while(i!==null);m===null?g=m=t:m=m.next=t}else g=m=t;i={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function fc(){if(uS){var e=Dh;if(e!==null)throw e}}function ss(e,t,i,c){uS=!1;var g=e.updateQueue;su=!1,cS=g.shared;var m=g.firstBaseUpdate,x=g.lastBaseUpdate,E=g.shared.pending;if(E!==null){g.shared.pending=null;var D=E,N=D.next;D.next=null,x===null?m=N:x.next=N,x=D;var se=e.alternate;se!==null&&(se=se.updateQueue,E=se.lastBaseUpdate,E!==x&&(E===null?se.firstBaseUpdate=N:E.next=N,se.lastBaseUpdate=D))}if(m!==null){var me=g.baseState;x=0,se=N=D=null,E=m;do{var ae=E.lane&-536870913,ve=ae!==E.lane;if(ve?(Pt&ae)===ae:(c&ae)===ae){ae!==0&&ae===Zd&&(uS=!0),se!==null&&(se=se.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{ae=e;var Je=E,dt=t,wn=i;switch(Je.tag){case iC:if(Je=Je.payload,typeof Je=="function"){Oh=!0;var _t=Je.call(wn,me,dt);if(ae.mode&di){Pe(!0);try{Je.call(wn,me,dt)}finally{Pe(!1)}}Oh=!1,me=_t;break e}me=Je;break e;case lS:ae.flags=ae.flags&-65537|128;case aC:if(_t=Je.payload,typeof _t=="function"){if(Oh=!0,Je=_t.call(wn,me,dt),ae.mode&di){Pe(!0);try{_t.call(wn,me,dt)}finally{Pe(!1)}}Oh=!1}else Je=_t;if(Je==null)break e;me=mt({},me,Je);break e;case oC:su=!0}}ae=E.callback,ae!==null&&(e.flags|=64,ve&&(e.flags|=8192),ve=g.callbacks,ve===null?g.callbacks=[ae]:ve.push(ae))}else ve={lane:ae,tag:E.tag,payload:E.payload,callback:E.callback,next:null},se===null?(N=se=ve,D=me):se=se.next=ve,x|=ae;if(E=E.next,E===null){if(E=g.shared.pending,E===null)break;ve=E,E=ve.next,ve.next=null,g.lastBaseUpdate=ve,g.shared.pending=null}}while(!0);se===null&&(D=me),g.baseState=D,g.firstBaseUpdate=N,g.lastBaseUpdate=se,m===null&&(g.shared.lanes=0),du|=x,e.lanes=x,e.memoizedState=me}cS=null}function ul(e,t){if(typeof e!="function")throw Error("Invalid argument passed as callback. Expected a function. Instead received: "+e);e.call(t)}function Px(e,t){var i=e.shared.hiddenCallbacks;if(i!==null)for(e.shared.hiddenCallbacks=null,e=0;e<i.length;e++)ul(i[e],t)}function Za(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)ul(i[e],t)}function rg(e,t){var i=_s;Fe(s0,i,e),Fe(Nh,t,e),_s=i|t.baseLanes}function ao(e){Fe(s0,_s,e),Fe(Nh,Nh.current,e)}function sg(e){_s=s0.current,ze(Nh,e),ze(s0,e)}function Ct(){var e=pe;Ko===null?Ko=[e]:Ko.push(e)}function Re(){var e=pe;if(Ko!==null&&(Pl++,Ko[Pl]!==e)){var t=de(bt);if(!sC.has(t)&&(sC.add(t),Ko!==null)){for(var i="",c=0;c<=Pl;c++){var g=Ko[c],m=c===Pl?e:g;for(g=c+1+". "+g;30>g.length;)g+=" ";g+=m+`
`,i+=g}console.error(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://react.dev/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,t,i)}}}function ls(e){e==null||Qn(e)||console.error("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",pe,typeof e)}function gc(){var e=de(bt);cC.has(e)||(cC.add(e),console.error("ReactDOM.useFormState has been renamed to React.useActionState. Please update %s to use React.useActionState.",e))}function pn(){throw Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function cs(e,t){if(Bb)return!1;if(t===null)return console.error("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",pe),!1;e.length!==t.length&&console.error(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,pe,"["+t.join(", ")+"]","["+e.join(", ")+"]");for(var i=0;i<t.length&&i<e.length;i++)if(!Ci(e[i],t[i]))return!1;return!0}function hc(e,t,i,c,g,m){lu=m,bt=t,Ko=e!==null?e._debugHookTypes:null,Pl=-1,Bb=e!==null&&e.type!==t.type,(Object.prototype.toString.call(i)==="[object AsyncFunction]"||Object.prototype.toString.call(i)==="[object AsyncGeneratorFunction]")&&(m=de(bt),dS.has(m)||(dS.add(m),console.error("%s is an async Client Component. Only Server Components can be async at the moment. This error is often caused by accidentally adding `'use client'` to a module that was originally written for the server.",m===null?"An unknown Component":"<"+m+">"))),t.memoizedState=null,t.updateQueue=null,t.lanes=0,oe.H=e!==null&&e.memoizedState!==null?gS:Ko!==null?uC:fS,Jd=m=(t.mode&di)!==Tn;var x=hS(i,c,g);if(Jd=!1,Uh&&(x=Qa(t,i,c,g)),m){Pe(!0);try{x=Qa(t,i,c,g)}finally{Pe(!1)}}return Gu(e,t),x}function Gu(e,t){t._debugHookTypes=Ko,t.dependencies===null?Ul!==null&&(t.dependencies={lanes:0,firstContext:null,_debugThenableState:Ul}):t.dependencies._debugThenableState=Ul,oe.H=u0;var i=mn!==null&&mn.next!==null;if(lu=0,Ko=pe=ra=mn=bt=null,Pl=-1,e!==null&&(e.flags&65011712)!==(t.flags&65011712)&&console.error("Internal React error: Expected static flag was missing. Please notify the React team."),l0=!1,Lb=0,Ul=null,i)throw Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");e===null||Aa||(e=e.dependencies,e!==null&&Bu(e)&&(Aa=!0)),r0?(r0=!1,e=!0):e=!1,e&&(t=de(t)||"Unknown",lC.has(t)||dS.has(t)||(lC.add(t),console.error("`use` was called from inside a try/catch block. This is not allowed and can lead to unexpected behavior. To handle errors triggered by `use`, wrap your component in a error boundary.")))}function Qa(e,t,i,c){bt=e;var g=0;do{if(Uh&&(Ul=null),Lb=0,Uh=!1,g>=eR)throw Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");if(g+=1,Bb=!1,ra=mn=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Pl=-1,oe.H=dC,m=hS(t,i,c)}while(Uh);return m}function Ui(){var e=oe.H,t=e.useState()[0];return t=typeof t.then=="function"?dl(t):t,e=e.useState()[0],(mn!==null?mn.memoizedState:null)!==e&&(bt.flags|=1024),t}function mr(){var e=c0!==0;return c0=0,e}function io(e,t,i){t.updateQueue=e.updateQueue,t.flags=(t.mode&Br)!==Tn?t.flags&-402655237:t.flags&-2053,e.lanes&=~i}function oo(e){if(l0){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}l0=!1}lu=0,Ko=ra=mn=bt=null,Pl=-1,pe=null,Uh=!1,Lb=c0=0,Ul=null}function Ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ra===null?bt.memoizedState=ra=e:ra=ra.next=e,ra}function Wt(){if(mn===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=mn.next;var t=ra===null?bt.memoizedState:ra.next;if(t!==null)ra=t,mn=e;else{if(e===null)throw bt.alternate===null?Error("Update hook called on initial render. This is likely a bug in React. Please file an issue."):Error("Rendered more hooks than during the previous render.");mn=e,e={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},ra===null?bt.memoizedState=ra=e:ra=ra.next=e}return ra}function Vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(e){var t=Lb;return Lb+=1,Ul===null&&(Ul=qp()),e=Gp(Ul,e,t),t=bt,(ra===null?t.memoizedState:ra.next)===null&&(t=t.alternate,oe.H=t!==null&&t.memoizedState!==null?gS:fS),e}function On(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return dl(e);if(e.$$typeof===ci)return bn(e)}throw Error("An unsupported type was passed to use(): "+String(e))}function on(e){var t=null,i=bt.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var c=bt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(t={data:c.data.map(function(g){return g.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Vu(),bt.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0||Bb)for(i=t.data[t.index]=Array(e),c=0;c<e;c++)i[c]=jy;else i.length!==e&&console.error("Expected a constant size argument for each invocation of useMemoCache. The previous cache was allocated with size %s but size %s was requested.",i.length,e);return t.index++,i}function Tt(e,t){return typeof t=="function"?t(e):t}function br(e,t,i){var c=Ln();if(i!==void 0){var g=i(t);if(Jd){Pe(!0);try{i(t)}finally{Pe(!1)}}}else g=t;return c.memoizedState=c.baseState=g,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:g},c.queue=e,e=e.dispatch=nd.bind(null,bt,e),[c.memoizedState,e]}function Pa(e){var t=Wt();return Yu(t,mn,e)}function Yu(e,t,i){var c=e.queue;if(c===null)throw Error("Should have a queue. You are likely calling Hooks conditionally, which is not allowed. (https://react.dev/link/invalid-hook-call)");c.lastRenderedReducer=i;var g=e.baseQueue,m=c.pending;if(m!==null){if(g!==null){var x=g.next;g.next=m.next,m.next=x}t.baseQueue!==g&&console.error("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),t.baseQueue=g=m,c.pending=null}if(m=e.baseState,g===null)e.memoizedState=m;else{t=g.next;var E=x=null,D=null,N=t,se=!1;do{var me=N.lane&-536870913;if(me!==N.lane?(Pt&me)===me:(lu&me)===me){var ae=N.revertLane;if(ae===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),me===Zd&&(se=!0);else if((lu&ae)===ae){N=N.next,ae===Zd&&(se=!0);continue}else me={lane:0,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},D===null?(E=D=me,x=m):D=D.next=me,bt.lanes|=ae,du|=ae;me=N.action,Jd&&i(m,me),m=N.hasEagerState?N.eagerState:i(m,me)}else ae={lane:me,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},D===null?(E=D=ae,x=m):D=D.next=ae,bt.lanes|=me,du|=me;N=N.next}while(N!==null&&N!==t);if(D===null?x=m:D.next=E,!Ci(m,e.memoizedState)&&(Aa=!0,se&&(i=Dh,i!==null)))throw i;e.memoizedState=m,e.baseState=x,e.baseQueue=D,c.lastRenderedState=m}return g===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function ro(e){var t=Wt(),i=t.queue;if(i===null)throw Error("Should have a queue. You are likely calling Hooks conditionally, which is not allowed. (https://react.dev/link/invalid-hook-call)");i.lastRenderedReducer=e;var c=i.dispatch,g=i.pending,m=t.memoizedState;if(g!==null){i.pending=null;var x=g=g.next;do m=e(m,x.action),x=x.next;while(x!==g);Ci(m,t.memoizedState)||(Aa=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),i.lastRenderedState=m}return[m,c]}function lg(e,t,i){var c=bt,g=Ln();if(Gt){if(i===void 0)throw Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");var m=i();Ih||m===i()||(console.error("The result of getServerSnapshot should be cached to avoid an infinite loop"),Ih=!0)}else{if(m=t(),Ih||(i=t(),Ci(m,i)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),Ih=!0)),Sn===null)throw Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");Pt&124||pc(c,t,m)}return g.memoizedState=m,i={value:m,getSnapshot:t},g.queue=i,Ku(Vp.bind(null,c,i,e),[e]),c.flags|=2048,Do(Qo|ya,xc(),mc.bind(null,c,i,m,t),null),m}function Xu(e,t,i){var c=bt,g=Wt(),m=Gt;if(m){if(i===void 0)throw Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");i=i()}else if(i=t(),!Ih){var x=t();Ci(i,x)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),Ih=!0)}(x=!Ci((mn||g).memoizedState,i))&&(g.memoizedState=i,Aa=!0),g=g.queue;var E=Vp.bind(null,c,g,e);if(Ka(2048,ya,E,[e]),g.getSnapshot!==t||x||ra!==null&&ra.memoizedState.tag&Qo){if(c.flags|=2048,Do(Qo|ya,xc(),mc.bind(null,c,g,i,t),null),Sn===null)throw Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");m||lu&124||pc(c,t,i)}return i}function pc(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=bt.updateQueue,t===null?(t=Vu(),bt.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function mc(e,t,i,c){t.value=i,t.getSnapshot=c,bc(t)&&cg(e)}function Vp(e,t,i){return i(function(){bc(t)&&cg(e)})}function bc(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ci(e,i)}catch{return!0}}function cg(e){var t=Ya(e,2);t!==null&&zt(t,e,2)}function vr(e){var t=Ln();if(typeof e=="function"){var i=e;if(e=i(),Jd){Pe(!0);try{i()}finally{Pe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tt,lastRenderedState:e},t}function so(e){e=vr(e);var t=e.queue,i=kc.bind(null,bt,t);return t.dispatch=i,[e.memoizedState,i]}function Oo(e){var t=Ln();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=mg.bind(null,bt,!0,i),i.dispatch=t,[e,t]}function zo(e,t){var i=Wt();return ug(i,mn,e,t)}function ug(e,t,i,c){return e.baseState=i,Yu(e,mn,typeof c=="function"?c:Tt)}function dg(e,t){var i=Wt();return mn!==null?ug(i,mn,e,t):(i.baseState=e,[e,i.queue.dispatch])}function Zu(e,t,i,c,g){if(wr(e))throw Error("Cannot update form state while rendering.");if(e=t.action,e!==null){var m={payload:g,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};oe.T!==null?i(!0):m.isTransition=!1,c(m),i=t.pending,i===null?(m.next=t.pending=m,Qu(t,m)):(m.next=i.next,t.pending=i.next=m)}}function Qu(e,t){var i=t.action,c=t.payload,g=e.state;if(t.isTransition){var m=oe.T,x={};oe.T=x,oe.T._updatedFibers=new Set;try{var E=i(g,c),D=oe.S;D!==null&&D(x,E),us(e,t,E)}catch(N){vc(e,t,N)}finally{oe.T=m,m===null&&x._updatedFibers&&(e=x._updatedFibers.size,x._updatedFibers.clear(),10<e&&console.warn("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."))}}else try{x=i(g,c),us(e,t,x)}catch(N){vc(e,t,N)}}function us(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?(i.then(function(c){ga(e,t,c)},function(c){return vc(e,t,c)}),t.isTransition||console.error("An async function with useActionState was called outside of a transition. This is likely not what you intended (for example, isPending will not update correctly). Either call the returned function inside startTransition, or pass it to an `action` or `formAction` prop.")):ga(e,t,i)}function ga(e,t,i){t.status="fulfilled",t.value=i,Yp(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Qu(e,i)))}function vc(e,t,i){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do t.status="rejected",t.reason=i,Yp(t),t=t.next;while(t!==c)}e.action=null}function Yp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ry(e,t){return t}function yc(e,t){if(Gt){var i=Sn.formState;if(i!==null){e:{var c=bt;if(Gt){if(qn){t:{for(var g=qn,m=Us;g.nodeType!==8;){if(!m){g=null;break t}if(g=si(g.nextSibling),g===null){g=null;break t}}m=g.data,g=m===LS||m===c1?g:null}if(g){qn=si(g.nextSibling),c=g.data===LS;break e}}ns(c)}c=!1}c&&(t=i[0])}}return i=Ln(),i.memoizedState=i.baseState=t,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ry,lastRenderedState:t},i.queue=c,i=kc.bind(null,bt,c),c.dispatch=i,c=vr(!1),m=mg.bind(null,bt,!1,c.queue),c=Ln(),g={state:t,dispatch:null,action:e,pending:null},c.queue=g,i=Zu.bind(null,bt,g,m,i),g.dispatch=i,c.memoizedState=e,[t,i,!1]}function fg(e){var t=Wt();return Bn(t,mn,e)}function Bn(e,t,i){if(t=Yu(e,t,ry)[0],e=Pa(Tt)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var c=dl(t)}catch(x){throw x===_b?o0:x}else c=t;t=Wt();var g=t.queue,m=g.dispatch;return i!==t.memoizedState&&(bt.flags|=2048,Do(Qo|ya,xc(),Xp.bind(null,g,i),null)),[c,m,e]}function Xp(e,t){e.action=t}function ds(e){var t=Wt(),i=mn;if(i!==null)return Bn(t,i,e);Wt(),t=t.memoizedState,i=Wt();var c=i.queue.dispatch;return i.memoizedState=e,[t,c,!1]}function Do(e,t,i,c){return e={tag:e,create:i,deps:c,inst:t,next:null},t=bt.updateQueue,t===null&&(t=Vu(),bt.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(c=i.next,i.next=e,e.next=c,t.lastEffect=e),e}function xc(){return{destroy:void 0,resource:void 0}}function fs(e){var t=Ln();return e={current:e},t.memoizedState=e}function Pi(e,t,i,c){var g=Ln();c=c===void 0?null:c,bt.flags|=e,g.memoizedState=Do(Qo|t,xc(),i,c)}function Ka(e,t,i,c){var g=Wt();c=c===void 0?null:c;var m=g.memoizedState.inst;mn!==null&&c!==null&&cs(c,mn.memoizedState.deps)?g.memoizedState=Do(t,m,i,c):(bt.flags|=e,g.memoizedState=Do(Qo|t,m,i,c))}function Ku(e,t){(bt.mode&Br)!==Tn&&(bt.mode&YE)===Tn?Pi(276826112,ya,e,t):Pi(8390656,ya,e,t)}function Zp(e,t){var i=4194308;return(bt.mode&Br)!==Tn&&(i|=134217728),Pi(i,La,e,t)}function Qp(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return t.hasOwnProperty("current")||console.error("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(t).join(", ")+"}"),e=e(),t.current=e,function(){t.current=null}}function yr(e,t,i){typeof t!="function"&&console.error("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",t!==null?typeof t:"null"),i=i!=null?i.concat([e]):null;var c=4194308;(bt.mode&Br)!==Tn&&(c|=134217728),Pi(c,La,Qp.bind(null,t,e),i)}function Sc(e,t,i){typeof t!="function"&&console.error("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",t!==null?typeof t:"null"),i=i!=null?i.concat([e]):null,Ka(4,La,Qp.bind(null,t,e),i)}function wc(e,t){return Ln().memoizedState=[e,t===void 0?null:t],e}function Ju(e,t){var i=Wt();t=t===void 0?null:t;var c=i.memoizedState;return t!==null&&cs(t,c[1])?c[0]:(i.memoizedState=[e,t],e)}function fl(e,t){var i=Ln();t=t===void 0?null:t;var c=e();if(Jd){Pe(!0);try{e()}finally{Pe(!1)}}return i.memoizedState=[c,t],c}function Wu(e,t){var i=Wt();t=t===void 0?null:t;var c=i.memoizedState;if(t!==null&&cs(t,c[1]))return c[0];if(c=e(),Jd){Pe(!0);try{e()}finally{Pe(!1)}}return i.memoizedState=[c,t],c}function Ec(e,t){var i=Ln();return Cc(i,e,t)}function gg(e,t){var i=Wt();return Jp(i,mn.memoizedState,e,t)}function Kp(e,t){var i=Wt();return mn===null?Cc(i,e,t):Jp(i,mn.memoizedState,e,t)}function Cc(e,t,i){return i===void 0||lu&1073741824?e.memoizedState=t:(e.memoizedState=i,e=Rm(),bt.lanes|=e,du|=e,i)}function Jp(e,t,i,c){return Ci(i,t)?i:Nh.current!==null?(e=Cc(e,i,c),Ci(e,t)||(Aa=!0),e):lu&42?(e=Rm(),bt.lanes|=e,du|=e,t):(Aa=!0,e.memoizedState=i)}function Tc(e,t,i,c,g){var m=Qt.p;Qt.p=m!==0&&m<jo?m:jo;var x=oe.T,E={};oe.T=E,mg(e,!1,t,i),E._updatedFibers=new Set;try{var D=g(),N=oe.S;if(N!==null&&N(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var se=Ux(D,c);Mc(e,t,se,vi(e))}else Mc(e,t,c,vi(e))}catch(me){Mc(e,t,{then:function(){},status:"rejected",reason:me},vi(e))}finally{Qt.p=m,oe.T=x,x===null&&E._updatedFibers&&(e=E._updatedFibers.size,E._updatedFibers.clear(),10<e&&console.warn("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."))}}function hg(e,t,i,c){if(e.tag!==5)throw Error("Expected the form instance to be a HostComponent. This is a bug in React.");var g=Wp(e).queue;Tc(e,g,t,uf,i===null?I:function(){return xr(e),i(c)})}function Wp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:uf,baseState:uf,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tt,lastRenderedState:uf},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tt,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function xr(e){oe.T===null&&console.error("requestFormReset was called outside a transition or action. To fix, move to an action, or wrap with startTransition.");var t=Wp(e).next.queue;Mc(e,t,{},vi(e))}function ed(){var e=vr(!1);return e=Tc.bind(null,bt,e.queue,!0,!1),Ln().memoizedState=e,[!1,e]}function pg(){var e=Pa(Tt)[0],t=Wt().memoizedState;return[typeof e=="boolean"?e:dl(e),t]}function Sr(){var e=ro(Tt)[0],t=Wt().memoizedState;return[typeof e=="boolean"?e:dl(e),t]}function Ja(){return bn(iv)}function gl(){var e=Ln(),t=Sn.identifierPrefix;if(Gt){var i=Nl,c=Dl;i=(c&~(1<<32-aa(c)-1)).toString(32)+i,t="«"+t+"R"+i,i=c0++,0<i&&(t+="H"+i.toString(32)),t+="»"}else i=WA++,t="«"+t+"r"+i.toString(32)+"»";return e.memoizedState=t}function td(){return Ln().memoizedState=em.bind(null,bt)}function em(e,t){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var c=vi(i);e=to(c);var g=no(i,e,c);g!==null&&(zt(g,i,c),cl(g,i,c)),i=Lp(),t!=null&&g!==null&&console.error("The seed argument is not enabled outside experimental channels."),e.payload={cache:i};return}i=i.return}}function nd(e,t,i){var c=arguments;typeof c[3]=="function"&&console.error("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect()."),c=vi(e);var g={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};wr(e)?ad(t,g):(g=zp(e,t,g,c),g!==null&&(zt(g,e,c),tm(g,t,c))),Vt(e,c)}function kc(e,t,i){var c=arguments;typeof c[3]=="function"&&console.error("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect()."),c=vi(e),Mc(e,t,i,c),Vt(e,c)}function Mc(e,t,i,c){var g={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(wr(e))ad(t,g);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null)){var x=oe.H;oe.H=Fr;try{var E=t.lastRenderedState,D=m(E,i);if(g.hasEagerState=!0,g.eagerState=D,Ci(D,E))return Xf(e,t,g,0),Sn===null&&Yf(),!1}catch{}finally{oe.H=x}}if(i=zp(e,t,g,c),i!==null)return zt(i,e,c),tm(i,t,c),!0}return!1}function mg(e,t,i,c){if(oe.T===null&&Zd===0&&console.error("An optimistic state update occurred outside a transition or action. To fix, move the update to an action, or wrap with startTransition."),c={lane:2,revertLane:Bg(),action:c,hasEagerState:!1,eagerState:null,next:null},wr(e)){if(t)throw Error("Cannot update optimistic state while rendering.");console.error("Cannot call startTransition while rendering.")}else t=zp(e,i,c,2),t!==null&&zt(t,e,2);Vt(e,2)}function wr(e){var t=e.alternate;return e===bt||t!==null&&t===bt}function ad(e,t){Uh=l0=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function tm(e,t,i){if(i&4194048){var c=t.lanes;c&=e.pendingLanes,i|=c,t.lanes=i,qe(e,i)}}function Yn(e){var t=Ot;return e!=null&&(Ot=t===null?e:t.concat(e)),t}function Ac(e,t,i){for(var c=Object.keys(e.props),g=0;g<c.length;g++){var m=c[g];if(m!=="children"&&m!=="key"){t===null&&(t=Lu(e,i.mode,0),t._debugInfo=Ot,t.return=i),nt(t,function(x){console.error("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",x)},m);break}}}function lo(e){var t=Hb;return Hb+=1,Ph===null&&(Ph=qp()),Gp(Ph,e,t)}function yt(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Zt(e,t){throw t.$$typeof===Fx?Error(`A React Element from an older version of React was rendered. This is not supported. It can happen if:
- Multiple copies of the "react" package is used.
- A library pre-bundled an old copy of "react" or "react/jsx-runtime".
- A compiler tries to "inline" JSX instead of using the runtime.`):(e=Object.prototype.toString.call(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead."))}function Mn(e,t){var i=de(e)||"Component";kC[i]||(kC[i]=!0,t=t.displayName||t.name||"Component",e.tag===3?console.error(`Functions are not valid as a React child. This may happen if you return %s instead of <%s /> from render. Or maybe you meant to call this function rather than return it.
  root.render(%s)`,t,t,t):console.error(`Functions are not valid as a React child. This may happen if you return %s instead of <%s /> from render. Or maybe you meant to call this function rather than return it.
  <%s>{%s}</%s>`,t,t,i,t,i))}function hl(e,t){var i=de(e)||"Component";MC[i]||(MC[i]=!0,t=String(t),e.tag===3?console.error(`Symbols are not valid as a React child.
  root.render(%s)`,t):console.error(`Symbols are not valid as a React child.
  <%s>%s</%s>`,i,t,i))}function pl(e){function t(L,B){if(e){var F=L.deletions;F===null?(L.deletions=[B],L.flags|=16):F.push(B)}}function i(L,B){if(!e)return null;for(;B!==null;)t(L,B),B=B.sibling;return null}function c(L){for(var B=new Map;L!==null;)L.key!==null?B.set(L.key,L):B.set(L.index,L),L=L.sibling;return B}function g(L,B){return L=Ro(L,B),L.index=0,L.sibling=null,L}function m(L,B,F){return L.index=F,e?(F=L.alternate,F!==null?(F=F.index,F<B?(L.flags|=67108866,B):F):(L.flags|=67108866,B)):(L.flags|=1048576,B)}function x(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function E(L,B,F,xe){return B===null||B.tag!==6?(B=Ip(F,L.mode,xe),B.return=L,B._debugOwner=L,B._debugTask=L._debugTask,B._debugInfo=Ot,B):(B=g(B,F),B.return=L,B._debugInfo=Ot,B)}function D(L,B,F,xe){var Le=F.type;return Le===As?(B=se(L,B,F.props.children,xe,F.key),Ac(F,B,L),B):B!==null&&(B.elementType===Le||ay(B,F)||typeof Le=="object"&&Le!==null&&Le.$$typeof===wi&&cu(Le)===B.type)?(B=g(B,F.props),yt(B,F),B.return=L,B._debugOwner=F._owner,B._debugInfo=Ot,B):(B=Lu(F,L.mode,xe),yt(B,F),B.return=L,B._debugInfo=Ot,B)}function N(L,B,F,xe){return B===null||B.tag!==4||B.stateNode.containerInfo!==F.containerInfo||B.stateNode.implementation!==F.implementation?(B=Up(F,L.mode,xe),B.return=L,B._debugInfo=Ot,B):(B=g(B,F.children||[]),B.return=L,B._debugInfo=Ot,B)}function se(L,B,F,xe,Le){return B===null||B.tag!==7?(B=Ni(F,L.mode,xe,Le),B.return=L,B._debugOwner=L,B._debugTask=L._debugTask,B._debugInfo=Ot,B):(B=g(B,F),B.return=L,B._debugInfo=Ot,B)}function me(L,B,F){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Ip(""+B,L.mode,F),B.return=L,B._debugOwner=L,B._debugTask=L._debugTask,B._debugInfo=Ot,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ir:return F=Lu(B,L.mode,F),yt(F,B),F.return=L,L=Yn(B._debugInfo),F._debugInfo=Ot,Ot=L,F;case xt:return B=Up(B,L.mode,F),B.return=L,B._debugInfo=Ot,B;case wi:var xe=Yn(B._debugInfo);return B=cu(B),L=me(L,B,F),Ot=xe,L}if(Qn(B)||he(B))return F=Ni(B,L.mode,F,null),F.return=L,F._debugOwner=L,F._debugTask=L._debugTask,L=Yn(B._debugInfo),F._debugInfo=Ot,Ot=L,F;if(typeof B.then=="function")return xe=Yn(B._debugInfo),L=me(L,lo(B),F),Ot=xe,L;if(B.$$typeof===ci)return me(L,Hu(L,B),F);Zt(L,B)}return typeof B=="function"&&Mn(L,B),typeof B=="symbol"&&hl(L,B),null}function ae(L,B,F,xe){var Le=B!==null?B.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Le!==null?null:E(L,B,""+F,xe);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Ir:return F.key===Le?(Le=Yn(F._debugInfo),L=D(L,B,F,xe),Ot=Le,L):null;case xt:return F.key===Le?N(L,B,F,xe):null;case wi:return Le=Yn(F._debugInfo),F=cu(F),L=ae(L,B,F,xe),Ot=Le,L}if(Qn(F)||he(F))return Le!==null?null:(Le=Yn(F._debugInfo),L=se(L,B,F,xe,null),Ot=Le,L);if(typeof F.then=="function")return Le=Yn(F._debugInfo),L=ae(L,B,lo(F),xe),Ot=Le,L;if(F.$$typeof===ci)return ae(L,B,Hu(L,F),xe);Zt(L,F)}return typeof F=="function"&&Mn(L,F),typeof F=="symbol"&&hl(L,F),null}function ve(L,B,F,xe,Le){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return L=L.get(F)||null,E(B,L,""+xe,Le);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case Ir:return F=L.get(xe.key===null?F:xe.key)||null,L=Yn(xe._debugInfo),B=D(B,F,xe,Le),Ot=L,B;case xt:return L=L.get(xe.key===null?F:xe.key)||null,N(B,L,xe,Le);case wi:var St=Yn(xe._debugInfo);return xe=cu(xe),B=ve(L,B,F,xe,Le),Ot=St,B}if(Qn(xe)||he(xe))return F=L.get(F)||null,L=Yn(xe._debugInfo),B=se(B,F,xe,Le,null),Ot=L,B;if(typeof xe.then=="function")return St=Yn(xe._debugInfo),B=ve(L,B,F,lo(xe),Le),Ot=St,B;if(xe.$$typeof===ci)return ve(L,B,F,Hu(B,xe),Le);Zt(B,xe)}return typeof xe=="function"&&Mn(B,xe),typeof xe=="symbol"&&hl(B,xe),null}function Je(L,B,F,xe){if(typeof F!="object"||F===null)return xe;switch(F.$$typeof){case Ir:case xt:w(L,B,F);var Le=F.key;if(typeof Le!="string")break;if(xe===null){xe=new Set,xe.add(Le);break}if(!xe.has(Le)){xe.add(Le);break}nt(B,function(){console.error("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.",Le)});break;case wi:F=cu(F),Je(L,B,F,xe)}return xe}function dt(L,B,F,xe){for(var Le=null,St=null,We=null,wt=B,Mt=B=0,kn=null;wt!==null&&Mt<F.length;Mt++){wt.index>Mt?(kn=wt,wt=null):kn=wt.sibling;var Jn=ae(L,wt,F[Mt],xe);if(Jn===null){wt===null&&(wt=kn);break}Le=Je(L,Jn,F[Mt],Le),e&&wt&&Jn.alternate===null&&t(L,wt),B=m(Jn,B,Mt),We===null?St=Jn:We.sibling=Jn,We=Jn,wt=kn}if(Mt===F.length)return i(L,wt),Gt&&il(L,Mt),St;if(wt===null){for(;Mt<F.length;Mt++)wt=me(L,F[Mt],xe),wt!==null&&(Le=Je(L,wt,F[Mt],Le),B=m(wt,B,Mt),We===null?St=wt:We.sibling=wt,We=wt);return Gt&&il(L,Mt),St}for(wt=c(wt);Mt<F.length;Mt++)kn=ve(wt,L,Mt,F[Mt],xe),kn!==null&&(Le=Je(L,kn,F[Mt],Le),e&&kn.alternate!==null&&wt.delete(kn.key===null?Mt:kn.key),B=m(kn,B,Mt),We===null?St=kn:We.sibling=kn,We=kn);return e&&wt.forEach(function(Hl){return t(L,Hl)}),Gt&&il(L,Mt),St}function wn(L,B,F,xe){if(F==null)throw Error("An iterable object provided no iterator.");for(var Le=null,St=null,We=B,wt=B=0,Mt=null,kn=null,Jn=F.next();We!==null&&!Jn.done;wt++,Jn=F.next()){We.index>wt?(Mt=We,We=null):Mt=We.sibling;var Hl=ae(L,We,Jn.value,xe);if(Hl===null){We===null&&(We=Mt);break}kn=Je(L,Hl,Jn.value,kn),e&&We&&Hl.alternate===null&&t(L,We),B=m(Hl,B,wt),St===null?Le=Hl:St.sibling=Hl,St=Hl,We=Mt}if(Jn.done)return i(L,We),Gt&&il(L,wt),Le;if(We===null){for(;!Jn.done;wt++,Jn=F.next())We=me(L,Jn.value,xe),We!==null&&(kn=Je(L,We,Jn.value,kn),B=m(We,B,wt),St===null?Le=We:St.sibling=We,St=We);return Gt&&il(L,wt),Le}for(We=c(We);!Jn.done;wt++,Jn=F.next())Mt=ve(We,L,wt,Jn.value,xe),Mt!==null&&(kn=Je(L,Mt,Jn.value,kn),e&&Mt.alternate!==null&&We.delete(Mt.key===null?wt:Mt.key),B=m(Mt,B,wt),St===null?Le=Mt:St.sibling=Mt,St=Mt);return e&&We.forEach(function(kR){return t(L,kR)}),Gt&&il(L,wt),Le}function _t(L,B,F,xe){if(typeof F=="object"&&F!==null&&F.type===As&&F.key===null&&(Ac(F,null,L),F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Ir:var Le=Yn(F._debugInfo);e:{for(var St=F.key;B!==null;){if(B.key===St){if(St=F.type,St===As){if(B.tag===7){i(L,B.sibling),xe=g(B,F.props.children),xe.return=L,xe._debugOwner=F._owner,xe._debugInfo=Ot,Ac(F,xe,L),L=xe;break e}}else if(B.elementType===St||ay(B,F)||typeof St=="object"&&St!==null&&St.$$typeof===wi&&cu(St)===B.type){i(L,B.sibling),xe=g(B,F.props),yt(xe,F),xe.return=L,xe._debugOwner=F._owner,xe._debugInfo=Ot,L=xe;break e}i(L,B);break}else t(L,B);B=B.sibling}F.type===As?(xe=Ni(F.props.children,L.mode,xe,F.key),xe.return=L,xe._debugOwner=L,xe._debugTask=L._debugTask,xe._debugInfo=Ot,Ac(F,xe,L),L=xe):(xe=Lu(F,L.mode,xe),yt(xe,F),xe.return=L,xe._debugInfo=Ot,L=xe)}return L=x(L),Ot=Le,L;case xt:e:{for(Le=F,F=Le.key;B!==null;){if(B.key===F)if(B.tag===4&&B.stateNode.containerInfo===Le.containerInfo&&B.stateNode.implementation===Le.implementation){i(L,B.sibling),xe=g(B,Le.children||[]),xe.return=L,L=xe;break e}else{i(L,B);break}else t(L,B);B=B.sibling}xe=Up(Le,L.mode,xe),xe.return=L,L=xe}return x(L);case wi:return Le=Yn(F._debugInfo),F=cu(F),L=_t(L,B,F,xe),Ot=Le,L}if(Qn(F))return Le=Yn(F._debugInfo),L=dt(L,B,F,xe),Ot=Le,L;if(he(F)){if(Le=Yn(F._debugInfo),St=he(F),typeof St!="function")throw Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");var We=St.call(F);return We===F?(L.tag!==0||Object.prototype.toString.call(L.type)!=="[object GeneratorFunction]"||Object.prototype.toString.call(We)!=="[object Generator]")&&(CC||console.error("Using Iterators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. You can also use an Iterable that can iterate multiple times over the same items."),CC=!0):F.entries!==St||mS||(console.error("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),mS=!0),L=wn(L,B,We,xe),Ot=Le,L}if(typeof F.then=="function")return Le=Yn(F._debugInfo),L=_t(L,B,lo(F),xe),Ot=Le,L;if(F.$$typeof===ci)return _t(L,B,Hu(L,F),xe);Zt(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(Le=""+F,B!==null&&B.tag===6?(i(L,B.sibling),xe=g(B,Le),xe.return=L,L=xe):(i(L,B),xe=Ip(Le,L.mode,xe),xe.return=L,xe._debugOwner=L,xe._debugTask=L._debugTask,xe._debugInfo=Ot,L=xe),x(L)):(typeof F=="function"&&Mn(L,F),typeof F=="symbol"&&hl(L,F),i(L,B))}return function(L,B,F,xe){var Le=Ot;Ot=null;try{Hb=0;var St=_t(L,B,F,xe);return Ph=null,St}catch(kn){if(kn===_b||kn===o0)throw kn;var We=A(29,kn,null,L.mode);We.lanes=xe,We.return=L;var wt=We._debugInfo=Ot;if(We._debugOwner=L._debugOwner,We._debugTask=L._debugTask,wt!=null){for(var Mt=wt.length-1;0<=Mt;Mt--)if(typeof wt[Mt].stack=="string"){We._debugOwner=wt[Mt],We._debugTask=wt[Mt].debugTask;break}}return We}finally{Ot=Le}}}function Wa(e){var t=e.alternate;Fe(xa,xa.current&_h,e),Fe(Jo,e,e),$s===null&&(t===null||Nh.current!==null||t.memoizedState!==null)&&($s=e)}function id(e){if(e.tag===22){if(Fe(xa,xa.current,e),Fe(Jo,e,e),$s===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&($s=e)}}else $i(e)}function $i(e){Fe(xa,xa.current,e),Fe(Jo,Jo.current,e)}function ei(e){ze(Jo,e),$s===e&&($s=null),ze(xa,e)}function bg(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data===jl||Ts(i)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function An(e){if(e!==null&&typeof e!="function"){var t=String(e);jC.has(t)||(jC.add(t),console.error("Expected the last optional `callback` argument to be a function. Instead received: %s.",e))}}function od(e,t,i,c){var g=e.memoizedState,m=i(c,g);if(e.mode&di){Pe(!0);try{m=i(c,g)}finally{Pe(!1)}}m===void 0&&(t=ie(t)||"Component",UC.has(t)||(UC.add(t),console.error("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",t))),g=m==null?g:mt({},g,m),e.memoizedState=g,e.lanes===0&&(e.updateQueue.baseState=g)}function vg(e,t,i,c,g,m,x){var E=e.stateNode;if(typeof E.shouldComponentUpdate=="function"){if(i=E.shouldComponentUpdate(c,m,x),e.mode&di){Pe(!0);try{i=E.shouldComponentUpdate(c,m,x)}finally{Pe(!1)}}return i===void 0&&console.error("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",ie(t)||"Component"),i}return t.prototype&&t.prototype.isPureReactComponent?!ju(i,c)||!ju(g,m):!0}function nm(e,t,i,c){var g=t.state;typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,c),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,c),t.state!==g&&(e=de(e)||"Component",OC.has(e)||(OC.add(e),console.error("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",e)),bS.enqueueReplaceState(t,t.state,null))}function gs(e,t){var i=t;if("ref"in t){i={};for(var c in t)c!=="ref"&&(i[c]=t[c])}if(e=e.defaultProps){i===t&&(i=mt({},i));for(var g in e)i[g]===void 0&&(i[g]=e[g])}return i}function sy(e){vS(e),console.warn(`%s

%s
`,jh?"An error occurred in the <"+jh+"> component.":"An error occurred in one of your React components.",`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.`)}function yg(e){var t=jh?"The above error occurred in the <"+jh+"> component.":"The above error occurred in one of your React components.",i="React will try to recreate this component tree from scratch using the error boundary you provided, "+((yS||"Anonymous")+".");if(typeof e=="object"&&e!==null&&typeof e.environmentName=="string"){var c=e.environmentName;e=[`%o

%s

%s
`,e,t,i].slice(0),typeof e[0]=="string"?e.splice(0,1,b1+e[0],v1,R0+c+R0,y1):e.splice(0,0,b1,v1,R0+c+R0,y1),e.unshift(console),c=CR.apply(console.error,e),c()}else console.error(`%o

%s

%s
`,e,t,i)}function xg(e){vS(e)}function Rc(e,t){try{jh=t.source?de(t.source):null,yS=null;var i=t.value;if(oe.actQueue!==null)oe.thrownErrors.push(i);else{var c=e.onUncaughtError;c(i,{componentStack:t.stack})}}catch(g){setTimeout(function(){throw g})}}function $a(e,t,i){try{jh=i.source?de(i.source):null,yS=de(t);var c=e.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function zn(e,t,i){return i=to(i),i.tag=lS,i.payload={element:null},i.callback=function(){nt(t.source,Rc,e,t)},i}function rd(e){return e=to(e),e.tag=lS,e}function ml(e,t,i,c){var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var m=c.value;e.payload=function(){return g(m)},e.callback=function(){Qf(i),nt(c.source,$a,t,i,c)}}var x=i.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){Qf(i),nt(c.source,$a,t,i,c),typeof g!="function"&&(gu===null?gu=new Set([this]):gu.add(this)),tR(this,c),typeof g=="function"||!(i.lanes&2)&&console.error("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",de(i)||"Unknown")})}function Sg(e,t,i,c,g){if(i.flags|=32768,Fi&&El(e,g),c!==null&&typeof c=="object"&&typeof c.then=="function"){if(t=i.alternate,t!==null&&gr(t,i,g,!0),Gt&&(Il=!0),i=Jo.current,i!==null){switch(i.tag){case 13:return $s===null?Ug():i.alternate===null&&Gn===_l&&(Gn=ES),i.flags&=-257,i.flags|=65536,i.lanes=g,c===sS?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([c]):t.add(c),_m(e,c,g)),!1;case 22:return i.flags|=65536,c===sS?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([c]):i.add(c)),_m(e,c,g)),!1}throw Error("Unexpected Suspense handler tag ("+i.tag+"). This is a bug in React.")}return _m(e,c,g),Ug(),!1}if(Gt)return Il=!0,t=Jo.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=g,c!==aS&&cc(Va(Error("There was an error while hydrating but React was able to recover by instead client rendering from the nearest Suspense boundary.",{cause:c}),i))):(c!==aS&&cc(Va(Error("There was an error while hydrating but React was able to recover by instead client rendering the entire root.",{cause:c}),i)),e=e.current.alternate,e.flags|=65536,g&=-g,e.lanes|=g,c=Va(c,i),g=zn(e.stateNode,c,g),pr(e,g),Gn!==Wd&&(Gn=Fh)),!1;var m=Va(Error("There was an error during concurrent rendering but React was able to recover by instead synchronously rendering the entire root.",{cause:c}),i);if(Qb===null?Qb=[m]:Qb.push(m),Gn!==Wd&&(Gn=Fh),t===null)return!0;c=Va(c,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=g&-g,i.lanes|=e,e=zn(i.stateNode,c,e),pr(i,e),!1;case 1:if(t=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(gu===null||!gu.has(m))))return i.flags|=65536,g&=-g,i.lanes|=g,g=rd(g),ml(g,e,i,c),pr(i,g),!1}i=i.return}while(i!==null);return!1}function Xn(e,t,i,c){t.child=e===null?AC(t,null,i,c):$h(t,e.child,i,c)}function No(e,t,i,c,g){i=i.render;var m=t.ref;if("ref"in c){var x={};for(var E in c)E!=="ref"&&(x[E]=c[E])}else x=c;return is(t),it(t),c=hc(e,t,i,x,m,g),E=mr(),Ke(),e!==null&&!Aa?(io(e,t,g),Io(e,t,g)):(Gt&&E&&Wf(t),t.flags|=1,Xn(e,t,c,g),t.child)}function sd(e,t,i,c,g){if(e===null){var m=i.type;return typeof m=="function"&&!Kf(m)&&m.defaultProps===void 0&&i.compare===null?(i=nl(m),t.tag=15,t.type=i,cd(t,m),wg(e,t,i,c,g)):(e=Jf(i.type,null,c,t,t.mode,g),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!fm(e,g)){var x=m.memoizedProps;if(i=i.compare,i=i!==null?i:ju,i(x,c)&&e.ref===t.ref)return Io(e,t,g)}return t.flags|=1,e=Ro(m,c),e.ref=t.ref,e.return=t,t.child=e}function wg(e,t,i,c,g){if(e!==null){var m=e.memoizedProps;if(ju(m,c)&&e.ref===t.ref&&t.type===e.type)if(Aa=!1,t.pendingProps=c=m,fm(e,g))e.flags&131072&&(Aa=!0);else return t.lanes=e.lanes,Io(e,t,g)}return Cg(e,t,i,c,g)}function Eg(e,t,i){var c=t.pendingProps,g=c.children,m=e!==null?e.memoizedState:null;if(c.mode==="hidden"){if(t.flags&128){if(c=m!==null?m.baseLanes|i:i,e!==null){for(g=t.child=e.child,m=0;g!==null;)m=m|g.lanes|g.childLanes,g=g.sibling;t.childLanes=m&~c}else t.childLanes=0,t.child=null;return am(e,t,c,i)}if(i&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ig(t,m!==null?m.cachePool:null),m!==null?rg(t,m):ao(t),id(t);else return t.lanes=t.childLanes=536870912,am(e,t,m!==null?m.baseLanes|i:i,i)}else m!==null?(ig(t,m.cachePool),rg(t,m),$i(t),t.memoizedState=null):(e!==null&&ig(t,null),ao(t),$i(t));return Xn(e,t,g,i),t.child}function am(e,t,i,c){var g=Hp();return g=g===null?null:{parent:va._currentValue,pool:g},t.memoizedState={baseLanes:i,cachePool:g},e!==null&&ig(t,null),ao(t),id(t),e!==null&&gr(e,t,c,!0),null}function ld(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error("Expected ref to be a function, an object returned by React.createRef(), or undefined/null.");(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Cg(e,t,i,c,g){if(i.prototype&&typeof i.prototype.render=="function"){var m=ie(i)||"Unknown";BC[m]||(console.error("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",m,m),BC[m]=!0)}return t.mode&di&&Hr.recordLegacyContextWarning(t,null),e===null&&(cd(t,t.type),i.contextTypes&&(m=ie(i)||"Unknown",FC[m]||(FC[m]=!0,console.error("%s uses the legacy contextTypes API which was removed in React 19. Use React.createContext() with React.useContext() instead. (https://react.dev/link/legacy-context)",m)))),is(t),it(t),i=hc(e,t,i,c,void 0,g),c=mr(),Ke(),e!==null&&!Aa?(io(e,t,g),Io(e,t,g)):(Gt&&c&&Wf(t),t.flags|=1,Xn(e,t,i,g),t.child)}function im(e,t,i,c,g,m){return is(t),it(t),Pl=-1,Bb=e!==null&&e.type!==t.type,t.updateQueue=null,i=Qa(t,c,i,g),Gu(e,t),c=mr(),Ke(),e!==null&&!Aa?(io(e,t,m),Io(e,t,m)):(Gt&&c&&Wf(t),t.flags|=1,Xn(e,t,i,m),t.child)}function om(e,t,i,c,g){switch(v(t)){case!1:var m=t.stateNode,x=new t.type(t.memoizedProps,m.context).state;m.updater.enqueueSetState(m,x,null);break;case!0:t.flags|=128,t.flags|=65536,m=Error("Simulated error coming from DevTools");var E=g&-g;if(t.lanes|=E,x=Sn,x===null)throw Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");E=rd(E),ml(E,x,t,Va(m,t)),pr(t,E)}if(is(t),t.stateNode===null){if(x=ru,m=i.contextType,"contextType"in i&&m!==null&&(m===void 0||m.$$typeof!==ci)&&!_C.has(i)&&(_C.add(i),E=m===void 0?" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof m!="object"?" However, it is set to a "+typeof m+".":m.$$typeof===zd?" Did you accidentally pass the Context.Consumer instead?":" However, it is set to an object with keys {"+Object.keys(m).join(", ")+"}.",console.error("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",ie(i)||"Component",E)),typeof m=="object"&&m!==null&&(x=bn(m)),m=new i(c,x),t.mode&di){Pe(!0);try{m=new i(c,x)}finally{Pe(!1)}}if(x=t.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=bS,t.stateNode=m,m._reactInternals=t,m._reactInternalInstance=RC,typeof i.getDerivedStateFromProps=="function"&&x===null&&(x=ie(i)||"Component",zC.has(x)||(zC.add(x),console.error("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",x,m.state===null?"null":"undefined",x))),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"){var D=E=x=null;if(typeof m.componentWillMount=="function"&&m.componentWillMount.__suppressDeprecationWarning!==!0?x="componentWillMount":typeof m.UNSAFE_componentWillMount=="function"&&(x="UNSAFE_componentWillMount"),typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps.__suppressDeprecationWarning!==!0?E="componentWillReceiveProps":typeof m.UNSAFE_componentWillReceiveProps=="function"&&(E="UNSAFE_componentWillReceiveProps"),typeof m.componentWillUpdate=="function"&&m.componentWillUpdate.__suppressDeprecationWarning!==!0?D="componentWillUpdate":typeof m.UNSAFE_componentWillUpdate=="function"&&(D="UNSAFE_componentWillUpdate"),x!==null||E!==null||D!==null){m=ie(i)||"Component";var N=typeof i.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";NC.has(m)||(NC.add(m),console.error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://react.dev/link/unsafe-component-lifecycles`,m,N,x!==null?`
  `+x:"",E!==null?`
  `+E:"",D!==null?`
  `+D:""))}}m=t.stateNode,x=ie(i)||"Component",m.render||(i.prototype&&typeof i.prototype.render=="function"?console.error("No `render` method found on the %s instance: did you accidentally return an object from the constructor?",x):console.error("No `render` method found on the %s instance: you may have forgotten to define `render`.",x)),!m.getInitialState||m.getInitialState.isReactClassApproved||m.state||console.error("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",x),m.getDefaultProps&&!m.getDefaultProps.isReactClassApproved&&console.error("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",x),m.contextType&&console.error("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",x),i.childContextTypes&&!$C.has(i)&&($C.add(i),console.error("%s uses the legacy childContextTypes API which was removed in React 19. Use React.createContext() instead. (https://react.dev/link/legacy-context)",x)),i.contextTypes&&!PC.has(i)&&(PC.add(i),console.error("%s uses the legacy contextTypes API which was removed in React 19. Use React.createContext() with static contextType instead. (https://react.dev/link/legacy-context)",x)),typeof m.componentShouldUpdate=="function"&&console.error("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",x),i.prototype&&i.prototype.isPureReactComponent&&typeof m.shouldComponentUpdate<"u"&&console.error("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",ie(i)||"A pure component"),typeof m.componentDidUnmount=="function"&&console.error("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",x),typeof m.componentDidReceiveProps=="function"&&console.error("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",x),typeof m.componentWillRecieveProps=="function"&&console.error("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",x),typeof m.UNSAFE_componentWillRecieveProps=="function"&&console.error("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",x),E=m.props!==c,m.props!==void 0&&E&&console.error("When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",x),m.defaultProps&&console.error("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",x,x),typeof m.getSnapshotBeforeUpdate!="function"||typeof m.componentDidUpdate=="function"||DC.has(i)||(DC.add(i),console.error("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",ie(i))),typeof m.getDerivedStateFromProps=="function"&&console.error("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",x),typeof m.getDerivedStateFromError=="function"&&console.error("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",x),typeof i.getSnapshotBeforeUpdate=="function"&&console.error("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",x),(E=m.state)&&(typeof E!="object"||Qn(E))&&console.error("%s.state: must be set to an object or null",x),typeof m.getChildContext=="function"&&typeof i.childContextTypes!="object"&&console.error("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",x),m=t.stateNode,m.props=c,m.state=t.memoizedState,m.refs={},rs(t),x=i.contextType,m.context=typeof x=="object"&&x!==null?bn(x):ru,m.state===c&&(x=ie(i)||"Component",IC.has(x)||(IC.add(x),console.error("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",x))),t.mode&di&&Hr.recordLegacyContextWarning(t,m),Hr.recordUnsafeLifecycleWarnings(t,m),m.state=t.memoizedState,x=i.getDerivedStateFromProps,typeof x=="function"&&(od(t,i,x,c),m.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&(console.error("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",de(t)||"Component"),bS.enqueueReplaceState(m,m.state,null)),ss(t,c,m,g),fc(),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308),(t.mode&Br)!==Tn&&(t.flags|=134217728),m=!0}else if(e===null){m=t.stateNode;var se=t.memoizedProps;E=gs(i,se),m.props=E;var me=m.context;D=i.contextType,x=ru,typeof D=="object"&&D!==null&&(x=bn(D)),N=i.getDerivedStateFromProps,D=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function",se=t.pendingProps!==se,D||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(se||me!==x)&&nm(t,m,c,x),su=!1;var ae=t.memoizedState;m.state=ae,ss(t,c,m,g),fc(),me=t.memoizedState,se||ae!==me||su?(typeof N=="function"&&(od(t,i,N,c),me=t.memoizedState),(E=su||vg(t,i,E,c,ae,me,x))?(D||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308),(t.mode&Br)!==Tn&&(t.flags|=134217728)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),(t.mode&Br)!==Tn&&(t.flags|=134217728),t.memoizedProps=c,t.memoizedState=me),m.props=c,m.state=me,m.context=x,m=E):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),(t.mode&Br)!==Tn&&(t.flags|=134217728),m=!1)}else{m=t.stateNode,qu(e,t),x=t.memoizedProps,D=gs(i,x),m.props=D,N=t.pendingProps,ae=m.context,me=i.contextType,E=ru,typeof me=="object"&&me!==null&&(E=bn(me)),se=i.getDerivedStateFromProps,(me=typeof se=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==N||ae!==E)&&nm(t,m,c,E),su=!1,ae=t.memoizedState,m.state=ae,ss(t,c,m,g),fc();var ve=t.memoizedState;x!==N||ae!==ve||su||e!==null&&e.dependencies!==null&&Bu(e.dependencies)?(typeof se=="function"&&(od(t,i,se,c),ve=t.memoizedState),(D=su||vg(t,i,D,c,ae,ve,E)||e!==null&&e.dependencies!==null&&Bu(e.dependencies))?(me||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ve,E),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ve,E)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&ae===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&ae===e.memoizedState||(t.flags|=1024),t.memoizedProps=c,t.memoizedState=ve),m.props=c,m.state=ve,m.context=E,m=D):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&ae===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&ae===e.memoizedState||(t.flags|=1024),m=!1)}if(E=m,ld(e,t),x=(t.flags&128)!==0,E||x){if(E=t.stateNode,Jr(t),x&&typeof i.getDerivedStateFromError!="function")i=null,qi=-1;else{if(it(t),i=hC(E),t.mode&di){Pe(!0);try{hC(E)}finally{Pe(!1)}}Ke()}t.flags|=1,e!==null&&x?(t.child=$h(t,e.child,null,g),t.child=$h(t,null,i,g)):Xn(e,t,i,g),t.memoizedState=E.state,e=t.child}else e=Io(e,t,g);return g=t.stateNode,m&&g.props!==c&&(Lh||console.error("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",de(t)||"a component"),Lh=!0),e}function rm(e,t,i,c){return lc(),t.flags|=256,Xn(e,t,i,c),t.child}function cd(e,t){t&&t.childContextTypes&&console.error(`childContextTypes cannot be defined on a function component.
  %s.childContextTypes = ...`,t.displayName||t.name||"Component"),typeof t.getDerivedStateFromProps=="function"&&(e=ie(t)||"Unknown",qC[e]||(console.error("%s: Function components do not support getDerivedStateFromProps.",e),qC[e]=!0)),typeof t.contextType=="object"&&t.contextType!==null&&(t=ie(t)||"Unknown",HC[t]||(console.error("%s: Function components do not support contextType.",t),HC[t]=!0))}function Tg(e){return{baseLanes:e,cachePool:Fp()}}function sm(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=To),e}function lm(e,t,i){var c,g=t.pendingProps;p(t)&&(t.flags|=128);var m=!1,x=(t.flags&128)!==0;if((c=x)||(c=e!==null&&e.memoizedState===null?!1:(xa.current&Fb)!==0),c&&(m=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(Gt){if(m?Wa(t):$i(t),Gt){var E=qn,D;if(!(D=!E)){e:{var N=E;for(D=Us;N.nodeType!==8;){if(!D){D=null;break e}if(N=si(N.nextSibling),N===null){D=null;break e}}D=N}D!==null?(Wi(),t.memoizedState={dehydrated:D,treeContext:Vd!==null?{id:Dl,overflow:Nl}:null,retryLane:536870912,hydrationErrors:null},N=A(18,null,null,Tn),N.stateNode=D,N.return=t,t.child=N,Ti=t,qn=null,D=!0):D=!1,D=!D}D&&(sc(t,E),ns(t))}if(E=t.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Ts(E)?t.lanes=32:t.lanes=536870912,null;ei(t)}return E=g.children,g=g.fallback,m?($i(t),m=t.mode,E=ud({mode:"hidden",children:E},m),g=Ni(g,m,i,null),E.return=t,g.return=t,E.sibling=g,t.child=E,m=t.child,m.memoizedState=Tg(i),m.childLanes=sm(e,c,i),t.memoizedState=SS,g):(Wa(t),kg(t,E))}var se=e.memoizedState;if(se!==null&&(E=se.dehydrated,E!==null)){if(x)t.flags&256?(Wa(t),t.flags&=-257,t=dd(e,t,i)):t.memoizedState!==null?($i(t),t.child=e.child,t.flags|=128,t=null):($i(t),m=g.fallback,E=t.mode,g=ud({mode:"visible",children:g.children},E),m=Ni(m,E,i,null),m.flags|=2,g.return=t,m.return=t,g.sibling=m,t.child=g,$h(t,e.child,null,i),g=t.child,g.memoizedState=Tg(i),g.childLanes=sm(e,c,i),t.memoizedState=SS,t=m);else if(Wa(t),Gt&&console.error("We should not be hydrating here. This is a bug in React. Please file a bug."),Ts(E)){if(c=E.nextSibling&&E.nextSibling.dataset,c){D=c.dgst;var me=c.msg;N=c.stck;var ae=c.cstck}E=me,c=D,g=N,D=m=ae,m=Error(E||"The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering."),m.stack=g||"",m.digest=c,c=D===void 0?null:D,g={value:m,source:null,stack:c},typeof c=="string"&&eS.set(m,g),cc(g),t=dd(e,t,i)}else if(Aa||gr(e,t,i,!1),c=(i&e.childLanes)!==0,Aa||c){if(c=Sn,c!==null&&(g=i&-i,g=g&42?1:gn(g),g=g&(c.suspendedLanes|i)?0:g,g!==0&&g!==se.retryLane))throw se.retryLane=g,Ya(e,g),zt(c,e,g),LC;E.data===jl||Ug(),t=dd(e,t,i)}else E.data===jl?(t.flags|=192,t.child=e.child,t=null):(e=se.treeContext,qn=si(E.nextSibling),Ti=t,Gt=!0,Yd=null,Il=!1,Xo=null,Us=!1,e!==null&&(Wi(),Vo[Yo++]=Dl,Vo[Yo++]=Nl,Vo[Yo++]=Vd,Dl=e.id,Nl=e.overflow,Vd=t),t=kg(t,g.children),t.flags|=4096);return t}return m?($i(t),m=g.fallback,E=t.mode,D=e.child,N=D.sibling,g=Ro(D,{mode:"hidden",children:g.children}),g.subtreeFlags=D.subtreeFlags&65011712,N!==null?m=Ro(N,m):(m=Ni(m,E,i,null),m.flags|=2),m.return=t,g.return=t,g.sibling=m,t.child=g,g=m,m=t.child,E=e.child.memoizedState,E===null?E=Tg(i):(D=E.cachePool,D!==null?(N=va._currentValue,D=D.parent!==N?{parent:N,pool:N}:D):D=Fp(),E={baseLanes:E.baseLanes|i,cachePool:D}),m.memoizedState=E,m.childLanes=sm(e,c,i),t.memoizedState=SS,g):(Wa(t),i=e.child,e=i.sibling,i=Ro(i,{mode:"visible",children:g.children}),i.return=t,i.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=i,t.memoizedState=null,i)}function kg(e,t){return t=ud({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ud(e,t){return e=A(22,e,null,t),e.lanes=0,e.stateNode={_visibility:tS,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function dd(e,t,i){return $h(t,e.child,null,i),e=kg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cm(e,t,i){e.lanes|=t;var c=e.alternate;c!==null&&(c.lanes|=t),jp(e.return,t,i)}function um(e,t){var i=Qn(e);return e=!i&&typeof he(e)=="function",i||e?(i=i?"array":"iterable",console.error("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",i,t,i),!1):!0}function Mg(e,t,i,c,g){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:g}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=i,m.tailMode=g)}function dm(e,t,i){var c=t.pendingProps,g=c.revealOrder,m=c.tail;if(c=c.children,g!==void 0&&g!=="forwards"&&g!=="backwards"&&g!=="together"&&!GC[g])if(GC[g]=!0,typeof g=="string")switch(g.toLowerCase()){case"together":case"forwards":case"backwards":console.error('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',g,g.toLowerCase());break;case"forward":case"backward":console.error('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',g,g.toLowerCase());break;default:console.error('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',g)}else console.error('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',g);m===void 0||xS[m]||(m!=="collapsed"&&m!=="hidden"?(xS[m]=!0,console.error('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',m)):g!=="forwards"&&g!=="backwards"&&(xS[m]=!0,console.error('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',m)));e:if((g==="forwards"||g==="backwards")&&c!==void 0&&c!==null&&c!==!1)if(Qn(c)){for(var x=0;x<c.length;x++)if(!um(c[x],x))break e}else if(x=he(c),typeof x=="function"){if(x=x.call(c))for(var E=x.next(),D=0;!E.done;E=x.next()){if(!um(E.value,D))break e;D++}}else console.error('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',g);if(Xn(e,t,c,i),c=xa.current,c&Fb)c=c&_h|Fb,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cm(e,i,t);else if(e.tag===19)cm(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=_h}switch(Fe(xa,c,t),g){case"forwards":for(i=t.child,g=null;i!==null;)e=i.alternate,e!==null&&bg(e)===null&&(g=i),i=i.sibling;i=g,i===null?(g=t.child,t.child=null):(g=i.sibling,i.sibling=null),Mg(t,!1,g,i,m);break;case"backwards":for(i=null,g=t.child,t.child=null;g!==null;){if(e=g.alternate,e!==null&&bg(e)===null){t.child=g;break}e=g.sibling,g.sibling=i,i=g,g=e}Mg(t,!0,i,null,m);break;case"together":Mg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Io(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),qi=-1,du|=t.lanes,!(i&t.childLanes))if(e!==null){if(gr(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error("Resuming work not yet implemented.");if(t.child!==null){for(e=t.child,i=Ro(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ro(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function fm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Bu(e)))}function ly(e,t,i){switch(t.tag){case 3:Xe(t,t.stateNode.containerInfo),as(t,va,e.memoizedState.cache),lc();break;case 27:case 5:ee(t);break;case 4:Xe(t,t.stateNode.containerInfo);break;case 10:as(t,t.type,t.memoizedProps.value);break;case 12:i&t.childLanes&&(t.flags|=4),t.flags|=2048;var c=t.stateNode;c.effectDuration=-0,c.passiveEffectDuration=-0;break;case 13:if(c=t.memoizedState,c!==null)return c.dehydrated!==null?(Wa(t),t.flags|=128,null):i&t.child.childLanes?lm(e,t,i):(Wa(t),e=Io(e,t,i),e!==null?e.sibling:null);Wa(t);break;case 19:var g=(e.flags&128)!==0;if(c=(i&t.childLanes)!==0,c||(gr(e,t,i,!1),c=(i&t.childLanes)!==0),g){if(c)return dm(e,t,i);t.flags|=128}if(g=t.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Fe(xa,xa.current,t),c)break;return null;case 22:case 23:return t.lanes=0,Eg(e,t,i);case 24:as(t,va,e.memoizedState.cache)}return Io(e,t,i)}function hs(e,t,i){if(t._debugNeedsRemount&&e!==null){i=Jf(t.type,t.key,t.pendingProps,t._debugOwner||null,t.mode,t.lanes),i._debugStack=t._debugStack,i._debugTask=t._debugTask;var c=t.return;if(c===null)throw Error("Cannot swap the root fiber.");if(e.alternate=null,t.alternate=null,i.index=t.index,i.sibling=t.sibling,i.return=t.return,i.ref=t.ref,i._debugInfo=t._debugInfo,t===c.child)c.child=i;else{var g=c.child;if(g===null)throw Error("Expected parent to have a child.");for(;g.sibling!==t;)if(g=g.sibling,g===null)throw Error("Expected to find the previous sibling.");g.sibling=i}return t=c.deletions,t===null?(c.deletions=[e],c.flags|=16):t.push(e),i.flags|=2,i}if(e!==null)if(e.memoizedProps!==t.pendingProps||t.type!==e.type)Aa=!0;else{if(!fm(e,i)&&!(t.flags&128))return Aa=!1,ly(e,t,i);Aa=!!(e.flags&131072)}else Aa=!1,(c=Gt)&&(Wi(),c=(t.flags&1048576)!==0),c&&(c=t.index,Wi(),Pp(t,Wy,c));switch(t.lanes=0,t.tag){case 16:e:if(c=t.pendingProps,e=cu(t.elementType),t.type=e,typeof e=="function")Kf(e)?(c=gs(e,c),t.tag=1,t.type=e=nl(e),t=om(null,t,e,c,i)):(t.tag=0,cd(t,e),t.type=e=nl(e),t=Cg(null,t,e,c,i));else{if(e!=null){if(g=e.$$typeof,g===Rs){t.tag=11,t.type=e=Dp(e),t=No(null,t,e,c,i);break e}else if(g===sh){t.tag=14,t=sd(null,t,e,c,i);break e}}throw t="",e!==null&&typeof e=="object"&&e.$$typeof===wi&&(t=" Did you wrap a component in React.lazy() more than once?"),e=ie(e)||e,Error("Element type is invalid. Received a promise that resolves to: "+e+". Lazy element type must resolve to a class or function."+t)}return t;case 0:return Cg(e,t,t.type,t.pendingProps,i);case 1:return c=t.type,g=gs(c,t.pendingProps),om(e,t,c,g,i);case 3:e:{if(Xe(t,t.stateNode.containerInfo),e===null)throw Error("Should have a current fiber. This is a bug in React.");c=t.pendingProps;var m=t.memoizedState;g=m.element,qu(e,t),ss(t,c,null,i);var x=t.memoizedState;if(c=x.cache,as(t,va,c),c!==m.cache&&Ua(t,[va],i,!0),fc(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){t=rm(e,t,c,i);break e}else if(c!==g){g=Va(Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),t),cc(g),t=rm(e,t,c,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qn=si(e.firstChild),Ti=t,Gt=!0,Yd=null,Il=!1,Xo=null,Us=!0,e=AC(t,null,c,i),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling}else{if(lc(),c===g){t=Io(e,t,i);break e}Xn(e,t,c,i)}t=t.child}return t;case 26:return ld(e,t),e===null?(e=Cd(t.type,null,t.pendingProps,null))?t.memoizedState=e:Gt||(e=t.type,i=t.pendingProps,c=Ge($o.current),c=Ft(c).createElement(e),c[Ma]=t,c[ui]=i,na(c,e,i),Y(c),t.stateNode=c):t.memoizedState=Cd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ee(t),e===null&&Gt&&(c=Ge($o.current),g=V(),c=t.stateNode=li(t.type,t.pendingProps,c,g,!1),Il||(g=Nt(c,t.type,t.pendingProps,g),g!==null&&(rl(t,0).serverProps=g)),Ti=t,Us=!0,g=qn,Zn(t.type)?(qS=g,qn=si(c.firstChild)):qn=g),Xn(e,t,t.pendingProps.children,i),ld(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Gt&&(m=V(),c=Lf(t.type,m.ancestorInfo),g=qn,(x=!g)||(x=ha(g,t.type,t.pendingProps,Us),x!==null?(t.stateNode=x,Il||(m=Nt(x,t.type,t.pendingProps,m),m!==null&&(rl(t,0).serverProps=m)),Ti=t,qn=si(x.firstChild),Us=!1,m=!0):m=!1,x=!m),x&&(c&&sc(t,g),ns(t))),ee(t),g=t.type,m=t.pendingProps,x=e!==null?e.memoizedProps:null,c=m.children,Ss(g,m)?c=null:x!==null&&Ss(g,x)&&(t.flags|=32),t.memoizedState!==null&&(g=hc(e,t,Ui,null,null,i),iv._currentValue=g),ld(e,t),Xn(e,t,c,i),t.child;case 6:return e===null&&Gt&&(e=t.pendingProps,i=V(),c=i.ancestorInfo.current,e=c!=null?ac(e,c.tag,i.ancestorInfo.implicitRootScope):!0,i=qn,(c=!i)||(c=Cs(i,t.pendingProps,Us),c!==null?(t.stateNode=c,Ti=t,qn=null,c=!0):c=!1,c=!c),c&&(e&&sc(t,i),ns(t))),null;case 13:return lm(e,t,i);case 4:return Xe(t,t.stateNode.containerInfo),c=t.pendingProps,e===null?t.child=$h(t,null,c,i):Xn(e,t,c,i),t.child;case 11:return No(e,t,t.type,t.pendingProps,i);case 7:return Xn(e,t,t.pendingProps,i),t.child;case 8:return Xn(e,t,t.pendingProps.children,i),t.child;case 12:return t.flags|=4,t.flags|=2048,c=t.stateNode,c.effectDuration=-0,c.passiveEffectDuration=-0,Xn(e,t,t.pendingProps.children,i),t.child;case 10:return c=t.type,g=t.pendingProps,m=g.value,"value"in g||VC||(VC=!0,console.error("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?")),as(t,c,m),Xn(e,t,g.children,i),t.child;case 9:return g=t.type._context,c=t.pendingProps.children,typeof c!="function"&&console.error("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),is(t),g=bn(g),it(t),c=hS(c,g,void 0),Ke(),t.flags|=1,Xn(e,t,c,i),t.child;case 14:return sd(e,t,t.type,t.pendingProps,i);case 15:return wg(e,t,t.type,t.pendingProps,i);case 19:return dm(e,t,i);case 31:return c=t.pendingProps,i=t.mode,c={mode:c.mode,children:c.children},e===null?(e=ud(c,i),e.ref=t.ref,t.child=e,e.return=t,t=e):(e=Ro(e.child,c),e.ref=t.ref,t.child=e,e.return=t,t=e),t;case 22:return Eg(e,t,i);case 24:return is(t),c=bn(va),e===null?(g=Hp(),g===null&&(g=Sn,m=Lp(),g.pooledCache=m,Ii(m),m!==null&&(g.pooledCacheLanes|=i),g=m),t.memoizedState={parent:c,cache:g},rs(t),as(t,va,g)):(e.lanes&i&&(qu(e,t),ss(t,null,null,i),fc()),g=e.memoizedState,m=t.memoizedState,g.parent!==c?(g={parent:c,cache:c},t.memoizedState=g,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=g),as(t,va,c)):(c=m.cache,as(t,va,c),c!==g.cache&&Ua(t,[va],i,!0))),Xn(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function _i(e){e.flags|=4}function gm(e,t){if(t.type!=="stylesheet"||(t.state.loading&Wo)!==cf)e.flags&=-16777217;else if(e.flags|=16777216,!tb(t)){if(t=Jo.current,t!==null&&((Pt&4194048)===Pt?$s!==null:(Pt&62914560)!==Pt&&!(Pt&536870912)||t!==$s))throw jb=sS,nC;e.flags|=8192}}function bl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?gt():536870912,e.lanes|=t,nf|=t)}function Er(e,t){if(!Gt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,c=0;if(t)if((e.mode&ja)!==Tn){for(var g=e.selfBaseDuration,m=e.child;m!==null;)i|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,g+=m.treeBaseDuration,m=m.sibling;e.treeBaseDuration=g}else for(g=e.child;g!==null;)i|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=e,g=g.sibling;else if((e.mode&ja)!==Tn){g=e.actualDuration,m=e.selfBaseDuration;for(var x=e.child;x!==null;)i|=x.lanes|x.childLanes,c|=x.subtreeFlags,c|=x.flags,g+=x.actualDuration,m+=x.treeBaseDuration,x=x.sibling;e.actualDuration=g,e.treeBaseDuration=m}else for(g=e.child;g!==null;)i|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=e,g=g.sibling;return e.subtreeFlags|=c,e.childLanes=i,t}function cy(e,t,i){var c=t.pendingProps;switch(ol(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(t),null;case 1:return vn(t),null;case 3:return i=t.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),t.memoizedState.cache!==c&&(t.flags|=2048),fr(va,t),Q(t),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(sl(t)?(iy(),_i(t)):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_p())),vn(t),null;case 26:return i=t.memoizedState,e===null?(_i(t),i!==null?(vn(t),gm(t,i)):(vn(t),t.flags&=-16777217)):i?i!==e.memoizedState?(_i(t),vn(t),gm(t,i)):(vn(t),t.flags&=-16777217):(e.memoizedProps!==c&&_i(t),vn(t),t.flags&=-16777217),null;case 27:Oe(t),i=Ge($o.current);var g=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==c&&_i(t);else{if(!c){if(t.stateNode===null)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return vn(t),null}e=V(),sl(t)?$p(t):(e=li(g,c,i,e,!0),t.stateNode=e,_i(t))}return vn(t),null;case 5:if(Oe(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==c&&_i(t);else{if(!c){if(t.stateNode===null)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return vn(t),null}if(g=V(),sl(t))$p(t);else{switch(e=Ge($o.current),Lf(i,g.ancestorInfo),g=g.context,e=Ft(e),g){case Zh:e=e.createElementNS(Lr,i);break;case k0:e=e.createElementNS(yh,i);break;default:switch(i){case"svg":e=e.createElementNS(Lr,i);break;case"math":e=e.createElementNS(yh,i);break;case"script":e=e.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof c.is=="string"?e.createElement("select",{is:c.is}):e.createElement("select"),c.multiple?e.multiple=!0:c.size&&(e.size=c.size);break;default:e=typeof c.is=="string"?e.createElement(i,{is:c.is}):e.createElement(i),i.indexOf("-")===-1&&(i!==i.toLowerCase()&&console.error("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",i),Object.prototype.toString.call(e)!=="[object HTMLUnknownElement]"||_o.call(d1,i)||(d1[i]=!0,console.error("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",i)))}}e[Ma]=t,e[ui]=c;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)e.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=e;e:switch(na(e,i,c),i){case"button":case"input":case"select":case"textarea":e=!!c.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&_i(t)}}return vn(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==c&&_i(t);else{if(typeof c!="string"&&t.stateNode===null)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");if(e=Ge($o.current),i=V(),sl(t)){e=t.stateNode,i=t.memoizedProps,g=!Il,c=null;var m=Ti;if(m!==null)switch(m.tag){case 3:g&&(g=Km(e,i,c),g!==null&&(rl(t,0).serverProps=g));break;case 27:case 5:c=m.memoizedProps,g&&(g=Km(e,i,c),g!==null&&(rl(t,0).serverProps=g))}e[Ma]=t,e=!!(e.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Tl(e.nodeValue,i)),e||ns(t)}else g=i.ancestorInfo.current,g!=null&&ac(c,g.tag,i.ancestorInfo.implicitRootScope),e=Ft(e).createTextNode(c),e[Ma]=t,t.stateNode=e}return vn(t),null;case 13:if(c=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(g=sl(t),c!==null&&c.dehydrated!==null){if(e===null){if(!g)throw Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(g=t.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");g[Ma]=t,vn(t),(t.mode&ja)!==Tn&&c!==null&&(g=t.child,g!==null&&(t.treeBaseDuration-=g.treeBaseDuration))}else iy(),lc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4,vn(t),(t.mode&ja)!==Tn&&c!==null&&(g=t.child,g!==null&&(t.treeBaseDuration-=g.treeBaseDuration));g=!1}else g=_p(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=g),g=!0;if(!g)return t.flags&256?(ei(t),t):(ei(t),null)}return ei(t),t.flags&128?(t.lanes=i,(t.mode&ja)!==Tn&&Fu(t),t):(i=c!==null,e=e!==null&&e.memoizedState!==null,i&&(c=t.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==g&&(c.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),bl(t,t.updateQueue),vn(t),(t.mode&ja)!==Tn&&i&&(e=t.child,e!==null&&(t.treeBaseDuration-=e.treeBaseDuration)),null);case 4:return Q(t),e===null&&Sd(t.stateNode.containerInfo),vn(t),null;case 10:return fr(t.type,t),vn(t),null;case 19:if(ze(xa,t),g=t.memoizedState,g===null)return vn(t),null;if(c=(t.flags&128)!==0,m=g.rendering,m===null)if(c)Er(g,!1);else{if(Gn!==_l||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=bg(e),m!==null){for(t.flags|=128,Er(g,!1),e=m.updateQueue,t.updateQueue=e,bl(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Np(i,e),i=i.sibling;return Fe(xa,xa.current&_h|Fb,t),t.child}e=e.sibling}g.tail!==null&&pa()>h0&&(t.flags|=128,c=!0,Er(g,!1),t.lanes=4194304)}else{if(!c)if(e=bg(m),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,bl(t,e),Er(g,!0),g.tail===null&&g.tailMode==="hidden"&&!m.alternate&&!Gt)return vn(t),null}else 2*pa()-g.renderingStartTime>h0&&i!==536870912&&(t.flags|=128,c=!0,Er(g,!1),t.lanes=4194304);g.isBackwards?(m.sibling=t.child,t.child=m):(e=g.last,e!==null?e.sibling=m:t.child=m,g.last=m)}return g.tail!==null?(e=g.tail,g.rendering=e,g.tail=e.sibling,g.renderingStartTime=pa(),e.sibling=null,i=xa.current,i=c?i&_h|Fb:i&_h,Fe(xa,i,t),e):(vn(t),null);case 22:case 23:return ei(t),sg(t),c=t.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(t.flags|=8192):c&&(t.flags|=8192),c?i&536870912&&!(t.flags&128)&&(vn(t),t.subtreeFlags&6&&(t.flags|=8192)):vn(t),i=t.updateQueue,i!==null&&bl(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),c=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),c!==i&&(t.flags|=2048),e!==null&&ze(Qd,t),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),fr(va,t),vn(t),null;case 25:return null;case 30:return null}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function uy(e,t){switch(ol(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,(t.mode&ja)!==Tn&&Fu(t),t):null;case 3:return fr(va,t),Q(t),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Oe(t),null;case 13:if(ei(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");lc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,(t.mode&ja)!==Tn&&Fu(t),t):null;case 19:return ze(xa,t),null;case 4:return Q(t),null;case 10:return fr(t.type,t),null;case 22:case 23:return ei(t),sg(t),e!==null&&ze(Qd,t),e=t.flags,e&65536?(t.flags=e&-65537|128,(t.mode&ja)!==Tn&&Fu(t),t):null;case 24:return fr(va,t),null;case 25:return null;default:return null}}function hm(e,t){switch(ol(t),t.tag){case 3:fr(va,t),Q(t);break;case 26:case 27:case 5:Oe(t);break;case 4:Q(t);break;case 13:ei(t);break;case 19:ze(xa,t);break;case 10:fr(t.type,t);break;case 22:case 23:ei(t),sg(t),e!==null&&ze(Qd,t);break;case 24:fr(va,t)}}function co(e){return(e.mode&ja)!==Tn}function pm(e,t){co(e)?(Ca(),Oc(t,e),eo()):Oc(t,e)}function fd(e,t,i){co(e)?(Ca(),vl(i,e,t),eo()):vl(i,e,t)}function Oc(e,t){try{var i=t.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var g=c.next;i=g;do{if((i.tag&e)===e&&((e&ya)!==Zo?He!==null&&typeof He.markComponentPassiveEffectMountStarted=="function"&&He.markComponentPassiveEffectMountStarted(t):(e&La)!==Zo&&He!==null&&typeof He.markComponentLayoutEffectMountStarted=="function"&&He.markComponentLayoutEffectMountStarted(t),c=void 0,(e&ki)!==Zo&&(Yh=!0),c=nt(t,nR,i),(e&ki)!==Zo&&(Yh=!1),(e&ya)!==Zo?He!==null&&typeof He.markComponentPassiveEffectMountStopped=="function"&&He.markComponentPassiveEffectMountStopped():(e&La)!==Zo&&He!==null&&typeof He.markComponentLayoutEffectMountStopped=="function"&&He.markComponentLayoutEffectMountStopped(),c!==void 0&&typeof c!="function")){var m=void 0;m=i.tag&La?"useLayoutEffect":i.tag&ki?"useInsertionEffect":"useEffect";var x=void 0;x=c===null?" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof c.then=="function"?`

It looks like you wrote `+m+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+m+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://react.dev/link/hooks-data-fetching`:" You returned: "+c,nt(t,function(E,D){console.error("%s must not return anything besides a function, which is used for clean-up.%s",E,D)},m,x)}i=i.next}while(i!==g)}}catch(E){rn(t,t.return,E)}}function vl(e,t,i){try{var c=t.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var m=g.next;c=m;do{if((c.tag&e)===e){var x=c.inst,E=x.destroy;E!==void 0&&(x.destroy=void 0,(e&ya)!==Zo?He!==null&&typeof He.markComponentPassiveEffectUnmountStarted=="function"&&He.markComponentPassiveEffectUnmountStarted(t):(e&La)!==Zo&&He!==null&&typeof He.markComponentLayoutEffectUnmountStarted=="function"&&He.markComponentLayoutEffectUnmountStarted(t),(e&ki)!==Zo&&(Yh=!0),g=t,nt(g,aR,g,i,E),(e&ki)!==Zo&&(Yh=!1),(e&ya)!==Zo?He!==null&&typeof He.markComponentPassiveEffectUnmountStopped=="function"&&He.markComponentPassiveEffectUnmountStopped():(e&La)!==Zo&&He!==null&&typeof He.markComponentLayoutEffectUnmountStopped=="function"&&He.markComponentLayoutEffectUnmountStopped())}c=c.next}while(c!==m)}}catch(D){rn(t,t.return,D)}}function Ag(e,t){co(e)?(Ca(),Oc(t,e),eo()):Oc(t,e)}function Rg(e,t,i){co(e)?(Ca(),vl(i,e,t),eo()):vl(i,e,t)}function mm(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;e.type.defaultProps||"ref"in e.memoizedProps||Lh||(i.props!==e.memoizedProps&&console.error("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",de(e)||"instance"),i.state!==e.memoizedState&&console.error("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",de(e)||"instance"));try{nt(e,Za,t,i)}catch(c){rn(e,e.return,c)}}}function $x(e,t,i){return e.getSnapshotBeforeUpdate(t,i)}function bm(e,t){var i=t.memoizedProps,c=t.memoizedState;t=e.stateNode,e.type.defaultProps||"ref"in e.memoizedProps||Lh||(t.props!==e.memoizedProps&&console.error("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",de(e)||"instance"),t.state!==e.memoizedState&&console.error("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",de(e)||"instance"));try{var g=gs(e.type,i,e.elementType===e.type),m=nt(e,$x,t,g,c);i=YC,m!==void 0||i.has(e.type)||(i.add(e.type),nt(e,function(){console.error("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",de(e))})),t.__reactInternalSnapshotBeforeUpdate=m}catch(x){rn(e,e.return,x)}}function vm(e,t,i){i.props=gs(e.type,e.memoizedProps),i.state=e.memoizedState,co(e)?(Ca(),nt(e,xC,e,t,i),eo()):nt(e,xC,e,t,i)}function dy(e){var t=e.ref;if(t!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}if(typeof t=="function")if(co(e))try{Ca(),e.refCleanup=t(i)}finally{eo()}else e.refCleanup=t(i);else typeof t=="string"?console.error("String refs are no longer supported."):t.hasOwnProperty("current")||console.error("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",de(e)),t.current=i}}function yl(e,t){try{nt(e,dy,e)}catch(i){rn(e,t,i)}}function uo(e,t){var i=e.ref,c=e.refCleanup;if(i!==null)if(typeof c=="function")try{if(co(e))try{Ca(),nt(e,c)}finally{eo(e)}else nt(e,c)}catch(g){rn(e,t,g)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{if(co(e))try{Ca(),nt(e,i,null)}finally{eo(e)}else nt(e,i,null)}catch(g){rn(e,t,g)}else i.current=null}function ym(e,t,i,c){var g=e.memoizedProps,m=g.id,x=g.onCommit;g=g.onRender,t=t===null?"mount":"update",n0&&(t="nested-update"),typeof g=="function"&&g(m,t,e.actualDuration,e.treeBaseDuration,e.actualStartTime,i),typeof x=="function"&&x(e.memoizedProps.id,t,c,i)}function _x(e,t,i,c){var g=e.memoizedProps;e=g.id,g=g.onPostCommit,t=t===null?"mount":"update",n0&&(t="nested-update"),typeof g=="function"&&g(e,t,c,i)}function fy(e){var t=e.type,i=e.memoizedProps,c=e.stateNode;try{nt(e,Nn,c,t,i,e)}catch(g){rn(e,e.return,g)}}function Og(e,t,i){try{nt(e,ws,e.stateNode,e.type,i,t,e)}catch(c){rn(e,e.return,c)}}function zc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Zn(e.type)||e.tag===4}function gd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Zn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dc(e,t,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=ys));else if(c!==4&&(c===27&&Zn(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Dc(e,t,i),e=e.sibling;e!==null;)Dc(e,t,i),e=e.sibling}function hd(e,t,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(c!==4&&(c===27&&Zn(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(hd(e,t,i),e=e.sibling;e!==null;)hd(e,t,i),e=e.sibling}function gy(e){for(var t,i=e.return;i!==null;){if(zc(i)){t=i;break}i=i.return}if(t==null)throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");switch(t.tag){case 27:t=t.stateNode,i=gd(e),hd(e,i,t);break;case 5:i=t.stateNode,t.flags&32&&(Es(i),t.flags&=-33),t=gd(e),hd(e,t,i);break;case 3:case 4:t=t.stateNode.containerInfo,i=gd(e),Dc(e,i,t);break;default:throw Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function pd(e){var t=e.stateNode,i=e.memoizedProps;try{nt(e,Ay,e.type,i,t,e)}catch(c){rn(e,e.return,c)}}function hy(e,t){if(e=e.containerInfo,BS=O0,e=ty(e),Op(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var g=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var x=0,E=-1,D=-1,N=0,se=0,me=e,ae=null;t:for(;;){for(var ve;me!==i||g!==0&&me.nodeType!==3||(E=x+g),me!==m||c!==0&&me.nodeType!==3||(D=x+c),me.nodeType===3&&(x+=me.nodeValue.length),(ve=me.firstChild)!==null;)ae=me,me=ve;for(;;){if(me===e)break t;if(ae===i&&++N===g&&(E=x),ae===m&&++se===c&&(D=x),(ve=me.nextSibling)!==null)break;me=ae,ae=me.parentNode}me=ve}i=E===-1||D===-1?null:{start:E,end:D}}else i=null}i=i||{start:0,end:0}}else i=null;for(HS={focusedElem:e,selectionRange:i},O0=!1,Ra=t;Ra!==null;)if(t=Ra,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Ra=e;else for(;Ra!==null;){switch(e=t=Ra,i=e.alternate,g=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:g&1024&&i!==null&&bm(e,i);break;case 3:if(g&1024){if(e=e.stateNode.containerInfo,i=e.nodeType,i===9)Uo(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Uo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(g&1024)throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}if(e=t.sibling,e!==null){e.return=t.return,Ra=e;break}Ra=t.return}}function xm(e,t,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:Hn(e,i),c&4&&pm(i,La|Qo);break;case 1:if(Hn(e,i),c&4)if(e=i.stateNode,t===null)i.type.defaultProps||"ref"in i.memoizedProps||Lh||(e.props!==i.memoizedProps&&console.error("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",de(i)||"instance"),e.state!==i.memoizedState&&console.error("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",de(i)||"instance")),co(i)?(Ca(),nt(i,pS,i,e),eo()):nt(i,pS,i,e);else{var g=gs(i.type,t.memoizedProps);t=t.memoizedState,i.type.defaultProps||"ref"in i.memoizedProps||Lh||(e.props!==i.memoizedProps&&console.error("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",de(i)||"instance"),e.state!==i.memoizedState&&console.error("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",de(i)||"instance")),co(i)?(Ca(),nt(i,bC,i,e,g,t,e.__reactInternalSnapshotBeforeUpdate),eo()):nt(i,bC,i,e,g,t,e.__reactInternalSnapshotBeforeUpdate)}c&64&&mm(i),c&512&&yl(i,i.return);break;case 3:if(t=hi(),Hn(e,i),c&64&&(c=i.updateQueue,c!==null)){if(g=null,i.child!==null)switch(i.child.tag){case 27:case 5:g=i.child.stateNode;break;case 1:g=i.child.stateNode}try{nt(i,Za,c,g)}catch(x){rn(i,i.return,x)}}e.effectDuration+=uc(t);break;case 27:t===null&&c&4&&pd(i);case 26:case 5:Hn(e,i),t===null&&c&4&&fy(i),c&512&&yl(i,i.return);break;case 12:if(c&4){c=hi(),Hn(e,i),e=i.stateNode,e.effectDuration+=dc(c);try{nt(i,ym,i,t,t0,e.effectDuration)}catch(x){rn(i,i.return,x)}}else Hn(e,i);break;case 13:Hn(e,i),c&4&&md(e,i),c&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=bs.bind(null,i),qc(e,i))));break;case 22:if(c=i.memoizedState!==null||$l,!c){t=t!==null&&t.memoizedState!==null||Kn,g=$l;var m=Kn;$l=c,(Kn=t)&&!m?Ta(e,i,(i.subtreeFlags&8772)!==0):Hn(e,i),$l=g,Kn=m}break;case 30:break;default:Hn(e,i)}}function py(e){var t=e.alternate;t!==null&&(e.alternate=null,py(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Qi(t)),e.stateNode=null,e._debugOwner=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ti(e,t,i){for(i=i.child;i!==null;)Nc(e,t,i),i=i.sibling}function Nc(e,t,i){if(ma&&typeof ma.onCommitFiberUnmount=="function")try{ma.onCommitFiberUnmount(Ol,i)}catch(m){_n||(_n=!0,console.error("React instrumentation encountered an error: %s",m))}switch(i.tag){case 26:Kn||uo(i,t),ti(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Kn||uo(i,t);var c=sa,g=Gi;Zn(i.type)&&(sa=i.stateNode,Gi=!1),ti(e,t,i),nt(i,Vc,i.stateNode),sa=c,Gi=g;break;case 5:Kn||uo(i,t);case 6:if(c=sa,g=Gi,sa=null,ti(e,t,i),sa=c,Gi=g,sa!==null)if(Gi)try{nt(i,Ed,sa,i.stateNode)}catch(m){rn(i,t,m)}else try{nt(i,Fc,sa,i.stateNode)}catch(m){rn(i,t,m)}break;case 18:sa!==null&&(Gi?(e=sa,_a(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Kc(e)):_a(sa,i.stateNode));break;case 4:c=sa,g=Gi,sa=i.stateNode.containerInfo,Gi=!0,ti(e,t,i),sa=c,Gi=g;break;case 0:case 11:case 14:case 15:Kn||vl(ki,i,t),Kn||fd(i,t,La),ti(e,t,i);break;case 1:Kn||(uo(i,t),c=i.stateNode,typeof c.componentWillUnmount=="function"&&vm(i,t,c)),ti(e,t,i);break;case 21:ti(e,t,i);break;case 22:Kn=(c=Kn)||i.memoizedState!==null,ti(e,t,i),Kn=c;break;default:ti(e,t,i)}}function md(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{nt(t,My,e)}catch(i){rn(t,t.return,i)}}function bd(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new XC),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new XC),t;default:throw Error("Unexpected Suspense handler tag ("+e.tag+"). This is a bug in React.")}}function Ic(e,t){var i=bd(e);t.forEach(function(c){var g=Sy.bind(null,e,c);if(!i.has(c)){if(i.add(c),Fi)if(Bh!==null&&Hh!==null)El(Hh,Bh);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");c.then(g,g)}})}function ni(e,t){var i=t.deletions;if(i!==null)for(var c=0;c<i.length;c++){var g=e,m=t,x=i[c],E=m;e:for(;E!==null;){switch(E.tag){case 27:if(Zn(E.type)){sa=E.stateNode,Gi=!1;break e}break;case 5:sa=E.stateNode,Gi=!1;break e;case 3:case 4:sa=E.stateNode.containerInfo,Gi=!0;break e}E=E.return}if(sa===null)throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");Nc(g,m,x),sa=null,Gi=!1,g=x,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Sm(t,e),t=t.sibling}function Sm(e,t){var i=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ni(t,e),ea(e),c&4&&(vl(ki|Qo,e,e.return),Oc(ki|Qo,e),fd(e,e.return,La|Qo));break;case 1:ni(t,e),ea(e),c&512&&(Kn||i===null||uo(i,i.return)),c&64&&$l&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var g=qr;if(ni(t,e),ea(e),c&512&&(Kn||i===null||uo(i,i.return)),c&4)if(t=i!==null?i.memoizedState:null,c=e.memoizedState,i===null)if(c===null)if(e.stateNode===null){e:{c=e.type,i=e.memoizedProps,t=g.ownerDocument||g;t:switch(c){case"title":g=t.getElementsByTagName("title")[0],(!g||g[Pd]||g[Ma]||g.namespaceURI===Lr||g.hasAttribute("itemprop"))&&(g=t.createElement(c),t.head.insertBefore(g,t.querySelector("head > title"))),na(g,c,i),g[Ma]=e,Y(g),c=g;break e;case"link":var m=eb("link","href",t).get(c+(i.href||""));if(m){for(var x=0;x<m.length;x++)if(g=m[x],g.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&g.getAttribute("rel")===(i.rel==null?null:i.rel)&&g.getAttribute("title")===(i.title==null?null:i.title)&&g.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){m.splice(x,1);break t}}g=t.createElement(c),na(g,c,i),t.head.appendChild(g);break;case"meta":if(m=eb("meta","content",t).get(c+(i.content||""))){for(x=0;x<m.length;x++)if(g=m[x],ne(i.content,"content"),g.getAttribute("content")===(i.content==null?null:""+i.content)&&g.getAttribute("name")===(i.name==null?null:i.name)&&g.getAttribute("property")===(i.property==null?null:i.property)&&g.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&g.getAttribute("charset")===(i.charSet==null?null:i.charSet)){m.splice(x,1);break t}}g=t.createElement(c),na(g,c,i),t.head.appendChild(g);break;default:throw Error('getNodesForType encountered a type it did not expect: "'+c+'". This is a bug in React.')}g[Ma]=e,Y(g),c=g}e.stateNode=c}else Ml(g,e.type,e.stateNode);else e.stateNode=Oy(g,c,e.memoizedProps);else t!==c?(t===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):t.count--,c===null?Ml(g,e.type,e.stateNode):Oy(g,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Og(e,e.memoizedProps,i.memoizedProps);break;case 27:ni(t,e),ea(e),c&512&&(Kn||i===null||uo(i,i.return)),i!==null&&c&4&&Og(e,e.memoizedProps,i.memoizedProps);break;case 5:if(ni(t,e),ea(e),c&512&&(Kn||i===null||uo(i,i.return)),e.flags&32){t=e.stateNode;try{nt(e,Es,t)}catch(se){rn(e,e.return,se)}}c&4&&e.stateNode!=null&&(t=e.memoizedProps,Og(e,t,i!==null?i.memoizedProps:t)),c&1024&&(wS=!0,e.type!=="form"&&console.error("Unexpected host component type. Expected a form. This is a bug in React."));break;case 6:if(ni(t,e),ea(e),c&4){if(e.stateNode===null)throw Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");c=e.memoizedProps,i=i!==null?i.memoizedProps:c,t=e.stateNode;try{nt(e,Xm,t,i,c)}catch(se){rn(e,e.return,se)}}break;case 3:if(g=hi(),M0=null,m=qr,qr=Yg(t.containerInfo),ni(t,e),qr=m,ea(e),c&4&&i!==null&&i.memoizedState.isDehydrated)try{nt(e,Si,t.containerInfo)}catch(se){rn(e,e.return,se)}wS&&(wS=!1,wm(e)),t.effectDuration+=uc(g);break;case 4:c=qr,qr=Yg(e.stateNode.containerInfo),ni(t,e),ea(e),qr=c;break;case 12:c=hi(),ni(t,e),ea(e),e.stateNode.effectDuration+=dc(c);break;case 13:ni(t,e),ea(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(AS=pa()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Ic(e,c)));break;case 22:g=e.memoizedState!==null;var E=i!==null&&i.memoizedState!==null,D=$l,N=Kn;if($l=D||g,Kn=N||E,ni(t,e),Kn=N,$l=D,ea(e),c&8192)e:for(t=e.stateNode,t._visibility=g?t._visibility&-2:t._visibility|tS,g&&(i===null||E||$l||Kn||ai(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){E=i=t;try{m=E.stateNode,g?nt(E,Zm,m):nt(E,Fg,E.stateNode,E.memoizedProps)}catch(se){rn(E,E.return,se)}}}else if(t.tag===6){if(i===null){E=t;try{x=E.stateNode,g?nt(E,Qm,x):nt(E,qg,x,E.memoizedProps)}catch(se){rn(E,E.return,se)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}c&4&&(c=e.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Ic(e,i))));break;case 19:ni(t,e),ea(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Ic(e,c)));break;case 30:break;case 21:break;default:ni(t,e),ea(e)}}function ea(e){var t=e.flags;if(t&2){try{nt(e,gy,e)}catch(i){rn(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;wm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Hn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)xm(e,t.alternate,t),t=t.sibling}function fo(e){switch(e.tag){case 0:case 11:case 14:case 15:fd(e,e.return,La),ai(e);break;case 1:uo(e,e.return);var t=e.stateNode;typeof t.componentWillUnmount=="function"&&vm(e,e.return,t),ai(e);break;case 27:nt(e,Vc,e.stateNode);case 26:case 5:uo(e,e.return),ai(e);break;case 22:e.memoizedState===null&&ai(e);break;case 30:ai(e);break;default:ai(e)}}function ai(e){for(e=e.child;e!==null;)fo(e),e=e.sibling}function Em(e,t,i,c){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Ta(e,i,c),pm(i,La);break;case 1:if(Ta(e,i,c),t=i.stateNode,typeof t.componentDidMount=="function"&&nt(i,pS,i,t),t=i.updateQueue,t!==null){e=i.stateNode;try{nt(i,Px,t,e)}catch(m){rn(i,i.return,m)}}c&&g&64&&mm(i),yl(i,i.return);break;case 27:pd(i);case 26:case 5:Ta(e,i,c),c&&t===null&&g&4&&fy(i),yl(i,i.return);break;case 12:if(c&&g&4){g=hi(),Ta(e,i,c),c=i.stateNode,c.effectDuration+=dc(g);try{nt(i,ym,i,t,t0,c.effectDuration)}catch(m){rn(i,i.return,m)}}else Ta(e,i,c);break;case 13:Ta(e,i,c),c&&g&4&&md(e,i);break;case 22:i.memoizedState===null&&Ta(e,i,c),yl(i,i.return);break;case 30:break;default:Ta(e,i,c)}}function Ta(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;)Em(e,t.alternate,t,i),t=t.sibling}function go(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&Ii(e),i!=null&&ll(i))}function $n(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(Ii(t),e!=null&&ll(e))}function bi(e,t,i,c){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zg(e,t,i,c),t=t.sibling}function zg(e,t,i,c){var g=t.flags;switch(t.tag){case 0:case 11:case 15:bi(e,t,i,c),g&2048&&Ag(t,ya|Qo);break;case 1:bi(e,t,i,c);break;case 3:var m=hi();bi(e,t,i,c),g&2048&&(i=null,t.alternate!==null&&(i=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==i&&(Ii(t),i!=null&&ll(i))),e.passiveEffectDuration+=uc(m);break;case 12:if(g&2048){g=hi(),bi(e,t,i,c),e=t.stateNode,e.passiveEffectDuration+=dc(g);try{nt(t,_x,t,t.alternate,t0,e.passiveEffectDuration)}catch(E){rn(t,t.return,E)}}else bi(e,t,i,c);break;case 13:bi(e,t,i,c);break;case 23:break;case 22:m=t.stateNode;var x=t.alternate;t.memoizedState!==null?m._visibility&Gd?bi(e,t,i,c):Uc(e,t):m._visibility&Gd?bi(e,t,i,c):(m._visibility|=Gd,ps(e,t,i,c,(t.subtreeFlags&10256)!==0)),g&2048&&go(x,t);break;case 24:bi(e,t,i,c),g&2048&&$n(t.alternate,t);break;default:bi(e,t,i,c)}}function ps(e,t,i,c,g){for(g=g&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;)Cm(e,t,i,c,g),t=t.sibling}function Cm(e,t,i,c,g){var m=t.flags;switch(t.tag){case 0:case 11:case 15:ps(e,t,i,c,g),Ag(t,ya);break;case 23:break;case 22:var x=t.stateNode;t.memoizedState!==null?x._visibility&Gd?ps(e,t,i,c,g):Uc(e,t):(x._visibility|=Gd,ps(e,t,i,c,g)),g&&m&2048&&go(t.alternate,t);break;case 24:ps(e,t,i,c,g),g&&m&2048&&$n(t.alternate,t);break;default:ps(e,t,i,c,g)}}function Uc(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,c=t,g=c.flags;switch(c.tag){case 22:Uc(i,c),g&2048&&go(c.alternate,c);break;case 24:Uc(i,c),g&2048&&$n(c.alternate,c);break;default:Uc(i,c)}t=t.sibling}}function ji(e){if(e.subtreeFlags&qb)for(e=e.child;e!==null;)vd(e),e=e.sibling}function vd(e){switch(e.tag){case 26:ji(e),e.flags&qb&&e.memoizedState!==null&&Dy(qr,e.memoizedState,e.memoizedProps);break;case 5:ji(e);break;case 3:case 4:var t=qr;qr=Yg(e.stateNode.containerInfo),ji(e),qr=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=qb,qb=16777216,ji(e),qb=t):ji(e));break;default:ji(e)}}function Tm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Pc(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var c=t[i];Ra=c,Dg(c,e)}Tm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)km(e),e=e.sibling}function km(e){switch(e.tag){case 0:case 11:case 15:Pc(e),e.flags&2048&&Rg(e,e.return,ya|Qo);break;case 3:var t=hi();Pc(e),e.stateNode.passiveEffectDuration+=uc(t);break;case 12:t=hi(),Pc(e),e.stateNode.passiveEffectDuration+=dc(t);break;case 22:t=e.stateNode,e.memoizedState!==null&&t._visibility&Gd&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,xl(e)):Pc(e);break;default:Pc(e)}}function xl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var c=t[i];Ra=c,Dg(c,e)}Tm(e)}for(e=e.child;e!==null;)Mm(e),e=e.sibling}function Mm(e){switch(e.tag){case 0:case 11:case 15:Rg(e,e.return,ya),xl(e);break;case 22:var t=e.stateNode;t._visibility&Gd&&(t._visibility&=-3,xl(e));break;default:xl(e)}}function Dg(e,t){for(;Ra!==null;){var i=Ra,c=i;switch(c.tag){case 0:case 11:case 15:Rg(c,t,ya);break;case 23:case 22:c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(c=c.memoizedState.cachePool.pool,c!=null&&Ii(c));break;case 24:ll(c.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,Ra=c;else e:for(i=e;Ra!==null;){c=Ra;var g=c.sibling,m=c.return;if(py(c),c===i){Ra=null;break e}if(g!==null){g.return=m,Ra=g;break e}Ra=m}}}function my(){oR.forEach(function(e){return e()})}function Am(){var e=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return e||oe.actQueue===null||console.error("The current testing environment is not configured to support act(...)"),e}function vi(e){if((nn&Mi)!==Eo&&Pt!==0)return Pt&-Pt;var t=oe.T;return t!==null?(t._updatedFibers||(t._updatedFibers=new Set),t._updatedFibers.add(e),e=Zd,e!==0?e:Bg()):En()}function Rm(){To===0&&(To=!(Pt&536870912)||Gt?Ae():536870912);var e=Jo.current;return e!==null&&(e.flags|=32),To}function zt(e,t,i){if(Yh&&console.error("useInsertionEffect must not schedule updates."),NS&&(p0=!0),(e===Sn&&(un===ef||un===tf)||e.cancelPendingCommit!==null)&&(Tr(e,0),Cr(e,Pt,To,!1)),Rn(e,i),nn&Mi&&e===Sn){if(Lo)switch(t.tag){case 0:case 11:case 15:e=Ut&&de(Ut)||"Unknown",i1.has(e)||(i1.add(e),t=de(t)||"Unknown",console.error("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://react.dev/link/setstate-in-render",t,e,e));break;case 1:a1||(console.error("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),a1=!0)}}else Fi&&hn(e,t,i),Lm(t),e===Sn&&((nn&Mi)===Eo&&(fu|=i),Gn===Wd&&Cr(e,Pt,To,!1)),Li(e)}function ta(e,t,i){if((nn&(Mi|Gr))!==Eo)throw Error("Should not already be working.");var c=!i&&(t&124)===0&&(t&e.expiredLanes)===0||Jt(e,t),g=c?Nm(e,t):yd(e,t,!0),m=c;do{if(g===_l){Gh&&!c&&Cr(e,t,0,!1);break}else{if(i=e.current.alternate,m&&!by(i)){g=yd(e,t,!1),m=!1;continue}if(g===Fh){if(m=t,e.errorRecoveryDisabledLanes&m)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){t=x;e:{g=e;var E=x;x=Qb;var D=g.current.memoizedState.isDehydrated;if(D&&(Tr(g,E).flags|=256),E=yd(g,E,!1),E!==Fh){if(kS&&!D){g.errorRecoveryDisabledLanes|=m,fu|=m,g=Wd;break e}g=Ai,Ai=x,g!==null&&(Ai===null?Ai=g:Ai.push.apply(Ai,g))}g=E}if(m=!1,g!==Fh)continue}}if(g===Vb){Tr(e,0),Cr(e,t,0,!0);break}e:{switch(c=e,g){case _l:case Vb:throw Error("Root did not complete. This is a bug in React.");case Wd:if((t&4194048)!==t)break;case f0:Cr(c,t,To,!uu);break e;case Fh:Ai=null;break;case ES:case ZC:break;default:throw Error("Unknown root exit status.")}if(oe.actQueue!==null)ho(c,i,t,Ai,Kb,g0,To,fu,nf);else{if((t&62914560)===t&&(m=AS+KC-pa(),10<m)){if(Cr(c,t,To,!uu),Yt(c,0,!0)!==0)break e;c.timeoutHandle=f1(Om.bind(null,c,i,Ai,Kb,g0,t,To,fu,nf,uu,g,cR,WE,0),m);break e}Om(c,i,Ai,Kb,g0,t,To,fu,nf,uu,g,sR,WE,0)}}}break}while(!0);Li(e)}function Om(e,t,i,c,g,m,x,E,D,N,se,me,ae,ve){if(e.timeoutHandle=lf,me=t.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(av={stylesheets:null,count:0,unsuspend:zy},vd(t),me=Ny(),me!==null)){e.cancelPendingCommit=me(ho.bind(null,e,t,m,i,c,g,x,E,D,se,lR,ae,ve)),Cr(e,m,x,!N);return}ho(e,t,m,i,c,g,x,E,D)}function by(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var g=i[c],m=g.getSnapshot;g=g.value;try{if(!Ci(m(),g))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cr(e,t,i,c){t&=~MS,t&=~fu,e.suspendedLanes|=t,e.pingedLanes&=~t,c&&(e.warmLanes|=t),c=e.expirationTimes;for(var g=t;0<g;){var m=31-aa(g),x=1<<m;c[m]=-1,g&=~x}i!==0&&Ne(e,i,t)}function Sl(){return(nn&(Mi|Gr))===Eo?(vs(0),!1):!0}function Ng(){if(Ut!==null){if(un===Vi)var e=Ut.return;else e=Ut,tg(),oo(e),Ph=null,Hb=0,e=Ut;for(;e!==null;)hm(e.alternate,e),e=e.return;Ut=null}}function Tr(e,t){var i=e.timeoutHandle;i!==lf&&(e.timeoutHandle=lf,wR(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Ng(),Sn=e,Ut=i=Ro(e.current,null),Pt=t,un=Vi,Co=null,uu=!1,Gh=Jt(e,t),kS=!1,Gn=_l,nf=To=MS=fu=du=0,Ai=Qb=null,g0=!1,t&8&&(t|=t&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=t;0<c;){var g=31-aa(c),m=1<<g;t|=e[g],c&=~m}return _s=t,Yf(),t=KE(),1e3<t-QE&&(oe.recentlyCreatedOwnerStacks=0,QE=t),Hr.discardPendingWarnings(),i}function Ig(e,t){bt=null,oe.H=u0,oe.getCurrentStack=null,Lo=!1,ba=null,t===_b||t===o0?(t=pi(),un=Xb):t===nC?(t=pi(),un=QC):un=t===LC?TS:t!==null&&typeof t=="object"&&typeof t.then=="function"?qh:Yb,Co=t;var i=Ut;if(i===null)Gn=Vb,Rc(e,Va(t,e.current));else switch(i.mode&ja&&os(i),Ke(),un){case Yb:He!==null&&typeof He.markComponentErrored=="function"&&He.markComponentErrored(i,t,Pt);break;case ef:case tf:case Xb:case qh:case Zb:He!==null&&typeof He.markComponentSuspended=="function"&&He.markComponentSuspended(i,t,Pt)}}function zm(){var e=oe.H;return oe.H=u0,e===null?u0:e}function Dm(){var e=oe.A;return oe.A=iR,e}function Ug(){Gn=Wd,uu||(Pt&4194048)!==Pt&&Jo.current!==null||(Gh=!0),!(du&134217727)&&!(fu&134217727)||Sn===null||Cr(Sn,Pt,To,!1)}function yd(e,t,i){var c=nn;nn|=Mi;var g=zm(),m=Dm();if(Sn!==e||Pt!==t){if(Fi){var x=e.memoizedUpdaters;0<x.size&&(El(e,Pt),x.clear()),lr(e,t)}Kb=null,Tr(e,t)}lt(t),t=!1,x=Gn;e:do try{if(un!==Vi&&Ut!==null){var E=Ut,D=Co;switch(un){case TS:Ng(),x=f0;break e;case Xb:case ef:case tf:case qh:Jo.current===null&&(t=!0);var N=un;if(un=Vi,Co=null,wl(e,E,D,N),i&&Gh){x=_l;break e}break;default:N=un,un=Vi,Co=null,wl(e,E,D,N)}}Pg(),x=Gn;break}catch(se){Ig(e,se)}while(!0);return t&&e.shellSuspendCounter++,tg(),nn=c,oe.H=g,oe.A=m,ht(),Ut===null&&(Sn=null,Pt=0,Yf()),x}function Pg(){for(;Ut!==null;)$g(Ut)}function Nm(e,t){var i=nn;nn|=Mi;var c=zm(),g=Dm();if(Sn!==e||Pt!==t){if(Fi){var m=e.memoizedUpdaters;0<m.size&&(El(e,Pt),m.clear()),lr(e,t)}Kb=null,h0=pa()+JC,Tr(e,t)}else Gh=Jt(e,t);lt(t);e:do try{if(un!==Vi&&Ut!==null)t:switch(t=Ut,m=Co,un){case Yb:un=Vi,Co=null,wl(e,t,m,Yb);break;case ef:case tf:if(og(m)){un=Vi,Co=null,xd(t);break}t=function(){un!==ef&&un!==tf||Sn!==e||(un=Zb),Li(e)},m.then(t,t);break e;case Xb:un=Zb;break e;case QC:un=CS;break e;case Zb:og(m)?(un=Vi,Co=null,xd(t)):(un=Vi,Co=null,wl(e,t,m,Zb));break;case CS:var x=null;switch(Ut.tag){case 26:x=Ut.memoizedState;case 5:case 27:var E=Ut;if(!x||tb(x)){un=Vi,Co=null;var D=E.sibling;if(D!==null)Ut=D;else{var N=E.return;N!==null?(Ut=N,$c(N)):Ut=null}break t}break;default:console.error("Unexpected type of fiber triggered a suspensey commit. This is a bug in React.")}un=Vi,Co=null,wl(e,t,m,CS);break;case qh:un=Vi,Co=null,wl(e,t,m,qh);break;case TS:Ng(),Gn=f0;break e;default:throw Error("Unexpected SuspendedReason. This is a bug in React.")}oe.actQueue!==null?Pg():vy();break}catch(se){Ig(e,se)}while(!0);return tg(),oe.H=c,oe.A=g,nn=i,Ut!==null?(He!==null&&typeof He.markRenderYielded=="function"&&He.markRenderYielded(),_l):(ht(),Sn=null,Pt=0,Yf(),Gn)}function vy(){for(;Ut!==null&&!qx();)$g(Ut)}function $g(e){var t=e.alternate;(e.mode&ja)!==Tn?(hr(e),t=nt(e,hs,t,e,_s),os(e)):t=nt(e,hs,t,e,_s),e.memoizedProps=e.pendingProps,t===null?$c(e):Ut=t}function xd(e){var t=nt(e,Im,e);e.memoizedProps=e.pendingProps,t===null?$c(e):Ut=t}function Im(e){var t=e.alternate,i=(e.mode&ja)!==Tn;switch(i&&hr(e),e.tag){case 15:case 0:t=im(t,e,e.pendingProps,e.type,void 0,Pt);break;case 11:t=im(t,e,e.pendingProps,e.type.render,e.ref,Pt);break;case 5:oo(e);default:hm(t,e),e=Ut=Np(e,_s),t=hs(t,e,_s)}return i&&os(e),t}function wl(e,t,i,c){tg(),oo(t),Ph=null,Hb=0;var g=t.return;try{if(Sg(e,g,t,i,Pt)){Gn=Vb,Rc(e,Va(i,e.current)),Ut=null;return}}catch(m){if(g!==null)throw Ut=g,m;Gn=Vb,Rc(e,Va(i,e.current)),Ut=null;return}t.flags&32768?(Gt||c===Yb?e=!0:Gh||Pt&536870912?e=!1:(uu=e=!0,(c===ef||c===tf||c===Xb||c===qh)&&(c=Jo.current,c!==null&&c.tag===13&&(c.flags|=16384))),Um(t,e)):$c(t)}function $c(e){var t=e;do{if(t.flags&32768){Um(t,uu);return}var i=t.alternate;if(e=t.return,hr(t),i=nt(t,cy,i,t,_s),(t.mode&ja)!==Tn&&ag(t),i!==null){Ut=i;return}if(t=t.sibling,t!==null){Ut=t;return}Ut=t=e}while(t!==null);Gn===_l&&(Gn=ZC)}function Um(e,t){do{var i=uy(e.alternate,e);if(i!==null){i.flags&=32767,Ut=i;return}if((e.mode&ja)!==Tn){ag(e),i=e.actualDuration;for(var c=e.child;c!==null;)i+=c.actualDuration,c=c.sibling;e.actualDuration=i}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Ut=e;return}Ut=e=i}while(e!==null);Gn=f0,Ut=null}function ho(e,t,i,c,g,m,x,E,D){e.cancelPendingCommit=null;do ms();while(Ba!==af);if(Hr.flushLegacyContextWarning(),Hr.flushPendingUnsafeLifecycleWarnings(),(nn&(Mi|Gr))!==Eo)throw Error("Should not already be working.");if(He!==null&&typeof He.markCommitStarted=="function"&&He.markCommitStarted(i),t===null)$e();else{if(i===0&&console.error("finishedLanes should not be empty during a commit. This is a bug in React."),t===e.current)throw Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");if(m=t.lanes|t.childLanes,m|=nS,Ve(e,i,m,x,E,D),e===Sn&&(Ut=Sn=null,Pt=0),Vh=t,hu=e,pu=i,OS=m,zS=g,n1=c,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,wy(Wc,function(){return _c(),null})):(e.callbackNode=null,e.callbackPriority=0),t0=zh(),c=(t.flags&13878)!==0,t.subtreeFlags&13878||c){c=oe.T,oe.T=null,g=Qt.p,Qt.p=Ei,x=nn,nn|=Gr;try{hy(e,t,i)}finally{nn=x,Qt.p=g,oe.T=c}}Ba=WC,_g(),yy(),Pm()}}function _g(){if(Ba===WC){Ba=af;var e=hu,t=Vh,i=pu,c=(t.flags&13878)!==0;if(t.subtreeFlags&13878||c){c=oe.T,oe.T=null;var g=Qt.p;Qt.p=Ei;var m=nn;nn|=Gr;try{Bh=i,Hh=e,Sm(t,e),Hh=Bh=null,i=HS;var x=ty(e.containerInfo),E=i.focusedElem,D=i.selectionRange;if(x!==E&&E&&E.ownerDocument&&ey(E.ownerDocument.documentElement,E)){if(D!==null&&Op(E)){var N=D.start,se=D.end;if(se===void 0&&(se=N),"selectionStart"in E)E.selectionStart=N,E.selectionEnd=Math.min(se,E.value.length);else{var me=E.ownerDocument||document,ae=me&&me.defaultView||window;if(ae.getSelection){var ve=ae.getSelection(),Je=E.textContent.length,dt=Math.min(D.start,Je),wn=D.end===void 0?dt:Math.min(D.end,Je);!ve.extend&&dt>wn&&(x=wn,wn=dt,dt=x);var _t=Wv(E,dt),L=Wv(E,wn);if(_t&&L&&(ve.rangeCount!==1||ve.anchorNode!==_t.node||ve.anchorOffset!==_t.offset||ve.focusNode!==L.node||ve.focusOffset!==L.offset)){var B=me.createRange();B.setStart(_t.node,_t.offset),ve.removeAllRanges(),dt>wn?(ve.addRange(B),ve.extend(L.node,L.offset)):(B.setEnd(L.node,L.offset),ve.addRange(B))}}}}for(me=[],ve=E;ve=ve.parentNode;)ve.nodeType===1&&me.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<me.length;E++){var F=me[E];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}O0=!!BS,HS=BS=null}finally{nn=m,Qt.p=g,oe.T=c}}e.current=t,Ba=e1}}function yy(){if(Ba===e1){Ba=af;var e=hu,t=Vh,i=pu,c=(t.flags&8772)!==0;if(t.subtreeFlags&8772||c){c=oe.T,oe.T=null;var g=Qt.p;Qt.p=Ei;var m=nn;nn|=Gr;try{He!==null&&typeof He.markLayoutEffectsStarted=="function"&&He.markLayoutEffectsStarted(i),Bh=i,Hh=e,xm(e,t.alternate,t),Hh=Bh=null,He!==null&&typeof He.markLayoutEffectsStopped=="function"&&He.markLayoutEffectsStopped()}finally{nn=m,Qt.p=g,oe.T=c}}Ba=t1}}function Pm(){if(Ba===uR||Ba===t1){Ba=af,Gx();var e=hu,t=Vh,i=pu,c=n1,g=(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0;g?Ba=RS:(Ba=af,Vh=hu=null,$m(e,e.pendingLanes),of=0,Wb=null);var m=e.pendingLanes;if(m===0&&(gu=null),g||po(e),g=Kr(i),t=t.stateNode,ma&&typeof ma.onCommitFiberRoot=="function")try{var x=(t.current.flags&128)===128;switch(g){case Ei:var E=Id;break;case jo:E=lb;break;case _r:E=Wc;break;case dh:E=ub;break;default:E=Wc}ma.onCommitFiberRoot(Ol,t,E,x)}catch(me){_n||(_n=!0,console.error("React instrumentation encountered an error: %s",me))}if(Fi&&e.memoizedUpdaters.clear(),my(),c!==null){x=oe.T,E=Qt.p,Qt.p=Ei,oe.T=null;try{var D=e.onRecoverableError;for(t=0;t<c.length;t++){var N=c[t],se=kr(N.stack);nt(N.source,D,N.value,se)}}finally{oe.T=x,Qt.p=E}}pu&3&&ms(),Li(e),m=e.pendingLanes,i&4194090&&m&42?(a0=!0,e===DS?Jb++:(Jb=0,DS=e)):Jb=0,vs(0),$e()}}function kr(e){return e={componentStack:e},Object.defineProperty(e,"digest",{get:function(){console.error('You are accessing "digest" from the errorInfo object passed to onRecoverableError. This property is no longer provided as part of errorInfo but can be accessed as a property of the Error instance itself.')}}),e}function $m(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ll(t)))}function ms(e){return _g(),yy(),Pm(),_c()}function _c(){if(Ba!==RS)return!1;var e=hu,t=OS;OS=0;var i=Kr(pu),c=_r>i?_r:i;i=oe.T;var g=Qt.p;try{Qt.p=c,oe.T=null,c=zS,zS=null;var m=hu,x=pu;if(Ba=af,Vh=hu=null,pu=0,(nn&(Mi|Gr))!==Eo)throw Error("Cannot flush passive effects while already rendering.");NS=!0,p0=!1,He!==null&&typeof He.markPassiveEffectsStarted=="function"&&He.markPassiveEffectsStarted(x);var E=nn;if(nn|=Gr,km(m.current),zg(m,m.current,x,c),He!==null&&typeof He.markPassiveEffectsStopped=="function"&&He.markPassiveEffectsStopped(),po(m),nn=E,vs(0,!1),p0?m===Wb?of++:(of=0,Wb=m):of=0,p0=NS=!1,ma&&typeof ma.onPostCommitFiberRoot=="function")try{ma.onPostCommitFiberRoot(Ol,m)}catch(N){_n||(_n=!0,console.error("React instrumentation encountered an error: %s",N))}var D=m.current.stateNode;return D.effectDuration=0,D.passiveEffectDuration=0,!0}finally{Qt.p=g,oe.T=i,$m(e,t)}}function Cn(e,t,i){t=Va(i,t),t=zn(e.stateNode,t,2),e=no(e,t,2),e!==null&&(Rn(e,2),Li(e))}function rn(e,t,i){if(Yh=!1,e.tag===3)Cn(e,e,i);else{for(;t!==null;){if(t.tag===3){Cn(t,e,i);return}if(t.tag===1){var c=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(gu===null||!gu.has(c))){e=Va(i,e),i=rd(2),c=no(t,i,2),c!==null&&(ml(i,c,t,e),Rn(c,2),Li(c));return}}t=t.return}console.error(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Potential causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,i)}}function _m(e,t,i){var c=e.pingCache;if(c===null){c=e.pingCache=new rR;var g=new Set;c.set(t,g)}else g=c.get(t),g===void 0&&(g=new Set,c.set(t,g));g.has(i)||(kS=!0,g.add(i),c=xy.bind(null,e,t,i),Fi&&El(e,i),t.then(c,c))}function xy(e,t,i){var c=e.pingCache;c!==null&&c.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Am()&&oe.actQueue===null&&console.error(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act`),Sn===e&&(Pt&i)===i&&(Gn===Wd||Gn===ES&&(Pt&62914560)===Pt&&pa()-AS<KC?(nn&Mi)===Eo&&Tr(e,0):MS|=i,nf===Pt&&(nf=0)),Li(e)}function jc(e,t){t===0&&(t=gt()),e=Ya(e,t),e!==null&&(Rn(e,t),Li(e))}function bs(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),jc(e,i)}function Sy(e,t){var i=0;switch(e.tag){case 13:var c=e.stateNode,g=e.memoizedState;g!==null&&(i=g.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}c!==null&&c.delete(t),jc(e,i)}function jg(e,t,i){if(t.subtreeFlags&67117056)for(t=t.child;t!==null;){var c=e,g=t,m=g.type===Al;m=i||m,g.tag!==22?g.flags&67108864?m&&nt(g,Lc,c,g,(g.mode&YE)===Tn):jg(c,g,m):g.memoizedState===null&&(m&&g.flags&8192?nt(g,Lc,c,g):g.subtreeFlags&67108864&&nt(g,jg,c,g,m)),t=t.sibling}}function Lc(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0;Pe(!0);try{fo(t),i&&Mm(t),Em(e,t.alternate,t,!1),i&&Cm(e,t,0,null,!1,0)}finally{Pe(!1)}}function po(e){var t=!0;e.current.mode&(di|Br)||(t=!1),jg(e,e.current,t)}function jm(e){if((nn&Mi)===Eo){var t=e.tag;if(t===3||t===1||t===0||t===11||t===14||t===15){if(t=de(e)||"ReactComponent",m0!==null){if(m0.has(t))return;m0.add(t)}else m0=new Set([t]);nt(e,function(){console.error("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")})}}}function El(e,t){Fi&&e.memoizedUpdaters.forEach(function(i){hn(e,i,t)})}function wy(e,t){var i=oe.actQueue;return i!==null?(i.push(t),gR):sb(e,t)}function Lm(e){Am()&&oe.actQueue===null&&nt(e,function(){console.error(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act`,de(e))})}function Li(e){e!==Xh&&e.next===null&&(Xh===null?b0=Xh=e:Xh=Xh.next=e),v0=!0,oe.actQueue!==null?US||(US=!0,Cy()):IS||(IS=!0,Cy())}function vs(e,t){if(!PS&&v0){PS=!0;do for(var i=!1,c=b0;c!==null;){if(e!==0){var g=c.pendingLanes;if(g===0)var m=0;else{var x=c.suspendedLanes,E=c.pingedLanes;m=(1<<31-aa(42|e)+1)-1,m&=g&~(x&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,Bm(c,m))}else m=Pt,m=Yt(c,c===Sn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==lf),!(m&3)||Jt(c,m)||(i=!0,Bm(c,m));c=c.next}while(i);PS=!1}}function Ey(){mo()}function mo(){v0=US=IS=!1;var e=0;rf!==0&&(Ym()&&(e=rf),rf=0);for(var t=pa(),i=null,c=b0;c!==null;){var g=c.next,m=Dn(c,t);m===0?(c.next=null,i===null?b0=g:i.next=g,g===null&&(Xh=i)):(i=c,(e!==0||m&3)&&(v0=!0)),c=g}vs(e)}function Dn(e,t){for(var i=e.suspendedLanes,c=e.pingedLanes,g=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var x=31-aa(m),E=1<<x,D=g[x];D===-1?(!(E&i)||E&c)&&(g[x]=Un(E,t)):D<=t&&(e.expiredLanes|=E),m&=~E}if(t=Sn,i=Pt,i=Yt(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==lf),c=e.callbackNode,i===0||e===t&&(un===ef||un===tf)||e.cancelPendingCommit!==null)return c!==null&&Fn(c),e.callbackNode=null,e.callbackPriority=0;if(!(i&3)||Jt(e,i)){if(t=i&-i,t!==e.callbackPriority||oe.actQueue!==null&&c!==$S)Fn(c);else return t;switch(Kr(i)){case Ei:case jo:i=lb;break;case _r:i=Wc;break;case dh:i=ub;break;default:i=Wc}return c=Lg.bind(null,e),oe.actQueue!==null?(oe.actQueue.push(c),i=$S):i=sb(i,c),e.callbackPriority=t,e.callbackNode=i,t}return c!==null&&Fn(c),e.callbackPriority=2,e.callbackNode=null,2}function Lg(e,t){if(a0=n0=!1,Ba!==af&&Ba!==RS)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(ms()&&e.callbackNode!==i)return null;var c=Pt;return c=Yt(e,e===Sn?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==lf),c===0?null:(ta(e,c,t),Dn(e,pa()),e.callbackNode!=null&&e.callbackNode===i?Lg.bind(null,e):null)}function Bm(e,t){if(ms())return null;n0=a0,a0=!1,ta(e,t,!0)}function Fn(e){e!==$S&&e!==null&&Ly(e)}function Cy(){oe.actQueue!==null&&oe.actQueue.push(function(){return mo(),null}),ER(function(){(nn&(Mi|Gr))!==Eo?sb(Id,Ey):mo()})}function Bg(){return rf===0&&(rf=Ae()),rf}function Hm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:(ne(e,"action"),dr(""+e))}function yn(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function ii(e,t,i,c,g){if(t==="submit"&&i&&i.stateNode===g){var m=Hm((g[ui]||null).action),x=c.submitter;x&&(t=(t=x[ui]||null)?Hm(t.formAction):x.getAttribute("formAction"),t!==null&&(m=t,x=null));var E=new Kt("action","action",null,c,g);e.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(rf!==0){var D=x?yn(g,x):new FormData(g),N={pending:!0,data:D,method:g.method,action:m};Object.freeze(N),hg(i,N,null,D)}}else typeof m=="function"&&(E.preventDefault(),D=x?yn(g,x):new FormData(g),N={pending:!0,data:D,method:g.method,action:m},Object.freeze(N),hg(i,N,m,D))},currentTarget:g}]})}}function Bi(e,t,i){e.currentTarget=i;try{t(e)}catch(c){vS(c)}e.currentTarget=null}function Fm(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var c=e[i];e:{var g=void 0,m=c.event;if(c=c.listeners,t)for(var x=c.length-1;0<=x;x--){var E=c[x],D=E.instance,N=E.currentTarget;if(E=E.listener,D!==g&&m.isPropagationStopped())break e;D!==null?nt(D,Bi,m,E,N):Bi(m,E,N),g=D}else for(x=0;x<c.length;x++){if(E=c[x],D=E.instance,N=E.currentTarget,E=E.listener,D!==g&&m.isPropagationStopped())break e;D!==null?nt(D,Bi,m,E,N):Bi(m,E,N),g=D}}}}function Dt(e,t){_S.has(e)||console.error('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',e);var i=t[fh];i===void 0&&(i=t[fh]=new Set);var c=e+"__bubble";i.has(c)||(oi(t,e,2,!1),i.add(c))}function qm(e,t,i){_S.has(e)&&!t&&console.error('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',e);var c=0;t&&(c|=4),oi(i,e,c,t)}function Sd(e){if(!e[y0]){e[y0]=!0,zl.forEach(function(i){i!=="selectionchange"&&(_S.has(i)||qm(i,!1,e),qm(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[y0]||(t[y0]=!0,qm("selectionchange",!1,t))}}function oi(e,t,i,c){switch(Ms(t)){case Ei:var g=eh;break;case jo:g=Zc;break;default:g=Md}i=g.bind(null,t,i,e),g=void 0,!Se||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(g=!0),c?g!==void 0?e.addEventListener(t,i,{capture:!0,passive:g}):e.addEventListener(t,i,!0):g!==void 0?e.addEventListener(t,i,{passive:g}):e.addEventListener(t,i,!1)}function yi(e,t,i,c,g){var m=c;if(!(t&1)&&!(t&2)&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var E=c.stateNode.containerInfo;if(E===g)break;if(x===4)for(x=c.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;E!==null;){if(x=ua(E),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){c=m=x;continue e}E=E.parentNode}}c=c.return}oc(function(){var N=m,se=Ki(i),me=[];e:{var ae=VE.get(e);if(ae!==void 0){var ve=Kt,Je=e;switch(e){case"keypress":if(Ws(i)===0)break e;case"keydown":case"keyup":ve=OA;break;case"focusin":Je="focus",ve=Fo;break;case"focusout":Je="blur",ve=Fo;break;case"beforeblur":case"afterblur":ve=Fo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=rt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=oa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=NA;break;case HE:case FE:case qE:ve=SA;break;case GE:ve=UA;break;case"scroll":case"scrollend":ve=q;break;case"wheel":ve=$A;break;case"copy":case"cut":case"paste":ve=EA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=IE;break;case"toggle":case"beforetoggle":ve=jA}var dt=(t&4)!==0,wn=!dt&&(e==="scroll"||e==="scrollend"),_t=dt?ae!==null?ae+"Capture":null:ae;dt=[];for(var L=N,B;L!==null;){var F=L;if(B=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||B===null||_t===null||(F=Di(L,_t),F!=null&&dt.push(Bc(L,F,B))),wn)break;L=L.return}0<dt.length&&(ae=new ve(ae,Je,null,i,se),me.push({event:ae,listeners:dt}))}}if(!(t&7)){e:{if(ae=e==="mouseover"||e==="pointerover",ve=e==="mouseout"||e==="pointerout",ae&&i!==y&&(Je=i.relatedTarget||i.fromElement)&&(ua(Je)||Je[Ds]))break e;if((ve||ae)&&(ae=se.window===se?se:(ae=se.ownerDocument)?ae.defaultView||ae.parentWindow:window,ve?(Je=i.relatedTarget||i.toElement,ve=N,Je=Je?ua(Je):null,Je!==null&&(wn=ue(Je),dt=Je.tag,Je!==wn||dt!==5&&dt!==27&&dt!==6)&&(Je=null)):(ve=null,Je=N),ve!==Je)){if(dt=rt,F="onMouseLeave",_t="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(dt=IE,F="onPointerLeave",_t="onPointerEnter",L="pointer"),wn=ve==null?ae:Oi(ve),B=Je==null?ae:Oi(Je),ae=new dt(F,L+"leave",ve,i,se),ae.target=wn,ae.relatedTarget=B,F=null,ua(se)===N&&(dt=new dt(_t,L+"enter",Je,i,se),dt.target=B,dt.relatedTarget=wn,F=dt),wn=F,ve&&Je)t:{for(dt=ve,_t=Je,L=0,B=dt;B;B=Cl(B))L++;for(B=0,F=_t;F;F=Cl(F))B++;for(;0<L-B;)dt=Cl(dt),L--;for(;0<B-L;)_t=Cl(_t),B--;for(;L--;){if(dt===_t||_t!==null&&dt===_t.alternate)break t;dt=Cl(dt),_t=Cl(_t)}dt=null}else dt=null;ve!==null&&Mr(me,ae,ve,dt,!1),Je!==null&&wn!==null&&Mr(me,wn,Je,dt,!0)}}e:{if(ae=N?Oi(N):window,ve=ae.nodeName&&ae.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ae.type==="file")var xe=Qv;else if(qf(ae))if(LE)xe=Dx;else{xe=Ox;var Le=Ap}else ve=ae.nodeName,!ve||ve.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?N&&Ks(N.elementType)&&(xe=Qv):xe=zx;if(xe&&(xe=xe(e,N))){rc(me,xe,i,se);break e}Le&&Le(e,ae,N),e==="focusout"&&N&&ae.type==="number"&&N.memoizedProps.value!=null&&Pf(ae,"number",ae.value)}switch(Le=N?Oi(N):window,e){case"focusin":(qf(Le)||Le.contentEditable==="true")&&(Eh=Le,Qx=N,Ob=null);break;case"focusout":Ob=Qx=Eh=null;break;case"mousedown":Kx=!0;break;case"contextmenu":case"mouseup":case"dragend":Kx=!1,Vf(me,i,se);break;case"selectionchange":if(FA)break;case"keydown":case"keyup":Vf(me,i,se)}var St;if(Zx)e:{switch(e){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else wh?ts(e,i)&&(We="onCompositionEnd"):e==="keydown"&&i.keyCode===UE&&(We="onCompositionStart");We&&(PE&&i.locale!=="ko"&&(wh||We!=="onCompositionStart"?We==="onCompositionEnd"&&wh&&(St=Ff()):(te=se,le="value"in te?te.value:te.textContent,wh=!0)),Le=ka(N,We),0<Le.length&&(We=new NE(We,e,null,i,se),me.push({event:We,listeners:Le}),St?We.data=St:(St=Pu(i),St!==null&&(We.data=St)))),(St=BA?$u(e,i):Rx(e,i))&&(We=ka(N,"onBeforeInput"),0<We.length&&(Le=new TA("onBeforeInput","beforeinput",null,i,se),me.push({event:Le,listeners:We}),Le.data=St)),ii(me,e,N,i,se)}Fm(me,t)})}function Bc(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ka(e,t){for(var i=t+"Capture",c=[];e!==null;){var g=e,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=Di(e,i),g!=null&&c.unshift(Bc(e,g,m)),g=Di(e,t),g!=null&&c.push(Bc(e,g,m))),e.tag===3)return c;e=e.return}return[]}function Cl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Mr(e,t,i,c,g){for(var m=t._reactName,x=[];i!==null&&i!==c;){var E=i,D=E.alternate,N=E.stateNode;if(E=E.tag,D!==null&&D===c)break;E!==5&&E!==26&&E!==27||N===null||(D=N,g?(N=Di(i,m),N!=null&&x.unshift(Bc(i,N,D))):g||(N=Di(i,m),N!=null&&x.push(Bc(i,N,D)))),i=i.return}x.length!==0&&e.push({event:t,listeners:x})}function Ar(e,t){Yv(e,t),e!=="input"&&e!=="textarea"&&e!=="select"||t==null||t.value!==null||Ky||(Ky=!0,e==="select"&&t.multiple?console.error("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",e):console.error("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",e));var i={registrationNameDependencies:So,possibleRegistrationNames:gh};Ks(e)||typeof t.is=="string"||Xv(e,t,i),t.contentEditable&&!t.suppressContentEditableWarning&&t.children!=null&&console.error("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional.")}function xn(e,t,i,c){t!==i&&(i=Rr(i),Rr(t)!==i&&(c[e]=t))}function Gm(e,t,i){t.forEach(function(c){i[Hc(c)]=c==="style"?Hg(e):e.getAttribute(c)})}function Hi(e,t){t===!1?console.error("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",e,e,e):console.error("Expected `%s` listener to be a function, instead got a value of `%s` type.",e,typeof t)}function bo(e,t){return e=e.namespaceURI===yh||e.namespaceURI===Lr?e.ownerDocument.createElementNS(e.namespaceURI,e.tagName):e.ownerDocument.createElement(e.tagName),e.innerHTML=t,e.innerHTML}function Rr(e){return P(e)&&(console.error("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before using it here.",$(e)),fe(e)),(typeof e=="string"?e:""+e).replace(hR,`
`).replace(pR,"")}function Tl(e,t){return t=Rr(t),Rr(e)===t}function ys(){}function Ht(e,t,i,c,g,m){switch(i){case"children":typeof c=="string"?(ac(c,t,!1),t==="body"||t==="textarea"&&c===""||Du(e,c)):(typeof c=="number"||typeof c=="bigint")&&(ac(""+c,t,!1),t!=="body"&&Du(e,""+c));break;case"className":pt(e,"class",c);break;case"tabIndex":pt(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":pt(e,i,c);break;case"style":Bf(e,c,m);break;case"data":if(t!=="object"){pt(e,"data",c);break}case"src":case"href":if(c===""&&(t!=="a"||i!=="href")){console.error(i==="src"?'An empty string ("") was passed to the %s attribute. This may cause the browser to download the whole page again over the network. To fix this, either do not render the element at all or pass null to %s instead of an empty string.':'An empty string ("") was passed to the %s attribute. To fix this, either do not render the element at all or pass null to %s instead of an empty string.',i,i),e.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}ne(c,i),c=dr(""+c),e.setAttribute(i,c);break;case"action":case"formAction":if(c!=null&&(t==="form"?i==="formAction"?console.error("You can only pass the formAction prop to <input> or <button>. Use the action prop on <form>."):typeof c=="function"&&(g.encType==null&&g.method==null||w0||(w0=!0,console.error("Cannot specify a encType or method for a form that specifies a function as the action. React provides those automatically. They will get overridden.")),g.target==null||S0||(S0=!0,console.error("Cannot specify a target for a form that specifies a function as the action. The function will always be executed in the same window."))):t==="input"||t==="button"?i==="action"?console.error("You can only pass the action prop to <form>. Use the formAction prop on <input> or <button>."):t!=="input"||g.type==="submit"||g.type==="image"||x0?t!=="button"||g.type==null||g.type==="submit"||x0?typeof c=="function"&&(g.name==null||s1||(s1=!0,console.error('Cannot specify a "name" prop for a button that specifies a function as a formAction. React needs it to encode which action should be invoked. It will get overridden.')),g.formEncType==null&&g.formMethod==null||w0||(w0=!0,console.error("Cannot specify a formEncType or formMethod for a button that specifies a function as a formAction. React provides those automatically. They will get overridden.")),g.formTarget==null||S0||(S0=!0,console.error("Cannot specify a formTarget for a button that specifies a function as a formAction. The function will always be executed in the same window."))):(x0=!0,console.error('A button can only specify a formAction along with type="submit" or no type.')):(x0=!0,console.error('An input can only specify a formAction along with type="submit" or type="image".')):console.error(i==="action"?"You can only pass the action prop to <form>.":"You can only pass the formAction prop to <input> or <button>.")),typeof c=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(t!=="input"&&Ht(e,t,"name",g.name,g,null),Ht(e,t,"formEncType",g.formEncType,g,null),Ht(e,t,"formMethod",g.formMethod,g,null),Ht(e,t,"formTarget",g.formTarget,g,null)):(Ht(e,t,"encType",g.encType,g,null),Ht(e,t,"method",g.method,g,null),Ht(e,t,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}ne(c,i),c=dr(""+c),e.setAttribute(i,c);break;case"onClick":c!=null&&(typeof c!="function"&&Hi(i,c),e.onclick=ys);break;case"onScroll":c!=null&&(typeof c!="function"&&Hi(i,c),Dt("scroll",e));break;case"onScrollEnd":c!=null&&(typeof c!="function"&&Hi(i,c),Dt("scrollend",e));break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://react.dev/link/dangerously-set-inner-html for more information.");if(i=c.__html,i!=null){if(g.children!=null)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");e.innerHTML=i}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}ne(c,i),i=dr(""+c),e.setAttributeNS(sf,"xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?(ne(c,i),e.setAttribute(i,""+c)):e.removeAttribute(i);break;case"inert":c!==""||E0[i]||(E0[i]=!0,console.error("Received an empty string for a boolean attribute `%s`. This will treat the attribute as if it were false. Either pass `false` to silence this warning, or pass `true` if you used an empty string in earlier versions of React to indicate this attribute is true.",i));case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":c===!0?e.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?(ne(c,i),e.setAttribute(i,c)):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?(ne(c,i),e.setAttribute(i,c)):e.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(i):(ne(c,i),e.setAttribute(i,c));break;case"popover":Dt("beforetoggle",e),Dt("toggle",e),$t(e,"popover",c);break;case"xlinkActuate":jn(e,sf,"xlink:actuate",c);break;case"xlinkArcrole":jn(e,sf,"xlink:arcrole",c);break;case"xlinkRole":jn(e,sf,"xlink:role",c);break;case"xlinkShow":jn(e,sf,"xlink:show",c);break;case"xlinkTitle":jn(e,sf,"xlink:title",c);break;case"xlinkType":jn(e,sf,"xlink:type",c);break;case"xmlBase":jn(e,jS,"xml:base",c);break;case"xmlLang":jn(e,jS,"xml:lang",c);break;case"xmlSpace":jn(e,jS,"xml:space",c);break;case"is":m!=null&&console.error('Cannot update the "is" prop after it has been initialized.'),$t(e,"is",c);break;case"innerText":case"textContent":break;case"popoverTarget":l1||c==null||typeof c!="object"||(l1=!0,console.error("The `popoverTarget` prop expects the ID of an Element as a string. Received %s instead.",c));default:!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N"?(i=Js(i),$t(e,i,c)):So.hasOwnProperty(i)&&c!=null&&typeof c!="function"&&Hi(i,c)}}function xs(e,t,i,c,g,m){switch(i){case"style":Bf(e,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://react.dev/link/dangerously-set-inner-html for more information.");if(i=c.__html,i!=null){if(g.children!=null)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");e.innerHTML=i}}break;case"children":typeof c=="string"?Du(e,c):(typeof c=="number"||typeof c=="bigint")&&Du(e,""+c);break;case"onScroll":c!=null&&(typeof c!="function"&&Hi(i,c),Dt("scroll",e));break;case"onScrollEnd":c!=null&&(typeof c!="function"&&Hi(i,c),Dt("scrollend",e));break;case"onClick":c!=null&&(typeof c!="function"&&Hi(i,c),e.onclick=ys);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(So.hasOwnProperty(i))c!=null&&typeof c!="function"&&Hi(i,c);else e:{if(i[0]==="o"&&i[1]==="n"&&(g=i.endsWith("Capture"),t=i.slice(2,g?i.length-7:void 0),m=e[ui]||null,m=m!=null?m[i]:null,typeof m=="function"&&e.removeEventListener(t,m,g),typeof c=="function")){typeof m!="function"&&m!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,c,g);break e}i in e?e[i]=c:c===!0?e.setAttribute(i,""):$t(e,i,c)}}}function na(e,t,i){switch(Ar(t,i),t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",e),Dt("load",e);var c=!1,g=!1,m;for(m in i)if(i.hasOwnProperty(m)){var x=i[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(t+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");default:Ht(e,t,m,x,i,null)}}g&&Ht(e,t,"srcSet",i.srcSet,i,null),c&&Ht(e,t,"src",i.src,i,null);return;case"input":Ze("input",i),Dt("invalid",e);var E=m=x=g=null,D=null,N=null;for(c in i)if(i.hasOwnProperty(c)){var se=i[c];if(se!=null)switch(c){case"name":g=se;break;case"type":x=se;break;case"checked":D=se;break;case"defaultChecked":N=se;break;case"value":m=se;break;case"defaultValue":E=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(t+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");break;default:Ht(e,t,c,se,i,null)}}Xs(e,i),vp(e,m,E,D,N,x,g,!1),Pn(e);return;case"select":Ze("select",i),Dt("invalid",e),c=x=m=null;for(g in i)if(i.hasOwnProperty(g)&&(E=i[g],E!=null))switch(g){case"value":m=E;break;case"defaultValue":x=E;break;case"multiple":c=E;default:Ht(e,t,g,E,i,null)}Ao(e,i),t=m,i=x,e.multiple=!!c,t!=null?cr(e,!!c,t,!1):i!=null&&cr(e,!!c,i,!0);return;case"textarea":Ze("textarea",i),Dt("invalid",e),m=g=c=null;for(x in i)if(i.hasOwnProperty(x)&&(E=i[x],E!=null))switch(x){case"value":c=E;break;case"defaultValue":g=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");break;default:Ht(e,t,x,E,i,null)}$f(e,i),Zs(e,c,g,m),Pn(e);return;case"option":Vv(e,i);for(D in i)if(i.hasOwnProperty(D)&&(c=i[D],c!=null))switch(D){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ht(e,t,D,c,i,null)}return;case"dialog":Dt("beforetoggle",e),Dt("toggle",e),Dt("cancel",e),Dt("close",e);break;case"iframe":case"object":Dt("load",e);break;case"video":case"audio":for(c=0;c<ev.length;c++)Dt(ev[c],e);break;case"image":Dt("error",e),Dt("load",e);break;case"details":Dt("toggle",e);break;case"embed":case"source":case"link":Dt("error",e),Dt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in i)if(i.hasOwnProperty(N)&&(c=i[N],c!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(t+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");default:Ht(e,t,N,c,i,null)}return;default:if(Ks(t)){for(se in i)i.hasOwnProperty(se)&&(c=i[se],c!==void 0&&xs(e,t,se,c,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(c=i[E],c!=null&&Ht(e,t,E,c,i,null))}function Ty(e,t,i,c){switch(Ar(t,c),t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,x=null,E=null,D=null,N=null,se=null;for(ve in i){var me=i[ve];if(i.hasOwnProperty(ve)&&me!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":D=me;default:c.hasOwnProperty(ve)||Ht(e,t,ve,null,c,me)}}for(var ae in c){var ve=c[ae];if(me=i[ae],c.hasOwnProperty(ae)&&(ve!=null||me!=null))switch(ae){case"type":m=ve;break;case"name":g=ve;break;case"checked":N=ve;break;case"defaultChecked":se=ve;break;case"value":x=ve;break;case"defaultValue":E=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(t+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");break;default:ve!==me&&Ht(e,t,ae,ve,c,me)}}t=i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null,c=c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null,t||!c||r1||(console.error("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://react.dev/link/controlled-components"),r1=!0),!t||c||o1||(console.error("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://react.dev/link/controlled-components"),o1=!0),bp(e,x,E,D,N,se,m,g);return;case"select":ve=x=E=ae=null;for(m in i)if(D=i[m],i.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":ve=D;default:c.hasOwnProperty(m)||Ht(e,t,m,null,c,D)}for(g in c)if(m=c[g],D=i[g],c.hasOwnProperty(g)&&(m!=null||D!=null))switch(g){case"value":ae=m;break;case"defaultValue":E=m;break;case"multiple":x=m;default:m!==D&&Ht(e,t,g,m,c,D)}c=E,t=x,i=ve,ae!=null?cr(e,!!t,ae,!1):!!i!=!!t&&(c!=null?cr(e,!!t,c,!0):cr(e,!!t,t?[]:"",!1));return;case"textarea":ve=ae=null;for(E in i)if(g=i[E],i.hasOwnProperty(E)&&g!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ht(e,t,E,null,c,g)}for(x in c)if(g=c[x],m=i[x],c.hasOwnProperty(x)&&(g!=null||m!=null))switch(x){case"value":ae=g;break;case"defaultValue":ve=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");break;default:g!==m&&Ht(e,t,x,g,c,m)}yp(e,ae,ve);return;case"option":for(var Je in i)if(ae=i[Je],i.hasOwnProperty(Je)&&ae!=null&&!c.hasOwnProperty(Je))switch(Je){case"selected":e.selected=!1;break;default:Ht(e,t,Je,null,c,ae)}for(D in c)if(ae=c[D],ve=i[D],c.hasOwnProperty(D)&&ae!==ve&&(ae!=null||ve!=null))switch(D){case"selected":e.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Ht(e,t,D,ae,c,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in i)ae=i[dt],i.hasOwnProperty(dt)&&ae!=null&&!c.hasOwnProperty(dt)&&Ht(e,t,dt,null,c,ae);for(N in c)if(ae=c[N],ve=i[N],c.hasOwnProperty(N)&&ae!==ve&&(ae!=null||ve!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(t+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");break;default:Ht(e,t,N,ae,c,ve)}return;default:if(Ks(t)){for(var wn in i)ae=i[wn],i.hasOwnProperty(wn)&&ae!==void 0&&!c.hasOwnProperty(wn)&&xs(e,t,wn,void 0,c,ae);for(se in c)ae=c[se],ve=i[se],!c.hasOwnProperty(se)||ae===ve||ae===void 0&&ve===void 0||xs(e,t,se,ae,c,ve);return}}for(var _t in i)ae=i[_t],i.hasOwnProperty(_t)&&ae!=null&&!c.hasOwnProperty(_t)&&Ht(e,t,_t,null,c,ae);for(me in c)ae=c[me],ve=i[me],!c.hasOwnProperty(me)||ae===ve||ae==null&&ve==null||Ht(e,t,me,ae,c,ve)}function Hc(e){switch(e){case"class":return"className";case"for":return"htmlFor";default:return e}}function Hg(e){var t={};e=e.style;for(var i=0;i<e.length;i++){var c=e[i];t[c]=e.getPropertyValue(c)}return t}function wd(e,t,i){if(t!=null&&typeof t!="object")console.error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");else{var c,g=c="",m;for(m in t)if(t.hasOwnProperty(m)){var x=t[m];x!=null&&typeof x!="boolean"&&x!==""&&(m.indexOf("--")===0?(ke(x,m),c+=g+m+":"+(""+x).trim()):typeof x!="number"||x===0||kb.has(m)?(ke(x,m),c+=g+m.replace(jr,"-$1").toLowerCase().replace(iu,"-ms-")+":"+(""+x).trim()):c+=g+m.replace(jr,"-$1").toLowerCase().replace(iu,"-ms-")+":"+x+"px",g=";")}c=c||null,t=e.getAttribute("style"),t!==c&&(c=Rr(c),Rr(t)!==c&&(i.style=Hg(e)))}}function xi(e,t,i,c,g,m){if(g.delete(i),e=e.getAttribute(i),e===null)switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":return}else if(c!=null)switch(typeof c){case"function":case"symbol":case"boolean":break;default:if(ne(c,t),e===""+c)return}xn(t,e,c,m)}function ky(e,t,i,c,g,m){if(g.delete(i),e=e.getAttribute(i),e===null){switch(typeof c){case"function":case"symbol":return}if(!c)return}else switch(typeof c){case"function":case"symbol":break;default:if(c)return}xn(t,e,c,m)}function Vm(e,t,i,c,g,m){if(g.delete(i),e=e.getAttribute(i),e===null)switch(typeof c){case"undefined":case"function":case"symbol":return}else if(c!=null)switch(typeof c){case"function":case"symbol":break;default:if(ne(c,i),e===""+c)return}xn(t,e,c,m)}function en(e,t,i,c,g,m){if(g.delete(i),e=e.getAttribute(i),e===null)switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":return;default:if(isNaN(c))return}else if(c!=null)switch(typeof c){case"function":case"symbol":case"boolean":break;default:if(!isNaN(c)&&(ne(c,t),e===""+c))return}xn(t,e,c,m)}function sn(e,t,i,c,g,m){if(g.delete(i),e=e.getAttribute(i),e===null)switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":return}else if(c!=null)switch(typeof c){case"function":case"symbol":case"boolean":break;default:if(ne(c,t),i=dr(""+c),e===i)return}xn(t,e,c,m)}function Nt(e,t,i,c){for(var g={},m=new Set,x=e.attributes,E=0;E<x.length;E++)switch(x[E].name.toLowerCase()){case"value":break;case"checked":break;case"selected":break;default:m.add(x[E].name)}if(Ks(t)){for(var D in i)if(i.hasOwnProperty(D)){var N=i[D];if(N!=null){if(So.hasOwnProperty(D))typeof N!="function"&&Hi(D,N);else if(i.suppressHydrationWarning!==!0)switch(D){case"children":typeof N!="string"&&typeof N!="number"||xn("children",e.textContent,N,g);continue;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":continue;case"dangerouslySetInnerHTML":x=e.innerHTML,N=N?N.__html:void 0,N!=null&&(N=bo(e,N),xn(D,x,N,g));continue;case"style":m.delete(D),wd(e,N,g);continue;case"offsetParent":case"offsetTop":case"offsetLeft":case"offsetWidth":case"offsetHeight":case"isContentEditable":case"outerText":case"outerHTML":m.delete(D.toLowerCase()),console.error("Assignment to read-only property will result in a no-op: `%s`",D);continue;case"className":m.delete("class"),x=vt(e,"class",N),xn("className",x,N,g);continue;default:c.context===Ll&&t!=="svg"&&t!=="math"?m.delete(D.toLowerCase()):m.delete(D),x=vt(e,D,N),xn(D,x,N,g)}}}}else for(N in i)if(i.hasOwnProperty(N)&&(D=i[N],D!=null)){if(So.hasOwnProperty(N))typeof D!="function"&&Hi(N,D);else if(i.suppressHydrationWarning!==!0)switch(N){case"children":typeof D!="string"&&typeof D!="number"||xn("children",e.textContent,D,g);continue;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"value":case"checked":case"selected":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":continue;case"dangerouslySetInnerHTML":x=e.innerHTML,D=D?D.__html:void 0,D!=null&&(D=bo(e,D),x!==D&&(g[N]={__html:x}));continue;case"className":xi(e,N,"class",D,m,g);continue;case"tabIndex":xi(e,N,"tabindex",D,m,g);continue;case"style":m.delete(N),wd(e,D,g);continue;case"multiple":m.delete(N),xn(N,e.multiple,D,g);continue;case"muted":m.delete(N),xn(N,e.muted,D,g);continue;case"autoFocus":m.delete("autofocus"),xn(N,e.autofocus,D,g);continue;case"data":if(t!=="object"){m.delete(N),x=e.getAttribute("data"),xn(N,x,D,g);continue}case"src":case"href":if(!(D!==""||t==="a"&&N==="href"||t==="object"&&N==="data")){console.error(N==="src"?'An empty string ("") was passed to the %s attribute. This may cause the browser to download the whole page again over the network. To fix this, either do not render the element at all or pass null to %s instead of an empty string.':'An empty string ("") was passed to the %s attribute. To fix this, either do not render the element at all or pass null to %s instead of an empty string.',N,N);continue}sn(e,N,N,D,m,g);continue;case"action":case"formAction":if(x=e.getAttribute(N),typeof D=="function"){m.delete(N.toLowerCase()),N==="formAction"?(m.delete("name"),m.delete("formenctype"),m.delete("formmethod"),m.delete("formtarget")):(m.delete("enctype"),m.delete("method"),m.delete("target"));continue}else if(x===mR){m.delete(N.toLowerCase()),xn(N,"function",D,g);continue}sn(e,N,N.toLowerCase(),D,m,g);continue;case"xlinkHref":sn(e,N,"xlink:href",D,m,g);continue;case"contentEditable":Vm(e,N,"contenteditable",D,m,g);continue;case"spellCheck":Vm(e,N,"spellcheck",D,m,g);continue;case"draggable":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":Vm(e,N,N,D,m,g);continue;case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":ky(e,N,N.toLowerCase(),D,m,g);continue;case"capture":case"download":e:{E=e;var se=x=N,me=g;if(m.delete(se),E=E.getAttribute(se),E===null)switch(typeof D){case"undefined":case"function":case"symbol":break e;default:if(D===!1)break e}else if(D!=null)switch(typeof D){case"function":case"symbol":break;case"boolean":if(D===!0&&E==="")break e;break;default:if(ne(D,x),E===""+D)break e}xn(x,E,D,me)}continue;case"cols":case"rows":case"size":case"span":e:{if(E=e,se=x=N,me=g,m.delete(se),E=E.getAttribute(se),E===null)switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":break e;default:if(isNaN(D)||1>D)break e}else if(D!=null)switch(typeof D){case"function":case"symbol":case"boolean":break;default:if(!(isNaN(D)||1>D)&&(ne(D,x),E===""+D))break e}xn(x,E,D,me)}continue;case"rowSpan":en(e,N,"rowspan",D,m,g);continue;case"start":en(e,N,N,D,m,g);continue;case"xHeight":xi(e,N,"x-height",D,m,g);continue;case"xlinkActuate":xi(e,N,"xlink:actuate",D,m,g);continue;case"xlinkArcrole":xi(e,N,"xlink:arcrole",D,m,g);continue;case"xlinkRole":xi(e,N,"xlink:role",D,m,g);continue;case"xlinkShow":xi(e,N,"xlink:show",D,m,g);continue;case"xlinkTitle":xi(e,N,"xlink:title",D,m,g);continue;case"xlinkType":xi(e,N,"xlink:type",D,m,g);continue;case"xmlBase":xi(e,N,"xml:base",D,m,g);continue;case"xmlLang":xi(e,N,"xml:lang",D,m,g);continue;case"xmlSpace":xi(e,N,"xml:space",D,m,g);continue;case"inert":D!==""||E0[N]||(E0[N]=!0,console.error("Received an empty string for a boolean attribute `%s`. This will treat the attribute as if it were false. Either pass `false` to silence this warning, or pass `true` if you used an empty string in earlier versions of React to indicate this attribute is true.",N)),ky(e,N,N,D,m,g);continue;default:if(!(2<N.length)||N[0]!=="o"&&N[0]!=="O"||N[1]!=="n"&&N[1]!=="N"){E=Js(N),x=!1,c.context===Ll&&t!=="svg"&&t!=="math"?m.delete(E.toLowerCase()):(se=N.toLowerCase(),se=qd.hasOwnProperty(se)&&qd[se]||null,se!==null&&se!==N&&(x=!0,m.delete(se)),m.delete(E));e:if(se=e,me=E,E=D,At(me))if(se.hasAttribute(me))se=se.getAttribute(me),ne(E,me),E=se===""+E?E:se;else{switch(typeof E){case"function":case"symbol":break e;case"boolean":if(se=me.toLowerCase().slice(0,5),se!=="data-"&&se!=="aria-")break e}E=E===void 0?void 0:null}else E=void 0;x||xn(N,E,D,g)}}}return 0<m.size&&i.suppressHydrationWarning!==!0&&Gm(e,m,g),Object.keys(g).length===0?null:g}function Lt(e,t){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e[0]+" "+t+" "+e[1];default:return e.slice(0,-1).join(", ")+", "+t+" "+e[e.length-1]}}function Ft(e){return e.nodeType===9?e:e.ownerDocument}function ri(e){switch(e){case Lr:return Zh;case yh:return k0;default:return Ll}}function Or(e,t){if(e===Ll)switch(t){case"svg":return Zh;case"math":return k0;default:return Ll}return e===Zh&&t==="foreignObject"?Ll:e}function Ss(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}function Ym(){var e=window.event;return e&&e.type==="popstate"?e===FS?!1:(FS=e,!0):(FS=null,!1)}function zr(e){setTimeout(function(){throw e})}function Nn(e,t,i){switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&e.focus();break;case"img":i.src?e.src=i.src:i.srcSet&&(e.srcset=i.srcSet)}}function ws(e,t,i,c){Ty(e,t,i,c),e[ui]=c}function Es(e){Du(e,"")}function Xm(e,t,i){e.nodeValue=i}function Zn(e){return e==="head"}function Fc(e,t){e.removeChild(t)}function Ed(e,t){(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e).removeChild(t)}function _a(e,t){var i=t,c=0,g=0;do{var m=i.nextSibling;if(e.removeChild(i),m&&m.nodeType===8)if(i=m.data,i===T0){if(0<c&&8>c){i=c;var x=e.ownerDocument;if(i&vR&&Vc(x.documentElement),i&yR&&Vc(x.body),i&xR)for(i=x.head,Vc(i),x=i.firstChild;x;){var E=x.nextSibling,D=x.nodeName;x[Pd]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&x.rel.toLowerCase()==="stylesheet"||i.removeChild(x),x=E}}if(g===0){e.removeChild(m),Kc(t);return}g--}else i===C0||i===jl||i===tv?g++:c=i.charCodeAt(0)-48;else c=0;i=m}while(i);Kc(t)}function Zm(e){e=e.style,typeof e.setProperty=="function"?e.setProperty("display","none","important"):e.display="none"}function Qm(e){e.nodeValue=""}function Fg(e,t){t=t[SR],t=t!=null&&t.hasOwnProperty("display")?t.display:null,e.style.display=t==null||typeof t=="boolean"?"":(""+t).trim()}function qg(e,t){e.nodeValue=t}function Uo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Uo(i),Qi(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function ha(e,t,i,c){for(;e.nodeType===1;){var g=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[Pd])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==g.rel||e.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||e.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||e.getAttribute("title")!==(g.title==null?null:g.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(g.src==null?null:g.src)||e.getAttribute("type")!==(g.type==null?null:g.type)||e.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){ne(g.name,"name");var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=si(e.nextSibling),e===null)break}return null}function Cs(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=si(e.nextSibling),e===null))return null;return e}function Ts(e){return e.data===tv||e.data===jl&&e.ownerDocument.readyState===u1}function qc(e,t){var i=e.ownerDocument;if(e.data!==jl||i.readyState===u1)t();else{var c=function(){t(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function si(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===C0||t===tv||t===jl||t===LS||t===c1)break;if(t===T0)return null}}return e}function Gg(e){if(e.nodeType===1){for(var t=e.nodeName.toLowerCase(),i={},c=e.attributes,g=0;g<c.length;g++){var m=c[g];i[Hc(m.name)]=m.name.toLowerCase()==="style"?Hg(e):m.value}return{type:t,props:i}}return e.nodeType===8?{type:"Suspense",props:{}}:e.nodeValue}function Km(e,t,i){return i===null||i[bR]!==!0?(e.nodeValue===t?e=null:(t=Rr(t),e=Rr(e.nodeValue)===t?null:e.nodeValue),e):null}function Gc(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i===T0){if(t===0)return si(e.nextSibling);t--}else i!==C0&&i!==tv&&i!==jl||t++}e=e.nextSibling}return null}function Vg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i===C0||i===tv||i===jl){if(t===0)return e;t--}else i===T0&&t++}e=e.previousSibling}return null}function Si(e){Kc(e)}function My(e){Kc(e)}function li(e,t,i,c,g){switch(g&&Lf(e,c.ancestorInfo),t=Ft(i),e){case"html":if(e=t.documentElement,!e)throw Error("React expected an <html> element (document.documentElement) to exist in the Document but one was not found. React never removes the documentElement for any Document it renders into so the cause is likely in some other script running on this page.");return e;case"head":if(e=t.head,!e)throw Error("React expected a <head> element (document.head) to exist in the Document but one was not found. React never removes the head for any Document it renders into so the cause is likely in some other script running on this page.");return e;case"body":if(e=t.body,!e)throw Error("React expected a <body> element (document.body) to exist in the Document but one was not found. React never removes the body for any Document it renders into so the cause is likely in some other script running on this page.");return e;default:throw Error("resolveSingletonInstance was called with an element type that is not supported. This is a bug in React.")}}function Ay(e,t,i,c){if(!i[Ds]&&Ga(i)){var g=i.tagName.toLowerCase();console.error("You are mounting a new %s component when a previous one has not first unmounted. It is an error to render more than one %s component at a time and attributes and children of these components will likely fail in unpredictable ways. Please only render a single instance of <%s> and if you need to mount a new one, ensure any previous ones have unmounted first.",g,g,g)}switch(e){case"html":case"head":case"body":break;default:console.error("acquireSingletonInstance was called with an element type that is not supported. This is a bug in React.")}for(g=i.attributes;g.length;)i.removeAttributeNode(g[0]);na(i,e,t),i[Ma]=c,i[ui]=t}function Vc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qi(e)}function Yg(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}function Dr(e,t,i){var c=Qh;if(c&&typeof t=="string"&&t){var g=Wn(t);g='link[rel="'+e+'"][href="'+g+'"]',typeof i=="string"&&(g+='[crossorigin="'+i+'"]'),m1.has(g)||(m1.add(g),e={rel:e,crossOrigin:i,href:t},c.querySelector(g)===null&&(t=c.createElement("link"),na(t,"link",e),Y(t),c.head.appendChild(t)))}}function Cd(e,t,i,c){var g=(g=$o.current)?Yg(g):null;if(!g)throw Error('"resourceRoot" was expected to exist. This is a bug in React.');switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(i=vo(i.href),t=z(g).hoistableStyles,c=t.get(i),c||(c={type:"style",instance:null,count:0,state:null},t.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=vo(i.href);var m=z(g).hoistableStyles,x=m.get(e);if(!x&&(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:cf,preload:null}},m.set(e,x),(m=g.querySelector(Xc(e)))&&!m._p&&(x.instance=m,x.state.loading=nv|Wo),!er.has(e))){var E={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy};er.set(e,E),m||Ry(g,e,E,x.state)}if(t&&c===null)throw i=`

  - `+Yc(t)+`
  + `+Yc(i),Error("Expected <link> not to update to be updated to a stylesheet with precedence. Check the `rel`, `href`, and `precedence` props of this component. Alternatively, check whether two different <link> components render in the same slot or share the same key."+i);return x}if(t&&c!==null)throw i=`

  - `+Yc(t)+`
  + `+Yc(i),Error("Expected stylesheet with precedence to not be updated to a different kind of <link>. Check the `rel`, `href`, and `precedence` props of this component. Alternatively, check whether two different <link> components render in the same slot or share the same key."+i);return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(i=ks(i),t=z(g).hoistableScripts,c=t.get(i),c||(c={type:"script",instance:null,count:0,state:null},t.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error('getResource encountered a type it did not expect: "'+e+'". this is a bug in React.')}}function Yc(e){var t=0,i="<link";return typeof e.rel=="string"?(t++,i+=' rel="'+e.rel+'"'):_o.call(e,"rel")&&(t++,i+=' rel="'+(e.rel===null?"null":"invalid type "+typeof e.rel)+'"'),typeof e.href=="string"?(t++,i+=' href="'+e.href+'"'):_o.call(e,"href")&&(t++,i+=' href="'+(e.href===null?"null":"invalid type "+typeof e.href)+'"'),typeof e.precedence=="string"?(t++,i+=' precedence="'+e.precedence+'"'):_o.call(e,"precedence")&&(t++,i+=" precedence={"+(e.precedence===null?"null":"invalid type "+typeof e.precedence)+"}"),Object.getOwnPropertyNames(e).length>t&&(i+=" ..."),i+" />"}function vo(e){return'href="'+Wn(e)+'"'}function Xc(e){return'link[rel="stylesheet"]['+e+"]"}function Jm(e){return mt({},e,{"data-precedence":e.precedence,precedence:null})}function Ry(e,t,i,c){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?c.loading=nv:(t=e.createElement("link"),c.preload=t,t.addEventListener("load",function(){return c.loading|=nv}),t.addEventListener("error",function(){return c.loading|=h1}),na(t,"link",i),Y(t),e.head.appendChild(t))}function ks(e){return'[src="'+Wn(e)+'"]'}function kl(e){return"script[async]"+e}function Oy(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var c=e.querySelector('style[data-href~="'+Wn(i.href)+'"]');if(c)return t.instance=c,Y(c),c;var g=mt({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Y(c),na(c,"style",g),Xg(c,i.precedence,e),t.instance=c;case"stylesheet":g=vo(i.href);var m=e.querySelector(Xc(g));if(m)return t.state.loading|=Wo,t.instance=m,Y(m),m;c=Jm(i),(g=er.get(g))&&Wm(c,g),m=(e.ownerDocument||e).createElement("link"),Y(m);var x=m;return x._p=new Promise(function(E,D){x.onload=E,x.onerror=D}),na(m,"link",c),t.state.loading|=Wo,Xg(m,i.precedence,e),t.instance=m;case"script":return m=ks(i.src),(g=e.querySelector(kl(m)))?(t.instance=g,Y(g),g):(c=i,(g=er.get(m))&&(c=mt({},i),Zg(c,g)),e=e.ownerDocument||e,g=e.createElement("script"),Y(g),na(g,"link",c),e.head.appendChild(g),t.instance=g);case"void":return null;default:throw Error('acquireResource encountered a resource type it did not expect: "'+t.type+'". this is a bug in React.')}else t.type==="stylesheet"&&(t.state.loading&Wo)===cf&&(c=t.instance,t.state.loading|=Wo,Xg(c,i.precedence,e));return t.instance}function Xg(e,t,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,m=g,x=0;x<c.length;x++){var E=c[x];if(E.dataset.precedence===t)m=E;else if(m!==g)break}m?m.parentNode.insertBefore(e,m.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Wm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Zg(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}function eb(e,t,i){if(M0===null){var c=new Map,g=M0=new Map;g.set(i,c)}else g=M0,c=g.get(i),c||(c=new Map,g.set(i,c));if(c.has(e))return c;for(c.set(e,null),i=i.getElementsByTagName(e),g=0;g<i.length;g++){var m=i[g];if(!(m[Pd]||m[Ma]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!==Lr){var x=m.getAttribute(t)||"";x=e+x;var E=c.get(x);E?E.push(m):c.set(x,[m])}}return c}function Ml(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function Qg(e,t,i){var c=!i.ancestorInfo.containerTagInScope;if(i.context===Zh||t.itemProp!=null)return!c||t.itemProp==null||e!=="meta"&&e!=="title"&&e!=="style"&&e!=="link"&&e!=="script"||console.error("Cannot render a <%s> outside the main document if it has an `itemProp` prop. `itemProp` suggests the tag belongs to an `itemScope` which can appear anywhere in the DOM. If you were intending for React to hoist this <%s> remove the `itemProp` prop. Otherwise, try moving this tag into the <head> or <body> of the Document.",e,e),!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href===""){c&&console.error('Cannot render a <style> outside the main document without knowing its precedence and a unique href key. React can hoist and deduplicate <style> tags if you provide a `precedence` prop along with an `href` prop that does not conflict with the `href` values used in any other hoisted <style> or <link rel="stylesheet" ...> tags.  Note that hoisting <style> tags is considered an advanced feature that most will not use directly. Consider moving the <style> tag to the <head> or consider adding a `precedence="default"` and `href="some unique resource identifier"`.');break}return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError){if(t.rel==="stylesheet"&&typeof t.precedence=="string"){e=t.href;var g=t.onError,m=t.disabled;i=[],t.onLoad&&i.push("`onLoad`"),g&&i.push("`onError`"),m!=null&&i.push("`disabled`"),g=Lt(i,"and"),g+=i.length===1?" prop":" props",m=i.length===1?"an "+g:"the "+g,i.length&&console.error('React encountered a <link rel="stylesheet" href="%s" ... /> with a `precedence` prop that also included %s. The presence of loading and error handlers indicates an intent to manage the stylesheet loading state from your from your Component code and React will not hoist or deduplicate this stylesheet. If your intent was to have React hoist and deduplciate this stylesheet using the `precedence` prop remove the %s, otherwise remove the `precedence` prop.',e,m,g)}c&&(typeof t.rel!="string"||typeof t.href!="string"||t.href===""?console.error("Cannot render a <link> outside the main document without a `rel` and `href` prop. Try adding a `rel` and/or `href` prop to this <link> or moving the link into the <head> tag"):(t.onError||t.onLoad)&&console.error("Cannot render a <link> with onLoad or onError listeners outside the main document. Try removing onLoad={...} and onError={...} or moving it into the root <head> tag or somewhere in the <body>."));break}switch(t.rel){case"stylesheet":return e=t.precedence,t=t.disabled,typeof e!="string"&&c&&console.error('Cannot render a <link rel="stylesheet" /> outside the main document without knowing its precedence. Consider adding precedence="default" or moving it into the root <head> tag.'),typeof e=="string"&&t==null;default:return!0}case"script":if(e=t.async&&typeof t.async!="function"&&typeof t.async!="symbol",!e||t.onLoad||t.onError||!t.src||typeof t.src!="string"){c&&(e?t.onLoad||t.onError?console.error("Cannot render a <script> with onLoad or onError listeners outside the main document. Try removing onLoad={...} and onError={...} or moving it into the root <head> tag or somewhere in the <body>."):console.error("Cannot render a <script> outside the main document without `async={true}` and a non-empty `src` prop. Ensure there is a valid `src` and either make the script async or move it into the root <head> tag or somewhere in the <body>."):console.error('Cannot render a sync or defer <script> outside the main document without knowing its order. Try adding async="" or moving it into the root <head> tag.'));break}return!0;case"noscript":case"template":c&&console.error("Cannot render <%s> outside the main document. Try moving it into the root <head> tag.",e)}return!1}function tb(e){return!(e.type==="stylesheet"&&(e.state.loading&p1)===cf)}function zy(){}function Dy(e,t,i){if(av===null)throw Error("Internal React Error: suspendedState null when it was expected to exists. Please report this as a React bug.");var c=av;if(t.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(t.state.loading&Wo)===cf){if(t.instance===null){var g=vo(i.href),m=e.querySelector(Xc(g));if(m){e=m._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(c.count++,c=Td.bind(c),e.then(c,c)),t.state.loading|=Wo,t.instance=m,Y(m);return}m=e.ownerDocument||e,i=Jm(i),(g=er.get(g))&&Wm(i,g),m=m.createElement("link"),Y(m);var x=m;x._p=new Promise(function(E,D){x.onload=E,x.onerror=D}),na(m,"link",i),t.instance=m}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&p1)===cf&&(c.count++,t=Td.bind(c),e.addEventListener("load",t),e.addEventListener("error",t))}}function Ny(){if(av===null)throw Error("Internal React Error: suspendedState null when it was expected to exists. Please report this as a React bug.");var e=av;return e.stylesheets&&e.count===0&&Kg(e,e.stylesheets),0<e.count?function(t){var i=setTimeout(function(){if(e.stylesheets&&Kg(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}function Td(){if(this.count--,this.count===0){if(this.stylesheets)Kg(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}function Kg(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,A0=new Map,t.forEach(Jg,e),A0=null,Td.call(e))}function Jg(e,t){if(!(t.state.loading&Wo)){var i=A0.get(e);if(i)var c=i.get(GS);else{i=new Map,A0.set(e,i);for(var g=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var x=g[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(i.set(x.dataset.precedence,x),c=x)}c&&i.set(GS,c)}g=t.instance,x=g.getAttribute("data-precedence"),m=i.get(x)||c,m===c&&i.set(GS,g),i.set(x,g),this.count++,c=Td.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),m?m.parentNode.insertBefore(g,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(g,e.firstChild)),t.state.loading|=Wo}}function Iy(e,t,i,c,g,m,x,E){for(this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=lf,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xt(0),this.hiddenUpdates=Xt(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map,this.passiveEffectDuration=this.effectDuration=-0,this.memoizedUpdaters=new Set,e=this.pendingUpdatersLaneMap=[],t=0;31>t;t++)e.push(new Set);this._debugRootType=i?"hydrateRoot()":"createRoot()"}function nb(e,t,i,c,g,m,x,E,D,N,se,me){return e=new Iy(e,t,i,x,E,D,N,me),t=YA,m===!0&&(t|=di|Br),Fi&&(t|=ja),m=A(3,null,null,t),e.current=m,m.stateNode=e,t=Lp(),Ii(t),e.pooledCache=t,Ii(t),m.memoizedState={element:c,isDehydrated:i,cache:t},rs(m),e}function ln(e){return e?(e=ru,e):ru}function kd(e,t,i,c,g,m){if(ma&&typeof ma.onScheduleFiberRoot=="function")try{ma.onScheduleFiberRoot(Ol,c,i)}catch(x){_n||(_n=!0,console.error("React instrumentation encountered an error: %s",x))}He!==null&&typeof He.markRenderScheduled=="function"&&He.markRenderScheduled(t),g=ln(g),c.context===null?c.context=g:c.pendingContext=g,Lo&&ba!==null&&!x1&&(x1=!0,console.error(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,de(ba)||"Unknown")),c=to(t),c.payload={element:i},m=m===void 0?null:m,m!==null&&(typeof m!="function"&&console.error("Expected the last optional `callback` argument to be a function. Instead received: %s.",m),c.callback=m),i=no(e,c,t),i!==null&&(zt(i,e,t),cl(i,e,t))}function Uy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Wg(e,t){Uy(e,t),(e=e.alternate)&&Uy(e,t)}function Py(e){if(e.tag===13){var t=Ya(e,67108864);t!==null&&zt(t,e,67108864),Wg(e,67108864)}}function jx(){return ba}function Lx(){for(var e=new Map,t=1,i=0;31>i;i++){var c=_e(t);e.set(t,c),t*=2}return e}function eh(e,t,i,c){var g=oe.T;oe.T=null;var m=Qt.p;try{Qt.p=Ei,Md(e,t,i,c)}finally{Qt.p=m,oe.T=g}}function Zc(e,t,i,c){var g=oe.T;oe.T=null;var m=Qt.p;try{Qt.p=jo,Md(e,t,i,c)}finally{Qt.p=m,oe.T=g}}function Md(e,t,i,c){if(O0){var g=Qc(c);if(g===null)yi(e,t,c,z0,i),yo(e,c);else if(Bx(g,e,t,i,c))c.stopPropagation();else if(yo(e,c),t&4&&-1<TR.indexOf(e)){for(;g!==null;){var m=Ga(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=ot(m.pendingLanes);if(x!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var D=1<<31-aa(x);E.entanglements[1]|=D,x&=~D}Li(m),(nn&(Mi|Gr))===Eo&&(h0=pa()+JC,vs(0))}}break;case 13:E=Ya(m,2),E!==null&&zt(E,m,2),Sl(),Wg(m,2)}if(m=Qc(c),m===null&&yi(e,t,c,z0,i),m===g)break;g=m}g!==null&&c.stopPropagation()}else yi(e,t,c,null,i)}}function Qc(e){return e=Ki(e),Ad(e)}function Ad(e){if(z0=null,e=ua(e),e!==null){var t=ue(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=ye(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return z0=e,null}function Ms(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return Ei;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return jo;case"message":switch(By()){case Id:return Ei;case lb:return jo;case Wc:case cb:return _r;case ub:return dh;default:return _r}default:return _r}}function yo(e,t){switch(e){case"focusin":case"focusout":mu=null;break;case"dragenter":case"dragleave":bu=null;break;case"mouseover":case"mouseout":vu=null;break;case"pointerover":case"pointerout":ov.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rv.delete(t.pointerId)}}function Nr(e,t,i,c,g,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:i,eventSystemFlags:c,nativeEvent:m,targetContainers:[g]},t!==null&&(t=Ga(t),t!==null&&Py(t)),e):(e.eventSystemFlags|=c,t=e.targetContainers,g!==null&&t.indexOf(g)===-1&&t.push(g),e)}function Bx(e,t,i,c,g){switch(t){case"focusin":return mu=Nr(mu,e,t,i,c,g),!0;case"dragenter":return bu=Nr(bu,e,t,i,c,g),!0;case"mouseover":return vu=Nr(vu,e,t,i,c,g),!0;case"pointerover":var m=g.pointerId;return ov.set(m,Nr(ov.get(m)||null,e,t,i,c,g)),!0;case"gotpointercapture":return m=g.pointerId,rv.set(m,Nr(rv.get(m)||null,e,t,i,c,g)),!0}return!1}function ab(e){var t=ua(e.target);if(t!==null){var i=ue(t);if(i!==null){if(t=i.tag,t===13){if(t=ye(i),t!==null){e.blockedOn=t,Zi(e.priority,function(){if(i.tag===13){var c=vi(i);c=gn(c);var g=Ya(i,c);g!==null&&zt(g,i,c),Wg(i,c)}});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Qc(e.nativeEvent);if(i===null){i=e.nativeEvent;var c=new i.constructor(i.type,i),g=c;y!==null&&console.error("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),y=g,i.target.dispatchEvent(c),y===null&&console.error("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),y=null}else return t=Ga(i),t!==null&&Py(t),e.blockedOn=i,!1;t.shift()}return!0}function ib(e,t,i){Rd(e)&&i.delete(t)}function $y(){VS=!1,mu!==null&&Rd(mu)&&(mu=null),bu!==null&&Rd(bu)&&(bu=null),vu!==null&&Rd(vu)&&(vu=null),ov.forEach(ib),rv.forEach(ib)}function th(e,t){e.blockedOn===t&&(e.blockedOn=null,VS||(VS=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,$y)))}function nh(e){D0!==e&&(D0=e,In.unstable_scheduleCallback(In.unstable_NormalPriority,function(){D0===e&&(D0=null);for(var t=0;t<e.length;t+=3){var i=e[t],c=e[t+1],g=e[t+2];if(typeof c!="function"){if(Ad(c||i)===null)continue;break}var m=Ga(i);m!==null&&(e.splice(t,3),t-=3,i={pending:!0,data:g,method:i.method,action:c},Object.freeze(i),hg(m,i,c,g))}}))}function Kc(e){function t(D){return th(D,e)}mu!==null&&th(mu,e),bu!==null&&th(bu,e),vu!==null&&th(vu,e),ov.forEach(t),rv.forEach(t);for(var i=0;i<yu.length;i++){var c=yu[i];c.blockedOn===e&&(c.blockedOn=null)}for(;0<yu.length&&(i=yu[0],i.blockedOn===null);)ab(i),i.blockedOn===null&&yu.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var g=i[c],m=i[c+1],x=g[ui]||null;if(typeof m=="function")x||nh(i);else if(x){var E=null;if(m&&m.hasAttribute("formAction")){if(g=m,x=m[ui]||null)E=x.formAction;else if(Ad(g)!==null)continue}else E=x.action;typeof E=="function"?i[c+1]=E:(i.splice(c,3),c-=3),nh(i)}}}function ah(e){this._internalRoot=e}function ih(e){this._internalRoot=e}function oh(e){e[Ds]&&(e._reactRootContainer?console.error("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):console.error("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var In=rw(),ob=df(),Hx=L0(),mt=Object.assign,Fx=Symbol.for("react.element"),Ir=Symbol.for("react.transitional.element"),xt=Symbol.for("react.portal"),As=Symbol.for("react.fragment"),Al=Symbol.for("react.strict_mode"),Od=Symbol.for("react.profiler"),_y=Symbol.for("react.provider"),zd=Symbol.for("react.consumer"),ci=Symbol.for("react.context"),Rs=Symbol.for("react.forward_ref"),Os=Symbol.for("react.suspense"),rh=Symbol.for("react.suspense_list"),sh=Symbol.for("react.memo"),wi=Symbol.for("react.lazy"),lh=Symbol.for("react.activity"),jy=Symbol.for("react.memo_cache_sentinel"),Dd=Symbol.iterator,cn=Symbol.for("react.client.reference"),Qn=Array.isArray,oe=ob.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qt=Hx.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rb=Object.freeze({pending:!1,data:null,method:null,action:null}),Nd=[],Jc=[],Po=-1,Ur=Ue(null),Rl=Ue(null),$o=Ue(null),ch=Ue(null),_o=Object.prototype.hasOwnProperty,sb=In.unstable_scheduleCallback,Ly=In.unstable_cancelCallback,qx=In.unstable_shouldYield,Gx=In.unstable_requestPaint,pa=In.unstable_now,By=In.unstable_getCurrentPriorityLevel,Id=In.unstable_ImmediatePriority,lb=In.unstable_UserBlockingPriority,Wc=In.unstable_NormalPriority,cb=In.unstable_LowPriority,ub=In.unstable_IdlePriority,xo=In.log,db=In.unstable_setDisableYieldValue,Ol=null,ma=null,He=null,_n=!1,Fi=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u",aa=Math.clz32?Math.clz32:ca,Pr=Math.log,Vx=Math.LN2,uh=256,$r=4194304,Ei=2,jo=8,_r=32,dh=268435456,zs=Math.random().toString(36).slice(2),Ma="__reactFiber$"+zs,ui="__reactProps$"+zs,Ds="__reactContainer$"+zs,fh="__reactEvents$"+zs,eu="__reactListeners$"+zs,Ud="__reactHandles$"+zs,fb="__reactResources$"+zs,Pd="__reactMarker$"+zs,zl=new Set,So={},gh={},hh={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},gb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ph={},$d={},tu=0,hb,Hy,pb,nu,Fy,qy,Gy;ko.__reactDisabledLog=!0;var au,_d,jd=!1,mb=new(typeof WeakMap=="function"?WeakMap:Map),ba=null,Lo=!1,Vy=/[\n"\\]/g,bb=!1,vb=!1,yb=!1,mh=!1,xb=!1,Ld=!1,Yy=["value","defaultValue"],Xy=!1,bh=/["'&<>\n\t]|^\s|\s$/,Sb="address applet area article aside base basefont bgsound blockquote body br button caption center col colgroup dd details dir div dl dt embed fieldset figcaption figure footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr html iframe img input isindex li link listing main marquee menu menuitem meta nav noembed noframes noscript object ol p param plaintext pre script section select source style summary table tbody td template textarea tfoot th thead title tr track ul wbr xmp".split(" "),Bd="applet caption html table td th marquee object template foreignObject desc title".split(" "),wb=Bd.concat(["button"]),Zy="dd dt li option optgroup p rp rt".split(" "),vh={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null,containerTagInScope:null,implicitRootScope:!1},wo={},Bo={animation:"animationDelay animationDirection animationDuration animationFillMode animationIterationCount animationName animationPlayState animationTimingFunction".split(" "),background:"backgroundAttachment backgroundClip backgroundColor backgroundImage backgroundOrigin backgroundPositionX backgroundPositionY backgroundRepeat backgroundSize".split(" "),backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:"borderBottomColor borderBottomStyle borderBottomWidth borderImageOutset borderImageRepeat borderImageSlice borderImageSource borderImageWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderTopColor borderTopStyle borderTopWidth".split(" "),borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:"fontFamily fontFeatureSettings fontKerning fontLanguageOverride fontSize fontSizeAdjust fontStretch fontStyle fontVariant fontVariantAlternates fontVariantCaps fontVariantEastAsian fontVariantLigatures fontVariantNumeric fontVariantPosition fontWeight lineHeight".split(" "),fontVariant:"fontVariantAlternates fontVariantCaps fontVariantEastAsian fontVariantLigatures fontVariantNumeric fontVariantPosition".split(" "),gap:["columnGap","rowGap"],grid:"gridAutoColumns gridAutoFlow gridAutoRows gridTemplateAreas gridTemplateColumns gridTemplateRows".split(" "),gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:"maskClip maskComposite maskImage maskMode maskOrigin maskPositionX maskPositionY maskRepeat maskSize".split(" "),maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},jr=/([A-Z])/g,iu=/^ms-/,Hd=/^(?:webkit|moz|o)[A-Z]/,Ns=/^-ms-/,Yx=/-(.)/g,Eb=/;\s*$/,Ho={},Cb={},Tb=!1,Fd=!1,kb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),yh="http://www.w3.org/1998/Math/MathML",Lr="http://www.w3.org/2000/svg",xh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qd={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",fetchpriority:"fetchPriority",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",inert:"inert",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",popover:"popover",popovertarget:"popoverTarget",popovertargetaction:"popoverTargetAction",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",transformorigin:"transformOrigin","transform-origin":"transformOrigin",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},ou={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Is={},Sh=RegExp("^(aria)-[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qy=RegExp("^(aria)[A-Z][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ky=!1,ia={},a=/^on./,o=/^on[^A-Z]/,l=RegExp("^(aria)-[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),f=RegExp("^(aria)[A-Z][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),b=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i,y=null,T=null,O=null,j=!1,K=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Se=!1;if(K)try{var Ce={};Object.defineProperty(Ce,"passive",{get:function(){Se=!0}}),window.addEventListener("test",Ce,Ce),window.removeEventListener("test",Ce,Ce)}catch{Se=!1}var te=null,le=null,ct=null,st={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kt=fa(st),X=mt({},st,{view:0,detail:0}),q=fa(X),W,we,Ye,kt=mt({},X,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ea,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ye&&(Ye&&e.type==="mousemove"?(W=e.screenX-Ye.screenX,we=e.screenY-Ye.screenY):we=W=0,Ye=e),W)},movementY:function(e){return"movementY"in e?e.movementY:we}}),rt=fa(kt),ut=mt({},kt,{dataTransfer:0}),oa=fa(ut),qt=mt({},X,{relatedTarget:0}),Fo=fa(qt),Xx=mt({},st,{animationName:0,elapsedTime:0,pseudoElement:0}),SA=fa(Xx),wA=mt({},st,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),EA=fa(wA),CA=mt({},st,{data:0}),NE=fa(CA),TA=NE,kA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},RA=mt({},X,{key:function(e){if(e.key){var t=kA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?MA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ea,charCode:function(e){return e.type==="keypress"?Ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OA=fa(RA),zA=mt({},kt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IE=fa(zA),DA=mt({},X,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ea}),NA=fa(DA),IA=mt({},st,{propertyName:0,elapsedTime:0,pseudoElement:0}),UA=fa(IA),PA=mt({},kt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$A=fa(PA),_A=mt({},st,{newState:0,oldState:0}),jA=fa(_A),LA=[9,13,27,32],UE=229,Zx=K&&"CompositionEvent"in window,Mb=null;K&&"documentMode"in document&&(Mb=document.documentMode);var BA=K&&"TextEvent"in window&&!Mb,PE=K&&(!Zx||Mb&&8<Mb&&11>=Mb),$E=32,_E=String.fromCharCode($E),jE=!1,wh=!1,HA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ab=null,Rb=null,LE=!1;K&&(LE=Mp("input")&&(!document.documentMode||9<document.documentMode));var Ci=typeof Object.is=="function"?Object.is:Nx,FA=K&&"documentMode"in document&&11>=document.documentMode,Eh=null,Qx=null,Ob=null,Kx=!1,Ch={animationend:el("Animation","AnimationEnd"),animationiteration:el("Animation","AnimationIteration"),animationstart:el("Animation","AnimationStart"),transitionrun:el("Transition","TransitionRun"),transitionstart:el("Transition","TransitionStart"),transitioncancel:el("Transition","TransitionCancel"),transitionend:el("Transition","TransitionEnd")},Jx={},BE={};K&&(BE=document.createElement("div").style,"AnimationEvent"in window||(delete Ch.animationend.animation,delete Ch.animationiteration.animation,delete Ch.animationstart.animation),"TransitionEvent"in window||delete Ch.transitionend.transition);var HE=tl("animationend"),FE=tl("animationiteration"),qE=tl("animationstart"),qA=tl("transitionrun"),GA=tl("transitionstart"),VA=tl("transitioncancel"),GE=tl("transitionend"),VE=new Map,Wx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wx.push("scrollEnd");var eS=new WeakMap,tS=1,Gd=2,qo=[],Th=0,nS=0,ru={};Object.freeze(ru);var Go=null,kh=null,Tn=0,YA=1,ja=2,di=8,Br=16,YE=64,XE=!1;try{var ZE=Object.preventExtensions({})}catch{XE=!0}var Mh=[],Ah=0,Jy=null,Wy=0,Vo=[],Yo=0,Vd=null,Dl=1,Nl="",Ti=null,qn=null,Gt=!1,Il=!1,Xo=null,Yd=null,Us=!1,aS=Error("Hydration Mismatch Exception: This is not a real error, and should not leak into userspace. If you're seeing this, it's likely a bug in React."),QE=0;if(typeof performance=="object"&&typeof performance.now=="function")var XA=performance,KE=function(){return XA.now()};else{var ZA=Date;KE=function(){return ZA.now()}}var iS=Ue(null),oS=Ue(null),JE={},e0=null,Rh=null,Oh=!1,QA=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,c){e.push(c)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},KA=In.unstable_scheduleCallback,JA=In.unstable_NormalPriority,va={$$typeof:ci,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0,_currentRenderer:null,_currentRenderer2:null},zh=In.unstable_now,WE=-0,t0=-0,qi=-1.1,Xd=-0,n0=!1,a0=!1,zb=null,rS=0,Zd=0,Dh=null,eC=oe.S;oe.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&oy(e,t),eC!==null&&eC(e,t)};var Qd=Ue(null),Hr={recordUnsafeLifecycleWarnings:function(){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}},Db=[],Nb=[],Ib=[],Ub=[],Pb=[],$b=[],Kd=new Set;Hr.recordUnsafeLifecycleWarnings=function(e,t){Kd.has(e.type)||(typeof t.componentWillMount=="function"&&t.componentWillMount.__suppressDeprecationWarning!==!0&&Db.push(e),e.mode&di&&typeof t.UNSAFE_componentWillMount=="function"&&Nb.push(e),typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&Ib.push(e),e.mode&di&&typeof t.UNSAFE_componentWillReceiveProps=="function"&&Ub.push(e),typeof t.componentWillUpdate=="function"&&t.componentWillUpdate.__suppressDeprecationWarning!==!0&&Pb.push(e),e.mode&di&&typeof t.UNSAFE_componentWillUpdate=="function"&&$b.push(e))},Hr.flushPendingUnsafeLifecycleWarnings=function(){var e=new Set;0<Db.length&&(Db.forEach(function(E){e.add(de(E)||"Component"),Kd.add(E.type)}),Db=[]);var t=new Set;0<Nb.length&&(Nb.forEach(function(E){t.add(de(E)||"Component"),Kd.add(E.type)}),Nb=[]);var i=new Set;0<Ib.length&&(Ib.forEach(function(E){i.add(de(E)||"Component"),Kd.add(E.type)}),Ib=[]);var c=new Set;0<Ub.length&&(Ub.forEach(function(E){c.add(de(E)||"Component"),Kd.add(E.type)}),Ub=[]);var g=new Set;0<Pb.length&&(Pb.forEach(function(E){g.add(de(E)||"Component"),Kd.add(E.type)}),Pb=[]);var m=new Set;if(0<$b.length&&($b.forEach(function(E){m.add(de(E)||"Component"),Kd.add(E.type)}),$b=[]),0<t.size){var x=R(t);console.error(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,x)}0<c.size&&(x=R(c),console.error(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://react.dev/link/derived-state

Please update the following components: %s`,x)),0<m.size&&(x=R(m),console.error(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,x)),0<e.size&&(x=R(e),console.warn(`componentWillMount has been renamed, and is not recommended for use. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,x)),0<i.size&&(x=R(i),console.warn(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://react.dev/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,x)),0<g.size&&(x=R(g),console.warn(`componentWillUpdate has been renamed, and is not recommended for use. See https://react.dev/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,x))};var i0=new Map,tC=new Set;Hr.recordLegacyContextWarning=function(e,t){for(var i=null,c=e;c!==null;)c.mode&di&&(i=c),c=c.return;i===null?console.error("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue."):!tC.has(e.type)&&(c=i0.get(i),e.type.contextTypes!=null||e.type.childContextTypes!=null||t!==null&&typeof t.getChildContext=="function")&&(c===void 0&&(c=[],i0.set(i,c)),c.push(e))},Hr.flushLegacyContextWarning=function(){i0.forEach(function(e){if(e.length!==0){var t=e[0],i=new Set;e.forEach(function(g){i.add(de(g)||"Component"),tC.add(g.type)});var c=R(i);nt(t,function(){console.error(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://react.dev/link/legacy-context`,c)})}})},Hr.discardPendingWarnings=function(){Db=[],Nb=[],Ib=[],Ub=[],Pb=[],$b=[],i0=new Map};var _b=Error("Suspense Exception: This is not a real error! It's an implementation detail of `use` to interrupt the current render. You must either rethrow it immediately, or move the `use` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary, or call the promise's `.catch` method and pass the result to `use`."),nC=Error("Suspense Exception: This is not a real error, and should not leak into userspace. If you're seeing this, it's likely a bug in React."),o0=Error("Suspense Exception: This is not a real error! It's an implementation detail of `useActionState` to interrupt the current render. You must either rethrow it immediately, or move the `useActionState` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary."),sS={then:function(){console.error('Internal React error: A listener was unexpectedly attached to a "noop" thenable. This is a bug in React. Please file an issue.')}},jb=null,r0=!1,Zo=0,Qo=1,ki=2,La=4,ya=8,aC=0,iC=1,oC=2,lS=3,su=!1,rC=!1,cS=null,uS=!1,Nh=Ue(null),s0=Ue(0),Ih,sC=new Set,lC=new Set,dS=new Set,cC=new Set,lu=0,bt=null,mn=null,ra=null,l0=!1,Uh=!1,Jd=!1,c0=0,Lb=0,Ul=null,WA=0,eR=25,pe=null,Ko=null,Pl=-1,Bb=!1,u0={readContext:bn,use:On,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn,useHostTransitionStatus:pn,useFormState:pn,useActionState:pn,useOptimistic:pn,useMemoCache:pn,useCacheRefresh:pn},fS=null,uC=null,gS=null,dC=null,Ps=null,Fr=null,d0=null;fS={readContext:function(e){return bn(e)},use:On,useCallback:function(e,t){return pe="useCallback",Ct(),ls(t),wc(e,t)},useContext:function(e){return pe="useContext",Ct(),bn(e)},useEffect:function(e,t){return pe="useEffect",Ct(),ls(t),Ku(e,t)},useImperativeHandle:function(e,t,i){return pe="useImperativeHandle",Ct(),ls(i),yr(e,t,i)},useInsertionEffect:function(e,t){pe="useInsertionEffect",Ct(),ls(t),Pi(4,ki,e,t)},useLayoutEffect:function(e,t){return pe="useLayoutEffect",Ct(),ls(t),Zp(e,t)},useMemo:function(e,t){pe="useMemo",Ct(),ls(t);var i=oe.H;oe.H=Ps;try{return fl(e,t)}finally{oe.H=i}},useReducer:function(e,t,i){pe="useReducer",Ct();var c=oe.H;oe.H=Ps;try{return br(e,t,i)}finally{oe.H=c}},useRef:function(e){return pe="useRef",Ct(),fs(e)},useState:function(e){pe="useState",Ct();var t=oe.H;oe.H=Ps;try{return so(e)}finally{oe.H=t}},useDebugValue:function(){pe="useDebugValue",Ct()},useDeferredValue:function(e,t){return pe="useDeferredValue",Ct(),Ec(e,t)},useTransition:function(){return pe="useTransition",Ct(),ed()},useSyncExternalStore:function(e,t,i){return pe="useSyncExternalStore",Ct(),lg(e,t,i)},useId:function(){return pe="useId",Ct(),gl()},useFormState:function(e,t){return pe="useFormState",Ct(),gc(),yc(e,t)},useActionState:function(e,t){return pe="useActionState",Ct(),yc(e,t)},useOptimistic:function(e){return pe="useOptimistic",Ct(),Oo(e)},useHostTransitionStatus:Ja,useMemoCache:on,useCacheRefresh:function(){return pe="useCacheRefresh",Ct(),td()}},uC={readContext:function(e){return bn(e)},use:On,useCallback:function(e,t){return pe="useCallback",Re(),wc(e,t)},useContext:function(e){return pe="useContext",Re(),bn(e)},useEffect:function(e,t){return pe="useEffect",Re(),Ku(e,t)},useImperativeHandle:function(e,t,i){return pe="useImperativeHandle",Re(),yr(e,t,i)},useInsertionEffect:function(e,t){pe="useInsertionEffect",Re(),Pi(4,ki,e,t)},useLayoutEffect:function(e,t){return pe="useLayoutEffect",Re(),Zp(e,t)},useMemo:function(e,t){pe="useMemo",Re();var i=oe.H;oe.H=Ps;try{return fl(e,t)}finally{oe.H=i}},useReducer:function(e,t,i){pe="useReducer",Re();var c=oe.H;oe.H=Ps;try{return br(e,t,i)}finally{oe.H=c}},useRef:function(e){return pe="useRef",Re(),fs(e)},useState:function(e){pe="useState",Re();var t=oe.H;oe.H=Ps;try{return so(e)}finally{oe.H=t}},useDebugValue:function(){pe="useDebugValue",Re()},useDeferredValue:function(e,t){return pe="useDeferredValue",Re(),Ec(e,t)},useTransition:function(){return pe="useTransition",Re(),ed()},useSyncExternalStore:function(e,t,i){return pe="useSyncExternalStore",Re(),lg(e,t,i)},useId:function(){return pe="useId",Re(),gl()},useActionState:function(e,t){return pe="useActionState",Re(),yc(e,t)},useFormState:function(e,t){return pe="useFormState",Re(),gc(),yc(e,t)},useOptimistic:function(e){return pe="useOptimistic",Re(),Oo(e)},useHostTransitionStatus:Ja,useMemoCache:on,useCacheRefresh:function(){return pe="useCacheRefresh",Re(),td()}},gS={readContext:function(e){return bn(e)},use:On,useCallback:function(e,t){return pe="useCallback",Re(),Ju(e,t)},useContext:function(e){return pe="useContext",Re(),bn(e)},useEffect:function(e,t){pe="useEffect",Re(),Ka(2048,ya,e,t)},useImperativeHandle:function(e,t,i){return pe="useImperativeHandle",Re(),Sc(e,t,i)},useInsertionEffect:function(e,t){return pe="useInsertionEffect",Re(),Ka(4,ki,e,t)},useLayoutEffect:function(e,t){return pe="useLayoutEffect",Re(),Ka(4,La,e,t)},useMemo:function(e,t){pe="useMemo",Re();var i=oe.H;oe.H=Fr;try{return Wu(e,t)}finally{oe.H=i}},useReducer:function(e,t,i){pe="useReducer",Re();var c=oe.H;oe.H=Fr;try{return Pa(e,t,i)}finally{oe.H=c}},useRef:function(){return pe="useRef",Re(),Wt().memoizedState},useState:function(){pe="useState",Re();var e=oe.H;oe.H=Fr;try{return Pa(Tt)}finally{oe.H=e}},useDebugValue:function(){pe="useDebugValue",Re()},useDeferredValue:function(e,t){return pe="useDeferredValue",Re(),gg(e,t)},useTransition:function(){return pe="useTransition",Re(),pg()},useSyncExternalStore:function(e,t,i){return pe="useSyncExternalStore",Re(),Xu(e,t,i)},useId:function(){return pe="useId",Re(),Wt().memoizedState},useFormState:function(e){return pe="useFormState",Re(),gc(),fg(e)},useActionState:function(e){return pe="useActionState",Re(),fg(e)},useOptimistic:function(e,t){return pe="useOptimistic",Re(),zo(e,t)},useHostTransitionStatus:Ja,useMemoCache:on,useCacheRefresh:function(){return pe="useCacheRefresh",Re(),Wt().memoizedState}},dC={readContext:function(e){return bn(e)},use:On,useCallback:function(e,t){return pe="useCallback",Re(),Ju(e,t)},useContext:function(e){return pe="useContext",Re(),bn(e)},useEffect:function(e,t){pe="useEffect",Re(),Ka(2048,ya,e,t)},useImperativeHandle:function(e,t,i){return pe="useImperativeHandle",Re(),Sc(e,t,i)},useInsertionEffect:function(e,t){return pe="useInsertionEffect",Re(),Ka(4,ki,e,t)},useLayoutEffect:function(e,t){return pe="useLayoutEffect",Re(),Ka(4,La,e,t)},useMemo:function(e,t){pe="useMemo",Re();var i=oe.H;oe.H=d0;try{return Wu(e,t)}finally{oe.H=i}},useReducer:function(e,t,i){pe="useReducer",Re();var c=oe.H;oe.H=d0;try{return ro(e,t,i)}finally{oe.H=c}},useRef:function(){return pe="useRef",Re(),Wt().memoizedState},useState:function(){pe="useState",Re();var e=oe.H;oe.H=d0;try{return ro(Tt)}finally{oe.H=e}},useDebugValue:function(){pe="useDebugValue",Re()},useDeferredValue:function(e,t){return pe="useDeferredValue",Re(),Kp(e,t)},useTransition:function(){return pe="useTransition",Re(),Sr()},useSyncExternalStore:function(e,t,i){return pe="useSyncExternalStore",Re(),Xu(e,t,i)},useId:function(){return pe="useId",Re(),Wt().memoizedState},useFormState:function(e){return pe="useFormState",Re(),gc(),ds(e)},useActionState:function(e){return pe="useActionState",Re(),ds(e)},useOptimistic:function(e,t){return pe="useOptimistic",Re(),dg(e,t)},useHostTransitionStatus:Ja,useMemoCache:on,useCacheRefresh:function(){return pe="useCacheRefresh",Re(),Wt().memoizedState}},Ps={readContext:function(e){return k(),bn(e)},use:function(e){return S(),On(e)},useCallback:function(e,t){return pe="useCallback",S(),Ct(),wc(e,t)},useContext:function(e){return pe="useContext",S(),Ct(),bn(e)},useEffect:function(e,t){return pe="useEffect",S(),Ct(),Ku(e,t)},useImperativeHandle:function(e,t,i){return pe="useImperativeHandle",S(),Ct(),yr(e,t,i)},useInsertionEffect:function(e,t){pe="useInsertionEffect",S(),Ct(),Pi(4,ki,e,t)},useLayoutEffect:function(e,t){return pe="useLayoutEffect",S(),Ct(),Zp(e,t)},useMemo:function(e,t){pe="useMemo",S(),Ct();var i=oe.H;oe.H=Ps;try{return fl(e,t)}finally{oe.H=i}},useReducer:function(e,t,i){pe="useReducer",S(),Ct();var c=oe.H;oe.H=Ps;try{return br(e,t,i)}finally{oe.H=c}},useRef:function(e){return pe="useRef",S(),Ct(),fs(e)},useState:function(e){pe="useState",S(),Ct();var t=oe.H;oe.H=Ps;try{return so(e)}finally{oe.H=t}},useDebugValue:function(){pe="useDebugValue",S(),Ct()},useDeferredValue:function(e,t){return pe="useDeferredValue",S(),Ct(),Ec(e,t)},useTransition:function(){return pe="useTransition",S(),Ct(),ed()},useSyncExternalStore:function(e,t,i){return pe="useSyncExternalStore",S(),Ct(),lg(e,t,i)},useId:function(){return pe="useId",S(),Ct(),gl()},useFormState:function(e,t){return pe="useFormState",S(),Ct(),yc(e,t)},useActionState:function(e,t){return pe="useActionState",S(),Ct(),yc(e,t)},useOptimistic:function(e){return pe="useOptimistic",S(),Ct(),Oo(e)},useMemoCache:function(e){return S(),on(e)},useHostTransitionStatus:Ja,useCacheRefresh:function(){return pe="useCacheRefresh",Ct(),td()}},Fr={readContext:function(e){return k(),bn(e)},use:function(e){return S(),On(e)},useCallback:function(e,t){return pe="useCallback",S(),Re(),Ju(e,t)},useContext:function(e){return pe="useContext",S(),Re(),bn(e)},useEffect:function(e,t){pe="useEffect",S(),Re(),Ka(2048,ya,e,t)},useImperativeHandle:function(e,t,i){return pe="useImperativeHandle",S(),Re(),Sc(e,t,i)},useInsertionEffect:function(e,t){return pe="useInsertionEffect",S(),Re(),Ka(4,ki,e,t)},useLayoutEffect:function(e,t){return pe="useLayoutEffect",S(),Re(),Ka(4,La,e,t)},useMemo:function(e,t){pe="useMemo",S(),Re();var i=oe.H;oe.H=Fr;try{return Wu(e,t)}finally{oe.H=i}},useReducer:function(e,t,i){pe="useReducer",S(),Re();var c=oe.H;oe.H=Fr;try{return Pa(e,t,i)}finally{oe.H=c}},useRef:function(){return pe="useRef",S(),Re(),Wt().memoizedState},useState:function(){pe="useState",S(),Re();var e=oe.H;oe.H=Fr;try{return Pa(Tt)}finally{oe.H=e}},useDebugValue:function(){pe="useDebugValue",S(),Re()},useDeferredValue:function(e,t){return pe="useDeferredValue",S(),Re(),gg(e,t)},useTransition:function(){return pe="useTransition",S(),Re(),pg()},useSyncExternalStore:function(e,t,i){return pe="useSyncExternalStore",S(),Re(),Xu(e,t,i)},useId:function(){return pe="useId",S(),Re(),Wt().memoizedState},useFormState:function(e){return pe="useFormState",S(),Re(),fg(e)},useActionState:function(e){return pe="useActionState",S(),Re(),fg(e)},useOptimistic:function(e,t){return pe="useOptimistic",S(),Re(),zo(e,t)},useMemoCache:function(e){return S(),on(e)},useHostTransitionStatus:Ja,useCacheRefresh:function(){return pe="useCacheRefresh",Re(),Wt().memoizedState}},d0={readContext:function(e){return k(),bn(e)},use:function(e){return S(),On(e)},useCallback:function(e,t){return pe="useCallback",S(),Re(),Ju(e,t)},useContext:function(e){return pe="useContext",S(),Re(),bn(e)},useEffect:function(e,t){pe="useEffect",S(),Re(),Ka(2048,ya,e,t)},useImperativeHandle:function(e,t,i){return pe="useImperativeHandle",S(),Re(),Sc(e,t,i)},useInsertionEffect:function(e,t){return pe="useInsertionEffect",S(),Re(),Ka(4,ki,e,t)},useLayoutEffect:function(e,t){return pe="useLayoutEffect",S(),Re(),Ka(4,La,e,t)},useMemo:function(e,t){pe="useMemo",S(),Re();var i=oe.H;oe.H=Fr;try{return Wu(e,t)}finally{oe.H=i}},useReducer:function(e,t,i){pe="useReducer",S(),Re();var c=oe.H;oe.H=Fr;try{return ro(e,t,i)}finally{oe.H=c}},useRef:function(){return pe="useRef",S(),Re(),Wt().memoizedState},useState:function(){pe="useState",S(),Re();var e=oe.H;oe.H=Fr;try{return ro(Tt)}finally{oe.H=e}},useDebugValue:function(){pe="useDebugValue",S(),Re()},useDeferredValue:function(e,t){return pe="useDeferredValue",S(),Re(),Kp(e,t)},useTransition:function(){return pe="useTransition",S(),Re(),Sr()},useSyncExternalStore:function(e,t,i){return pe="useSyncExternalStore",S(),Re(),Xu(e,t,i)},useId:function(){return pe="useId",S(),Re(),Wt().memoizedState},useFormState:function(e){return pe="useFormState",S(),Re(),ds(e)},useActionState:function(e){return pe="useActionState",S(),Re(),ds(e)},useOptimistic:function(e,t){return pe="useOptimistic",S(),Re(),dg(e,t)},useMemoCache:function(e){return S(),on(e)},useHostTransitionStatus:Ja,useCacheRefresh:function(){return pe="useCacheRefresh",Re(),Wt().memoizedState}};var fC={"react-stack-bottom-frame":function(e,t,i){var c=Lo;Lo=!0;try{return e(t,i)}finally{Lo=c}}},hS=fC["react-stack-bottom-frame"].bind(fC),gC={"react-stack-bottom-frame":function(e){var t=Lo;Lo=!0;try{return e.render()}finally{Lo=t}}},hC=gC["react-stack-bottom-frame"].bind(gC),pC={"react-stack-bottom-frame":function(e,t){try{t.componentDidMount()}catch(i){rn(e,e.return,i)}}},pS=pC["react-stack-bottom-frame"].bind(pC),mC={"react-stack-bottom-frame":function(e,t,i,c,g){try{t.componentDidUpdate(i,c,g)}catch(m){rn(e,e.return,m)}}},bC=mC["react-stack-bottom-frame"].bind(mC),vC={"react-stack-bottom-frame":function(e,t){var i=t.stack;e.componentDidCatch(t.value,{componentStack:i!==null?i:""})}},tR=vC["react-stack-bottom-frame"].bind(vC),yC={"react-stack-bottom-frame":function(e,t,i){try{i.componentWillUnmount()}catch(c){rn(e,t,c)}}},xC=yC["react-stack-bottom-frame"].bind(yC),SC={"react-stack-bottom-frame":function(e){e.resourceKind!=null&&console.error("Expected only SimpleEffects when enableUseEffectCRUDOverload is disabled, got %s",e.resourceKind);var t=e.create;return e=e.inst,t=t(),e.destroy=t}},nR=SC["react-stack-bottom-frame"].bind(SC),wC={"react-stack-bottom-frame":function(e,t,i){try{i()}catch(c){rn(e,t,c)}}},aR=wC["react-stack-bottom-frame"].bind(wC),EC={"react-stack-bottom-frame":function(e){var t=e._init;return t(e._payload)}},cu=EC["react-stack-bottom-frame"].bind(EC),Ph=null,Hb=0,Ot=null,mS,CC=mS=!1,TC={},kC={},MC={};w=function(e,t,i){if(i!==null&&typeof i=="object"&&i._store&&(!i._store.validated&&i.key==null||i._store.validated===2)){if(typeof i._store!="object")throw Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");i._store.validated=1;var c=de(e),g=c||"null";if(!TC[g]){TC[g]=!0,i=i._owner,e=e._debugOwner;var m="";e&&typeof e.tag=="number"&&(g=de(e))&&(m=`

Check the render method of \``+g+"`."),m||c&&(m=`

Check the top-level render call using <`+c+">.");var x="";i!=null&&e!==i&&(c=null,typeof i.tag=="number"?c=de(i):typeof i.name=="string"&&(c=i.name),c&&(x=" It was passed a child from "+c+".")),nt(t,function(){console.error('Each child in a list should have a unique "key" prop.%s%s See https://react.dev/link/warning-keys for more information.',m,x)})}}};var $h=pl(!0),AC=pl(!1),Jo=Ue(null),$s=null,_h=1,Fb=2,xa=Ue(0),RC={},OC=new Set,zC=new Set,DC=new Set,NC=new Set,IC=new Set,UC=new Set,PC=new Set,$C=new Set,_C=new Set,jC=new Set;Object.freeze(RC);var bS={enqueueSetState:function(e,t,i){e=e._reactInternals;var c=vi(e),g=to(c);g.payload=t,i!=null&&(An(i),g.callback=i),t=no(e,g,c),t!==null&&(zt(t,e,c),cl(t,e,c)),Vt(e,c)},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var c=vi(e),g=to(c);g.tag=iC,g.payload=t,i!=null&&(An(i),g.callback=i),t=no(e,g,c),t!==null&&(zt(t,e,c),cl(t,e,c)),Vt(e,c)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=vi(e),c=to(i);c.tag=oC,t!=null&&(An(t),c.callback=t),t=no(e,c,i),t!==null&&(zt(t,e,i),cl(t,e,i)),He!==null&&typeof He.markForceUpdateScheduled=="function"&&He.markForceUpdateScheduled(e,i)}},vS=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},jh=null,yS=null,LC=Error("This is not a real error. It's an implementation detail of React's selective hydration feature. If this leaks into userspace, it's a bug in React. Please file an issue."),Aa=!1,BC={},HC={},FC={},qC={},Lh=!1,GC={},xS={},SS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},VC=!1,YC=null;YC=new Set;var $l=!1,Kn=!1,wS=!1,XC=typeof WeakSet=="function"?WeakSet:Set,Ra=null,Bh=null,Hh=null,sa=null,Gi=!1,qr=null,qb=8192,iR={getCacheForType:function(e){var t=bn(va),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},getOwner:function(){return ba}};if(typeof Symbol=="function"&&Symbol.for){var Gb=Symbol.for;Gb("selector.component"),Gb("selector.has_pseudo_class"),Gb("selector.role"),Gb("selector.test_id"),Gb("selector.text")}var oR=[],rR=typeof WeakMap=="function"?WeakMap:Map,Eo=0,Mi=2,Gr=4,_l=0,Vb=1,Fh=2,ES=3,Wd=4,f0=6,ZC=5,nn=Eo,Sn=null,Ut=null,Pt=0,Vi=0,Yb=1,ef=2,Xb=3,QC=4,CS=5,qh=6,Zb=7,TS=8,tf=9,un=Vi,Co=null,uu=!1,Gh=!1,kS=!1,_s=0,Gn=_l,du=0,fu=0,MS=0,To=0,nf=0,Qb=null,Ai=null,g0=!1,AS=0,KC=300,h0=1/0,JC=500,Kb=null,gu=null,sR=0,lR=1,cR=2,af=0,WC=1,e1=2,t1=3,uR=4,RS=5,Ba=0,hu=null,Vh=null,pu=0,OS=0,zS=null,n1=null,dR=50,Jb=0,DS=null,NS=!1,p0=!1,fR=50,of=0,Wb=null,Yh=!1,m0=null,a1=!1,i1=new Set,gR={},b0=null,Xh=null,IS=!1,US=!1,v0=!1,PS=!1,rf=0,$S={};(function(){for(var e=0;e<Wx.length;e++){var t=Wx[e],i=t.toLowerCase();t=t[0].toUpperCase()+t.slice(1),Ji(i,"on"+t)}Ji(HE,"onAnimationEnd"),Ji(FE,"onAnimationIteration"),Ji(qE,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(qA,"onTransitionRun"),Ji(GA,"onTransitionStart"),Ji(VA,"onTransitionCancel"),Ji(GE,"onTransitionEnd")})(),je("onMouseEnter",["mouseout","mouseover"]),je("onMouseLeave",["mouseout","mouseover"]),je("onPointerEnter",["pointerout","pointerover"]),je("onPointerLeave",["pointerout","pointerover"]),Ie("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ie("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ie("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ie("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ev="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_S=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ev)),y0="_reactListening"+Math.random().toString(36).slice(2),o1=!1,r1=!1,x0=!1,s1=!1,S0=!1,w0=!1,l1=!1,E0={},hR=/\r\n?/g,pR=/\u0000|\uFFFD/g,sf="http://www.w3.org/1999/xlink",jS="http://www.w3.org/XML/1998/namespace",mR="javascript:throw new Error('React form unexpectedly submitted.')",bR="suppressHydrationWarning",C0="$",T0="/$",jl="$?",tv="$!",vR=1,yR=2,xR=4,LS="F!",c1="F",u1="complete",SR="style",Ll=0,Zh=1,k0=2,BS=null,HS=null,d1={dialog:!0,webview:!0},FS=null,f1=typeof setTimeout=="function"?setTimeout:void 0,wR=typeof clearTimeout=="function"?clearTimeout:void 0,lf=-1,g1=typeof Promise=="function"?Promise:void 0,ER=typeof queueMicrotask=="function"?queueMicrotask:typeof g1<"u"?function(e){return g1.resolve(null).then(e).catch(zr)}:f1,qS=null,cf=0,nv=1,h1=2,p1=3,Wo=4,er=new Map,m1=new Set,Bl=Qt.d;Qt.d={f:function(){var e=Bl.f(),t=Sl();return e||t},r:function(e){var t=Ga(e);t!==null&&t.tag===5&&t.type==="form"?xr(t):Bl.r(e)},D:function(e){Bl.D(e),Dr("dns-prefetch",e,null)},C:function(e,t){Bl.C(e,t),Dr("preconnect",e,t)},L:function(e,t,i){Bl.L(e,t,i);var c=Qh;if(c&&e&&t){var g='link[rel="preload"][as="'+Wn(t)+'"]';t==="image"&&i&&i.imageSrcSet?(g+='[imagesrcset="'+Wn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(g+='[imagesizes="'+Wn(i.imageSizes)+'"]')):g+='[href="'+Wn(e)+'"]';var m=g;switch(t){case"style":m=vo(e);break;case"script":m=ks(e)}er.has(m)||(e=mt({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),er.set(m,e),c.querySelector(g)!==null||t==="style"&&c.querySelector(Xc(m))||t==="script"&&c.querySelector(kl(m))||(t=c.createElement("link"),na(t,"link",e),Y(t),c.head.appendChild(t)))}},m:function(e,t){Bl.m(e,t);var i=Qh;if(i&&e){var c=t&&typeof t.as=="string"?t.as:"script",g='link[rel="modulepreload"][as="'+Wn(c)+'"][href="'+Wn(e)+'"]',m=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ks(e)}if(!er.has(m)&&(e=mt({rel:"modulepreload",href:e},t),er.set(m,e),i.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(kl(m)))return}c=i.createElement("link"),na(c,"link",e),Y(c),i.head.appendChild(c)}}},X:function(e,t){Bl.X(e,t);var i=Qh;if(i&&e){var c=z(i).hoistableScripts,g=ks(e),m=c.get(g);m||(m=i.querySelector(kl(g)),m||(e=mt({src:e,async:!0},t),(t=er.get(g))&&Zg(e,t),m=i.createElement("script"),Y(m),na(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(g,m))}},S:function(e,t,i){Bl.S(e,t,i);var c=Qh;if(c&&e){var g=z(c).hoistableStyles,m=vo(e);t=t||"default";var x=g.get(m);if(!x){var E={loading:cf,preload:null};if(x=c.querySelector(Xc(m)))E.loading=nv|Wo;else{e=mt({rel:"stylesheet",href:e,"data-precedence":t},i),(i=er.get(m))&&Wm(e,i);var D=x=c.createElement("link");Y(D),na(D,"link",e),D._p=new Promise(function(N,se){D.onload=N,D.onerror=se}),D.addEventListener("load",function(){E.loading|=nv}),D.addEventListener("error",function(){E.loading|=h1}),E.loading|=Wo,Xg(x,t,c)}x={type:"stylesheet",instance:x,count:1,state:E},g.set(m,x)}}},M:function(e,t){Bl.M(e,t);var i=Qh;if(i&&e){var c=z(i).hoistableScripts,g=ks(e),m=c.get(g);m||(m=i.querySelector(kl(g)),m||(e=mt({src:e,async:!0,type:"module"},t),(t=er.get(g))&&Zg(e,t),m=i.createElement("script"),Y(m),na(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(g,m))}}};var Qh=typeof document>"u"?null:document,M0=null,av=null,GS=null,A0=null,uf=rb,iv={$$typeof:ci,Provider:null,Consumer:null,_currentValue:uf,_currentValue2:uf,_threadCount:0},b1="%c%s%c ",v1="background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px",y1="",R0=" ",CR=Function.prototype.bind,x1=!1,S1=null,w1=null,E1=null,C1=null,T1=null,k1=null,M1=null,A1=null,R1=null;S1=function(e,t,i,c){t=u(e,t),t!==null&&(i=n(t.memoizedState,i,0,c),t.memoizedState=i,t.baseState=i,e.memoizedProps=mt({},e.memoizedProps),i=Ya(e,2),i!==null&&zt(i,e,2))},w1=function(e,t,i){t=u(e,t),t!==null&&(i=d(t.memoizedState,i,0),t.memoizedState=i,t.baseState=i,e.memoizedProps=mt({},e.memoizedProps),i=Ya(e,2),i!==null&&zt(i,e,2))},E1=function(e,t,i,c){t=u(e,t),t!==null&&(i=r(t.memoizedState,i,c),t.memoizedState=i,t.baseState=i,e.memoizedProps=mt({},e.memoizedProps),i=Ya(e,2),i!==null&&zt(i,e,2))},C1=function(e,t,i){e.pendingProps=n(e.memoizedProps,t,0,i),e.alternate&&(e.alternate.pendingProps=e.pendingProps),t=Ya(e,2),t!==null&&zt(t,e,2)},T1=function(e,t){e.pendingProps=d(e.memoizedProps,t,0),e.alternate&&(e.alternate.pendingProps=e.pendingProps),t=Ya(e,2),t!==null&&zt(t,e,2)},k1=function(e,t,i){e.pendingProps=r(e.memoizedProps,t,i),e.alternate&&(e.alternate.pendingProps=e.pendingProps),t=Ya(e,2),t!==null&&zt(t,e,2)},M1=function(e){var t=Ya(e,2);t!==null&&zt(t,e,2)},A1=function(e){v=e},R1=function(e){p=e};var O0=!0,z0=null,VS=!1,mu=null,bu=null,vu=null,ov=new Map,rv=new Map,yu=[],TR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" "),D0=null;if(ih.prototype.render=ah.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error("Cannot update an unmounted root.");var i=arguments;typeof i[1]=="function"?console.error("does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):G(i[1])?console.error("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof i[1]<"u"&&console.error("You passed a second argument to root.render(...) but it only accepts one argument."),i=e;var c=t.current,g=vi(c);kd(c,g,i,t,null,null)},ih.prototype.unmount=ah.prototype.unmount=function(){var e=arguments;if(typeof e[0]=="function"&&console.error("does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."),e=this._internalRoot,e!==null){this._internalRoot=null;var t=e.containerInfo;(nn&(Mi|Gr))!==Eo&&console.error("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),kd(e.current,2,null,e,null,null),Sl(),t[Ds]=null}},ih.prototype.unstable_scheduleHydration=function(e){if(e){var t=En();e={blockedOn:null,target:e,priority:t};for(var i=0;i<yu.length&&t!==0&&t<yu[i].priority;i++);yu.splice(i,0,e),i===0&&ab(e)}},function(){var e=ob.version;if(e!=="19.1.0")throw Error(`Incompatible React versions: The "react" and "react-dom" packages must have the exact same version. Instead got:
  - react:      `+(e+`
  - react-dom:  19.1.0
Learn more: https://react.dev/warnings/version-mismatch`))}(),typeof Map=="function"&&Map.prototype!=null&&typeof Map.prototype.forEach=="function"&&typeof Set=="function"&&Set.prototype!=null&&typeof Set.prototype.clear=="function"&&typeof Set.prototype.forEach=="function"||console.error("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://react.dev/link/react-polyfills"),Qt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error("Unable to find node on an unmounted component."):(e=Object.keys(e).join(","),Error("Argument appears to not be a ReactComponent. Keys: "+e));return e=be(t),e=e!==null?J(e):null,e=e===null?null:e.stateNode,e},!function(){var e={bundleType:1,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:oe,reconcilerVersion:"19.1.0"};return e.overrideHookState=S1,e.overrideHookStateDeletePath=w1,e.overrideHookStateRenamePath=E1,e.overrideProps=C1,e.overridePropsDeletePath=T1,e.overridePropsRenamePath=k1,e.scheduleUpdate=M1,e.setErrorHandler=A1,e.setSuspenseHandler=R1,e.scheduleRefresh=H,e.scheduleRoot=_,e.setRefreshHandler=re,e.getCurrentFiber=jx,e.getLaneLabelMap=Lx,e.injectProfilingHooks=Me,Te(e)}()&&K&&window.top===window.self&&(-1<navigator.userAgent.indexOf("Chrome")&&navigator.userAgent.indexOf("Edge")===-1||-1<navigator.userAgent.indexOf("Firefox"))){var O1=window.location.protocol;/^(https?|file):$/.test(O1)&&console.info("%cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools"+(O1==="file:"?`
You might need to use a local HTTP server (instead of file://): https://react.dev/link/react-devtools-faq`:""),"font-weight:bold")}tp.createRoot=function(e,t){if(!G(e))throw Error("Target container is not a DOM element.");oh(e);var i=!1,c="",g=sy,m=yg,x=xg,E=null;return t!=null&&(t.hydrate?console.warn("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof t=="object"&&t!==null&&t.$$typeof===Ir&&console.error(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(c=t.identifierPrefix),t.onUncaughtError!==void 0&&(g=t.onUncaughtError),t.onCaughtError!==void 0&&(m=t.onCaughtError),t.onRecoverableError!==void 0&&(x=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(E=t.unstable_transitionCallbacks)),t=nb(e,1,!1,null,null,i,c,g,m,x,E,null),e[Ds]=t.current,Sd(e),new ah(t)},tp.hydrateRoot=function(e,t,i){if(!G(e))throw Error("Target container is not a DOM element.");oh(e),t===void 0&&console.error("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var c=!1,g="",m=sy,x=yg,E=xg,D=null,N=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(g=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(x=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(D=i.unstable_transitionCallbacks),i.formState!==void 0&&(N=i.formState)),t=nb(e,1,!0,t,i??null,c,g,m,x,E,D,N),t.context=ln(null),i=t.current,c=vi(i),c=gn(c),g=to(c),g.callback=null,no(i,g,c),i=c,t.current.lanes=i,Rn(t,i),Li(t),e[Ds]=t.current,Sd(e),new ih(t)},tp.version="19.1.0",typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}(),tp}var fw;function pT(){if(fw)return uv.exports;fw=1;var h={};function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function")){if(h.NODE_ENV!=="production")throw new Error("^_^");try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}}return h.NODE_ENV==="production"?(u(),uv.exports=gT()):uv.exports=hT(),uv.exports}var B0=pT();const ir=Fl({__proto__:null,default:XS(B0)},[B0]);class or{constructor(){U(this,"context");U(this,"currentStatus","pending")}async initialize(u){this.context=u,this.currentStatus="initializing",this.context.logger.debug("Initializing (Base)"),this.currentStatus="inactive"}async activate(){this.context.logger.debug("Activating (Base)"),this.currentStatus="active"}async deactivate(){this.context.logger.debug("Deactivating (Base)"),this.currentStatus="inactive"}async cleanup(){this.context.logger.debug("Cleaning up (Base)"),this.currentStatus="disabled"}async insertText(u,n){return this.context.logger.warn("insertText not implemented by this adapter."),!1}async submitForm(u){return this.context.logger.warn("submitForm not implemented by this adapter."),!1}async attachFile(u,n){return this.context.logger.warn("attachFile not implemented by this adapter."),!1}async captureScreenshot(){throw this.context.logger.warn("captureScreenshot not implemented by this adapter."),new Error("Not implemented")}async selectElement(u){return this.context.logger.warn("selectElement not implemented by this adapter."),null}async navigateToUrl(u){return this.context.logger.warn("navigateToUrl not implemented by this adapter."),!1}async executeScript(u){return this.context.logger.warn("executeScript not implemented by this adapter."),null}isSupported(){return!0}getStatus(){return this.currentStatus}setStatus(u,n){this.currentStatus=u,u==="error"&&n&&this.context.logger.error("Status set to error:",n)}onToolDetected(u){this.context.logger.debug("onToolDetected (Base):",u)}onPageChanged(u,n){this.context.logger.debug(`onPageChanged (Base): from ${n||"N/A"} to ${u}`)}onHostChanged(u,n){this.context.logger.debug(`onHostChanged (Base): from ${n||"N/A"} to ${u}`)}shouldHandleEvents(){if(this.currentStatus!=="active")return!1;try{const u=this.isSupported();return typeof u=="boolean"?u:!0}catch(u){return this.context.logger.error("Error checking if site is supported:",u),!1}}}const gw={selectors:{chatInput:'div.ql-editor.textarea.new-input-ui p, .ql-editor p, div[contenteditable="true"]',submitButton:'button.mat-mdc-icon-button.send-button, button[aria-label*="Send"], button[data-testid="send-button"]',fileUploadButton:'button[aria-label="Add files"], button[aria-label*="attach"]',fileInput:'input[type="file"]',mainPanel:".chat-web, .main-content, .conversation-container",dropZone:"div[xapfileselectordropzone], .text-input-field, .input-area, .ql-editor, .chat-input-container",filePreview:".file-preview, .xap-filed-upload-preview, .attachment-preview",buttonInsertionContainer:".leading-actions-wrapper, .input-area .actions, .chat-input-actions",fallbackInsertion:".input-area, .chat-input-container, .conversation-input",newChatButton:'button[aria-label*="New chat"], .new-chat-button',conversationHistory:".conversation-history, .chat-history, .sidebar-content",conversationItem:".conversation-item, .chat-item, .history-item",messageContainer:".message-container, .chat-message, .conversation-turn",userMessage:'.user-message, .human-message, [data-role="user"]',aiMessage:'.ai-message, .assistant-message, [data-role="assistant"]',loadingIndicator:".loading-indicator, .spinner, .progress-indicator",typingIndicator:".typing-indicator, .thinking-indicator, .generating",errorMessage:".error-message, .error-banner, .alert-error",retryButton:'button[aria-label*="Retry"], .retry-button'},ui:{typing:{minDelay:50,maxDelay:150,characterDelay:10},animations:{fadeIn:300,slideIn:250,buttonPress:150},retry:{maxAttempts:3,baseDelay:1e3,maxDelay:5e3},fileUpload:{maxSize:52428800,allowedTypes:["image/jpeg","image/png","image/gif","image/webp","text/plain","text/csv","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],timeout:3e4},polling:{elementWait:100,statusCheck:1e3,configRefresh:3e5}},features:{textInsertion:!0,formSubmission:!0,fileAttachment:!0,enhancedUi:!0,animations:!0,lazyLoading:!0,caching:!0,darkModeSupport:!0,highContrast:!0,screenReader:!0,keyboardNavigation:!0,voiceInput:!1,smartRetry:!1,aiAssistance:!1,contextAwareness:!1,multimodalSupport:!1,preloading:!1,customThemes:!1},version:"2.0.0",lastUpdated:new Date().toISOString(),schemaVersion:1},mT={selectors:{chatInput:'#prompt-textarea, div[contenteditable="true"][role="textbox"]',submitButton:'button[data-testid="send-button"], button:has(svg[data-testid="send-icon"])',fileUploadButton:'button[aria-label*="Attach"], input[type="file"] + button',fileInput:'input[type="file"]',mainPanel:".chat-main, .conversation-container, main",dropZone:"#prompt-textarea, .composer-text-area, .input-area",filePreview:".file-preview, .attachment-item",buttonInsertionContainer:".composer-buttons, .input-actions",fallbackInsertion:".composer-parent, .input-container",newChatButton:'a[href="/"], button[aria-label*="New chat"]',conversationHistory:".conversation-list, .chat-history",conversationItem:".conversation-item, .chat-item",messageContainer:".message, .conversation-turn",userMessage:'.user-message, [data-role="user"]',aiMessage:'.assistant-message, [data-role="assistant"]',loadingIndicator:".loading, .spinner",typingIndicator:".typing-indicator, .thinking",errorMessage:".error-message, .alert-error",retryButton:'button[aria-label*="Retry"], .retry-button'},ui:{typing:{minDelay:30,maxDelay:120,characterDelay:8},animations:{fadeIn:250,slideIn:200,buttonPress:100},retry:{maxAttempts:3,baseDelay:1e3,maxDelay:5e3},fileUpload:{maxSize:52428800,allowedTypes:["image/jpeg","image/png","image/gif","image/webp","text/plain","text/csv","application/pdf"],timeout:3e4},polling:{elementWait:100,statusCheck:1e3,configRefresh:3e5}},features:{textInsertion:!0,formSubmission:!0,fileAttachment:!0,enhancedUi:!0,animations:!0,lazyLoading:!0,caching:!0,darkModeSupport:!0,highContrast:!0,screenReader:!0,keyboardNavigation:!0,voiceInput:!1,smartRetry:!1,aiAssistance:!1,contextAwareness:!1,multimodalSupport:!1,preloading:!1,customThemes:!1},version:"2.0.0",lastUpdated:new Date().toISOString(),schemaVersion:1},Tu=class Tu{constructor(){U(this,"configCache",new Map);U(this,"context",null)}static getInstance(){return Tu.instance||(Tu.instance=new Tu),Tu.instance}initialize(u){this.context=u,this.setupEventListeners()}setupEventListeners(){var u;(u=this.context)!=null&&u.eventBus&&(this.context.eventBus.on("remote-config:adapter-configs-updated",n=>{console.debug("[AdapterConfigManager] Received adapter config updates from existing system"),console.debug(n),this.handleAdapterConfigUpdate(n.adapterConfigs)}),this.context.eventBus.on("remote-config:updated",n=>{n.changes.some(r=>r.includes("adapter"))&&(console.debug("[AdapterConfigManager] Detected adapter-related config changes, clearing cache"),this.clearCache())}))}handleAdapterConfigUpdate(u){console.debug("[AdapterConfigManager] Processing adapter config update:",u),this.clearCache(),Object.entries(u).forEach(([n,r])=>{const s=`${n}_adapter_config`;console.debug(`[AdapterConfigManager] Caching config for ${n}:`,r),this.configCache.set(s,r)}),console.debug(`[AdapterConfigManager] Updated cache for ${Object.keys(u).length} adapters`),console.debug("[AdapterConfigManager] Current cache keys:",Array.from(this.configCache.keys()))}async getAdapterConfig(u,n){const r=`${u}_adapter_config${n?`_${n}`:""}`;if(console.debug(`[AdapterConfigManager] Getting adapter config for ${u} (${n||"default"})`),console.debug(`[AdapterConfigManager] Cache key: ${r}`),console.debug("[AdapterConfigManager] Current cache keys:",Array.from(this.configCache.keys())),this.configCache.has(r))return console.debug(`[AdapterConfigManager] Using cached config for ${u} (${n||"default"})`),this.configCache.get(r);let s;try{const d=await this.getRemoteConfig(r);d?(console.debug(`[AdapterConfigManager] Loaded remote config for ${u} (${n||"default"}):`,d),s=this.mergeWithDefaults(d,u)):(console.debug(`[AdapterConfigManager] No remote config found for ${u}, using defaults`),s=this.getDefaultConfig(u))}catch(d){console.warn(`[AdapterConfigManager] Failed to load remote config for ${u}:`,d),s=this.getDefaultConfig(u)}return this.configCache.set(r,s),console.debug(`[AdapterConfigManager] Returning Final config for ${u} (${n||"default"}): ${JSON.stringify(s)}`),s}async getSelector(u,n,r){return(await this.getAdapterConfig(u,r)).selectors[n]||""}async isFeatureEnabled(u,n,r){return(await this.getAdapterConfig(u,r)).features[n]||!1}async getUIConfig(u,n){return(await this.getAdapterConfig(u,n)).ui}clearCache(u){u?Array.from(this.configCache.keys()).filter(r=>r.startsWith(`${u}_adapter_config`)).forEach(r=>this.configCache.delete(r)):this.configCache.clear()}async getRemoteConfig(u){try{console.debug(`[AdapterConfigManager] Requesting remote config for key: ${u}`);const n=await chrome.runtime.sendMessage({type:"remote-config:get-config",payload:{key:u}});if(console.debug(`[AdapterConfigManager] Chrome runtime response for ${u}:`,n),n&&n.success&&n.data){if(n.data[u]){const r=n.data[u];return console.debug(`[AdapterConfigManager] Found remote config for ${u}:`,r),r&&typeof r=="object"&&(r.selectors||r.ui||r.features)?r:r===null?(console.debug(`[AdapterConfigManager] No remote config set for ${u}`),null):(console.warn(`[AdapterConfigManager] Invalid adapter config structure for ${u}:`,r),null)}else if(u.includes("_adapter_config")&&n.data.adapter_configs){const r=u.replace("_adapter_config",""),s=n.data.adapter_configs;if(s[r])return console.debug(`[AdapterConfigManager] Found unified remote config for ${r}:`,s[r]),s[r]}else if(typeof n.data=="object"&&(n.data.selectors||n.data.ui||n.data.features))return console.debug(`[AdapterConfigManager] Found direct remote config object for ${u}:`,n.data),n.data}return console.debug(`[AdapterConfigManager] No valid remote config found for ${u}`),null}catch(n){return console.error(`[AdapterConfigManager] Error fetching remote config for ${u}:`,n),null}}getDefaultConfig(u){switch(u.toLowerCase()){case"gemini":return{...gw};case"chatgpt":return{...mT};default:return console.warn(`[AdapterConfigManager] No default config found for ${u}, using Gemini defaults`),{...gw}}}mergeWithDefaults(u,n){var R,A,_,H,re,G,ue,ye,ce,be,J;const r=this.getDefaultConfig(n),s=u.overrides,d=(s==null?void 0:s.selectors)===!0,p=(s==null?void 0:s.features)===!0,v=((R=s==null?void 0:s.ui)==null?void 0:R.all)===!0,w=d&&u.selectors?this.validateAndSanitizeSelectors(u.selectors,r.selectors):{...r.selectors,...u.selectors},S=v&&u.ui?this.validateAndSanitizeUI(u.ui,r.ui):{...r.ui,...u.ui,typing:this.mergeUISection("typing",r.ui.typing,(A=u.ui)==null?void 0:A.typing,(_=s==null?void 0:s.ui)==null?void 0:_.typing),animations:this.mergeUISection("animations",r.ui.animations,(H=u.ui)==null?void 0:H.animations,(re=s==null?void 0:s.ui)==null?void 0:re.animations),retry:this.mergeUISection("retry",r.ui.retry,(G=u.ui)==null?void 0:G.retry,(ue=s==null?void 0:s.ui)==null?void 0:ue.retry),fileUpload:this.mergeUISection("fileUpload",r.ui.fileUpload,(ye=u.ui)==null?void 0:ye.fileUpload,(ce=s==null?void 0:s.ui)==null?void 0:ce.fileUpload),polling:this.mergeUISection("polling",r.ui.polling,(be=u.ui)==null?void 0:be.polling,(J=s==null?void 0:s.ui)==null?void 0:J.polling)},k=p&&u.features?this.validateAndSanitizeFeatures(u.features,r.features):{...r.features,...u.features};let I={...r,...u,selectors:w,ui:S,features:k};return s!=null&&s.keys&&Array.isArray(s.keys)&&(I=this.applyKeyOverrides(I,u,s.keys)),I}mergeUISection(u,n,r,s){return s&&r?this.validateUISection(u,r,n)?{...n,...r}:(console.warn(`[AdapterConfigManager] Override failed for ${u} - missing required properties, using merged config`),{...n,...r}):{...n,...r}}applyKeyOverrides(u,n,r){const s={...u};for(const d of r)if(d in n&&n[d]!==void 0){const p=n[d];p!=null?(s[d]=p,console.debug(`[AdapterConfigManager] Applied key override for: ${d}`)):console.warn(`[AdapterConfigManager] Skipping key override for ${d} - remote value is null/undefined`)}else console.warn(`[AdapterConfigManager] Skipping key override for ${d} - not found in remote config`);return s}validateUISection(u,n,r){if(!n||typeof n!="object")return!1;const s=Object.keys(r),d=Object.keys(n),p=Math.ceil(s.length*.5),v=s.filter(S=>d.includes(S)).length,w=v>=p;return w||console.warn(`[AdapterConfigManager] UI section ${u} validation failed: ${v}/${s.length} keys present (required: ${p})`),w}validateAndSanitizeSelectors(u,n){return!u||typeof u!="object"?(console.warn("[AdapterConfigManager] Invalid remote selectors for override, using defaults"),n):["chatInput","submitButton"].every(d=>d in u&&typeof u[d]=="string"&&u[d].trim().length>0)?{...n,...u}:(console.warn("[AdapterConfigManager] Remote selectors missing core selectors, merging with defaults"),{...n,...u})}validateAndSanitizeFeatures(u,n){if(!u||typeof u!="object")return console.warn("[AdapterConfigManager] Invalid remote features for override, using defaults"),n;const r={...n};for(const[s,d]of Object.entries(u))typeof d=="boolean"?r[s]=d:console.warn(`[AdapterConfigManager] Invalid feature value for ${s}: ${d}, keeping default`);return r}validateAndSanitizeUI(u,n){return!u||typeof u!="object"?(console.warn("[AdapterConfigManager] Invalid remote UI config for override, using defaults"),n):{...n,...u,typing:u.typing||n.typing,animations:u.animations||n.animations,retry:u.retry||n.retry,fileUpload:u.fileUpload||n.fileUpload,polling:u.polling||n.polling}}};U(Tu,"instance");let H0=Tu;const gv=H0.getInstance(),Tf=class Tf extends or{constructor(){super();U(this,"name","GeminiAdapter");U(this,"version","2.0.0");U(this,"hostnames",["gemini.google.com"]);U(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);U(this,"config",null);U(this,"fallbackSelectors",{CHAT_INPUT:'div.ql-editor.textarea.new-input-ui p, .ql-editor p, div[contenteditable="true"]',SUBMIT_BUTTON:'button.mat-mdc-icon-button.send-button, button[aria-label*="Send"], button[data-testid="send-button"]',FILE_UPLOAD_BUTTON:'button[aria-label="Add files"], button[aria-label*="attach"]',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".chat-web, .main-content, .conversation-container",DROP_ZONE:"div[xapfileselectordropzone], .text-input-field, .input-area, .ql-editor, .chat-input-container",FILE_PREVIEW:".file-preview, .xap-filed-upload-preview, .attachment-preview",BUTTON_INSERTION_CONTAINER:".leading-actions-wrapper, .input-area .actions, .chat-input-actions",FALLBACK_INSERTION:".input-area, .chat-input-container, .conversation-input"});U(this,"lastUrl","");U(this,"urlCheckInterval",null);U(this,"mcpPopoverContainer",null);U(this,"mutationObserver",null);U(this,"popoverCheckInterval",null);U(this,"storeEventListenersSetup",!1);U(this,"domObserversSetup",!1);U(this,"uiIntegrationSetup",!1);U(this,"instanceId");U(this,"geminiStylesInjected",!1);Tf.instanceCount++,this.instanceId=Tf.instanceCount,console.debug(`[GeminiAdapter] Instance #${this.instanceId} created. Total instances: ${Tf.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Gemini adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Gemini adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners(),await this.initializeConfig(),this.setupConfigUpdateListener()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Gemini adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Gemini adapter instance #${this.instanceId}...`),this.injectGeminiButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Gemini adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Gemini adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Gemini adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers();const n=document.getElementById("mcp-gemini-button-styles");n&&(n.remove(),this.geminiStylesInjected=!1),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.geminiStylesInjected=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Gemini chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.getSelector("chatInput").split(", ");for(const p of d)if(s=document.querySelector(p.trim()),s){this.context.logger.debug(`Found chat input using selector: ${p.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Gemini chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{const d=s.textContent||"";s.focus();const p=d?d+`
`+n:n;return s.textContent=p,s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{bubbles:!0})),this.emitExecutionCompleted("insertText",{text:n},{success:!0,originalLength:d.length,newLength:n.length,totalLength:p.length}),this.context.logger.debug(`Text inserted successfully. Original: ${d.length}, Added: ${n.length}, Total: ${p.length}`),!0}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Gemini chat input: ${p}`),this.emitExecutionFailed("insertText",p),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit Gemini chat input");let r=null;const s=this.getSelector("submitButton").split(", ");for(const p of s)if(r=document.querySelector(p.trim()),r){this.context.logger.debug(`Found submit button using selector: ${p.trim()}`);break}if(!r)return this.context.logger.error("Could not find Gemini submit button"),this.emitExecutionFailed("submitForm","Submit button not found"),!1;try{if(r.disabled)return this.context.logger.warn("Gemini submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const p=r.getBoundingClientRect();return p.width===0||p.height===0?(this.context.logger.warn("Gemini submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("Gemini chat input submitted successfully"),!0)}catch(p){const v=p instanceof Error?p.message:String(p);return this.context.logger.error(`Error submitting Gemini chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async attachFile(n,r){var s;this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;if(!await this.injectFileDropListener())return this.emitExecutionFailed("attachFile","Failed to inject file drop listener"),!1;const p=await this.readFileAsDataURL(n);return window.postMessage({type:"MCP_DROP_FILE",fileName:n.name,fileType:n.type,fileSize:n.size,lastModified:n.lastModified,fileData:p},"*"),await this.checkFilePreview()?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,inputElement:((s=r==null?void 0:r.inputElement)==null?void 0:s.tagName)||"unknown"},{success:!0,previewFound:!0,method:"drag-drop-simulation"}),this.context.logger.debug(`File attached successfully: ${n.name}`),!0):(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,previewFound:!1,method:"drag-drop-simulation"}),this.context.logger.debug(`File attachment initiated (preview not confirmed): ${n.name}`),!0)}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error attaching file to Gemini: ${p}`),this.emitExecutionFailed("attachFile",p),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Gemini adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Gemini adapter`),!1;const p=[/^https:\/\/gemini\.google\.com\/u\/\d+\/app\/.*/,/^https:\/\/gemini\.google\.com\/.*/,/^https:\/\/gemini\.google\.com\/chat\/.*/,/^https:\/\/gemini\.google\.com\/u\/\d+\/chat\/.*/].some(v=>v.test(r));return p?this.context.logger.debug(`Gemini adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),p}supportsFileUpload(){this.context.logger.debug("Checking file upload support for Gemini");const n=this.getSelector("dropZone").split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.getSelector("fileUploadButton").split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.getSelector("fileInput"))?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}getGeminiButtonStyles(){return`
      /* Gemini MCP Button Styles - Matching toolbox-drawer-item style */
      .mcp-gemini-button-base {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        box-sizing: border-box;
        min-width: 40px;
        height: 40px;
        padding: 8px 12px;
        margin: 0 2px;
        border: none;
        border-radius: 20px;
        background: transparent;
        color: #3c4043;
        font-family: 'Google Sans', Roboto, Arial, sans-serif;
        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.2s cubic-bezier(0.2, 0.0, 0.2, 1);
        overflow: hidden;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        outline: none;
        /* Match toolbox drawer item appearance */
        letter-spacing: 0.0178571429em;
      }

      /* Hover state - matches Material Design ripple */
      .mcp-gemini-button-base:hover {
        background-color: rgba(60, 64, 67, 0.04);
      }

      /* Active/pressed state */
      .mcp-gemini-button-base:active {
        background-color: rgba(60, 64, 67, 0.08);
        transform: scale(0.98);
      }

      /* Focus state for accessibility */
      .mcp-gemini-button-base:focus-visible {
        outline: 2px solid #1a73e8;
        outline-offset: 2px;
      }

      /* Active toggle state - matches Gemini's toolbox drawer pressed state */
      .mcp-gemini-button-base.mcp-button-active {
        background-color: rgba(138, 180, 248, 0.2);
        color: #1557c0;
      }

      .mcp-gemini-button-base.mcp-button-active:hover {
        background-color: rgba(138, 180, 248, 0.24);
      }

      /* Button content container */
      .mcp-gemini-button-content {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        position: relative;
        z-index: 1;
      }

      /* Text styling to match GDS label */
      .mcp-gemini-button-text {
        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
        letter-spacing: 0.0178571429em;
        white-space: nowrap;
      }

      /* Material ripple effect overlay */
      .mcp-gemini-button-base::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: currentColor;
        opacity: 0;
        border-radius: inherit;
        transition: opacity 0.15s cubic-bezier(0.2, 0.0, 0.2, 1);
        pointer-events: none;
      }

      .mcp-gemini-button-base:hover::before {
        opacity: 0.04;
      }

      .mcp-gemini-button-base:active::before {
        opacity: 0.08;
      }

      /* Icon styling matching Google Material Symbols */
      .mcp-gemini-button-base .mcp-button-icon {
        width: 20px;
        height: 20px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        line-height: 1;
        font-family: 'Material Symbols Outlined', 'Google Material Icons';
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .mcp-gemini-button-base {
          color: #e8eaed;
        }

        .mcp-gemini-button-base:hover {
          background-color: rgba(232, 234, 237, 0.04);
        }

        .mcp-gemini-button-base:active {
          background-color: rgba(232, 234, 237, 0.08);
        }

        .mcp-gemini-button-base.mcp-button-active {
          background-color: rgba(138, 180, 248, 0.12);
          color: #8ab4f8;
        }

        .mcp-gemini-button-base.mcp-button-active:hover {
          background-color: rgba(138, 180, 248, 0.16);
        }
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        .mcp-gemini-button-base {
          border: 1px solid currentColor;
        }

        .mcp-gemini-button-base:focus-visible {
          outline-width: 3px;
        }
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        .mcp-gemini-button-base {
          transition: none;
        }

        .mcp-gemini-button-base:active {
          transform: none;
        }

        .mcp-gemini-button-base::before {
          transition: none;
        }
      }

      /* Integration with Gemini's toolbox drawer layout */
      .leading-actions-wrapper .mcp-gemini-button-base,
      .input-area .mcp-gemini-button-base,
      .chat-input-actions .mcp-gemini-button-base {
        margin: 0 2px;
      }

      /* Ensure proper stacking with Gemini's UI elements */
      .mcp-gemini-button-base {
        position: relative;
        z-index: 1;
      }

      /* Match the exact styling of toolbox drawer items when in sidebar */
      .toolbox-drawer-item-button .mcp-gemini-button-base,
      .mcp-gemini-button-base.toolbox-style {
        width: 100%;
        height: 48px;
        padding: 12px 16px;
        margin: 0;
        border-radius: 0;
        justify-content: flex-start;
        gap: 12px;
        font-size: 14px;
        line-height: 20px;
      }

      .toolbox-drawer-item-button .mcp-gemini-button-base .mcp-button-icon,
      .mcp-gemini-button-base.toolbox-style .mcp-button-icon {
        width: 24px;
        height: 24px;
        font-size: 24px;
        margin-right: 12px;
      }

      .toolbox-drawer-item-button .mcp-gemini-button-base .mcp-gemini-button-text,
      .mcp-gemini-button-base.toolbox-style .mcp-gemini-button-text {
        text-align: left;
        flex: 1;
      }
    `}injectGeminiButtonStyles(){if(this.geminiStylesInjected){this.context.logger.debug("Gemini button styles already injected, skipping");return}try{const n="mcp-gemini-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getGeminiButtonStyles(),document.head.appendChild(s),this.geminiStylesInjected=!0,this.context.logger.debug("Gemini button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject Gemini button styles:",n)}}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Gemini adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Gemini adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Gemini adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.error("Failed to wait for page ready for MCP popover injection:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=15,p=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug(`Page ready for MCP popover injection (attempt ${s}/${d})`),n()):s>=d?(this.context.logger.warn(`Failed to find button insertion point after ${d} attempts, giving up`),r(new Error(`Could not find insertion point after ${d} attempts`))):(this.context.logger.debug(`Button insertion point not found, retrying... (attempt ${s}/${d})`),setTimeout(p,500))};setTimeout(p,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Gemini adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Gemini adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Gemini adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Gemini adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const r=this.getSelector("buttonInsertionContainer").split(", ");for(const d of r){const p=document.querySelector(d.trim());if(p){this.context.logger.debug(`Found insertion point: ${d.trim()}`);const v=p.querySelectorAll("button"),w=v.length>1?v[1]:v.length>0?v[0]:null;return{container:p,insertAfter:w}}}const s=[".input-area .actions",".chat-input-actions",".conversation-input .actions"];for(const d of s){const p=document.querySelector(d);if(p)return this.context.logger.debug(`Found fallback insertion point: ${d}`),{container:p,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Gemini interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>tr).then(r=>{Promise.resolve().then(()=>ir).then(s=>{Promise.resolve().then(()=>sr).then(({MCPPopover:d})=>{const p=this.createToggleStateManager(),v={className:"mcp-gemini-button-base",contentClassName:"mcp-gemini-button-content",textClassName:"mcp-gemini-button-text",activeClassName:"mcp-button-active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:p,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context,r={getState:()=>{var s;try{const d=n.stores.ui,p=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${p}, autoSubmit=${v}`),{mcpEnabled:p,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,p;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(p=n.stores.ui)!=null&&p.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(w=>{n.logger.error("Error showing sidebar:",w)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(w=>{n.logger.error("Error hiding sidebar:",w)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),p=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(p)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}getSelector(n){var s;return(s=this.config)!=null&&s.selectors[n]?this.config.selectors[n]:{chatInput:this.fallbackSelectors.CHAT_INPUT,submitButton:this.fallbackSelectors.SUBMIT_BUTTON,fileUploadButton:this.fallbackSelectors.FILE_UPLOAD_BUTTON,fileInput:this.fallbackSelectors.FILE_INPUT,mainPanel:this.fallbackSelectors.MAIN_PANEL,dropZone:this.fallbackSelectors.DROP_ZONE,filePreview:this.fallbackSelectors.FILE_PREVIEW,buttonInsertionContainer:this.fallbackSelectors.BUTTON_INSERTION_CONTAINER,fallbackInsertion:this.fallbackSelectors.FALLBACK_INSERTION,newChatButton:"",conversationHistory:"",conversationItem:"",messageContainer:"",userMessage:"",aiMessage:"",loadingIndicator:"",typingIndicator:"",toolbar:"",toolbarActions:"",settingsButton:"",optionsMenu:"",voiceInputButton:"",modelSelector:"",responseActions:"",copyButton:"",regenerateButton:"",shareButton:"",errorMessage:"",retryButton:""}[n]||""}async initializeConfig(){var n,r;try{gv.initialize(this.context),this.config=await gv.getAdapterConfig("gemini"),(n=this.context)==null||n.logger.debug("[GeminiAdapter] Configuration loaded successfully")}catch(s){(r=this.context)==null||r.logger.warn("[GeminiAdapter] Failed to load configuration, using defaults:",s),this.config=null}}setupConfigUpdateListener(){var n;(n=this.context)==null||n.eventBus.on("remote-config:updated",r=>{var s;r.changes.includes("gemini_adapter_config")&&((s=this.context)==null||s.logger.debug("[GeminiAdapter] Remote config updated, refreshing configuration"),this.refreshConfig())})}async refreshConfig(){var n,r;try{gv.clearCache("gemini"),this.config=await gv.getAdapterConfig("gemini"),(n=this.context)==null||n.logger.debug("[GeminiAdapter] Configuration refreshed successfully")}catch(s){(r=this.context)==null||r.logger.warn("[GeminiAdapter] Failed to refresh configuration:",s)}}async injectFileDropListener(){try{const n=this.context.chrome.runtime.getURL("dragDropListener.js"),r=document.createElement("script");return r.src=n,await new Promise((s,d)=>{r.onload=()=>s(),r.onerror=()=>d(new Error("Failed to load drop listener script")),(document.head||document.documentElement).appendChild(r)}),r.remove(),!0}catch(n){return this.context.logger.error("Failed to inject file drop listener:",n),!1}}readFileAsDataURL(n){return new Promise((r,s)=>{const d=new FileReader;d.onload=()=>r(d.result),d.onerror=()=>s(d.error),d.readAsDataURL(n)})}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{document.querySelector(this.getSelector("filePreview"))?(this.context.logger.debug("File preview element found after attachment"),n(!0)):(this.context.logger.warn("File preview element not found after attachment"),n(!1))},500)})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`gemini-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Gemini page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(this.injectGeminiButtonStyles(),setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Gemini host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Gemini adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Gemini adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};U(Tf,"instanceCount",0);let F0=Tf;const kf=class kf extends or{constructor(){super();U(this,"name","GitHubCopilotAdapter");U(this,"version","2.0.0");U(this,"hostnames",["github.com/copilot"]);U(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);U(this,"selectors",{CHAT_INPUT:'#copilot-chat-textarea, .ChatInput-module__input--iApWs, textarea[placeholder*="How can I help"]',SUBMIT_BUTTON:'button[aria-labelledby*="Send"], button:has(.octicon-paper-airplane), .ChatInput-module__toolbarRight--PiQJn button[type="button"]:last-child',FILE_UPLOAD_BUTTON:'button[data-testid="attachment-menu-button"], button[aria-label*="Attach"], button:has(.octicon-paperclip)',FILE_INPUT:'#image-uploader, input[type="file"][accept*=".md"], input[type="file"][accept*=".txt"], input[type="file"][hidden], input[type="file"][multiple]',MAIN_PANEL:".Layout-module__chatInputContainer--DXrKy, .ChatInput-module__container--NFzCy, main",DROP_ZONE:".ChatInput-module__inputContainer--BcExV, .Layout-module__chatInputContainer--DXrKy, #copilot-chat-textarea",FILE_PREVIEW:".file-preview, .attachment-preview, .ChatInput-module__attachment",BUTTON_INSERTION_CONTAINER:".ChatInput-module__toolbarLeft--cjV2H, .ChatInput-module__toolbar--ZtCiG, .ChatInput-module__toolbarRight--PiQJn",FALLBACK_INSERTION:".ChatInput-module__container--NFzCy, .Layout-module__chatInputContainer--DXrKy"});U(this,"lastUrl","");U(this,"urlCheckInterval",null);U(this,"mcpPopoverContainer",null);U(this,"mutationObserver",null);U(this,"popoverCheckInterval",null);U(this,"storeEventListenersSetup",!1);U(this,"domObserversSetup",!1);U(this,"uiIntegrationSetup",!1);U(this,"instanceId");U(this,"adapterStylesInjected",!1);kf.instanceCount++,this.instanceId=kf.instanceCount,console.debug(`[GitHubCopilotAdapter] Instance #${this.instanceId} created. Total instances: ${kf.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`GitHub Copilot adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing GitHub Copilot adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners(),this.injectGitHubButtonStyles()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`GitHub Copilot adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating GitHub Copilot adapter instance #${this.instanceId}...`),this.injectGitHubButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("GitHub Copilot adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating GitHub Copilot adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up GitHub Copilot adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null);const n=document.getElementById("mcp-github-copilot-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1,this.context.logger.debug("GitHub Copilot button styles removed")),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){var d;this.context.logger.debug(`Attempting to insert text into GitHub Copilot chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const p=this.selectors.CHAT_INPUT.split(", ");for(const v of p)if(s=document.querySelector(v.trim()),s){this.context.logger.debug(`Found chat input using selector: ${v.trim()}`);break}}if(!s)return this.context.logger.error("Could not find GitHub Copilot chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{const p=s.value||"";s.focus();const v=p?p+`
`+n:n;s.value=v,s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{bubbles:!0}));const w=(d=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value"))==null?void 0:d.set;if(w){w.call(s,v);const S=new Event("input",{bubbles:!0});s.dispatchEvent(S)}return this.emitExecutionCompleted("insertText",{text:n},{success:!0,originalLength:p.length,newLength:n.length,totalLength:v.length}),this.context.logger.debug(`Text inserted successfully. Original: ${p.length}, Added: ${n.length}, Total: ${v.length}`),!0}catch(p){const v=p instanceof Error?p.message:String(p);return this.context.logger.error(`Error inserting text into GitHub Copilot chat input: ${v}`),this.emitExecutionFailed("insertText",v),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit GitHub Copilot chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const p of s)if(r=document.querySelector(p.trim()),r){this.context.logger.debug(`Found submit button using selector: ${p.trim()}`);break}if(!r)return this.context.logger.error("Could not find GitHub Copilot submit button"),this.emitExecutionFailed("submitForm","Submit button not found"),!1;try{if(r.disabled)return this.context.logger.warn("GitHub Copilot submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const p=r.getBoundingClientRect();return p.width===0||p.height===0?(this.context.logger.warn("GitHub Copilot submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("GitHub Copilot chat input submitted successfully"),!0)}catch(p){const v=p instanceof Error?p.message:String(p);return this.context.logger.error(`Error submitting GitHub Copilot chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let s=r==null?void 0:r.inputElement;if(!s){const p=this.selectors.FILE_INPUT.split(", ");for(const v of p)if(s=document.querySelector(v.trim()),s){this.context.logger.debug(`Found file input using selector: ${v.trim()}`);break}}if(s&&await this.tryDirectFileInput(s,n))return!0;const d=document.querySelector(this.selectors.FILE_UPLOAD_BUTTON);return d&&await this.tryAttachmentButtonApproach(d,n)?!0:(this.emitExecutionFailed("attachFile","Could not find file input or upload button"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to GitHub Copilot: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if GitHub Copilot adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by GitHub Copilot adapter`),!1;const p=[/^https:\/\/github\.com\/copilot$/,/^https:\/\/github\.com\/copilot\/.*$/,/^https:\/\/github\.com\/features\/copilot.*$/,/^https:\/\/copilot\.github\.com\/.*$/].some(v=>v.test(r));return p?this.context.logger.debug(`GitHub Copilot adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),p}supportsFileUpload(){this.context.logger.debug("Checking file upload support for GitHub Copilot");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}async tryDirectFileInput(n,r){var s;try{this.context.logger.debug(`Using file input: ${n.id||n.className}`);const d=new DataTransfer;d.items.add(r);const p=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"files");p&&p.set?p.set.call(n,d.files):Object.defineProperty(n,"files",{value:d.files,writable:!1});const v=(s=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"files"))==null?void 0:s.set;v&&v.call(n,d.files);const w=new Event("change",{bubbles:!0,cancelable:!0});Object.defineProperty(w,"target",{writable:!1,value:n}),Object.defineProperty(w,"currentTarget",{writable:!1,value:n}),n.dispatchEvent(w);const S=new Event("input",{bubbles:!0,cancelable:!0});return Object.defineProperty(S,"target",{writable:!1,value:n}),n.dispatchEvent(S),this.emitExecutionCompleted("attachFile",{fileName:r.name,fileType:r.type,fileSize:r.size,inputElement:n.tagName},{success:!0,method:"direct-file-input"}),this.context.logger.debug(`File attached successfully via input element: ${r.name}`),!0}catch(d){return this.context.logger.warn(`Direct file input method failed: ${d}`),!1}}async tryAttachmentButtonApproach(n,r){try{const s=document.querySelector("#copilot-chat-textarea");return s&&(this.context.logger.debug("Simulating drag and drop on chat textarea"),await new Promise(d=>{setTimeout(()=>{this.simulateFileDrop(s,r),d()},200)})),this.emitExecutionCompleted("attachFile",{fileName:r.name,fileType:r.type,fileSize:r.size},{success:!0,method:"upload-button-trigger"}),this.context.logger.debug(`File attachment initiated via upload button: ${r.name}`),!0}catch(s){return this.context.logger.warn(`Upload button method failed: ${s}`),!1}}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for GitHub Copilot adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for GitHub Copilot adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for GitHub Copilot adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,p=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(p,500)};setTimeout(p,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for GitHub Copilot adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for GitHub Copilot adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in GitHub Copilot adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("GitHub Copilot adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector(".ChatInput-module__toolbarLeft--cjV2H");if(n){this.context.logger.debug("Found insertion point: .ChatInput-module__toolbarLeft--cjV2H");const d=n.querySelector('button[data-testid="attachment-menu-button"]');return{container:n,insertAfter:d}}const r=document.querySelector(".ChatInput-module__toolbar--ZtCiG");if(r)return this.context.logger.debug("Found fallback insertion point: .ChatInput-module__toolbar--ZtCiG"),{container:r,insertAfter:null};const s=[".ChatInput-module__container--NFzCy",".Layout-module__chatInputContainer--DXrKy"];for(const d of s){const p=document.querySelector(d);if(p)return this.context.logger.debug(`Found fallback insertion point: ${d}`),{container:p,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into GitHub Copilot interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>tr).then(r=>{Promise.resolve().then(()=>ir).then(s=>{Promise.resolve().then(()=>sr).then(({MCPPopover:d})=>{const p=this.createToggleStateManager(),v={className:"mcp-gh-button-base",contentClassName:"mcp-gh-button-content",textClassName:"mcp-gh-button-text",activeClassName:"mcp-button-active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:p,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with GitHub styling")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,p=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${p}, autoSubmit=${v}`),{mcpEnabled:p,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,p;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(p=n.stores.ui)!=null&&p.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(w=>{n.logger.error("Error showing sidebar:",w)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(w=>{n.logger.error("Error hiding sidebar:",w)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),p=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(p)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{document.querySelector(this.selectors.FILE_PREVIEW)?(this.context.logger.debug("File preview element found after attachment"),n(!0)):(this.context.logger.warn("File preview element not found after attachment"),n(!1))},500)})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`github-copilot-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`GitHub Copilot page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.injectGitHubButtonStyles()},500),setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`GitHub Copilot host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("GitHub Copilot adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in GitHub Copilot adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}getGitHubCopilotButtonStyles(){return`
/* GitHub Copilot MCP Button Styles - Matches Primer React Components */
.mcp-gh-button-base {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
  font-size: 14px;
  font-weight: 500;
  line-height: 20px;
  white-space: nowrap;
  vertical-align: middle;
  cursor: pointer;
  user-select: none;
  border-radius: 6px;
  appearance: none;
  text-decoration: none;
  text-align: center;
  border: 0;
  transition: 80ms cubic-bezier(0.65, 0, 0.35, 1);
  transition-property: color, fill, background-color, border-color;
  
  /* Medium size styling */
  height: 32px;
  padding: 0 12px;
  gap: 8px;
  min-width: max-content;
  
  /* Invisible variant - matches GitHub's invisible button style */
  color: var(--fgColor-muted, #656d76);
  background-color: transparent;
  border: 1px solid transparent;
  box-shadow: none;
}

.mcp-gh-button-base:hover:not(:disabled) {
  background-color: var(--control-transparent-bgColor-hover, rgba(175, 184, 193, 0.2));
  color: var(--fgColor-default, #1f2328);
  text-decoration: none;
  transition-duration: 80ms;
}

.mcp-gh-button-base:active:not(:disabled) {
  background-color: var(--control-transparent-bgColor-active, rgba(175, 184, 193, 0.3));
  transition: none;
}

.mcp-gh-button-base:focus:not(:disabled) {
  outline: 2px solid var(--focus-outlineColor, #0969da);
  outline-offset: -2px;
  box-shadow: none;
}

.mcp-gh-button-base:disabled {
  color: var(--control-fgColor-disabled, #8c959f);
  cursor: not-allowed;
}

.mcp-gh-button-base.mcp-button-active {
  background-color: var(--control-transparent-bgColor-selected, rgba(175, 184, 193, 0.15));
  color: var(--fgColor-accent, #0969da);
}

.mcp-gh-button-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  flex: 1 1 auto;
}

.mcp-gh-button-text {
  flex: 1 1 auto;
  font-weight: 500;
  font-size: 14px;
  line-height: 20px;
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .mcp-gh-button-base {
    color: var(--fgColor-muted, #8b949e);
  }
  
  .mcp-gh-button-base:hover:not(:disabled) {
    background-color: var(--control-transparent-bgColor-hover, rgba(177, 186, 196, 0.12));
    color: var(--fgColor-default, #e6edf3);
  }
  
  .mcp-gh-button-base:active:not(:disabled) {
    background-color: var(--control-transparent-bgColor-active, rgba(177, 186, 196, 0.2));
  }
  
  .mcp-gh-button-base:focus:not(:disabled) {
    outline-color: var(--focus-outlineColor, #2f81f7);
  }
  
  .mcp-gh-button-base:disabled {
    color: var(--control-fgColor-disabled, #484f58);
  }
  
  .mcp-gh-button-base.mcp-button-active {
    background-color: var(--control-transparent-bgColor-selected, rgba(177, 186, 196, 0.08));
    color: var(--fgColor-accent, #2f81f7);
  }
}

/* Ensure button looks consistent with GitHub's toolbar */
.ChatInput-module__toolbarLeft--cjV2H .mcp-gh-button-base,
.ChatInput-module__toolbar--ZtCiG .mcp-gh-button-base {
  margin: 0 2px;
}

/* Additional refinements for better integration */
.mcp-gh-button-base svg {
  flex-shrink: 0;
  vertical-align: text-bottom;
}

.mcp-gh-button-base:focus-visible {
  outline: 2px solid var(--focus-outlineColor, #0969da);
  outline-offset: -2px;
}

.mcp-gh-button-base:not(:focus-visible) {
  outline: none;
}
`}injectGitHubButtonStyles(){if(this.adapterStylesInjected){this.context.logger.debug("GitHub button styles already injected, skipping");return}try{const n="mcp-github-copilot-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getGitHubCopilotButtonStyles(),document.head.appendChild(s),this.adapterStylesInjected=!0,this.context.logger.debug("GitHub Copilot button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject GitHub button styles:",n)}}simulateFileDrop(n,r){this.context.logger.debug(`Simulating file drop for: ${r.name} on element:`,n);try{const s=new DataTransfer;s.items.add(r);const d=new DragEvent("dragenter",{bubbles:!0,cancelable:!0,dataTransfer:s}),p=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:s}),v=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:s});n.dispatchEvent(d),n.dispatchEvent(p),n.dispatchEvent(v),this.context.logger.debug("File drop simulation completed")}catch(s){this.context.logger.error("Error simulating file drop:",s)}}};U(kf,"instanceCount",0);let q0=kf;const Mf=class Mf extends or{constructor(){super();U(this,"name","DeepSeekAdapter");U(this,"version","2.0.0");U(this,"hostnames",["chat.deepseek.com"]);U(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);U(this,"selectors",{CHAT_INPUT:'textarea[spellcheck="false"], textarea[data-gramm="false"], textarea[placeholder*="Ask"], textarea.chat-input, div[contenteditable="true"]',SUBMIT_BUTTON:'button[aria-label*="Send"], button[data-testid="send-button"], button.send-button, svg.send-icon',FILE_UPLOAD_BUTTON:'button[aria-label*="attach"], button[aria-label*="file"], input[type="file"]',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".chat-container, .main-content, .conversation-container, .chat-interface",DROP_ZONE:".chat-input-container, .input-area, .message-input, .chat-input, .file-drop-area",FILE_PREVIEW:".file-preview, .attachment-preview, .uploaded-file",BUTTON_INSERTION_CONTAINER:".ec4f5d61, .chat-input-actions, .input-actions, .actions-wrapper",FALLBACK_INSERTION:".input-area, .chat-input-container, ._24fad49, .bf38813a, .aaff8b8f"});U(this,"lastUrl","");U(this,"urlCheckInterval",null);U(this,"mcpPopoverContainer",null);U(this,"mutationObserver",null);U(this,"popoverCheckInterval",null);U(this,"storeEventListenersSetup",!1);U(this,"domObserversSetup",!1);U(this,"uiIntegrationSetup",!1);U(this,"instanceId");Mf.instanceCount++,this.instanceId=Mf.instanceCount,console.debug(`[DeepSeekAdapter] Instance #${this.instanceId} created. Total instances: ${Mf.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`DeepSeek adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing DeepSeek adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`DeepSeek adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating DeepSeek adapter instance #${this.instanceId}...`),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("DeepSeek adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating DeepSeek adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up DeepSeek adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into DeepSeek chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const p of d)if(s=document.querySelector(p.trim()),s){this.context.logger.debug(`Found chat input using selector: ${p.trim()}`);break}}if(!s)return this.context.logger.error("Could not find DeepSeek chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{if(s.focus(),s.tagName==="TEXTAREA"){const d=s,p=d.value,v=p?p+`

`+n:n;d.value=v,d.selectionStart=d.selectionEnd=d.value.length,d.dispatchEvent(new InputEvent("input",{bubbles:!0})),d.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug(`Text inserted into textarea successfully. Original: ${p.length}, Added: ${n.length}, Total: ${v.length}`)}else if(s.getAttribute("contenteditable")==="true"){const d=s.textContent||"",p=window.getSelection(),v=document.createRange();v.selectNodeContents(s),v.collapse(!1),p==null||p.removeAllRanges(),p==null||p.addRange(v),d&&d.trim()!==""&&document.execCommand("insertText",!1,`

`),document.execCommand("insertText",!1,n),s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug("Text inserted into contenteditable successfully")}else{const d=s.value||s.textContent||"",p=d?d+`

`+n:n;"value"in s?s.value=p:s.textContent=p,s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug("Text inserted using fallback method")}return this.emitExecutionCompleted("insertText",{text:n},{success:!0,targetElementType:s.tagName,insertedLength:n.length}),!0}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into DeepSeek chat input: ${p}`),this.emitExecutionFailed("insertText",p),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit DeepSeek chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const p of s)if(r=document.querySelector(p.trim()),r){this.context.logger.debug(`Found submit button using selector: ${p.trim()}`);break}if(!r)return this.context.logger.warn("Could not find DeepSeek submit button, trying Enter key press"),this.tryEnterKeySubmission();try{if(r.disabled)return this.context.logger.warn("DeepSeek submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const p=r.getBoundingClientRect();return p.width===0||p.height===0?(this.context.logger.warn("DeepSeek submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("DeepSeek chat input submitted successfully"),!0)}catch(p){const v=p instanceof Error?p.message:String(p);return this.context.logger.error(`Error submitting DeepSeek chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async tryEnterKeySubmission(){try{const n=document.querySelector(this.selectors.CHAT_INPUT.split(", ")[0].trim());if(!n)return this.context.logger.error("Cannot find chat input for Enter key submission"),this.emitExecutionFailed("submitForm","Chat input not found for Enter key submission"),!1;const r=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});return n.focus(),n.dispatchEvent(r),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey",fallback:!0}),this.context.logger.debug("DeepSeek chat input submitted using Enter key"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error submitting DeepSeek chat input via Enter key: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let s=null;return r!=null&&r.inputElement?s=r.inputElement:s=document.querySelector(this.selectors.FILE_INPUT),s&&await this.attachFileToInput(n,s)?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,method:"fileInput"},{success:!0,attachmentMethod:"direct-input"}),!0):await this.simulateFileDrop(n)?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,method:"dragDrop"},{success:!0,attachmentMethod:"drag-drop-simulation"}),!0):(this.emitExecutionFailed("attachFile","All file attachment methods failed"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to DeepSeek: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}async attachFileToInput(n,r){try{const s=new DataTransfer;return s.items.add(n),r.files=s.files,r.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug(`File attached directly to input: ${n.name}`),!0}catch(s){return this.context.logger.error("Error attaching file to input:",s),!1}}async simulateFileDrop(n){try{const r=this.selectors.DROP_ZONE.split(", ");let s=null;for(const S of r)if(s=document.querySelector(S.trim()),s)break;if(!s)return this.context.logger.warn("No drop zone found for file drop simulation"),!1;const d=new DataTransfer;d.items.add(n);const p=new DragEvent("dragenter",{bubbles:!0,dataTransfer:d}),v=new DragEvent("dragover",{bubbles:!0,dataTransfer:d}),w=new DragEvent("drop",{bubbles:!0,dataTransfer:d});return s.dispatchEvent(p),s.dispatchEvent(v),s.dispatchEvent(w),this.context.logger.debug(`File drop simulated for: ${n.name}`),!0}catch(r){return this.context.logger.error("Error simulating file drop:",r),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if DeepSeek adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by DeepSeek adapter`),!1;const p=[/^https?:\/\/(?:www\.)?chat\.deepseek\.com\/.*/,/^https?:\/\/(?:www\.)?chat\.deepseek\.com$/].some(v=>v.test(r));return p?this.context.logger.debug(`DeepSeek adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),p}supportsFileUpload(){this.context.logger.debug("Checking file upload support for DeepSeek");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for DeepSeek adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for DeepSeek adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for DeepSeek adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,p=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(p,500)};setTimeout(p,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for DeepSeek adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for DeepSeek adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in DeepSeek adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("DeepSeek adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){var s;this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector(".ec4f5d61");if(n){this.context.logger.debug("Found DeepSeek button container (.ec4f5d61)");const d=n.querySelectorAll(".ds-button");for(const v of Array.from(d))if(((s=v.textContent)==null?void 0:s.trim())==="Search")return this.context.logger.debug("Found search button, will insert after it"),{container:n,insertAfter:v};const p=n.querySelector(".ds-button:last-child");if(p)return this.context.logger.debug("Using last button as insertion point"),{container:n,insertAfter:p}}const r=["._24fad49",".bf38813a",".aaff8b8f",".chat-input-actions",".input-actions",".actions-wrapper"];for(const d of r){const p=document.querySelector(d);if(p)return this.context.logger.debug(`Found fallback insertion point: ${d}`),p.parentElement?{container:p.parentElement,insertAfter:p}:{container:p,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into DeepSeek interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>tr).then(r=>{Promise.resolve().then(()=>ir).then(s=>{Promise.resolve().then(()=>sr).then(({MCPPopover:d})=>{const p=this.createToggleStateManager();s.createRoot(n).render(r.createElement(d,{toggleStateManager:p})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,p=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${p}, autoSubmit=${v}`),{mcpEnabled:p,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,p;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(p=n.stores.ui)!=null&&p.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(w=>{n.logger.error("Error showing sidebar:",w)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(w=>{n.logger.error("Error hiding sidebar:",w)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),p=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(p)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`deepseek-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`DeepSeek page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`DeepSeek host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("DeepSeek adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in DeepSeek adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};U(Mf,"instanceCount",0);let G0=Mf;const Af=class Af extends or{constructor(){super();U(this,"name","GrokAdapter");U(this,"version","2.0.0");U(this,"hostnames",["x.com","grok.com"]);U(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);U(this,"selectors",{CHAT_INPUT:'textarea[aria-label="Ask Grok anything"], textarea[placeholder="Ask anything"], textarea[placeholder], textarea[spellcheck="false"], textarea[data-gramm="false"], div.css-146c3p1 textarea, textarea.r-30o5oe, div[contenteditable="true"]',SUBMIT_BUTTON:'button[aria-label="Submit"], button.send-button, button[aria-label="Send message"], button.chat-submit, button[data-testid="send-button"], svg.send-icon, button.submit-button',FILE_UPLOAD_BUTTON:'button[aria-label*="attach"], button[aria-label*="file"], button[data-testid="file-upload"]',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".chat-container, .grok-chat, .main-content",DROP_ZONE:'.chat-input-container, .input-area, textarea, div[contenteditable="true"]',FILE_PREVIEW:".file-preview, .attachment-preview, .file-attachment",BUTTON_INSERTION_CONTAINER:".chat-input-actions, .input-actions, .chat-controls",FALLBACK_INSERTION:".chat-input-container, .input-area, .chat-interface"});U(this,"lastUrl","");U(this,"urlCheckInterval",null);U(this,"mcpPopoverContainer",null);U(this,"mutationObserver",null);U(this,"popoverCheckInterval",null);U(this,"storeEventListenersSetup",!1);U(this,"domObserversSetup",!1);U(this,"uiIntegrationSetup",!1);U(this,"adapterStylesInjected",!1);U(this,"instanceId");Af.instanceCount++,this.instanceId=Af.instanceCount,console.debug(`[GrokAdapter] Instance #${this.instanceId} created. Total instances: ${Af.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Grok adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Grok adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Grok adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Grok adapter instance #${this.instanceId}...`),this.injectGrokButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Grok adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Grok adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Grok adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null);const n=document.getElementById("mcp-grok-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Grok chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const p of d)if(s=document.querySelector(p.trim()),s){this.context.logger.debug(`Found chat input using selector: ${p.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Grok chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{if(s.focus(),s.tagName==="TEXTAREA"){const d=s,p=d.value,v=p?p+`

`+n:n;d.value=v,d.selectionStart=d.selectionEnd=d.value.length,d.dispatchEvent(new InputEvent("input",{bubbles:!0})),d.dispatchEvent(new Event("change",{bubbles:!0}))}else if(s.getAttribute("contenteditable")==="true"){const d=s.textContent||"",p=window.getSelection(),v=document.createRange();v.selectNodeContents(s),v.collapse(!1),p==null||p.removeAllRanges(),p==null||p.addRange(v),d&&d.trim()!==""&&document.execCommand("insertText",!1,`

`),document.execCommand("insertText",!1,n),s.dispatchEvent(new InputEvent("input",{bubbles:!0}))}else{const d=s.textContent||"",p=d?d+`

`+n:n;s.textContent=p,s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0}))}return this.emitExecutionCompleted("insertText",{text:n},{success:!0,textLength:n.length,elementType:s.tagName.toLowerCase()}),this.context.logger.debug("Text inserted successfully into Grok chat input"),!0}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Grok chat input: ${p}`),this.emitExecutionFailed("insertText",p),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit Grok chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const p of s)if(r=document.querySelector(p.trim()),r){this.context.logger.debug(`Found submit button using selector: ${p.trim()}`);break}if(r)try{if(r.disabled)return this.context.logger.warn("Grok submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const p=r.getBoundingClientRect();return p.width===0||p.height===0?(this.context.logger.warn("Grok submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("Grok chat input submitted successfully via button click"),!0)}catch(p){const v=p instanceof Error?p.message:String(p);return this.context.logger.error(`Error clicking Grok submit button: ${v}`),this.emitExecutionFailed("submitForm",v),!1}this.context.logger.debug("No submit button found, trying Enter key press");try{const p=document.querySelector(this.selectors.CHAT_INPUT.split(", ")[0]);if(p){p.focus();const v=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});return p.dispatchEvent(v),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey",fallback:!0}),this.context.logger.debug("Grok chat input submitted successfully via Enter key"),!0}else return this.context.logger.error("Could not find chat input for Enter key fallback"),this.emitExecutionFailed("submitForm","Chat input not found for Enter key fallback"),!1}catch(p){const v=p instanceof Error?p.message:String(p);return this.context.logger.error(`Error with Enter key fallback: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async attachFile(n,r){var s;this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let d=null;if(r!=null&&r.inputElement?d=r.inputElement:d=document.querySelector(this.selectors.FILE_INPUT),!d)return this.context.logger.error("Could not find file input element"),this.emitExecutionFailed("attachFile","File input element not found"),!1;const p=new DataTransfer;p.items.add(n),d.files=p.files;const v=new Event("change",{bubbles:!0});return d.dispatchEvent(v),await this.checkFilePreview()?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,inputElement:((s=r==null?void 0:r.inputElement)==null?void 0:s.tagName)||"unknown"},{success:!0,previewFound:!0,method:"file-input"}),this.context.logger.debug(`File attached successfully: ${n.name}`),!0):(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,previewFound:!1,method:"file-input"}),this.context.logger.debug(`File attachment initiated (preview not confirmed): ${n.name}`),!0)}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error attaching file to Grok: ${p}`),this.emitExecutionFailed("attachFile",p),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Grok adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Grok adapter`),!1;const p=[/^https?:\/\/(?:www\.)?(?:twitter\.com|x\.com)\/i\/grok/,/^https?:\/\/(?:www\.)?grok\.com/].some(v=>v.test(r));return p?this.context.logger.debug(`Grok adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),p}supportsFileUpload(){if(this.context.logger.debug("Checking file upload support for Grok"),document.querySelector(this.selectors.FILE_INPUT))return this.context.logger.debug("Found file input element"),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;const s=this.selectors.DROP_ZONE.split(", ");for(const d of s)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;return this.context.logger.debug("No file upload support detected"),!1}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}getGrokButtonStyles(){return`
      .mcp-grok-button-base {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        white-space: nowrap;
        font-weight: 500;
        cursor: pointer;
        border: 1px solid var(--border-l2, #e5e7eb);
        border-radius: 9999px;
        height: 40px;
        min-height: 40px;
        padding: 8px 14px;
        font-size: 14px;
        line-height: 1.2;
        background-color: transparent;
        color: var(--fg-primary, #111827);
        transition: all 100ms ease-in-out;
        position: relative;
        overflow: hidden;
        user-select: none;
        font-family: inherit;
        vertical-align: middle;
        box-sizing: border-box;
        flex-direction: row;
        flex-wrap: nowrap;
      }

      .mcp-grok-button-content {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        flex-direction: row;
        flex-wrap: nowrap;
      }

      .mcp-grok-button-base:focus-visible {
        outline: none;
        box-shadow: 0 0 0 1px var(--ring, #3b82f6);
      }

      .mcp-grok-button-base:hover {
        background-color: var(--button-ghost-hover, rgba(0, 0, 0, 0.05));
      }

      .mcp-grok-button-base:hover .mcp-grok-button-icon {
        color: var(--fg-primary, #111827);
      }

      .mcp-grok-button-base:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .mcp-grok-button-base:disabled:hover {
        background-color: transparent;
      }

      .mcp-grok-button-icon {
        width: 18px;
        height: 18px;
        min-width: 18px;
        min-height: 18px;
        stroke-width: 2;
        color: var(--fg-secondary, #6b7280);
        transition: color 100ms ease-in-out;
        flex-shrink: 0;
        flex-grow: 0;
        align-self: center;
      }

      .mcp-grok-button-text {
        font-size: 14px;
        font-weight: 500;
        color: inherit;
        line-height: 1.2;
        flex-shrink: 0;
        flex-grow: 0;
        align-self: center;
        margin: 0;
        padding: 0;
      }

      .mcp-button-active {
        background-color: var(--button-ghost-hover, rgba(0, 0, 0, 0.1));
        border-color: var(--border-l1, #d1d5db);
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .mcp-grok-button-base {
          border-color: var(--border-l2-dark, #374151);
          color: var(--fg-primary-dark, #f9fafb);
          background-color: transparent;
        }

        .mcp-grok-button-base:hover {
          background-color: var(--button-ghost-hover-dark, rgba(255, 255, 255, 0.05));
        }

        .mcp-grok-button-base:hover .mcp-grok-button-icon {
          color: var(--fg-primary-dark, #f9fafb);
        }

        .mcp-grok-button-icon {
          color: var(--fg-secondary-dark, #9ca3af);
        }

        .mcp-button-active {
          background-color: var(--button-ghost-hover-dark, rgba(255, 255, 255, 0.1));
          border-color: var(--border-l1-dark, #4b5563);
        }
      }

      /* Integration with Grok's existing button group styles */
      .mcp-grok-button-base + .mcp-grok-button-base {
        margin-left: 4px;
      }

      /* Ensure proper stacking context */
      .mcp-grok-button-base {
        z-index: 1;
      }

      /* Match Grok's button focus ring exactly */
      .mcp-grok-button-base:focus-visible {
        outline: none;
        box-shadow: 0 0 0 1px var(--ring, #3b82f6);
      }

      /* Additional hover states for better UX */
      .mcp-grok-button-base:active {
        transform: scale(0.98);
        transition: transform 50ms ease-in-out;
      }
    `}injectGrokButtonStyles(){if(!this.adapterStylesInjected)try{const n="mcp-grok-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getGrokButtonStyles(),document.head.appendChild(s),this.adapterStylesInjected=!0,this.context.logger.debug("Grok button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject Grok button styles:",n)}}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Grok adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Grok adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Grok adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,p=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(p,500)};setTimeout(p,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Grok adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Grok adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Grok adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Grok adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector('button[aria-label="Think"]');if(n&&n.parentElement)return this.context.logger.debug("Found insertion point relative to Think button"),{container:n.parentElement,insertAfter:n};const r=this.selectors.BUTTON_INSERTION_CONTAINER.split(", ");for(const d of r){const p=document.querySelector(d.trim());if(p){this.context.logger.debug(`Found insertion point: ${d.trim()}`);const v=p.querySelectorAll("button"),w=v.length>0?v[v.length-1]:null;return{container:p,insertAfter:w}}}const s=this.selectors.FALLBACK_INSERTION.split(", ");for(const d of s){const p=document.querySelector(d.trim());if(p)return this.context.logger.debug(`Found fallback insertion point: ${d.trim()}`),{container:p,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Grok interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>tr).then(r=>{Promise.resolve().then(()=>ir).then(s=>{Promise.resolve().then(()=>sr).then(({MCPPopover:d})=>{const p=this.createToggleStateManager(),v={className:"mcp-grok-button-base",contentClassName:"mcp-grok-button-content",textClassName:"mcp-grok-button-text",iconClassName:"mcp-grok-button-icon",activeClassName:"mcp-button-active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:p,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,p=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${p}, autoSubmit=${v}`),{mcpEnabled:p,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,p;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(p=n.stores.ui)!=null&&p.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(w=>{n.logger.error("Error showing sidebar:",w)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(w=>{n.logger.error("Error hiding sidebar:",w)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),p=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(p)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Grok page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,setTimeout(()=>{this.injectGrokButtonStyles()},500),this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Grok host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Grok adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Grok adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}emitExecutionCompleted(n,r,s){if(this.context.eventBus)try{this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}catch(d){this.context.logger.warn("Failed to emit execution completed event:",d)}}emitExecutionFailed(n,r){if(this.context.eventBus)try{this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}catch(s){this.context.logger.warn("Failed to emit execution failed event:",s)}}generateCallId(){return`grok-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{document.querySelector(this.selectors.FILE_PREVIEW)?(this.context.logger.debug("File preview element found after attachment"),n(!0)):(this.context.logger.warn("File preview element not found after attachment"),n(!1))},500)})}};U(Af,"instanceCount",0);let V0=Af;const Rf=class Rf extends or{constructor(){super();U(this,"name","PerplexityAdapter");U(this,"version","2.0.0");U(this,"hostnames",["perplexity.ai","www.perplexity.ai"]);U(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);U(this,"selectors",{CHAT_INPUT:'#ask-input[contenteditable="true"], #ask-input[role="textbox"], div[role="textbox"][contenteditable="true"], textarea[placeholder="Ask anything..."], textarea[placeholder="Ask follow-up"], textarea[placeholder*="Ask"], div[contenteditable="true"][data-lexical-editor="true"]',SUBMIT_BUTTON:'button[aria-label="Submit"], button[aria-label="Send"], button[type="submit"]',FILE_UPLOAD_BUTTON:'button[aria-label*="Attach"], button[aria-label*="attach"]',FILE_INPUT:'input[type="file"][multiple][accept*=".pdf"], input[type="file"][multiple]',MAIN_PANEL:".main-content, .chat-container, .conversation-container",DROP_ZONE:'textarea[placeholder*="Ask"], .input-area, .chat-input-container',FILE_PREVIEW:".file-preview, .attachment-preview, .file-upload-preview",BUTTON_INSERTION_CONTAINER:'div[role="radiogroup"].group.relative.isolate.flex, .flex.items-center, div.flex.items-end.gap-sm',FALLBACK_INSERTION:".input-area, .chat-input-container, .conversation-input"});U(this,"lastUrl","");U(this,"urlCheckInterval",null);U(this,"mcpPopoverContainer",null);U(this,"mutationObserver",null);U(this,"popoverCheckInterval",null);U(this,"storeEventListenersSetup",!1);U(this,"domObserversSetup",!1);U(this,"uiIntegrationSetup",!1);U(this,"instanceId");U(this,"adapterStylesInjected",!1);Rf.instanceCount++,this.instanceId=Rf.instanceCount,console.debug(`[PerplexityAdapter] Instance #${this.instanceId} created. Total instances: ${Rf.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Perplexity adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Perplexity adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Perplexity adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Perplexity adapter instance #${this.instanceId}...`),this.injectPerplexityButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Perplexity adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Perplexity adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Perplexity adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null);const n=document.getElementById("mcp-perplexity-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Perplexity chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const p of d)if(s=document.querySelector(p.trim()),s){this.context.logger.debug(`Found chat input using selector: ${p.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Perplexity chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{const d=window.location.href;return this.context.logger.debug("Using InputEvent method for text insertion for all pages"),await this.insertTextViaInputEvent(s,n)}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Perplexity chat input: ${p}`),this.emitExecutionFailed("insertText",p),!1}}async insertTextViaInputEvent(n,r){try{const s=this.getElementContent(n);n.focus();const d=document.createRange();d.selectNodeContents(n);const p=window.getSelection();p&&(p.removeAllRanges(),p.addRange(d));const v=s?s+`

`+r:r;return n.dispatchEvent(new InputEvent("input",{inputType:"insertText",data:v,bubbles:!0,cancelable:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),this.emitExecutionCompleted("insertText",{text:r},{success:!0,originalLength:s.length,newLength:r.length,totalLength:v.length,method:"InputEvent-homepage"}),this.context.logger.debug(`Text inserted successfully via InputEvent on homepage. Original: ${s.length}, Added: ${r.length}, Total: ${v.length}`),!0}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`InputEvent method failed: ${d}`),this.emitExecutionFailed("insertText",`InputEvent method failed: ${d}`),!1}}isContentEditableElement(n){return n.isContentEditable||n.getAttribute("contenteditable")==="true"||n.hasAttribute("contenteditable")}getElementContent(n){return this.isContentEditableElement(n)?n.textContent||n.innerText||"":n.value||""}async submitForm(n){var d,p;this.context.logger.debug("Attempting to submit Perplexity chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const v of s)if(r=document.querySelector(v.trim()),r){this.context.logger.debug(`Found submit button using selector: ${v.trim()}`);break}if(!r){const v=document.querySelector(this.selectors.CHAT_INPUT);v&&(r=(d=v.parentElement)==null?void 0:d.querySelector("button"),r&&this.context.logger.debug("Found submit button near chat input"))}if(r)try{if(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled")){this.context.logger.warn("Perplexity submit button is disabled, waiting for it to be enabled");const S=5e3,k=Date.now();for(;Date.now()-k<S&&(await new Promise(A=>setTimeout(A,300)),!!(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled"))););if(r.disabled||r.getAttribute("disabled")!==null||r.getAttribute("aria-disabled")==="true"||r.classList.contains("disabled"))return this.context.logger.warn("Submit button remained disabled, falling back to Enter key"),this.submitWithEnterKey()}const w=r.getBoundingClientRect();return w.width===0||w.height===0?(this.context.logger.warn("Perplexity submit button is not visible, falling back to Enter key"),this.submitWithEnterKey()):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((p=n==null?void 0:n.formElement)==null?void 0:p.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(S=>document.querySelector(S.trim())===r)}),this.context.logger.debug("Perplexity chat input submitted successfully via button click"),!0)}catch(v){const w=v instanceof Error?v.message:String(v);return this.context.logger.error(`Error clicking submit button: ${w}, falling back to Enter key`),this.submitWithEnterKey()}else return this.context.logger.warn("Could not find Perplexity submit button, falling back to Enter key"),this.submitWithEnterKey()}async submitWithEnterKey(){try{const n=document.querySelector(this.selectors.CHAT_INPUT);if(!n)return this.emitExecutionFailed("submitForm","Chat input element not found for Enter key fallback"),!1;n.focus();const r=["keydown","keypress","keyup"];for(const d of r)n.dispatchEvent(new KeyboardEvent(d,{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}));const s=n.closest("form");return s&&(this.context.logger.debug("Submitting form as additional fallback"),s.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey+formSubmit"}),this.context.logger.debug("Perplexity chat input submitted successfully via Enter key"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error submitting with Enter key: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;if(await this.attachFileViaInput(n))return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,method:"file-input"}),this.context.logger.debug(`File attached successfully via input: ${n.name}`),!0;if(await this.attachFileViaDragDrop(n))return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,method:"drag-drop"}),this.context.logger.debug(`File attached successfully via drag-drop: ${n.name}`),!0;const p=await this.attachFileViaClipboard(n);return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:p,method:"clipboard"}),p?this.context.logger.debug(`File copied to clipboard for manual paste: ${n.name}`):this.context.logger.warn(`All file attachment methods failed for: ${n.name}`),p}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to Perplexity: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}async attachFileViaInput(n){try{const r=this.selectors.FILE_INPUT.split(", ");let s=null;for(const v of r)if(s=document.querySelector(v.trim()),s){this.context.logger.debug(`Found file input using selector: ${v.trim()}`);break}if(!s)return this.context.logger.debug("No file input element found"),!1;const d=new DataTransfer;d.items.add(n),s.files=d.files;const p=new Event("change",{bubbles:!0});return s.dispatchEvent(p),!0}catch(r){return this.context.logger.debug(`File input method failed: ${r}`),!1}}async attachFileViaDragDrop(n){try{const r=document.querySelector(this.selectors.CHAT_INPUT);if(!r)return this.context.logger.debug("No chat input found for drag-drop"),!1;const s=new DataTransfer;s.items.add(n);const d=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:s}),p=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:s});return r.addEventListener("dragover",v=>v.preventDefault(),{once:!0}),r.dispatchEvent(d),r.dispatchEvent(p),!0}catch(r){return this.context.logger.debug(`Drag-drop method failed: ${r}`),!1}}async attachFileViaClipboard(n){try{await navigator.clipboard.write([new ClipboardItem({[n.type]:n})]);const r=document.querySelector(this.selectors.CHAT_INPUT);return r&&r.focus(),!0}catch(r){return this.context.logger.debug(`Clipboard method failed: ${r}`),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Perplexity adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Perplexity adapter`),!1;const p=[/^https:\/\/(?:www\.)?perplexity\.ai\/search\/.*/,/^https:\/\/(?:www\.)?perplexity\.ai\/$/,/^https:\/\/(?:www\.)?perplexity\.ai\/library\/.*/].some(v=>v.test(r));return p?this.context.logger.debug(`Perplexity adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),p}supportsFileUpload(){this.context.logger.debug("Checking file upload support for Perplexity");const n=this.selectors.FILE_INPUT.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found file input with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;const s=this.selectors.DROP_ZONE.split(", ");for(const d of s)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;return this.context.logger.debug("No file upload support detected"),!1}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Perplexity adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Perplexity adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Perplexity adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,p=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(p,500)};setTimeout(p,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Perplexity adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Perplexity adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Perplexity adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Perplexity adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector('div[role="radiogroup"].group.relative.isolate.flex');if(n){const d=n.closest(".flex.items-center");if(d){this.context.logger.debug("Found search/research toggle container, placing MCP button next to it");const p=n.parentElement;return{container:d,insertAfter:p}}}const r=document.querySelector("div.flex.items-end.gap-sm");if(r){this.context.logger.debug("Found actions container (fallback)");const d=r.querySelector('button[aria-label*="Attach"]');return{container:r,insertAfter:d}}const s=[".input-area .actions",".chat-input-actions",".conversation-input .actions"];for(const d of s){const p=document.querySelector(d);if(p)return this.context.logger.debug(`Found fallback insertion point: ${d}`),{container:p,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Perplexity interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>tr).then(r=>{Promise.resolve().then(()=>ir).then(s=>{Promise.resolve().then(()=>sr).then(({MCPPopover:d})=>{const p=this.createToggleStateManager(),v={className:"mcp-perplexity-button-base",contentClassName:"mcp-perplexity-button-content",textClassName:"mcp-perplexity-button-text",activeClassName:"mcp-button-active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:p,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,p=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${p}, autoSubmit=${v}`),{mcpEnabled:p,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,p;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(p=n.stores.ui)!=null&&p.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(w=>{n.logger.error("Error showing sidebar:",w)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(w=>{n.logger.error("Error hiding sidebar:",w)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),p=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(p)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`perplexity-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Perplexity page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(this.adapterStylesInjected=!1,this.injectPerplexityButtonStyles(),setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Perplexity host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Perplexity adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Perplexity adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}getPerplexityButtonStyles(){return`
      .mcp-perplexity-button-base {
        /* Base button styling matching Perplexity's segmented-control design */
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        outline: none;
        cursor: pointer;
        white-space: nowrap;
        user-select: none;
        border-radius: 8px;
        height: 32px;
        min-width: 36px;
        padding: 0 0px;
        gap: 6px;
        font-size: 14px;
        font-weight: 500;
        border: none;
        background: transparent;
        transition: all 300ms ease-out;
        
        /* Default colors - using Perplexity's actual theme colors */
        color: oklch(var(--text-color-200, 50.2% 0.008 106.677)); /* Inactive text */
        
        /* Focus states */
        &:focus {
          outline: none;
        }
        
        /* Hover states */
        &:hover {
          color: oklch(var(--text-color-100, 30.4% 0.04 213.681)); /* Active text on hover */
        }
        
        /* Active/selected state - matches the checked segmented control */
        &.mcp-button-active {
          color: oklch(var(--text-super-color-100, 55.3% 0.086 208.538)); /* Super color for active state */
        }
        
        /* Active button overlay styling (matches data-state="checked" div) */
        &.mcp-button-active::before {
          content: '';
          position: absolute;
          inset: 0;
          pointer-events: none;
          border-radius: 8px;
          border: 1px solid oklch(var(--text-super-color-100, 55.3% 0.086 208.538));
          background-color: oklch(0.963 0.007 106.523); /* Light background */
          box-shadow: 0 1px 3px 0 oklch(var(--text-super-color-100, 55.3% 0.086 208.538) / 0.3);
          transition: all 300ms ease-out;
          opacity: 1;
        }
      }
      
      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .mcp-perplexity-button-base {
          color: oklch(var(--dark-text-color-200, 65.3% 0.005 197.042)); /* Dark mode inactive text */
          
          &:hover {
            color: oklch(var(--dark-text-color-100, 93% 0.003 106.451)); /* Dark mode hover text */
          }
          
          &.mcp-button-active {
            color: oklch(var(--text-super-color-100, 55.3% 0.086 208.538)); /* Keep super color in dark mode */
          }
          
          &.mcp-button-active::before {
            background-color: oklch(var(--lt-color-text-dark, 0.113 0.005 247.858)); /* Dark background equivalent */
            border-color: oklch(var(--text-super-color-100, 55.3% 0.086 208.538));
            box-shadow: 0 1px 3px 0 oklch(var(--text-super-color-100, 55.3% 0.086 208.538) / 0.2);
          }
        }
      }
      
      .mcp-perplexity-button-content {
        /* Content container styling - matches the inner div structure */
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        min-width: 0;
        font-weight: 500;
        position: relative;
        z-index: 10; /* matches relative z-10 */
        height: 32px;
        min-width: 36px;
        padding: 4px 10px; /* matches py-xs px-2.5 equivalent */
      }
      
      .mcp-perplexity-button-text {
        font-size: 14px;
        font-weight: 500;
        line-height: 1.2;
        color: inherit; /* Inherit color from parent */
      }
      
      /* Icon styling within button */
      .mcp-perplexity-button-base svg,
      .mcp-perplexity-button-base img {
        width: 16px;
        height: 16px;
        transition: all 300ms ease-out;
        flex-shrink: 0;
      }
      
      .mcp-perplexity-button-base img {
        border-radius: 50%;
        margin-right: 1px;
      }
      
      /* Integration with Perplexity's button group layout */
      .gap-xs .mcp-perplexity-button-base,
      .gap-sm .mcp-perplexity-button-base,
      .flex.items-center .mcp-perplexity-button-base {
        margin: 0 2px;
      }
      
      /* Special styling for group context (matches p-two flex items-center structure) */
      .p-two .mcp-perplexity-button-base,
      [class*="p-"] .mcp-perplexity-button-base {
        margin: 0 1px;
      }
      
      /* Focus-visible styling for accessibility */
      .mcp-perplexity-button-base:focus-visible {
        outline: 2px solid oklch(var(--text-super-color-100, 55.3% 0.086 208.538));
        outline-offset: 2px;
        outline-style: dashed;
      }
      
      .mcp-perplexity-button-base:focus-visible::before {
        border-style: dashed !important;
      }
      
      /* Responsive adjustments */
      @media (max-width: 640px) {
        .mcp-perplexity-button-base {
          height: 28px;
          min-width: 32px;
          padding: 0 8px;
          font-size: 13px;
        }
        
        .mcp-perplexity-button-content {
          height: 28px;
          min-width: 32px;
          padding: 2px 8px;
        }
        
        .mcp-perplexity-button-base svg,
        .mcp-perplexity-button-base img {
          width: 14px;
          height: 14px;
        }
        
        /* Adjust ring size for mobile */
        .mcp-perplexity-button-base.mcp-button-active::before {
          border-width: 1px; /* Keep consistent border width on mobile */
        }
      }
      
    `}injectPerplexityButtonStyles(){if(!this.adapterStylesInjected)try{const n="mcp-perplexity-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getPerplexityButtonStyles(),document.head.appendChild(s),this.adapterStylesInjected=!0,this.context.logger.debug("Perplexity button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject Perplexity button styles:",n)}}};U(Rf,"instanceCount",0);let Y0=Rf;const Su=()=>{let h=document.querySelector('textarea.textarea[placeholder="Type something"]');return h?(M('Found AiStudio main input with "Type something" placeholder'),h):(h=document.querySelector('textarea.textarea[aria-label="Type something or pick one from prompt gallery"]'),h?(M('Found AiStudio main input with "Type something or pick one from prompt gallery" placeholder'),h):(h=document.querySelector('textarea[placeholder="Ask follow-up"]'),h?(M('Found AiStudio follow-up input with "Ask follow-up" placeholder'),h):(h=document.querySelector("textarea.textarea[aria-label='Type something or tab to choose an example prompt']"),h?(M('Found AiStudio input with "Type something or tab to choose an example prompt" aria-label'),h):(h=document.querySelector("textarea.textarea[aria-label='Start typing a prompt']"),h?(M('Found AiStudio input with "Start typing a prompt" aria-label'),h):(h=document.querySelector('textarea[placeholder*="Ask"]'),h?(M(`Found AiStudio input with generic "Ask" in placeholder: ${h.placeholder}`),h):(M("Could not find any AiStudio chat input textarea"),null))))))},bT=h=>{try{const u=Su();if(u){const n=u.value,r=n?`${n}

${h}`:h;u.value=r;const s=new Event("input",{bubbles:!0});return u.dispatchEvent(s),u.focus(),M("Appended text to AiStudio chat input"),!0}else return M("Could not find AiStudio chat input"),console.error("Could not find AiStudio chat input textarea"),!1}catch(u){const n=u instanceof Error?u.message:String(u);return M(`Error inserting text into chat input: ${n}`),console.error("Error inserting text into chat input:",u),!1}},vT=async h=>{try{const u=Su();if(!u)return M("Could not find AiStudio input element for file attachment"),!1;const n=new DataTransfer;n.items.add(h);const r=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:n}),s=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:n});u.addEventListener("dragover",d=>d.preventDefault(),{once:!0}),u.dispatchEvent(r),u.dispatchEvent(s);try{await navigator.clipboard.write([new ClipboardItem({[h.type]:h})]),u.focus(),M("File copied to clipboard, user can now paste manually if needed")}catch(d){M(`Could not copy to clipboard: ${d}`)}return M(`Attached file ${h.name} to AiStudio input`),!0}catch(u){const n=u instanceof Error?u.message:String(u);return M(`Error attaching file to AiStudio input: ${n}`),console.error("Error attaching file to AiStudio input:",u),!1}},yT=(h=5e3)=>new Promise(u=>{try{const n=Su();if(!n){M("Could not find chat input to submit"),u(!1);return}const r=()=>{var p,v;return document.querySelector('button[aria-label="Submit"]')||document.querySelector('button[aria-label="Send"]')||document.querySelector('button[type="submit"]')||((p=n.parentElement)==null?void 0:p.querySelector("button"))||((v=document.querySelector('button svg[stroke="currentColor"]'))==null?void 0:v.closest("button"))},s=r();if(s){M(`Found submit button (${s.getAttribute("aria-label")||"unknown"})`);const d=()=>{const S=r();if(!S){M("Submit button no longer found"),u(!1);return}S.disabled||S.getAttribute("disabled")!==null||S.getAttribute("aria-disabled")==="true"||S.classList.contains("disabled")?M("Submit button is disabled, waiting..."):(M("Submit button is enabled, clicking it"),S.click(),u(!0))};let p=0;const v=200,w=setInterval(()=>{if(p+=v,d(),p>=h){clearInterval(w),M(`Button remained disabled for ${h}ms, trying alternative methods`),M("Simulating Enter key press as fallback"),n.focus();const S=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}),k=new KeyboardEvent("keypress",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}),I=new KeyboardEvent("keyup",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});n.dispatchEvent(S),n.dispatchEvent(k),n.dispatchEvent(I);const R=n.closest("form");R&&(M("Found form element, submitting it"),R.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))),M("Attempted all fallback methods to submit chat input"),u(!0)}},v);d(),s&&!s.disabled&&clearInterval(w)}else{M("No submit button found, trying alternative methods"),M("Simulating Enter key press as fallback"),n.focus();const d=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}),p=new KeyboardEvent("keypress",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}),v=new KeyboardEvent("keyup",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});n.dispatchEvent(d),n.dispatchEvent(p),n.dispatchEvent(v);const w=n.closest("form");w&&(M("Found form element, submitting it"),w.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))),M("Attempted all methods to submit chat input"),u(!0)}}catch(n){const r=n instanceof Error?n.message:String(n);M(`Error submitting chat input: ${r}`),console.error("Error submitting chat input:",n),u(!1)}}),Of=class Of extends or{constructor(){super();U(this,"name","AIStudioAdapter");U(this,"version","2.0.0");U(this,"hostnames",["aistudio.google.com"]);U(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);U(this,"selectors",{BUTTON_INSERTION_CONTAINER:".prompt-input-wrapper, .actions-container, footer .actions-container",FALLBACK_INSERTION:".input-area, .chat-input-container, .conversation-input"});U(this,"lastUrl","");U(this,"urlCheckInterval",null);U(this,"mcpPopoverContainer",null);U(this,"mutationObserver",null);U(this,"popoverCheckInterval",null);U(this,"storeEventListenersSetup",!1);U(this,"domObserversSetup",!1);U(this,"uiIntegrationSetup",!1);U(this,"instanceId");U(this,"adapterStylesInjected",!1);Of.instanceCount++,this.instanceId=Of.instanceCount,console.debug(`[AIStudioAdapter] Instance #${this.instanceId} created. Total instances: ${Of.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`AI Studio adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing AI Studio adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`AI Studio adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating AI Studio adapter instance #${this.instanceId}...`),this.injectAIStudioButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var r;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(r=this.context)==null||r.logger.warn("AI Studio adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating AI Studio adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers();const n=document.getElementById("mcp-aistudio-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up AI Studio adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null);const n=document.getElementById("mcp-aistudio-button-styles");n&&(n.remove(),this.adapterStylesInjected=!1),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}getAIStudioButtonStyles(){return`
      .mcp-aistudio-button-base {
        /* Base Material Design button styling */
        display: inline-flex;
        align-items: center;
        justify-content: center;
        box-sizing: border-box;
        border: none;
        outline: none;
        line-height: inherit;
        user-select: none;
        appearance: none;
        overflow: visible;
        vertical-align: middle;
        background: transparent;
        
        /* AI Studio Color System */
        color: var(--color-on-surface);
        background-color: transparent;
        
        /* Typography */
        font-family: 'Google Sans', Roboto, 'Helvetica Neue', Arial, sans-serif;
        font-size: 14px;
        font-weight: 500;
        letter-spacing: 0.0892857143em;
        text-decoration: none;
        text-transform: none;
        
        /* Spacing and sizing */
        padding: 8px 16px;
        min-width: 64px;
        height: 36px;
        border-radius: 18px;
        
        /* Transitions */
        transition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,
                    box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,
                    border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,
                    color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
        
        /* Focus and active states */
        position: relative;
        cursor: pointer;
        margin: 0 4px;
      }
      
      .mcp-aistudio-button-base:hover {
        background-color: var(--color-surface-container);
        color: var(--color-primary);
      }
      
      .mcp-aistudio-button-base:focus {
        outline: none;
        box-shadow: 0 0 0 2px var(--color-primary-container);
      }
      
      .mcp-aistudio-button-base:active {
        background-color: var(--color-surface-container-high);
        transform: translateY(1px);
      }
      
      .mcp-aistudio-button-base.inactive {
        color: var(--color-on-surface-variant);
        background-color: var(--color-run-button-disabled-background-transparent, rgba(226, 226, 229, 0.9));
        border: 1px solid var(--color-outline-variant);
      }
      
      .mcp-aistudio-button-base.inactive:hover {
        background-color: var(--color-surface-container);
        color: var(--color-on-surface);
      }
      
      .mcp-aistudio-button-base.active {
        background-color: var(--color-primary);
        color: var(--color-on-primary);
      }
      
      .mcp-aistudio-button-base.active:hover {
        background-color: var(--color-primary-container);
        color: var(--color-on-primary-container);
      }
      
      /* Content styling */
      .mcp-aistudio-button-content {
        display: flex;
        align-items: center;
        gap: 6px;
      }
      
      .mcp-aistudio-button-text {
        font-weight: 500;
        font-size: 14px;
      }
      
      /* Dark mode support - now handled by CSS variables */
      :root .dark-theme .mcp-aistudio-button-base,
      @media (prefers-color-scheme: dark) {
        .mcp-aistudio-button-base {
          /* Colors automatically handled by CSS variables */
        }
      }
      
      /* Integration with AI Studio's button wrapper */
      .button-wrapper .mcp-aistudio-button-base {
        margin: 0;
        height: 40px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      /* Ensure the MCP button wrapper behaves like other button wrappers */
      #mcp-button-wrapper {
        display: flex;
        align-items: center;
      }
      
      /* Ripple effect (simplified) - using AI Studio colors */
      .mcp-aistudio-button-base::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background-color: var(--color-primary);
        opacity: 0;
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s, opacity 0.6s;
        pointer-events: none;
      }
      
      .mcp-aistudio-button-base:active::after {
        width: 100px;
        height: 100px;
        opacity: 0.1;
        transition: 0s;
      }
    `}injectAIStudioButtonStyles(){if(!this.adapterStylesInjected)try{const n="mcp-aistudio-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getAIStudioButtonStyles(),document.head.appendChild(s),this.adapterStylesInjected=!0,this.context.logger.debug("AI Studio button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject AI Studio button styles:",n)}}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into AI Studio chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);try{return bT(n)?(this.emitExecutionCompleted("insertText",{text:n},{success:!0,method:"chatInputHandler",textLength:n.length}),this.context.logger.debug(`Text inserted successfully using chatInputHandler. Length: ${n.length}`),!0):(this.context.logger.error("Failed to insert text using chatInputHandler"),this.emitExecutionFailed("insertText","chatInputHandler failed to insert text"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error inserting text into AI Studio chat input: ${d}`),this.emitExecutionFailed("insertText",d),!1}}async submitForm(n){var r;this.context.logger.debug("Attempting to submit AI Studio chat input");try{return await yT()?(this.emitExecutionCompleted("submitForm",{formElement:((r=n==null?void 0:n.formElement)==null?void 0:r.tagName)||"unknown"},{success:!0,method:"chatInputHandler"}),this.context.logger.debug("AI Studio chat input submitted successfully via chatInputHandler"),!0):(this.context.logger.error("Failed to submit using chatInputHandler"),this.emitExecutionFailed("submitForm","chatInputHandler failed to submit"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error submitting AI Studio chat input: ${d}`),this.emitExecutionFailed("submitForm",d),!1}}async submitWithEnterKey(){try{const n=Su();if(!n)return this.emitExecutionFailed("submitForm","Chat input element not found for Enter key fallback"),!1;n.focus();const r=["keydown","keypress","keyup"];for(const d of r)n.dispatchEvent(new KeyboardEvent(d,{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0}));const s=n.closest("form");return s&&(this.context.logger.debug("Submitting form as additional fallback"),s.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey+formSubmit"}),this.context.logger.debug("AI Studio chat input submitted successfully via Enter key"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error submitting with Enter key: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{return!n||n.size===0?(this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1):this.supportsFileUpload()?await vT(n)?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,method:"chatInputHandler"}),this.context.logger.debug(`File attached successfully via chatInputHandler: ${n.name}`),!0):(this.context.logger.warn(`File attachment failed via chatInputHandler for: ${n.name}`),this.emitExecutionFailed("attachFile","chatInputHandler failed to attach file"),!1):(this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to AI Studio: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}async attachFileViaDragDrop(n){try{const r=Su();if(!r)return this.context.logger.debug("No chat input found for drag-drop"),!1;const s=new DataTransfer;s.items.add(n);const d=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:s}),p=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:s});return r.addEventListener("dragover",v=>v.preventDefault(),{once:!0}),r.dispatchEvent(d),r.dispatchEvent(p),!0}catch(r){return this.context.logger.debug(`Drag-drop method failed: ${r}`),!1}}async attachFileViaClipboard(n){try{await navigator.clipboard.write([new ClipboardItem({[n.type]:n})]);const r=Su();return r&&r.focus(),!0}catch(r){return this.context.logger.debug(`Clipboard method failed: ${r}`),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if AI Studio adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by AI Studio adapter`),!1;const p=[/^https:\/\/aistudio\.google\.com\/app\/.*/,/^https:\/\/aistudio\.google\.com\/$/,/^https:\/\/aistudio\.google\.com\/prompts\/.*/].some(v=>v.test(r));return p?this.context.logger.debug(`AI Studio adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),p}supportsFileUpload(){return this.context.logger.debug("Checking file upload support for AI Studio"),Su()?(this.context.logger.debug("Found chat input element, file upload should be supported"),!0):(this.context.logger.debug("Could not find chat input element"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for AI Studio adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for AI Studio adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for AI Studio adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,p=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(p,500)};setTimeout(p,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-button-wrapper")||document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for AI Studio adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for AI Studio adapter");const n=document.getElementById("mcp-button-wrapper");n&&n.remove();const r=document.getElementById("mcp-popover-container");r&&r.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in AI Studio adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("AI Studio adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector(".prompt-input-wrapper-container");if(n){this.context.logger.debug("Found prompt input wrapper container");const d=n.querySelectorAll(".button-wrapper");if(d.length>0){const p=d[0].parentElement;if(p){const v=d[d.length-1];return this.context.logger.debug("Found button container, placing MCP button after the Run button"),{container:p,insertAfter:v}}}}const r=document.querySelector(".prompt-input-wrapper");if(r){this.context.logger.debug("Found prompt input wrapper (fallback)");const d=r.querySelectorAll(".button-wrapper");if(d.length>0){const p=d[d.length-1];return{container:r,insertAfter:p}}return{container:r,insertAfter:null}}const s=document.querySelector("footer .actions-container, .actions-container");return s?(this.context.logger.debug("Found actions container (final fallback)"),{container:s,insertAfter:null}):(this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null)}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into AI Studio interface");try{if(document.getElementById("mcp-button-wrapper")||document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.className="button-wrapper",r.id="mcp-button-wrapper";const s=document.createElement("div");s.id="mcp-popover-container",s.style.display="contents",r.appendChild(s);const{container:d,insertAfter:p}=n;p&&p.parentNode===d?(d.insertBefore(r,p.nextSibling),this.context.logger.debug("Inserted MCP button wrapper after specified element")):(d.appendChild(r),this.context.logger.debug("Appended MCP button wrapper to container element")),this.mcpPopoverContainer=s,this.renderMCPPopover(s),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>tr).then(r=>{Promise.resolve().then(()=>ir).then(s=>{Promise.resolve().then(()=>sr).then(({MCPPopover:d})=>{const p=this.createToggleStateManager(),v={className:"mcp-aistudio-button-base",contentClassName:"mcp-aistudio-button-content",textClassName:"mcp-aistudio-button-text",activeClassName:"active"};s.createRoot(n).render(r.createElement(d,{toggleStateManager:p,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with AI Studio styling")}).catch(d=>{this.context.logger.error("Failed to load MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to load ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to load React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,p=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${p}, autoSubmit=${v}`),{mcpEnabled:p,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,p;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(p=n.stores.ui)!=null&&p.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(w=>{n.logger.error("Error showing sidebar:",w)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(w=>{n.logger.error("Error hiding sidebar:",w)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),p=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(p)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-button-wrapper")||!!document.getElementById("mcp-popover-container")}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`aistudio-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`AI Studio page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.injectAIStudioButtonStyles(),this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`AI Studio host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("AI Studio adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in AI Studio adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};U(Of,"instanceCount",0);let X0=Of;const zf=class zf extends or{constructor(){super();U(this,"name","OpenRouterAdapter");U(this,"version","2.0.0");U(this,"hostnames",["openrouter.ai"]);U(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);U(this,"selectors",{CHAT_INPUT:'textarea[placeholder="Start a message..."], textarea[placeholder="Start a message..."].w-full, div[contenteditable="true"]',SUBMIT_BUTTON:'button[data-state="closed"] svg[stroke="currentColor"] path[d*="M4.5 10.5"], button[aria-label="Send message"], button[data-testid="send-button"], button[aria-label="Send prompt"]',FILE_UPLOAD_BUTTON:'button svg[fill="currentColor"] path[fill-rule="evenodd"][d*="M18.97 3.659"], button[aria-label="Attach file"], button[aria-label*="attach"], input[type="file"]',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".rounded-xl.overflow-hidden.p-2.border.border-slate-4, .chat-container, .main-content, .conversation-container",DROP_ZONE:'textarea[placeholder="Start a message..."], .rounded-lg.w-full, .chat-input-area, .input-container',FILE_PREVIEW:".file-preview, .attachment-preview, .file-attachment",BUTTON_INSERTION_CONTAINER:".relative.flex.w-full.min-w-0.items-center.gap-1, .flex.gap-1, .input-actions, .chat-input-actions",FALLBACK_INSERTION:".flex.gap-1, .input-area, .chat-input-container, .conversation-input"});U(this,"lastUrl","");U(this,"urlCheckInterval",null);U(this,"mcpPopoverContainer",null);U(this,"mutationObserver",null);U(this,"popoverCheckInterval",null);U(this,"storeEventListenersSetup",!1);U(this,"domObserversSetup",!1);U(this,"uiIntegrationSetup",!1);U(this,"instanceId");zf.instanceCount++,this.instanceId=zf.instanceCount,console.debug(`[OpenRouterAdapter] Instance #${this.instanceId} created. Total instances: ${zf.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`OpenRouter adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing OpenRouter adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`OpenRouter adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating OpenRouter adapter instance #${this.instanceId}...`),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("OpenRouter adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating OpenRouter adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up OpenRouter adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into OpenRouter chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const p of d)if(s=document.querySelector(p.trim()),s){this.context.logger.debug(`Found chat input using selector: ${p.trim()}`);break}}if(!s)return this.context.logger.error("Could not find OpenRouter chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{if(s.focus(),s.tagName==="TEXTAREA"){const d=s,p=d.value,v=p?`${p}

${n}`:n;d.value=v,d.selectionStart=d.selectionEnd=d.value.length,d.dispatchEvent(new InputEvent("input",{bubbles:!0}))}else if(s.getAttribute("contenteditable")==="true"){const d=s.textContent||"",p=d?`${d}

${n}`:n;if(d){const v=window.getSelection(),w=document.createRange();w.selectNodeContents(s),w.collapse(!1),v==null||v.removeAllRanges(),v==null||v.addRange(w),document.execCommand("insertText",!1,`

${n}`)}else document.execCommand("insertText",!1,n);s.dispatchEvent(new InputEvent("input",{bubbles:!0}))}else{const d=s.textContent||"",p=d?`${d}

${n}`:n;s.textContent=p,s.dispatchEvent(new InputEvent("input",{bubbles:!0}))}return s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{bubbles:!0})),this.emitExecutionCompleted("insertText",{text:n},{success:!0,textLength:n.length,elementType:s.tagName}),this.context.logger.debug("Text inserted successfully into OpenRouter chat input"),!0}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into OpenRouter chat input: ${p}`),this.emitExecutionFailed("insertText",p),!1}}async submitForm(n){var r;this.context.logger.debug("Attempting to submit OpenRouter chat input");try{let s=null;const d=this.selectors.SUBMIT_BUTTON.split(", ");for(const v of d){const w=document.querySelector(v.trim());if(w&&(w.tagName==="svg"||w.tagName==="path"?s=w.closest("button"):s=w,s)){this.context.logger.debug(`Found submit button using selector: ${v.trim()}`);break}}if(!s){const v=document.querySelectorAll("button");for(let w=0;w<v.length;w++){const S=v[w],k=S.querySelector('svg[stroke="currentColor"]');if((k==null?void 0:k.querySelector('path[d*="M4.5 10.5"]'))&&k){s=S,this.context.logger.debug("Found submit button by SVG path structure");break}}}if(s)if(s.disabled||s.getAttribute("aria-disabled")==="true")this.context.logger.warn("OpenRouter submit button is disabled, trying alternative methods");else return s.click(),this.emitExecutionCompleted("submitForm",{formElement:((r=n==null?void 0:n.formElement)==null?void 0:r.tagName)||"unknown"},{success:!0,method:"submitButton.click"}),this.context.logger.debug("OpenRouter chat input submitted successfully via button click"),!0;const p=document.querySelector(this.selectors.CHAT_INPUT.split(", ")[0]);if(p){const v=p.closest("form");if(v){const w=new SubmitEvent("submit",{bubbles:!0,cancelable:!0});return v.dispatchEvent(w),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"form.submit"}),this.context.logger.debug("OpenRouter chat input submitted successfully via form submission"),!0}}return p?(p.focus(),[new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0,composed:!0}),new KeyboardEvent("keypress",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0,composed:!0}),new KeyboardEvent("keyup",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0,composed:!0})].forEach(w=>p.dispatchEvent(w)),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enter-key-simulation"}),this.context.logger.debug("OpenRouter chat input submitted successfully via Enter key simulation"),!0):(this.emitExecutionFailed("submitForm","No submission method available"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error submitting OpenRouter chat input: ${d}`),this.emitExecutionFailed("submitForm",d),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{return!n||n.size===0?(this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1):this.supportsFileUpload()?(this.emitExecutionFailed("attachFile","All attachment methods failed"),!1):(this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to OpenRouter: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}findAttachmentButton(){var s;const n=document.querySelectorAll("button");for(let d=0;d<n.length;d++){const p=n[d],v=p.querySelector('svg[fill="currentColor"]');if((v==null?void 0:v.querySelector('path[fill-rule="evenodd"][d*="M18.97 3.659"]'))&&v)return this.context.logger.debug("Found attachment button by SVG path structure"),p}const r=['button[aria-label="Attach file"]','button[aria-label*="attach"]','input[type="file"]'];for(const d of r){const p=document.querySelector(d);if(p)if(p.tagName==="INPUT"){const v=p.closest("button")||((s=p.parentElement)==null?void 0:s.querySelector("button"));if(v)return v}else return p}return this.context.logger.debug("No attachment button found"),null}async tryDragDropAttachment(n,r){try{this.context.logger.debug(`Attempting drag-drop attachment on: ${r.tagName}.${r.className}`);const s=new DataTransfer;s.items.add(n);const d=new DragEvent("dragenter",{bubbles:!0,cancelable:!0,dataTransfer:s}),p=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:s}),v=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:s}),w=k=>k.preventDefault();return r.addEventListener("dragenter",w,{once:!0}),r.addEventListener("dragover",w,{once:!0}),r.dispatchEvent(d),await new Promise(k=>setTimeout(k,50)),r.dispatchEvent(p),await new Promise(k=>setTimeout(k,50)),r.dispatchEvent(v),await this.checkFilePreview()?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,targetElement:r.tagName},{success:!0,previewFound:!0,method:"drag-drop-simulation"}),this.context.logger.debug(`File attached successfully via drag-drop: ${n.name}`),!0):!1}catch(s){return this.context.logger.error("Error in drag-drop attachment:",s),!1}}async tryHiddenFileInput(n){try{this.context.logger.debug("Attempting hidden file input method");const r=document.createElement("input");r.type="file",r.style.display="none",r.accept="*/*",document.body.appendChild(r);const s=new DataTransfer;s.items.add(n),r.files=s.files,r.dispatchEvent(new Event("change",{bubbles:!0})),r.dispatchEvent(new Event("input",{bubbles:!0})),await new Promise(p=>setTimeout(p,500));const d=await this.checkFilePreview();return document.body.removeChild(r),d?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,previewFound:!0,method:"hidden-file-input"}),this.context.logger.debug(`File attached successfully via hidden input: ${n.name}`),!0):!1}catch(r){return this.context.logger.error("Error in hidden file input method:",r),!1}}isSupported(){const n=window.location.href;this.context.logger.debug(`Checking if OpenRouter adapter supports: ${n}`);const s=[/^https:\/\/openrouter\.ai\/chat.*$/].some(d=>d.test(n));return s?this.context.logger.debug(`OpenRouter adapter supports current page: ${n}`):this.context.logger.debug(`URL pattern not supported: ${n}`),s}supportsFileUpload(){if(this.context.logger.debug("Checking file upload support for OpenRouter"),this.findAttachmentButton())return this.context.logger.debug("Found attachment button - file upload supported"),!0;const r=this.selectors.DROP_ZONE.split(", ");for(const p of r)if(document.querySelector(p.trim()))return this.context.logger.debug(`Found drop zone with selector: ${p.trim()}`),!0;const s=[...this.selectors.FILE_UPLOAD_BUTTON.split(", "),this.selectors.FILE_INPUT];for(const p of s)if(document.querySelector(p.trim()))return this.context.logger.debug(`Found upload element with selector: ${p.trim()}`),!0;return window.location.href.includes("/chat")?(this.context.logger.debug("On chat page - assuming file upload is supported"),!0):(this.context.logger.debug("No file upload support detected"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for OpenRouter adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for OpenRouter adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&window.location.href.includes("/chat")&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for OpenRouter adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,p=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(p,500)};setTimeout(p,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),!window.location.href.includes("/chat")||!this.isSupported()){this.context.logger.debug("Not on a supported chat page, skipping MCP popover injection");return}if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const p=this.findButtonInsertionPoint();p?this.injectMCPPopover(p):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for OpenRouter adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for OpenRouter adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in OpenRouter adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("OpenRouter adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){var s,d;this.context.logger.debug("Finding button insertion point for MCP popover");const n=this.selectors.BUTTON_INSERTION_CONTAINER.split(", ");for(const p of n){const v=document.querySelector(p.trim());if(v){this.context.logger.debug(`Found insertion point: ${p.trim()}`);let w=null;const S=v.querySelectorAll("div.inline-flex.items-center");for(let k=0;k<S.length;k++){const I=S[k];if((s=I.textContent)!=null&&s.includes("Web search")){w=I;break}}return w||(w=((d=v.querySelector('div.inline-flex.items-center svg[stroke="currentColor"] path[d*="M12 21a9.004"]'))==null?void 0:d.closest("div.inline-flex.items-center"))||null),{container:v,insertAfter:w}}}const r=this.selectors.FALLBACK_INSERTION.split(", ");for(const p of r){const v=document.querySelector(p.trim());if(v)return this.context.logger.debug(`Found fallback insertion point: ${p.trim()}`),{container:v,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into OpenRouter interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>tr).then(r=>{Promise.resolve().then(()=>ir).then(s=>{Promise.resolve().then(()=>sr).then(({MCPPopover:d})=>{const p=this.createToggleStateManager();s.createRoot(n).render(r.createElement(d,{toggleStateManager:p})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,p=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${p}, autoSubmit=${v}`),{mcpEnabled:p,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,p;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(p=n.stores.ui)!=null&&p.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(w=>{n.logger.error("Error showing sidebar:",w)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(w=>{n.logger.error("Error hiding sidebar:",w)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),p=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(p)}}};return r}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{var d;const r=[this.selectors.FILE_PREVIEW,".file-attachment",".attachment-preview",".file-upload-preview",'[data-testid*="file"]','[data-testid*="attachment"]',".uploaded-file",".file-item",'[class*="file"]','[class*="attachment"]','[class*="upload"]'];for(const p of r){const v=document.querySelectorAll(p);for(let w=0;w<v.length;w++){const S=v[w];if(S&&S.offsetHeight>0&&S.offsetWidth>0&&((d=S.textContent)!=null&&d.trim()||S.querySelector("img, svg"))){this.context.logger.debug(`File preview found with selector: ${p}`),n(!0);return}}}const s=document.querySelector(".rounded-xl.overflow-hidden.p-2.border.border-slate-4");if(s){const p=s.querySelectorAll("img"),v=s.querySelectorAll("[data-file], [data-attachment]");if(p.length>0||v.length>0){this.context.logger.debug("File content detected in chat container"),n(!0);return}}this.context.logger.debug("No file preview found"),n(!1)},1e3)})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`openrouter-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}onPageChanged(n,r){this.context.logger.debug(`OpenRouter page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`OpenRouter host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("OpenRouter adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in OpenRouter adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}};U(zf,"instanceCount",0);let Z0=zf;const Df=class Df extends or{constructor(){super();U(this,"name","T3ChatAdapter");U(this,"version","2.0.0");U(this,"hostnames",["t3.chat"]);U(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);U(this,"selectors",{CHAT_INPUT:'textarea#chat-input, textarea[placeholder*="Type your message"], textarea.resize-none, div[contenteditable="true"]',SUBMIT_BUTTON:'button[type="submit"], button[aria-label*="Submit"], button[aria-label*="Send"], button.send-button',FILE_UPLOAD_BUTTON:'button[aria-label="Add files"], button[aria-label*="attach"], input[type="file"]',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".chat-container, .main-content, .conversation-container",DROP_ZONE:".chat-input-container, .text-input-field, .input-area, textarea#chat-input",FILE_PREVIEW:".file-preview, .attachment-preview, .uploaded-file",BUTTON_INSERTION_CONTAINER:'div[aria-label="Message actions"], .message-actions, .chat-input-actions, .-mb-px.mt-2.flex.w-full.flex-row-reverse.justify-between',FALLBACK_INSERTION:".chat-input-container, .input-area, .conversation-input"});U(this,"lastUrl","");U(this,"urlCheckInterval",null);U(this,"mcpPopoverContainer",null);U(this,"mutationObserver",null);U(this,"popoverCheckInterval",null);U(this,"storeEventListenersSetup",!1);U(this,"domObserversSetup",!1);U(this,"uiIntegrationSetup",!1);U(this,"instanceId");Df.instanceCount++,this.instanceId=Df.instanceCount,console.debug(`[T3ChatAdapter] Instance #${this.instanceId} created. Total instances: ${Df.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`T3Chat adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing T3Chat adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`T3Chat adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating T3Chat adapter instance #${this.instanceId}...`),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("T3Chat adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating T3Chat adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up T3Chat adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into T3Chat chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const p of d)if(s=document.querySelector(p.trim()),s){this.context.logger.debug(`Found chat input using selector: ${p.trim()}`);break}}if(!s)return this.context.logger.error("Could not find T3Chat chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{if(s.focus(),s.tagName==="TEXTAREA"){const d=s,p=d.value,v=p?`${p}

${n}`:n;d.value=v,d.selectionStart=d.selectionEnd=d.value.length,d.dispatchEvent(new InputEvent("input",{bubbles:!0})),this.context.logger.debug("Text inserted into textarea element")}else if(s.getAttribute("contenteditable")==="true"){const d=s.textContent||"",p=window.getSelection(),v=document.createRange();v.selectNodeContents(s),v.collapse(!1),p==null||p.removeAllRanges(),p==null||p.addRange(v),d&&d.trim()!==""&&document.execCommand("insertText",!1,`

`),document.execCommand("insertText",!1,n),s.dispatchEvent(new InputEvent("input",{bubbles:!0})),this.context.logger.debug("Text inserted into contenteditable element")}else{const d=s.textContent||"",p=d?d+`

`+n:n;s.textContent=p,s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug("Text inserted using fallback method")}return this.emitExecutionCompleted("insertText",{text:n},{success:!0,elementType:s.tagName,method:s.tagName==="TEXTAREA"?"textarea.value":s.getAttribute("contenteditable")==="true"?"execCommand":"textContent"}),this.context.logger.debug("Text inserted successfully into T3Chat"),!0}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into T3Chat chat input: ${p}`),this.emitExecutionFailed("insertText",p),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit T3Chat chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const p of s)if(r=document.querySelector(p.trim()),r){this.context.logger.debug(`Found submit button using selector: ${p.trim()}`);break}if(!r)return this.context.logger.debug("Submit button not found, trying Enter key simulation"),this.simulateEnterKeyPress();try{if(r.disabled)return this.context.logger.warn("T3Chat submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const p=r.getBoundingClientRect();return p.width===0||p.height===0?(this.context.logger.warn("T3Chat submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("T3Chat chat input submitted successfully"),!0)}catch(p){const v=p instanceof Error?p.message:String(p);return this.context.logger.error(`Error submitting T3Chat chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async simulateEnterKeyPress(){try{const n=document.querySelector(this.selectors.CHAT_INPUT.split(", ")[0]);if(!n)return this.context.logger.error("Could not find chat input for Enter key simulation"),this.emitExecutionFailed("submitForm","Chat input not found for Enter key simulation"),!1;const r=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});return n.dispatchEvent(r),setTimeout(()=>{const s=n.closest("form");s&&s.dispatchEvent(new SubmitEvent("submit",{bubbles:!0,cancelable:!0}))},100),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKeySimulation"}),this.context.logger.debug("T3Chat form submitted via Enter key simulation"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error simulating Enter key press: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){var s;this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;const d=document.querySelector(this.selectors.FILE_INPUT);if(!d)return this.context.logger.error("Could not find file input element"),this.emitExecutionFailed("attachFile","File input element not found"),!1;const p=new DataTransfer;p.items.add(n),d.files=p.files;const v=new Event("change",{bubbles:!0});d.dispatchEvent(v);const w=await this.checkFilePreview();return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,inputElement:((s=r==null?void 0:r.inputElement)==null?void 0:s.tagName)||"unknown"},{success:!0,previewFound:w,method:"fileInput.files"}),this.context.logger.debug(`File attached successfully: ${n.name}`),!0}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error attaching file to T3Chat: ${p}`),this.emitExecutionFailed("attachFile",p),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if T3Chat adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by T3Chat adapter`),!1;const p=[/^https?:\/\/(?:www\.)?t3\.chat\/.*/,/^https?:\/\/t3\.chat\/.*/].some(v=>v.test(r));return p?this.context.logger.debug(`T3Chat adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),p}supportsFileUpload(){this.context.logger.debug("Checking file upload support for T3Chat");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for T3Chat adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for T3Chat adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for T3Chat adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,p=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(p,500)};setTimeout(p,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for T3Chat adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for T3Chat adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in T3Chat adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("T3Chat adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector('div[aria-label="Message actions"]');if(n){this.context.logger.debug('Found insertion point: div[aria-label="Message actions"]');const p=n.querySelector('button[type="submit"]');return{container:n,insertAfter:p||null}}const r=document.querySelector(".-mb-px.mt-2.flex.w-full.flex-row-reverse.justify-between");if(r){this.context.logger.debug("Found insertion point: T3Chat flex container");const p=r.querySelector("div");return{container:r,insertAfter:p||null}}const s=[".chat-input-actions",".message-actions",".input-area .actions"];for(const p of s){const v=document.querySelector(p);if(v)return this.context.logger.debug(`Found fallback insertion point: ${p}`),{container:v,insertAfter:null}}const d=document.querySelector("#chat-input");if(d){const p=d.closest("div");if(p)return this.context.logger.debug("Found insertion point: near chat input"),{container:p,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into T3Chat interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>tr).then(r=>{Promise.resolve().then(()=>ir).then(s=>{Promise.resolve().then(()=>sr).then(({MCPPopover:d})=>{const p=this.createToggleStateManager();s.createRoot(n).render(r.createElement(d,{toggleStateManager:p})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,p=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${p}, autoSubmit=${v}`),{mcpEnabled:p,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,p;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(p=n.stores.ui)!=null&&p.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(w=>{n.logger.error("Error showing sidebar:",w)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(w=>{n.logger.error("Error hiding sidebar:",w)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),p=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(p)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{document.querySelector(this.selectors.FILE_PREVIEW)?(this.context.logger.debug("File preview element found after attachment"),n(!0)):(this.context.logger.warn("File preview element not found after attachment"),n(!1))},500)})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`t3chat-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`T3Chat page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`T3Chat host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("T3Chat adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in T3Chat adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};U(Df,"instanceCount",0);let Q0=Df;const Nf=class Nf extends or{constructor(){super();U(this,"name","MistralAdapter");U(this,"version","2.0.1");U(this,"hostnames",["chat.mistral.ai"]);U(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);U(this,"selectors",{CHAT_INPUT:'textarea[name="message.text"], textarea[placeholder="Ask Le Chat anything"], div.ProseMirror[contenteditable="true"][data-placeholder="Ask Le Chat anything"], div.ProseMirror[contenteditable="true"]',SUBMIT_BUTTON:'button[aria-label="Dictation"], .ms-auto .flex.gap-2 button[type="submit"], button.bg-state-primary',FILE_UPLOAD_BUTTON:'button[data-testid="attach-file-button"], button[aria-label="Add files"]',FILE_INPUT:'input[name="file-upload"], input[type="file"][multiple]',MAIN_PANEL:".relative.flex.w-full.flex-col.px-4.pt-3.pb-4",DROP_ZONE:'div.ProseMirror[contenteditable="true"][data-placeholder="Ask Le Chat anything"], div.ProseMirror[contenteditable="true"], div[data-radix-scroll-area-viewport], .relative.flex.w-full.flex-col.px-4.pt-3.pb-4, textarea[name="message.text"]',FILE_PREVIEW:"div.relative.rounded-md.border.border-default.bg-muted, .file-preview, .attachment-preview, .uploaded-file",BUTTON_INSERTION_CONTAINER:".flex.w-full.max-w-full.items-center.justify-start.gap-3, .flex.gap-2.ms-auto",TOOLS_BUTTON:'button[data-testid="tools-selection-button"]',FALLBACK_INSERTION:".relative.flex.w-full.flex-col.px-4.pt-3.pb-4, .chat-input-container"});U(this,"lastUrl","");U(this,"urlCheckInterval",null);U(this,"mcpPopoverContainer",null);U(this,"mutationObserver",null);U(this,"popoverCheckInterval",null);U(this,"storeEventListenersSetup",!1);U(this,"domObserversSetup",!1);U(this,"uiIntegrationSetup",!1);U(this,"instanceId");Nf.instanceCount++,this.instanceId=Nf.instanceCount,console.debug(`[MistralAdapter] Instance #${this.instanceId} created. Total instances: ${Nf.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Mistral adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Mistral adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Mistral adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Mistral adapter instance #${this.instanceId}...`),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Mistral adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Mistral adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Mistral adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Mistral chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const p of d)if(s=document.querySelector(p.trim()),s){this.context.logger.debug(`Found chat input using selector: ${p.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Mistral chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{const d=s.tagName.toLowerCase()==="textarea",p=s.classList.contains("ProseMirror");let v="";if(d?v=s.value||"":p&&(v=s.textContent||""),s.focus(),d){const S=v?v+`
`+n:n;s.value=S,s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{bubbles:!0}))}else if(p){const S=s.querySelectorAll("p"),k=S.length>1||S.length===1&&S[0].textContent&&S[0].textContent.trim()!=="",I=n.split(`
`);if(k){let A=null;for(let _=S.length-1;_>=0;_--){const H=S[_];if(H.textContent&&H.textContent.trim()!==""){A=H;break}}if(A){const _=A.querySelector("br.ProseMirror-trailingBreak");if(_&&_.remove(),I.length>0){A.appendChild(document.createElement("br")),A.appendChild(document.createTextNode(I[0]));for(let H=1;H<I.length;H++){const re=document.createElement("p");if(I[H].trim()===""){const G=document.createElement("br");G.className="ProseMirror-trailingBreak",re.appendChild(G)}else re.textContent=I[H];s.insertBefore(re,s.lastElementChild)}}}}else{s.innerHTML="",I.forEach(H=>{const re=document.createElement("p");if(H.trim()===""){const G=document.createElement("br");G.className="ProseMirror-trailingBreak",re.appendChild(G)}else re.textContent=H;s.appendChild(re)});const A=document.createElement("p"),_=document.createElement("br");_.className="ProseMirror-trailingBreak",A.appendChild(_),s.appendChild(A)}s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0}));const R=window.getSelection();if(R){R.removeAllRanges();const A=document.createRange();A.selectNodeContents(s),A.collapse(!1),R.addRange(A)}}const w=d?s.value||"":s.textContent||"";return this.emitExecutionCompleted("insertText",{text:n},{success:!0,originalLength:v.length,newLength:n.length,totalLength:w.length,editorType:d?"textarea":p?"ProseMirror":"unknown"}),this.context.logger.debug(`Text inserted successfully into ${d?"textarea":p?"ProseMirror":"unknown"} editor`),!0}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Mistral chat input: ${p}`),this.emitExecutionFailed("insertText",p),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit Mistral chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const p of s)if(r=document.querySelector(p.trim()),r){this.context.logger.debug(`Found submit button using selector: ${p.trim()}`);break}if(!r)return this.context.logger.error("Could not find Mistral submit button"),this.emitExecutionFailed("submitForm","Submit button not found"),!1;try{if(r.disabled)return this.context.logger.warn("Mistral submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const p=r.getBoundingClientRect();return p.width===0||p.height===0?(this.context.logger.warn("Mistral submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("Mistral chat input submitted successfully"),!0)}catch(p){const v=p instanceof Error?p.message:String(p);return this.context.logger.error(`Error submitting Mistral chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async attachFile(n,r){var s;this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let d=await this.attachFileDirectly(n);if(d||(d=await this.attachFileViaDragDrop(n)),d){const p=await this.checkFilePreview();return this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,inputElement:((s=r==null?void 0:r.inputElement)==null?void 0:s.tagName)||"unknown"},{success:!0,previewFound:p,method:"direct-input"}),this.context.logger.debug(`File attached successfully: ${n.name}`),!0}else return this.emitExecutionFailed("attachFile","All attachment methods failed"),!1}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error attaching file to Mistral: ${p}`),this.emitExecutionFailed("attachFile",p),!1}}async attachFileDirectly(n){try{console.debug("[system] Attempting direct file attachment via drag simulation");let r=document.querySelector('div.ProseMirror[contenteditable="true"]');if(r||(r=document.querySelector("div[data-radix-scroll-area-viewport]")),!r)return console.warn("[system] Drop zone not found"),!1;const s=new DataTransfer;s.items.add(n);const d=new DragEvent("dragenter",{bubbles:!0,cancelable:!0,dataTransfer:s});r.dispatchEvent(d);const p=new DragEvent("dragover",{bubbles:!0,cancelable:!0,dataTransfer:s});r.dispatchEvent(p);const v=new DragEvent("drop",{bubbles:!0,cancelable:!0,dataTransfer:s});return r.dispatchEvent(v),console.debug(`[system] Direct drag simulation completed on ${r.classList.contains("ProseMirror")?"ProseMirror":"scroll area"} drop zone`),!0}catch(r){return console.error("[system] Direct drag simulation failed:",r),!1}}async attachFileViaDragDrop(n){try{if(console.debug("[system] Attempting file attachment via drag-drop simulation"),!await this.injectFileDropListener())return console.warn("[system] Failed to inject file drop listener"),!1;const s=await this.readFileAsDataURL(n);return window.postMessage({type:"MCP_DROP_FILE",fileName:n.name,fileType:n.type,fileSize:n.size,lastModified:n.lastModified,fileData:s},"*"),console.debug("[system] Drag-drop simulation message sent"),!0}catch(r){return console.error("[system] Drag-drop simulation failed:",r),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Mistral adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Mistral adapter`),!1;const p=[/^https:\/\/chat\.mistral\.ai\/.*/,/^https:\/\/chat\.mistral\.ai\/chat\/.*/].some(v=>v.test(r));return p?this.context.logger.debug(`Mistral adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),p}supportsFileUpload(){this.context.logger.debug("Checking file upload support for Mistral");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Mistral adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Mistral adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Mistral adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,p=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(p,500)};setTimeout(p,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Mistral adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Mistral adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Mistral adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Mistral adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector(this.selectors.TOOLS_BUTTON);if(n&&n.parentElement)return this.context.logger.debug("Found Tools button, placing MCP popover next to it"),{container:n.parentElement,insertAfter:n};const r=document.querySelector('button:has(p:contains("Tools")), button[aria-label*="Tools"], button[title*="Tools"]');if(r&&r.parentElement)return this.context.logger.debug("Found Tools button (alternative selector), placing MCP popover next to it"),{container:r.parentElement,insertAfter:r};const s=document.querySelector(".flex.w-full.max-w-full.items-center.justify-start.gap-3");if(s){this.context.logger.debug("Found button container: .flex.w-full.max-w-full.items-center.justify-start.gap-3");const p=s.querySelectorAll("button"),v=p.length>1?p[1]:p.length>0?p[0]:null;return{container:s,insertAfter:v}}const d=[".input-actions",".chat-actions",".message-actions",".input-area .actions",".chat-input-actions",".conversation-input .actions",".chat-input-container",".input-area"];for(const p of d){const v=document.querySelector(p);if(v)return this.context.logger.debug(`Found fallback insertion point: ${p}`),{container:v,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Mistral interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>tr).then(r=>{Promise.resolve().then(()=>ir).then(s=>{Promise.resolve().then(()=>sr).then(({MCPPopover:d})=>{const p=this.createToggleStateManager();s.createRoot(n).render(r.createElement(d,{toggleStateManager:p})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,p=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${p}, autoSubmit=${v}`),{mcpEnabled:p,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,p;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(p=n.stores.ui)!=null&&p.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(w=>{n.logger.error("Error showing sidebar:",w)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(w=>{n.logger.error("Error hiding sidebar:",w)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),p=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(p)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}async injectFileDropListener(){try{if(!await this.validateDropZone())return console.warn("[system] Drop zone validation failed, skipping file drop listener injection"),!1;const r=this.context.chrome.runtime.getURL("dragDropListener.js"),s=document.createElement("script");return s.src=r,await new Promise((d,p)=>{s.onload=()=>d(),s.onerror=()=>p(new Error("Failed to load drop listener script")),(document.head||document.documentElement).appendChild(s)}),s.remove(),console.debug("[system] File drop listener injected successfully for Mistral"),!0}catch(n){return this.context.logger.error("Failed to inject file drop listener:",n),!1}}readFileAsDataURL(n){return new Promise((r,s)=>{const d=new FileReader;d.onload=()=>r(d.result),d.onerror=()=>s(d.error),d.readAsDataURL(n)})}async checkFilePreview(){return new Promise(n=>{const r=[500,1e3,1500];let s=0;const d=()=>{var v,w,S,k,I;const p=document.querySelector(this.selectors.FILE_PREVIEW);if(p&&(((v=p.textContent)==null?void 0:v.includes(".md"))||((w=p.textContent)==null?void 0:w.includes(".pdf"))||((S=p.textContent)==null?void 0:S.includes(".txt"))||((k=p.textContent)==null?void 0:k.includes(".doc"))||p.querySelector(".text-sm.leading-6.font-medium"))){console.debug(`[system] File preview found after ${r[s]}ms:`,(I=p.textContent)==null?void 0:I.trim()),this.context.logger.debug("File preview element found after attachment"),n(!0);return}s++,s<r.length?setTimeout(d,r[s]):(console.warn("[system] File preview element not found after all attempts"),this.context.logger.warn("File preview element not found after attachment"),n(!1))};setTimeout(d,r[0])})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`mistral-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Mistral page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Mistral host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Mistral adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Mistral adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}async validateDropZone(){try{console.debug("[system] Validating drop zone availability before injection");const n=this.selectors.DROP_ZONE.split(", ").map(r=>r.trim());for(const r of n)if(document.querySelector(r))return console.debug(`[system] Drop zone validated with selector: ${r}`),window.mistralDropZoneSelector=r,!0;return console.warn("[system] No drop zone found during validation"),!1}catch(n){return console.error("[system] Error validating drop zone:",n),!1}}};U(Nf,"instanceCount",0);let K0=Nf;var hv={exports:{}},np={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function xT(){if(hw)return np;hw=1;var h=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function n(r,s,d){var p=null;if(d!==void 0&&(p=""+d),s.key!==void 0&&(p=""+s.key),"key"in s){d={};for(var v in s)v!=="key"&&(d[v]=s[v])}else d=s;return s=d.ref,{$$typeof:h,type:r,key:p,ref:s!==void 0?s:null,props:d}}return np.Fragment=u,np.jsx=n,np.jsxs=n,np}var ap={},pw;function ST(){if(pw)return ap;pw=1;var h={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return h.NODE_ENV!=="production"&&function(){function u(P){if(P==null)return null;if(typeof P=="function")return P.$$typeof===Ue?null:P.displayName||P.name||null;if(typeof P=="string")return P;switch(P){case re:return"Fragment";case ue:return"Profiler";case G:return"StrictMode";case J:return"Suspense";case he:return"SuspenseList";case de:return"Activity"}if(typeof P=="object")switch(typeof P.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),P.$$typeof){case H:return"Portal";case ce:return(P.displayName||"Context")+".Provider";case ye:return(P._context.displayName||"Context")+".Consumer";case be:var fe=P.render;return P=P.displayName,P||(P=fe.displayName||fe.name||"",P=P!==""?"ForwardRef("+P+")":"ForwardRef"),P;case ie:return fe=P.displayName||null,fe!==null?fe:u(P.type)||"Memo";case Ee:fe=P._payload,P=P._init;try{return u(P(fe))}catch{}}return null}function n(P){return""+P}function r(P){try{n(P);var fe=!1}catch{fe=!0}if(fe){fe=console;var ne=fe.error,ke=typeof Symbol=="function"&&Symbol.toStringTag&&P[Symbol.toStringTag]||P.constructor.name||"Object";return ne.call(fe,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",ke),n(P)}}function s(P){if(P===re)return"<>";if(typeof P=="object"&&P!==null&&P.$$typeof===Ee)return"<...>";try{var fe=u(P);return fe?"<"+fe+">":"<...>"}catch{return"<...>"}}function d(){var P=ze.A;return P===null?null:P.getOwner()}function p(){return Error("react-stack-top-frame")}function v(P){if(Fe.call(P,"key")){var fe=Object.getOwnPropertyDescriptor(P,"key").get;if(fe&&fe.isReactWarning)return!1}return P.key!==void 0}function w(P,fe){function ne(){Q||(Q=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",fe))}ne.isReactWarning=!0,Object.defineProperty(P,"key",{get:ne,configurable:!0})}function S(){var P=u(this.type);return V[P]||(V[P]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),P=this.props.ref,P!==void 0?P:null}function k(P,fe,ne,ke,Be,Te,Pe,Me){return ne=Te.ref,P={$$typeof:_,type:P,key:fe,props:Te,_owner:Be},(ne!==void 0?ne:null)!==null?Object.defineProperty(P,"ref",{enumerable:!1,get:S}):Object.defineProperty(P,"ref",{enumerable:!1,value:null}),P._store={},Object.defineProperty(P._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(P,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(P,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:Pe}),Object.defineProperty(P,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:Me}),Object.freeze&&(Object.freeze(P.props),Object.freeze(P)),P}function I(P,fe,ne,ke,Be,Te,Pe,Me){var $e=fe.children;if($e!==void 0)if(ke)if(Ge($e)){for(ke=0;ke<$e.length;ke++)R($e[ke]);Object.freeze&&Object.freeze($e)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else R($e);if(Fe.call(fe,"key")){$e=u(P);var it=Object.keys(fe).filter(function(lt){return lt!=="key"});ke=0<it.length?"{key: someKey, "+it.join(": ..., ")+": ...}":"{key: someKey}",$[$e+ke]||(it=0<it.length?"{"+it.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ke,$e,it,$e),$[$e+ke]=!0)}if($e=null,ne!==void 0&&(r(ne),$e=""+ne),v(fe)&&(r(fe.key),$e=""+fe.key),"key"in fe){ne={};for(var Ke in fe)Ke!=="key"&&(ne[Ke]=fe[Ke])}else ne=fe;return $e&&w(ne,typeof P=="function"?P.displayName||P.name||"Unknown":P),k(P,$e,Te,Be,d(),ne,Pe,Me)}function R(P){typeof P=="object"&&P!==null&&P.$$typeof===_&&P._store&&(P._store.validated=1)}var A=df(),_=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),ye=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),Ee=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),Ue=Symbol.for("react.client.reference"),ze=A.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe=Object.prototype.hasOwnProperty,Ge=Array.isArray,Xe=console.createTask?console.createTask:function(){return null};A={"react-stack-bottom-frame":function(P){return P()}};var Q,V={},ee=A["react-stack-bottom-frame"].bind(A,p)(),Oe=Xe(s(p)),$={};ap.Fragment=re,ap.jsx=function(P,fe,ne,ke,Be){var Te=1e4>ze.recentlyCreatedOwnerStacks++;return I(P,fe,ne,!1,ke,Be,Te?Error("react-stack-top-frame"):ee,Te?Xe(s(P)):Oe)},ap.jsxs=function(P,fe,ne,ke,Be){var Te=1e4>ze.recentlyCreatedOwnerStacks++;return I(P,fe,ne,!0,ke,Be,Te?Error("react-stack-top-frame"):ee,Te?Xe(s(P)):Oe)}}(),ap}var mw;function wT(){if(mw)return hv.exports;mw=1;var h={};return h.NODE_ENV==="production"?hv.exports=xT():hv.exports=ST(),hv.exports}var C=wT();const ET=h=>{if(!h){M("[applyDarkMode] Shadow root is not available");return}h.host&&(h.host.classList.remove("light"),h.host.classList.add("dark"));const u=h.querySelector("#theme-variables");if(u)u.textContent=bw();else{const n=document.createElement("style");n.id="theme-variables",n.textContent=bw(),h.appendChild(n)}M("[applyDarkMode] Dark mode applied to Shadow DOM")},CT=h=>{if(!h){M("[applyLightMode] Shadow root is not available");return}h.host&&(h.host.classList.remove("dark"),h.host.classList.add("light"));const u=h.querySelector("#theme-variables");if(u)u.textContent=vw();else{const n=document.createElement("style");n.id="theme-variables",n.textContent=vw(),h.appendChild(n)}M("[applyLightMode] Light mode applied to Shadow DOM")};function bw(){return`
    :host {
      --bg-primary: #0f172a;
      --bg-secondary: #1e293b;
      --bg-tertiary: #293548;
      --text-primary: #f8fafc;
      --text-secondary: #94a3b8;
      --text-tertiary: #cbd5e1;
      --border-primary: #334155;
      --border-secondary: #475569;
      --hover-bg: #334155;
      --hover-bg-light: #3f4f6e;
      --shadow-color: rgba(0, 0, 0, 0.3);
    }
    
    /* Force common dark mode styles */
    :host(.dark) .bg-white, :host(.dark) [class*="bg-white"] {
      background-color: var(--bg-primary) !important;
    }
    
    :host(.dark) .bg-slate-50, :host(.dark) [class*="bg-slate-50"] {
      background-color: var(--bg-primary) !important;
    }
    
    :host(.dark) .bg-slate-100, :host(.dark) [class*="bg-slate-100"] {
      background-color: var(--bg-primary) !important;
    }
    
    :host(.dark) .bg-slate-900, :host(.dark) [class*="bg-slate-900"] {
      background-color: var(--bg-primary) !important;
    }
    
    :host(.dark) .bg-slate-800, :host(.dark) [class*="bg-slate-800"] {
      background-color: var(--bg-secondary) !important;
    }
    
    :host(.dark) .text-slate-900, :host(.dark) [class*="text-slate-900"] {
      color: var(--text-primary) !important;
    }
    
    :host(.dark) .text-slate-700, :host(.dark) [class*="text-slate-700"],
    :host(.dark) .text-slate-600, :host(.dark) [class*="text-slate-600"] {
      color: var(--text-tertiary) !important;
    }
    
    :host(.dark) .text-slate-500, :host(.dark) [class*="text-slate-500"],
    :host(.dark) .text-slate-400, :host(.dark) [class*="text-slate-400"] {
      color: var(--text-secondary) !important;
    }

    :host(.dark) .text-slate-300, :host(.dark) [class*="text-slate-300"],
    :host(.dark) .text-slate-200, :host(.dark) [class*="text-slate-200"],
    :host(.dark) .text-slate-100, :host(.dark) [class*="text-slate-100"] {
      color: var(--text-primary) !important;
    }
    
    :host(.dark) .border-slate-200, :host(.dark) [class*="border-slate-200"] {
      border-color: var(--border-primary) !important;
    }
    
    :host(.dark) .border-slate-300, :host(.dark) [class*="border-slate-300"] {
      border-color: var(--border-secondary) !important;
    }
    
    :host(.dark) .hover\\:bg-slate-100:hover, :host(.dark) .hover\\:bg-slate-200:hover {
      background-color: var(--hover-bg) !important;
    }
    
    /* Fix input area styles in dark mode */
    :host(.dark) textarea, :host(.dark) input[type="text"] {
      background-color: var(--bg-secondary) !important;
      color: var(--text-primary) !important;
      border-color: var(--border-primary) !important;
    }
    
    :host(.dark) .input-area {
      background-color: var(--bg-secondary) !important;
      border-color: var(--border-primary) !important;
    }
    
  `}function vw(){return`
    :host {
      --bg-primary: #ffffff;
      --bg-secondary: #f8fafc;
      --bg-tertiary: #f1f5f9;
      --text-primary: #0f172a;
      --text-secondary: #334155;
      --text-tertiary: #64748b;
      --border-primary: #e2e8f0;
      --border-secondary: #cbd5e1;
      --hover-bg: #e2e8f0;
      --shadow-color: rgba(0, 0, 0, 0.1);
    }
    
    /* Force common light mode styles */
    :host(.light) .bg-white, :host(.light) [class*="bg-white"] {
      background-color: var(--bg-primary) !important;
    }

    :host(.light) .bg-card, :host(.light) [class*="bg-card"] {
      background-color: var(--bg-primary) !important;
    }
    
    :host(.light) .bg-slate-50, :host(.light) [class*="bg-slate-50"] {
      background-color: var(--bg-secondary) !important;
    }
    
    :host(.light) .bg-slate-100, :host(.light) [class*="bg-slate-100"] {
      background-color: var(--bg-tertiary) !important;
    }

    
    :host(.light) .text-slate-900, :host(.light) [class*="text-slate-900"] {
      color: var(--text-primary) !important;
    }

    :host(.light) .text-slate-800, :host(.light) [class*="text-slate-800"] {
      color: var(--text-primary) !important;
    }
    
    :host(.light) .text-slate-700, :host(.light) [class*="text-slate-700"],
    :host(.light) .text-slate-600, :host(.light) [class*="text-slate-600"] {
      color: var(--text-secondary) !important;
    }
    
    :host(.light) .text-slate-500, :host(.light) [class*="text-slate-500"],
    :host(.light) .text-slate-400, :host(.light) [class*="text-slate-400"] {
      color: var(--text-tertiary) !important;
    }
    
    :host(.light) .border-slate-200, :host(.light) [class*="border-slate-200"] {
      border-color: var(--border-primary) !important;
    }
    
    :host(.light) .border-slate-300, :host(.light) [class*="border-slate-300"] {
      border-color: var(--border-secondary) !important;
    }
    
    :host(.light) .hover\\:bg-slate-100:hover, :host(.light) .hover\\:bg-slate-200:hover {
      background-color: var(--hover-bg) !important;
    }
    
    /* Fix input area styles in light mode */
    :host(.light) textarea, :host(.light) input[type="text"] {
      background-color: var(--bg-primary) !important;
      color: var(--text-primary) !important;
      border-color: var(--border-secondary) !important;
    }
    
    :host(.light) .input-area {
      background-color: var(--bg-primary) !important;
      border-color: var(--border-secondary) !important;
    }
  `}const TT=async h=>{if(!h)throw new Error("Shadow root is not available for style injection");try{const u=chrome.runtime.getURL("content/index.css");M(`Fetching Tailwind CSS from: ${u}`);const n=await fetch(u);if(!n.ok)throw new Error(`Failed to fetch CSS: ${n.statusText}`);const r=await n.text();try{const d=new CSSStyleSheet;await d.replace(r),h.adoptedStyleSheets=[d],M("Successfully injected Tailwind CSS using Constructable Stylesheets")}catch(d){M(`Constructable Stylesheets not supported, falling back to style element: ${d instanceof Error?d.message:String(d)}`);const p=document.createElement("style");p.textContent=r,h.appendChild(p),M("Successfully injected Tailwind CSS using style element fallback")}const s=document.createElement("style");s.textContent=`
      :host {
        display: block;
      }
      *, :host {
        box-sizing: border-box;
      }
    `,h.appendChild(s),M("Tailwind CSS injection completed with browser compatibility handling")}catch(u){throw M(`Error injecting Tailwind CSS: ${u instanceof Error?u.message:String(u)}`),u}};class kT{constructor(u){U(this,"container",null);U(this,"root",null);U(this,"_isVisible",!1);U(this,"siteType");U(this,"shadowHost",null);U(this,"shadowRoot",null);U(this,"_isPushContentMode",!1);U(this,"_initializationPromise",null);U(this,"_isInitialized",!1);U(this,"handleToolsUpdated",()=>{this._isVisible&&M("[BaseSidebarManager] Tools updated - letting React components handle updates")});U(this,"refreshInterval",null);this.siteType=u}getShadowHost(){return this.shadowHost}applyThemeClass(u){if(!this.shadowHost||!this.shadowRoot)return M("[BaseSidebarManager] Cannot apply theme: Shadow host or root not found."),!1;const n=window.matchMedia("(prefers-color-scheme: dark)").matches;return this.shadowHost.classList.remove("light","dark"),u==="dark"||u==="system"&&n?(this.shadowHost.classList.add("dark"),ET(this.shadowRoot),M(`[BaseSidebarManager] Applied dark theme (Selected: ${u}, System Prefers Dark: ${n})`)):(this.shadowHost.classList.add("light"),CT(this.shadowRoot),M(`[BaseSidebarManager] Applied light theme (Selected: ${u}, System Prefers Dark: ${n})`)),M(`[BaseSidebarManager] Applied ${u} theme (CSS-only, no re-render)`),!0}setPushContentMode(u,n,r){if(this._isPushContentMode=u,u){const s=r?56:n||320;document.documentElement.style.setProperty("--sidebar-width-mcp",`${s}px`),document.documentElement.style.setProperty("position","relative","important"),document.documentElement.style.setProperty("margin-right",`${s}px`,"important"),document.documentElement.style.setProperty("width",`calc(100% - ${s}px)`,"important"),document.documentElement.style.setProperty("min-height","100vh","important"),document.documentElement.style.setProperty("box-sizing","border-box","important"),document.body.style.setProperty("margin-right","0","important"),document.body.style.setProperty("padding-right","0","important"),document.body.style.setProperty("box-sizing","border-box","important"),document.body.style.setProperty("max-width","none","important"),document.documentElement.classList.add("push-mode-enabled"),r?document.documentElement.classList.add("sidebar-collapsed"):document.documentElement.classList.remove("sidebar-collapsed"),M(`[BaseSidebarManager] Push mode enabled with width: ${s}px`),M(`[BaseSidebarManager] Applied styles - margin-right: ${document.documentElement.style.marginRight}, width: ${document.documentElement.style.width}`),M(`[BaseSidebarManager] HTML classes: ${document.documentElement.className}`);const d=window.getComputedStyle(document.documentElement);M(`[BaseSidebarManager] Computed styles - margin-right: ${d.marginRight}, width: ${d.width}`);const p=window.getComputedStyle(document.body);M(`[BaseSidebarManager] Body computed styles - margin-right: ${p.marginRight}, max-width: ${p.maxWidth}`),(!this._isVisible||this.shadowHost&&this.shadowHost.style.display!=="block")&&(M("[BaseSidebarManager] Push mode enabled but sidebar not visible, showing sidebar"),this.forceVisibility())}else document.documentElement.style.removeProperty("position"),document.documentElement.style.removeProperty("margin-right"),document.documentElement.style.removeProperty("width"),document.documentElement.style.removeProperty("min-height"),document.documentElement.style.removeProperty("box-sizing"),document.documentElement.style.removeProperty("transform"),document.body.style.removeProperty("margin-right"),document.body.style.removeProperty("padding-right"),document.body.style.removeProperty("box-sizing"),document.body.style.removeProperty("max-width"),document.documentElement.classList.remove("push-mode-enabled","sidebar-collapsed","push-mode-transform");this.ensurePushModeStyles(),M(`BaseSidebarManager: Push mode ${u?"enabled":"disabled"}`)}forceVisibility(){if(!this._isInitialized){M("[BaseSidebarManager] Cannot force visibility: not initialized");return}if(!this.shadowHost){M("[BaseSidebarManager] Cannot force visibility: no shadow host");return}this._isVisible=!0,this.shadowHost.style.display="block",this.shadowHost.style.opacity="1",this.shadowHost.classList.add("initialized"),this.shadowHost.classList.remove("showing"),this.shadowHost.offsetHeight,this.render(),M("[BaseSidebarManager] Forced sidebar visibility")}updatePushModeStyles(u){this._isPushContentMode&&(document.documentElement.style.setProperty("--sidebar-width-mcp",`${u}px`),document.documentElement.style.setProperty("margin-right",`${u}px`,"important"),document.documentElement.style.setProperty("width",`calc(100% - ${u}px)`,"important"),M(`[BaseSidebarManager] Updated push mode styles to width: ${u}px`))}removePushModeStyles(){document.documentElement.style.removeProperty("position"),document.documentElement.style.removeProperty("margin-right"),document.documentElement.style.removeProperty("width"),document.documentElement.style.removeProperty("min-height"),document.documentElement.classList.remove("push-mode-enabled","sidebar-collapsed")}ensurePushModeStyles(){if(!document.getElementById("mcp-sidebar-push-styles")){const u=document.createElement("style");u.id="mcp-sidebar-push-styles",u.textContent=`
        /* High-priority push mode styles with !important to override website styles */
        html.push-mode-enabled {
          overflow-x: hidden !important;
          transition: margin-right 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important, 
                      width 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important,
                      transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important;
          box-sizing: border-box !important;
        }
        
        /* Force position and dimensions for push mode */
        html.push-mode-enabled {
          position: relative !important;
        }
        
        /* Alternative transform-based push mode for websites that override margin/width */
        html.push-mode-enabled.push-mode-transform {
          transform: translateX(calc(var(--sidebar-width-mcp, 320px) * -1)) !important;
          width: 100vw !important;
          margin-right: 0 !important;
        }
        
        /* Ensure body also respects the new layout */
        html.push-mode-enabled body {
          margin-right: 0 !important;
          padding-right: 0 !important;
          overflow-x: hidden !important;
          box-sizing: border-box !important;
        }
        
        /* Ensure fixed elements don't overlap with sidebar */
        html.push-mode-enabled .sidebar {
          right: 0;
        }

        /* Add smooth resize styles */
        .sidebar {
          transition: width 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        .sidebar.resizing {
          transition: none !important;
        }
        
        /* Enhanced shadow host animations */
        #mcp-sidebar-shadow-host {
          opacity: 0;
          transform: translateX(30px) scale(0.95);
          transition: opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
                      transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        #mcp-sidebar-shadow-host.initialized {
          opacity: 1;
          transform: translateX(0) scale(1);
        }
        
        #mcp-sidebar-shadow-host.showing {
          transition-duration: 0s;
        }
        
        #mcp-sidebar-shadow-host.hiding {
          opacity: 0;
          transform: translateX(20px) scale(0.98);
          transition: opacity 0.3s cubic-bezier(0.55, 0.085, 0.68, 0.53),
                      transform 0.3s cubic-bezier(0.55, 0.085, 0.68, 0.53);
        }
        
        /* Add subtle backdrop effect */
        body:has(#mcp-sidebar-shadow-host.initialized) {
          transition: filter 0.3s ease;
        }
        
        /* Smooth page content adjustments */
        body {
          transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
      `,document.head.appendChild(u)}}getPushContentMode(){return this._isPushContentMode}getIsVisible(){return this._isVisible}async initialize(){return this._isInitialized?(M("Sidebar manager already initialized."),Promise.resolve()):this._initializationPromise?(M("Sidebar initialization already in progress, waiting..."),this._initializationPromise):(M("Starting sidebar manager initialization..."),this._initializationPromise=new Promise(async(u,n)=>{try{document.body||(M("[BaseSidebarManager] Document body not ready, waiting briefly..."),await new Promise(r=>{const s=()=>{document.body?r():document.readyState==="complete"||document.readyState==="interactive"?(document.body||(document.body=document.createElement("body"),M("[BaseSidebarManager] Created minimal document body")),r()):setTimeout(s,10)};s()})),this.shadowHost=document.createElement("div"),this.shadowHost.id="mcp-sidebar-shadow-host",this.shadowHost.style.position="fixed",this.shadowHost.style.top="0",this.shadowHost.style.right="0",this.shadowHost.style.zIndex="9999",this.shadowHost.style.height="100vh",this.shadowHost.style.pointerEvents="none",this.shadowHost.style.display="none",this.shadowHost.setAttribute("data-shadow-host","true"),M("[BaseSidebarManager] Shadow host created and set to display: none."),document.body.appendChild(this.shadowHost),this.shadowRoot=this.shadowHost.attachShadow({mode:"open"}),this.container=document.createElement("div"),this.container.id="sidebar-container",this.container.style.pointerEvents="auto",this.container.style.height="100%",this.container.style.width="100%",this.shadowRoot.appendChild(this.container);try{await TT(this.shadowRoot),M("[BaseSidebarManager] CSS injection successful")}catch(r){M(`[BaseSidebarManager] CSS injection failed but continuing: ${r instanceof Error?r.message:String(r)}`)}this.root=B0.createRoot(this.container),M("Sidebar manager initialized with Shadow DOM.");try{this.applyThemeClass("system")}catch(r){M(`[BaseSidebarManager] Theme application failed: ${r instanceof Error?r.message:String(r)}`)}this._isInitialized=!0,u()}catch(r){console.error("Error initializing Sidebar manager with Shadow DOM:",r),M(`Error initializing Sidebar manager with Shadow DOM: ${r instanceof Error?r.message:String(r)}`),this._isInitialized=!1,this.destroy(),n(r)}finally{this._initializationPromise=null}}),this._initializationPromise)}async show(){this._isVisible=!0,M("[BaseSidebarManager] Show requested, setting _isVisible = true");try{await this.initialize()}catch{M("Initialization failed during show(), cannot proceed."),this._isVisible=!1;return}if(!this.shadowHost||!this.root){M("Sidebar cannot be shown: Still not initialized or host/root missing after attempt."),this._isVisible=!1;return}this.shadowHost&&(this.shadowHost.style.display="block",this.shadowHost.style.opacity="0",this.shadowHost.style.transform="translateX(30px) scale(0.95)",this.shadowHost.classList.add("showing"),this.shadowHost.offsetHeight,requestAnimationFrame(()=>{this.shadowHost&&(this.shadowHost.style.transition="opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1)",this.shadowHost.style.opacity="1",this.shadowHost.style.transform="translateX(0) scale(1)",setTimeout(()=>{this.shadowHost&&(this.shadowHost.classList.add("initialized"),this.shadowHost.classList.remove("showing"))},100))}),setTimeout(()=>{this.render(),M("Sidebar shown with enhanced animations")},50))}hide(){M("[BaseSidebarManager] Hide method invoked."),this.shadowHost&&(this.shadowHost.classList.add("hiding"),this.shadowHost.classList.remove("initialized","showing"),this.shadowHost.style.transition="opacity 0.3s cubic-bezier(0.55, 0.085, 0.68, 0.53), transform 0.3s cubic-bezier(0.55, 0.085, 0.68, 0.53)",this.shadowHost.style.opacity="0",this.shadowHost.style.transform="translateX(20px) scale(0.98)",setTimeout(()=>{this.shadowHost&&(this.shadowHost.style.display="none",this.shadowHost.classList.remove("hiding"),this.shadowHost.style.transform="",M("[BaseSidebarManager] Sidebar hidden with smooth animation"))},300));const u=this._isVisible;this._isVisible=!1,this.setPushContentMode(!1),M(u?"[BaseSidebarManager] Sidebar hidden (was previously visible).":"[BaseSidebarManager] Sidebar state set to hidden (was already hidden or not shown yet).")}toggle(){this._isVisible?this.hide():this.show()}render(){if(!this.root||!this.container){M("Cannot render: Root or container not available.");return}try{const u=this.createSidebarContent();u?(M("Rendering sidebar content into container."),this.root.render(u)):(M("createSidebarContent returned null or undefined."),this.root.render(null))}catch(u){console.error("Error during React render:",u),M(`Error during React render: ${u instanceof Error?u.message:String(u)}`),this.root.render(xu.createElement("div",{style:{color:"red",padding:"10px"}},"Error rendering sidebar content."))}}destroy(){if(window.removeEventListener("mcpToolsUpdated",this.handleToolsUpdated),this.removePushModeStyles(),this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null),this.root){try{this.root.unmount()}catch(u){console.error("Error unmounting React root:",u)}this.root=null}if(this.shadowHost&&this.shadowHost.parentNode)try{this.shadowHost.parentNode.removeChild(this.shadowHost)}catch(u){console.error("Error removing shadow host from DOM:",u)}this.shadowHost=null,this.shadowRoot=null,this.container=null,this._isVisible=!1,this._isInitialized=!1,M("Sidebar manager destroyed")}}const yw=h=>Symbol.iterator in h,xw=h=>"entries"in h,Sw=(h,u)=>{const n=h instanceof Map?h:new Map(h.entries()),r=u instanceof Map?u:new Map(u.entries());if(n.size!==r.size)return!1;for(const[s,d]of n)if(!Object.is(d,r.get(s)))return!1;return!0},MT=(h,u)=>{const n=h[Symbol.iterator](),r=u[Symbol.iterator]();let s=n.next(),d=r.next();for(;!s.done&&!d.done;){if(!Object.is(s.value,d.value))return!1;s=n.next(),d=r.next()}return!!s.done&&!!d.done};function AT(h,u){return Object.is(h,u)?!0:typeof h!="object"||h===null||typeof u!="object"||u===null||Object.getPrototypeOf(h)!==Object.getPrototypeOf(u)?!1:yw(h)&&yw(u)?xw(h)&&xw(u)?Sw(h,u):MT(h,u):Sw({entries:()=>Object.entries(h)},{entries:()=>Object.entries(u)})}function Vr(h){const u=xu.useRef(void 0);return n=>{const r=h(n);return AT(u.current,r)?u.current:u.current=r}}const J0=()=>Oa(Vr(h=>({status:h.status,isConnected:h.status==="connected",isConnecting:h.status==="connecting",isReconnecting:h.isReconnecting,error:h.error,serverConfig:h.serverConfig,lastConnectedAt:h.lastConnectedAt,connectionAttempts:h.connectionAttempts,maxRetryAttempts:h.serverConfig.retryAttempts}))),ww=()=>Oa(Vr(h=>({config:h.serverConfig,setConfig:h.setServerConfig}))),Ew=()=>Yi(Vr(h=>({tools:h.availableTools,setAvailableTools:h.setAvailableTools}))),RT=()=>Yi(Vr(h=>({executions:h.toolExecutions,isExecuting:h.isExecuting,lastExecutionId:h.lastExecutionId,startExecution:h.startToolExecution,updateExecution:h.updateToolExecution,completeExecution:h.completeToolExecution,getExecution:h.getToolExecution}))),W0=()=>Yi(Vr(h=>({enabledTools:h.enabledTools,isLoadingEnablement:h.isLoadingEnablement,enableTool:h.enableTool,disableTool:h.disableTool,enableAllTools:h.enableAllTools,disableAllTools:h.disableAllTools,isToolEnabled:h.isToolEnabled,loadToolEnablementState:h.loadToolEnablementState}))),OT=()=>za(Vr(h=>({theme:h.theme,setTheme:h.setTheme}))),zT=()=>za(Vr(h=>({isVisible:h.sidebar.isVisible,isMinimized:h.sidebar.isMinimized,position:h.sidebar.position,width:h.sidebar.width,toggleSidebar:h.toggleSidebar,toggleMinimize:h.toggleMinimize,resizeSidebar:h.resizeSidebar,setSidebarVisibility:h.setSidebarVisibility}))),pv=()=>za(Vr(h=>({preferences:h.preferences,updatePreferences:h.updatePreferences}))),DT=()=>za(Vr(h=>({mcpEnabled:h.mcpEnabled,setMCPEnabled:h.setMCPEnabled}))),NT=()=>Xi(Vr(h=>{const u=h.getActiveAdapter();return{activeAdapterName:h.activeAdapterName,activeAdapterRegistration:u,plugin:u==null?void 0:u.plugin,status:u==null?void 0:u.status,currentCapabilities:h.currentCapabilities,error:h.lastAdapterError}}));function IT(){return Z.useCallback((h,u)=>{try{ge.emit(h,u)}catch(n){console.error(`[useEventEmitter] Error emitting event ${String(h)}:`,n)}},[])}function Cw(){const{activeAdapterName:h,plugin:u,status:n,currentCapabilities:r,error:s}=NT(),d=IT(),p=Z.useCallback(async k=>{if(!u||!u.insertText)return console.warn("[useCurrentAdapter] No active plugin for insertText"),!1;try{return d("tool:execution-started",{toolName:"insertText",callId:`adapter-${Date.now()}`}),await u.insertText(k)}catch(I){const R=I instanceof Error?I.message:"Unknown error";return d("tool:execution-failed",{toolName:"insertText",error:R,callId:`adapter-${Date.now()}`}),!1}},[u,d]),v=Z.useCallback(async()=>{if(!u||!u.submitForm)return console.warn("[useCurrentAdapter] No active plugin for submitForm"),!1;try{return d("tool:execution-started",{toolName:"submitForm",callId:`adapter-${Date.now()}`}),await u.submitForm()}catch(k){const I=k instanceof Error?k.message:"Unknown error";return d("tool:execution-failed",{toolName:"submitForm",error:I,callId:`adapter-${Date.now()}`}),!1}},[u,d]),w=Z.useCallback(async k=>{if(!u)return console.warn("[useCurrentAdapter] No active plugin for attachFile"),!1;if(!u.capabilities.includes("file-attachment"))return console.warn("[useCurrentAdapter] Active plugin does not support file attachment"),!1;try{return d("tool:execution-started",{toolName:"attachFile",callId:`adapter-${Date.now()}`}),await u.attachFile(k)}catch(I){const R=I instanceof Error?I.message:"Unknown error";return d("tool:execution-failed",{toolName:"attachFile",error:R,callId:`adapter-${Date.now()}`}),!1}},[u,d]),S=Z.useCallback(k=>r.includes(k),[r]);return{activeAdapterName:h,plugin:u,status:n,error:s,capabilities:r,insertText:p,submitForm:v,attachFile:w,hasCapability:S,isReady:!!u&&n==="active"&&!s}}const Tw=()=>{const h=J0(),{tools:u}=Ew(),{config:n,setConfig:r}=ww(),{isToolEnabled:s,isLoadingEnablement:d}=W0(),p=Yi(),[v,w]=Z.useState(!1),[S,k]=Z.useState(null),[I,R]=Z.useState(0);Z.useEffect(()=>{(async()=>{try{if(!nr.isReady())throw new Error("MCP Client not properly initialized");w(!0),k(null),M("[useMcpCommunication] Communication layer initialized successfully")}catch(he){const ie=he instanceof Error?he.message:String(he);k(ie),M(`[useMcpCommunication] Initialization failed: ${ie}`)}})()},[]);const A=Z.useCallback(async(J,he)=>{if(!v)throw new Error("Communication layer not initialized");if(!h.isConnected)throw new Error("Not connected to MCP server");if(!u.find(Ee=>Ee.name===J))throw new Error(`Tool '${J}' not found in available tools. Please refresh the tool list.`);try{R(Date.now()),M(`[useMcpCommunication] Calling tool: ${J}`);const Ee=await nr.callTool(J,he);return M(`[useMcpCommunication] Tool call successful: ${J}`),Ee}catch(Ee){const de=Ee instanceof Error?Ee.message:String(Ee);throw M(`[useMcpCommunication] Tool call failed: ${J} - ${de}`),new Error(`Tool execution failed: ${de}`)}},[v,h.isConnected,u]),_=Z.useCallback(async(J=!1)=>{if(!v)throw new Error("Communication layer not initialized");try{R(Date.now()),M(`[useMcpCommunication] Refreshing tools (force: ${J})`);const he=await nr.getAvailableTools(J),ie=he.filter(Ee=>Ee&&typeof Ee.name=="string"&&Ee.name.length>0);return ie.length!==he.length&&M(`[useMcpCommunication] Filtered out ${he.length-ie.length} invalid tools`),p.setAvailableTools(ie),M(`[useMcpCommunication] Successfully refreshed ${ie.length} tools`),ie}catch(he){const ie=he instanceof Error?he.message:String(he);throw M(`[useMcpCommunication] Tool refresh failed: ${ie}`),new Error(`Failed to refresh tools: ${ie}`)}},[v]),H=Z.useCallback(async()=>{if(!v)throw new Error("Communication layer not initialized");try{R(Date.now()),M("[useMcpCommunication] Force reconnect requested");const J=await nr.forceReconnect();if(J){M("[useMcpCommunication] Reconnection successful");try{await _(!0)}catch(he){M(`[useMcpCommunication] Warning: Failed to refresh tools after reconnect: ${he}`)}}else M("[useMcpCommunication] Reconnection failed");return J}catch(J){const he=J instanceof Error?J.message:String(J);throw M(`[useMcpCommunication] Force reconnect error: ${he}`),new Error(`Reconnection failed: ${he}`)}},[v,_]),re=Z.useCallback(async()=>{if(!v)throw new Error("Communication layer not initialized");try{R(Date.now()),M("[useMcpCommunication] Getting server config");const J=await nr.getServerConfig();return r(J),M("[useMcpCommunication] Server config retrieved successfully"),J}catch(J){const he=J instanceof Error?J.message:String(J);throw M(`[useMcpCommunication] Failed to get server config: ${he}`),new Error(`Failed to get server configuration: ${he}`)}},[v,r]),G=Z.useCallback(async J=>{if(!v)throw new Error("Communication layer not initialized");if(J.uri&&typeof J.uri!="string")throw new Error("Server URI must be a string");if(J.connectionType&&!["sse","websocket","streamable-http"].includes(J.connectionType))throw new Error('Connection type must be either "sse", "websocket", or "streamable-http"');if(J.timeout&&(typeof J.timeout!="number"||J.timeout<=0))throw new Error("Timeout must be a positive number");try{R(Date.now()),M(`[useMcpCommunication] Updating server config: ${JSON.stringify(J)}`);const he=await nr.updateServerConfig(J);return he?(r({...n,...J}),M("[useMcpCommunication] Server config updated successfully")):M("[useMcpCommunication] Server config update failed"),he}catch(he){const ie=he instanceof Error?he.message:String(he);throw M(`[useMcpCommunication] Failed to update server config: ${ie}`),new Error(`Failed to update server configuration: ${ie}`)}},[v,n,r]),ue=Z.useCallback(async J=>{try{let he=J.name,ie=J.args||{};if(J.toolName&&J.rawArguments!==void 0){he=J.toolName;try{ie=JSON.parse(J.rawArguments)}catch(de){return`Error: Invalid JSON arguments: ${de instanceof Error?de.message:String(de)}`}}if(!he||typeof he!="string")return"Error: Tool name is required and must be a string";const Ee=await A(he,ie);return typeof Ee=="string"?Ee:JSON.stringify(Ee,null,2)}catch(he){return`Error: ${he instanceof Error?he.message:String(he)}`}},[A]),ye=Z.useMemo(()=>{const J=u.map(ie=>({name:ie.name,description:ie.description||"",schema:typeof ie.schema=="string"?ie.schema:JSON.stringify(ie.input_schema||{}),input_schema:ie.input_schema})),he=J.filter(ie=>s(ie.name));return he.length>0&&M(`[useMcpCommunication] Tools normalized and filtered: ${he.length}/${J.length} enabled`),he},[u,s]);Z.useEffect(()=>{const J=ye.length;J>0&&M(`[useMcpCommunication] Available tool names: ${ye.map(he=>he.name).slice(0,3).join(", ")}${J>3?`...and ${J-3} more`:""}`)},[ye.length]),Z.useEffect(()=>{if(ye.length>0){M("[useMcpCommunication] Schema status for available tools:");const J=ye.filter(he=>he.input_schema&&Object.keys(he.input_schema).length>0||he.schema&&he.schema!=="{}");M(`  ${J.length}/${ye.length} tools have valid schemas`)}},[ye.length]);const ce=h.status,be={isHealthy:h.isConnected&&!h.error,lastConnectedAt:h.lastConnectedAt,connectionAttempts:h.connectionAttempts,maxRetryAttempts:h.maxRetryAttempts,lastOperationTime:I};return{connectionStatus:h.status,isConnected:h.isConnected,isConnecting:h.status==="connecting",isReconnecting:h.isReconnecting,availableTools:ye,lastConnectionError:h.error||"",serverConfig:n,connectionHealth:be,isInitialized:v,initializationError:S,isLoadingToolEnablement:d,callTool:A,refreshTools:_,forceReconnect:H,forceConnectionStatusCheck:Z.useCallback(async()=>{if(!v)throw new Error("Communication layer not initialized");return await nr.forceConnectionStatusCheck()},[v]),getServerConfig:re,updateServerConfig:G,serverStatus:ce,sendMessage:ue,getTool:Z.useCallback(J=>ye.find(he=>he.name===J)||null,[ye]),hasToolAvailable:Z.useCallback(J=>ye.some(he=>he.name===J),[ye]),getConnectionSummary:Z.useCallback(()=>({status:h.status,isConnected:h.isConnected,isReconnecting:h.isReconnecting,error:h.error,lastConnectedAt:h.lastConnectedAt,connectionAttempts:h.connectionAttempts,toolCount:ye.length,isInitialized:v,initializationError:S,lastOperationTime:I}),[h,ye,v,S,I])}};function kw(h){var u,n,r="";if(typeof h=="string"||typeof h=="number")r+=h;else if(typeof h=="object")if(Array.isArray(h)){var s=h.length;for(u=0;u<s;u++)h[u]&&(n=kw(h[u]))&&(r&&(r+=" "),r+=n)}else for(n in h)h[n]&&(r&&(r+=" "),r+=n);return r}function Mw(){for(var h,u,n=0,r="",s=arguments.length;n<s;n++)(h=arguments[n])&&(u=kw(h))&&(r&&(r+=" "),r+=u);return r}const ex="-",UT=h=>{const u=$T(h),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=h;return{getClassGroupId:p=>{const v=p.split(ex);return v[0]===""&&v.length!==1&&v.shift(),Aw(v,u)||PT(p)},getConflictingClassGroupIds:(p,v)=>{const w=n[p]||[];return v&&r[p]?[...w,...r[p]]:w}}},Aw=(h,u)=>{var p;if(h.length===0)return u.classGroupId;const n=h[0],r=u.nextPart.get(n),s=r?Aw(h.slice(1),r):void 0;if(s)return s;if(u.validators.length===0)return;const d=h.join(ex);return(p=u.validators.find(({validator:v})=>v(d)))==null?void 0:p.classGroupId},Rw=/^\[(.+)\]$/,PT=h=>{if(Rw.test(h)){const u=Rw.exec(h)[1],n=u==null?void 0:u.substring(0,u.indexOf(":"));if(n)return"arbitrary.."+n}},$T=h=>{const{theme:u,classGroups:n}=h,r={nextPart:new Map,validators:[]};for(const s in n)tx(n[s],r,s,u);return r},tx=(h,u,n,r)=>{h.forEach(s=>{if(typeof s=="string"){const d=s===""?u:Ow(u,s);d.classGroupId=n;return}if(typeof s=="function"){if(_T(s)){tx(s(r),u,n,r);return}u.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([d,p])=>{tx(p,Ow(u,d),n,r)})})},Ow=(h,u)=>{let n=h;return u.split(ex).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},_T=h=>h.isThemeGetter,jT=h=>{if(h<1)return{get:()=>{},set:()=>{}};let u=0,n=new Map,r=new Map;const s=(d,p)=>{n.set(d,p),u++,u>h&&(u=0,r=n,n=new Map)};return{get(d){let p=n.get(d);if(p!==void 0)return p;if((p=r.get(d))!==void 0)return s(d,p),p},set(d,p){n.has(d)?n.set(d,p):s(d,p)}}},nx="!",ax=":",LT=ax.length,BT=h=>{const{prefix:u,experimentalParseClassName:n}=h;let r=s=>{const d=[];let p=0,v=0,w=0,S;for(let _=0;_<s.length;_++){let H=s[_];if(p===0&&v===0){if(H===ax){d.push(s.slice(w,_)),w=_+LT;continue}if(H==="/"){S=_;continue}}H==="["?p++:H==="]"?p--:H==="("?v++:H===")"&&v--}const k=d.length===0?s:s.substring(w),I=HT(k),R=I!==k,A=S&&S>w?S-w:void 0;return{modifiers:d,hasImportantModifier:R,baseClassName:I,maybePostfixModifierPosition:A}};if(u){const s=u+ax,d=r;r=p=>p.startsWith(s)?d(p.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:p,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=d=>n({className:d,parseClassName:s})}return r},HT=h=>h.endsWith(nx)?h.substring(0,h.length-1):h.startsWith(nx)?h.substring(1):h,FT=h=>{const u=Object.fromEntries(h.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let d=[];return r.forEach(p=>{p[0]==="["||u[p]?(s.push(...d.sort(),p),d=[]):d.push(p)}),s.push(...d.sort()),s}},qT=h=>({cache:jT(h.cacheSize),parseClassName:BT(h),sortModifiers:FT(h),...UT(h)}),GT=/\s+/,VT=(h,u)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:d}=u,p=[],v=h.trim().split(GT);let w="";for(let S=v.length-1;S>=0;S-=1){const k=v[S],{isExternal:I,modifiers:R,hasImportantModifier:A,baseClassName:_,maybePostfixModifierPosition:H}=n(k);if(I){w=k+(w.length>0?" "+w:w);continue}let re=!!H,G=r(re?_.substring(0,H):_);if(!G){if(!re){w=k+(w.length>0?" "+w:w);continue}if(G=r(_),!G){w=k+(w.length>0?" "+w:w);continue}re=!1}const ue=d(R).join(":"),ye=A?ue+nx:ue,ce=ye+G;if(p.includes(ce))continue;p.push(ce);const be=s(G,re);for(let J=0;J<be.length;++J){const he=be[J];p.push(ye+he)}w=k+(w.length>0?" "+w:w)}return w};function YT(){let h=0,u,n,r="";for(;h<arguments.length;)(u=arguments[h++])&&(n=zw(u))&&(r&&(r+=" "),r+=n);return r}const zw=h=>{if(typeof h=="string")return h;let u,n="";for(let r=0;r<h.length;r++)h[r]&&(u=zw(h[r]))&&(n&&(n+=" "),n+=u);return n};function XT(h,...u){let n,r,s,d=p;function p(w){const S=u.reduce((k,I)=>I(k),h());return n=qT(S),r=n.cache.get,s=n.cache.set,d=v,v(w)}function v(w){const S=r(w);if(S)return S;const k=VT(w,n);return s(w,k),k}return function(){return d(YT.apply(null,arguments))}}const la=h=>{const u=n=>n[h]||[];return u.isThemeGetter=!0,u},Dw=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Nw=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ZT=/^\d+\/\d+$/,QT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,JT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,WT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ek=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mf=h=>ZT.test(h),It=h=>!!h&&!Number.isNaN(Number(h)),ql=h=>!!h&&Number.isInteger(Number(h)),ix=h=>h.endsWith("%")&&It(h.slice(0,-1)),Ls=h=>QT.test(h),tk=()=>!0,nk=h=>KT.test(h)&&!JT.test(h),Iw=()=>!1,ak=h=>WT.test(h),ik=h=>ek.test(h),ok=h=>!et(h)&&!tt(h),rk=h=>bf(h,jw,Iw),et=h=>Dw.test(h),wu=h=>bf(h,Lw,nk),ox=h=>bf(h,dk,It),Uw=h=>bf(h,$w,Iw),sk=h=>bf(h,_w,ik),mv=h=>bf(h,Bw,ak),tt=h=>Nw.test(h),ip=h=>vf(h,Lw),lk=h=>vf(h,fk),Pw=h=>vf(h,$w),ck=h=>vf(h,jw),uk=h=>vf(h,_w),bv=h=>vf(h,Bw,!0),bf=(h,u,n)=>{const r=Dw.exec(h);return r?r[1]?u(r[1]):n(r[2]):!1},vf=(h,u,n=!1)=>{const r=Nw.exec(h);return r?r[1]?u(r[1]):n:!1},$w=h=>h==="position"||h==="percentage",_w=h=>h==="image"||h==="url",jw=h=>h==="length"||h==="size"||h==="bg-size",Lw=h=>h==="length",dk=h=>h==="number",fk=h=>h==="family-name",Bw=h=>h==="shadow",gk=XT(()=>{const h=la("color"),u=la("font"),n=la("text"),r=la("font-weight"),s=la("tracking"),d=la("leading"),p=la("breakpoint"),v=la("container"),w=la("spacing"),S=la("radius"),k=la("shadow"),I=la("inset-shadow"),R=la("text-shadow"),A=la("drop-shadow"),_=la("blur"),H=la("perspective"),re=la("aspect"),G=la("ease"),ue=la("animate"),ye=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],be=()=>[...ce(),tt,et],J=()=>["auto","hidden","clip","visible","scroll"],he=()=>["auto","contain","none"],ie=()=>[tt,et,w],Ee=()=>[mf,"full","auto",...ie()],de=()=>[ql,"none","subgrid",tt,et],Ue=()=>["auto",{span:["full",ql,tt,et]},ql,tt,et],ze=()=>[ql,"auto",tt,et],Fe=()=>["auto","min","max","fr",tt,et],Ge=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Xe=()=>["start","end","center","stretch","center-safe","end-safe"],Q=()=>["auto",...ie()],V=()=>[mf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...ie()],ee=()=>[h,tt,et],Oe=()=>[...ce(),Pw,Uw,{position:[tt,et]}],$=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",ck,rk,{size:[tt,et]}],fe=()=>[ix,ip,wu],ne=()=>["","none","full",S,tt,et],ke=()=>["",It,ip,wu],Be=()=>["solid","dashed","dotted","double"],Te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[It,ix,Pw,Uw],Me=()=>["","none",_,tt,et],$e=()=>["none",It,tt,et],it=()=>["none",It,tt,et],Ke=()=>[It,tt,et],lt=()=>[mf,"full",...ie()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ls],breakpoint:[Ls],color:[tk],container:[Ls],"drop-shadow":[Ls],ease:["in","out","in-out"],font:[ok],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ls],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ls],shadow:[Ls],spacing:["px",It],text:[Ls],"text-shadow":[Ls],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",mf,et,tt,re]}],container:["container"],columns:[{columns:[It,et,tt,v]}],"break-after":[{"break-after":ye()}],"break-before":[{"break-before":ye()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:be()}],overflow:[{overflow:J()}],"overflow-x":[{"overflow-x":J()}],"overflow-y":[{"overflow-y":J()}],overscroll:[{overscroll:he()}],"overscroll-x":[{"overscroll-x":he()}],"overscroll-y":[{"overscroll-y":he()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Ee()}],"inset-x":[{"inset-x":Ee()}],"inset-y":[{"inset-y":Ee()}],start:[{start:Ee()}],end:[{end:Ee()}],top:[{top:Ee()}],right:[{right:Ee()}],bottom:[{bottom:Ee()}],left:[{left:Ee()}],visibility:["visible","invisible","collapse"],z:[{z:[ql,"auto",tt,et]}],basis:[{basis:[mf,"full","auto",v,...ie()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[It,mf,"auto","initial","none",et]}],grow:[{grow:["",It,tt,et]}],shrink:[{shrink:["",It,tt,et]}],order:[{order:[ql,"first","last","none",tt,et]}],"grid-cols":[{"grid-cols":de()}],"col-start-end":[{col:Ue()}],"col-start":[{"col-start":ze()}],"col-end":[{"col-end":ze()}],"grid-rows":[{"grid-rows":de()}],"row-start-end":[{row:Ue()}],"row-start":[{"row-start":ze()}],"row-end":[{"row-end":ze()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Fe()}],"auto-rows":[{"auto-rows":Fe()}],gap:[{gap:ie()}],"gap-x":[{"gap-x":ie()}],"gap-y":[{"gap-y":ie()}],"justify-content":[{justify:[...Ge(),"normal"]}],"justify-items":[{"justify-items":[...Xe(),"normal"]}],"justify-self":[{"justify-self":["auto",...Xe()]}],"align-content":[{content:["normal",...Ge()]}],"align-items":[{items:[...Xe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Xe(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ge()}],"place-items":[{"place-items":[...Xe(),"baseline"]}],"place-self":[{"place-self":["auto",...Xe()]}],p:[{p:ie()}],px:[{px:ie()}],py:[{py:ie()}],ps:[{ps:ie()}],pe:[{pe:ie()}],pt:[{pt:ie()}],pr:[{pr:ie()}],pb:[{pb:ie()}],pl:[{pl:ie()}],m:[{m:Q()}],mx:[{mx:Q()}],my:[{my:Q()}],ms:[{ms:Q()}],me:[{me:Q()}],mt:[{mt:Q()}],mr:[{mr:Q()}],mb:[{mb:Q()}],ml:[{ml:Q()}],"space-x":[{"space-x":ie()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ie()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[v,"screen",...V()]}],"min-w":[{"min-w":[v,"screen","none",...V()]}],"max-w":[{"max-w":[v,"screen","none","prose",{screen:[p]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",n,ip,wu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tt,ox]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ix,et]}],"font-family":[{font:[lk,et,u]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,tt,et]}],"line-clamp":[{"line-clamp":[It,"none",tt,ox]}],leading:[{leading:[d,...ie()]}],"list-image":[{"list-image":["none",tt,et]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tt,et]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ee()}],"text-color":[{text:ee()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Be(),"wavy"]}],"text-decoration-thickness":[{decoration:[It,"from-font","auto",tt,wu]}],"text-decoration-color":[{decoration:ee()}],"underline-offset":[{"underline-offset":[It,"auto",tt,et]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ie()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt,et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt,et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Oe()}],"bg-repeat":[{bg:$()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ql,tt,et],radial:["",tt,et],conic:[ql,tt,et]},uk,sk]}],"bg-color":[{bg:ee()}],"gradient-from-pos":[{from:fe()}],"gradient-via-pos":[{via:fe()}],"gradient-to-pos":[{to:fe()}],"gradient-from":[{from:ee()}],"gradient-via":[{via:ee()}],"gradient-to":[{to:ee()}],rounded:[{rounded:ne()}],"rounded-s":[{"rounded-s":ne()}],"rounded-e":[{"rounded-e":ne()}],"rounded-t":[{"rounded-t":ne()}],"rounded-r":[{"rounded-r":ne()}],"rounded-b":[{"rounded-b":ne()}],"rounded-l":[{"rounded-l":ne()}],"rounded-ss":[{"rounded-ss":ne()}],"rounded-se":[{"rounded-se":ne()}],"rounded-ee":[{"rounded-ee":ne()}],"rounded-es":[{"rounded-es":ne()}],"rounded-tl":[{"rounded-tl":ne()}],"rounded-tr":[{"rounded-tr":ne()}],"rounded-br":[{"rounded-br":ne()}],"rounded-bl":[{"rounded-bl":ne()}],"border-w":[{border:ke()}],"border-w-x":[{"border-x":ke()}],"border-w-y":[{"border-y":ke()}],"border-w-s":[{"border-s":ke()}],"border-w-e":[{"border-e":ke()}],"border-w-t":[{"border-t":ke()}],"border-w-r":[{"border-r":ke()}],"border-w-b":[{"border-b":ke()}],"border-w-l":[{"border-l":ke()}],"divide-x":[{"divide-x":ke()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ke()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Be(),"hidden","none"]}],"divide-style":[{divide:[...Be(),"hidden","none"]}],"border-color":[{border:ee()}],"border-color-x":[{"border-x":ee()}],"border-color-y":[{"border-y":ee()}],"border-color-s":[{"border-s":ee()}],"border-color-e":[{"border-e":ee()}],"border-color-t":[{"border-t":ee()}],"border-color-r":[{"border-r":ee()}],"border-color-b":[{"border-b":ee()}],"border-color-l":[{"border-l":ee()}],"divide-color":[{divide:ee()}],"outline-style":[{outline:[...Be(),"none","hidden"]}],"outline-offset":[{"outline-offset":[It,tt,et]}],"outline-w":[{outline:["",It,ip,wu]}],"outline-color":[{outline:ee()}],shadow:[{shadow:["","none",k,bv,mv]}],"shadow-color":[{shadow:ee()}],"inset-shadow":[{"inset-shadow":["none",I,bv,mv]}],"inset-shadow-color":[{"inset-shadow":ee()}],"ring-w":[{ring:ke()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ee()}],"ring-offset-w":[{"ring-offset":[It,wu]}],"ring-offset-color":[{"ring-offset":ee()}],"inset-ring-w":[{"inset-ring":ke()}],"inset-ring-color":[{"inset-ring":ee()}],"text-shadow":[{"text-shadow":["none",R,bv,mv]}],"text-shadow-color":[{"text-shadow":ee()}],opacity:[{opacity:[It,tt,et]}],"mix-blend":[{"mix-blend":[...Te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Te()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[It]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":ee()}],"mask-image-linear-to-color":[{"mask-linear-to":ee()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":ee()}],"mask-image-t-to-color":[{"mask-t-to":ee()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":ee()}],"mask-image-r-to-color":[{"mask-r-to":ee()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":ee()}],"mask-image-b-to-color":[{"mask-b-to":ee()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":ee()}],"mask-image-l-to-color":[{"mask-l-to":ee()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":ee()}],"mask-image-x-to-color":[{"mask-x-to":ee()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":ee()}],"mask-image-y-to-color":[{"mask-y-to":ee()}],"mask-image-radial":[{"mask-radial":[tt,et]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":ee()}],"mask-image-radial-to-color":[{"mask-radial-to":ee()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ce()}],"mask-image-conic-pos":[{"mask-conic":[It]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":ee()}],"mask-image-conic-to-color":[{"mask-conic-to":ee()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Oe()}],"mask-repeat":[{mask:$()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tt,et]}],filter:[{filter:["","none",tt,et]}],blur:[{blur:Me()}],brightness:[{brightness:[It,tt,et]}],contrast:[{contrast:[It,tt,et]}],"drop-shadow":[{"drop-shadow":["","none",A,bv,mv]}],"drop-shadow-color":[{"drop-shadow":ee()}],grayscale:[{grayscale:["",It,tt,et]}],"hue-rotate":[{"hue-rotate":[It,tt,et]}],invert:[{invert:["",It,tt,et]}],saturate:[{saturate:[It,tt,et]}],sepia:[{sepia:["",It,tt,et]}],"backdrop-filter":[{"backdrop-filter":["","none",tt,et]}],"backdrop-blur":[{"backdrop-blur":Me()}],"backdrop-brightness":[{"backdrop-brightness":[It,tt,et]}],"backdrop-contrast":[{"backdrop-contrast":[It,tt,et]}],"backdrop-grayscale":[{"backdrop-grayscale":["",It,tt,et]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[It,tt,et]}],"backdrop-invert":[{"backdrop-invert":["",It,tt,et]}],"backdrop-opacity":[{"backdrop-opacity":[It,tt,et]}],"backdrop-saturate":[{"backdrop-saturate":[It,tt,et]}],"backdrop-sepia":[{"backdrop-sepia":["",It,tt,et]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ie()}],"border-spacing-x":[{"border-spacing-x":ie()}],"border-spacing-y":[{"border-spacing-y":ie()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tt,et]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[It,"initial",tt,et]}],ease:[{ease:["linear","initial",G,tt,et]}],delay:[{delay:[It,tt,et]}],animate:[{animate:["none",ue,tt,et]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[H,tt,et]}],"perspective-origin":[{"perspective-origin":be()}],rotate:[{rotate:$e()}],"rotate-x":[{"rotate-x":$e()}],"rotate-y":[{"rotate-y":$e()}],"rotate-z":[{"rotate-z":$e()}],scale:[{scale:it()}],"scale-x":[{"scale-x":it()}],"scale-y":[{"scale-y":it()}],"scale-z":[{"scale-z":it()}],"scale-3d":["scale-3d"],skew:[{skew:Ke()}],"skew-x":[{"skew-x":Ke()}],"skew-y":[{"skew-y":Ke()}],transform:[{transform:[tt,et,"","none","gpu","cpu"]}],"transform-origin":[{origin:be()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:lt()}],"translate-x":[{"translate-x":lt()}],"translate-y":[{"translate-y":lt()}],"translate-z":[{"translate-z":lt()}],"translate-none":["translate-none"],accent:[{accent:ee()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ee()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt,et]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ie()}],"scroll-mx":[{"scroll-mx":ie()}],"scroll-my":[{"scroll-my":ie()}],"scroll-ms":[{"scroll-ms":ie()}],"scroll-me":[{"scroll-me":ie()}],"scroll-mt":[{"scroll-mt":ie()}],"scroll-mr":[{"scroll-mr":ie()}],"scroll-mb":[{"scroll-mb":ie()}],"scroll-ml":[{"scroll-ml":ie()}],"scroll-p":[{"scroll-p":ie()}],"scroll-px":[{"scroll-px":ie()}],"scroll-py":[{"scroll-py":ie()}],"scroll-ps":[{"scroll-ps":ie()}],"scroll-pe":[{"scroll-pe":ie()}],"scroll-pt":[{"scroll-pt":ie()}],"scroll-pr":[{"scroll-pr":ie()}],"scroll-pb":[{"scroll-pb":ie()}],"scroll-pl":[{"scroll-pl":ie()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt,et]}],fill:[{fill:["none",...ee()]}],"stroke-w":[{stroke:[It,ip,wu,ox]}],stroke:[{stroke:["none",...ee()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function at(...h){return gk(Mw(h))}const an=({name:h,size:u="md",className:n})=>{const r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},s=()=>{switch(h){case"settings":return C.jsxs("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]});case"info":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"chevron-right":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})});case"chevron-left":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})});case"chevron-down":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});case"chevron-up":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})});case"refresh":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})});case"search":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})});case"check":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"x":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"play":return C.jsxs("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]});case"tools":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})});case"server":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})});case"lightning":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})});case"menu":return C.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})});case"sun":return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("circle",{cx:"12",cy:"12",r:"4"}),C.jsx("path",{d:"M12 2v2"}),C.jsx("path",{d:"M12 20v2"}),C.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),C.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),C.jsx("path",{d:"M2 12h2"}),C.jsx("path",{d:"M20 12h2"}),C.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),C.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]});case"moon":return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:C.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})});case"laptop":return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:C.jsx("path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16"})});case"alert-triangle":return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),C.jsx("path",{d:"M12 9v4"}),C.jsx("path",{d:"M12 17h.01"})]});case"tool":return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:C.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})});case"box":return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),C.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),C.jsx("path",{d:"M12 22V12"})]});case"file-text":return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),C.jsx("polyline",{points:"14 2 14 8 20 8"}),C.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),C.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),C.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]});case"arrow-up-right":return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("line",{x1:"7",y1:"17",x2:"17",y2:"7"}),C.jsx("polyline",{points:"7 7 17 7 17 17"})]});default:return null}};return C.jsx("div",{className:at(r[u],n),children:s()})},hk=({onResize:h,minWidth:u=280,maxWidth:n=500,className:r,defaultWidth:s=320})=>{const[d,p]=Z.useState(!1),v=Z.useRef(null),w=Z.useRef(0),S=Z.useRef(s),k=Z.useRef(s),I=Z.useRef(null),R=A=>{var re;A.preventDefault();const _=(re=v.current)==null?void 0:re.parentElement,H=_?parseInt(getComputedStyle(_).width,10):s;w.current=A.clientX,S.current=H,k.current=H,p(!0),document.body.style.cursor="ew-resize",document.body.style.userSelect="none"};return Z.useEffect(()=>{const A=H=>{d&&(I.current!==null&&cancelAnimationFrame(I.current),I.current=requestAnimationFrame(()=>{var ue;const re=w.current-H.clientX,G=Math.max(u,Math.min(n,S.current+re));if(Math.abs(G-k.current)>=1){k.current=G;const ye=(ue=v.current)==null?void 0:ue.parentElement;ye&&(ye.style.width=`${G}px`,ye.style.transition="none"),h(G)}}))},_=()=>{var re;I.current!==null&&(cancelAnimationFrame(I.current),I.current=null),p(!1),document.body.style.cursor="",document.body.style.userSelect="";const H=(re=v.current)==null?void 0:re.parentElement;H&&(H.style.transition="")};return d&&(document.addEventListener("mousemove",A),document.addEventListener("mouseup",_)),()=>{I.current!==null&&cancelAnimationFrame(I.current),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",_)}},[d,u,n,h]),C.jsx("div",{ref:v,className:at("absolute left-0 top-0 bottom-0 w-1 cursor-ew-resize group",d?"bg-blue-500":"bg-transparent hover:bg-blue-400/30",r),onMouseDown:R,children:C.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1/2 h-16 w-4 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:C.jsx("div",{className:"h-10 w-1 rounded-full bg-blue-500/70 shadow-md"})})})},pk=({label:h,checked:u,onChange:n,className:r,size:s="md"})=>{const d=()=>{n(!u)},p={sm:{container:"w-8 h-4",circle:"w-3 h-3",translate:"translate-x-4"},md:{container:"w-10 h-5",circle:"h-4 w-4",translate:"translate-x-5"}};return C.jsx("div",{className:at("flex items-center",r),children:C.jsxs("button",{type:"button",role:"switch","aria-checked":u,onClick:d,className:at("relative inline-flex flex-shrink-0 cursor-pointer rounded-full transition-colors duration-200 ease-in-out","border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 focus:ring-offset-background",p[s].container,u?"bg-blue-600 dark:bg-blue-500 border-transparent":"bg-slate-300 dark:bg-slate-700 border-transparent"),children:[C.jsx("span",{className:"sr-only",children:h}),C.jsx("span",{"aria-hidden":"true",className:at("pointer-events-none inline-block transform rounded-full shadow ring-0 transition duration-200 ease-in-out",p[s].circle,u?`${p[s].translate} bg-white dark:bg-white border-none`:"translate-x-0 bg-white dark:bg-slate-400 border-none")})]})})},tn=({variant:h,className:u,children:n})=>{const r="font-inter",s={h1:"scroll-m-20 text-2xl font-semibold tracking-tight text-slate-900 dark:text-slate-50",h2:"scroll-m-20 text-xl font-semibold tracking-tight text-slate-900 dark:text-slate-50",h3:"scroll-m-20 text-lg font-semibold tracking-tight text-slate-900 dark:text-slate-50",h4:"scroll-m-20 text-base font-semibold tracking-tight text-slate-900 dark:text-slate-50",subtitle:"text-sm font-medium text-slate-600 dark:text-slate-400",body:"text-sm text-slate-700 dark:text-slate-300",small:"text-xs text-slate-700 dark:text-slate-300",caption:"text-xs text-slate-500 dark:text-slate-500"},d=h==="h1"?"h1":h==="h2"?"h2":h==="h3"?"h3":h==="h4"?"h4":"div";return C.jsx(d,{className:at(r,s[h],u),children:n})},Hw=h=>typeof h=="boolean"?`${h}`:h===0?"0":h,Fw=Mw,mk=(h,u)=>n=>{var r;if((u==null?void 0:u.variants)==null)return Fw(h,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:d}=u,p=Object.keys(s).map(S=>{const k=n==null?void 0:n[S],I=d==null?void 0:d[S];if(k===null)return null;const R=Hw(k)||Hw(I);return s[S][R]}),v=n&&Object.entries(n).reduce((S,k)=>{let[I,R]=k;return R===void 0||(S[I]=R),S},{}),w=u==null||(r=u.compoundVariants)===null||r===void 0?void 0:r.reduce((S,k)=>{let{class:I,className:R,...A}=k;return Object.entries(A).every(_=>{let[H,re]=_;return Array.isArray(re)?re.includes({...d,...v}[H]):{...d,...v}[H]===re})?[...S,I,R]:S},[]);return Fw(h,p,w,n==null?void 0:n.class,n==null?void 0:n.className)},qw=Z.forwardRef(({children:h,...u},n)=>!h||!Z.isValidElement(h)?null:Z.cloneElement(h,u));qw.displayName="Slot";const bk=mk("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 dark:bg-primary/80 dark:hover:bg-primary/70",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 dark:bg-destructive/80 dark:hover:bg-destructive/70",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground dark:border-input dark:bg-background dark:hover:bg-accent dark:hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 dark:bg-secondary/80 dark:hover:bg-secondary/70",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent dark:hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline dark:text-primary-foreground"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Da=Z.forwardRef(({className:h,variant:u,size:n,asChild:r=!1,...s},d)=>{const p=r?qw:"button";return C.jsx(p,{className:at(bk({variant:u,size:n,className:h})),ref:d,...s})});Da.displayName="Button";const Bs=Z.forwardRef(({className:h,...u},n)=>C.jsx("div",{ref:n,className:at("rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-card-dark dark:text-card-foreground-dark dark:border-border-dark",h),...u}));Bs.displayName="Card";const rx=Z.forwardRef(({className:h,...u},n)=>C.jsx("div",{ref:n,className:at("flex flex-col space-y-1.5 p-6",h),...u}));rx.displayName="CardHeader";const vk=Z.forwardRef(({className:h,...u},n)=>C.jsx("div",{ref:n,className:at("text-2xl font-semibold leading-none tracking-tight dark:text-card-title-dark",h),...u}));vk.displayName="CardTitle";const yk=Z.forwardRef(({className:h,...u},n)=>C.jsx("div",{ref:n,className:at("text-sm text-muted-foreground dark:text-card-description-dark",h),...u}));yk.displayName="CardDescription";const Hs=Z.forwardRef(({className:h,...u},n)=>C.jsx("div",{ref:n,className:at("p-6 pt-0",h),...u}));Hs.displayName="CardContent";const xk=Z.forwardRef(({className:h,...u},n)=>C.jsx("div",{ref:n,className:at("flex items-center p-6 pt-0",h),...u}));xk.displayName="CardFooter";const Sk=({status:h})=>{const{status:u,isConnected:n,isReconnecting:r,error:s}=J0(),{config:d,setConfig:p}=ww(),[v,w]=Z.useState(!1),[S,k]=Z.useState(!1),[I,R]=Z.useState(!1),[A,_]=Z.useState(""),[H,re]=Z.useState(d.uri||""),[G,ue]=Z.useState(d.connectionType||"sse"),[ye,ce]=Z.useState(""),[be,J]=Z.useState(!1),[he,ie]=Z.useState(!1),[Ee,de]=Z.useState(!1),[Ue,ze]=Z.useState(""),[Fe,Ge]=Z.useState(!1),[Xe,Q]=Z.useState(!1),[V,ee]=Z.useState(!1),[Oe,$]=Z.useState(!1),P=Tw(),fe=u||h||"unknown";Z.useEffect(()=>{console.debug(`[ServerStatus] Status update - connectionStatus: ${u}, initialStatus: ${h}, final: ${fe}, isConnected: ${n}`)},[u,h,fe,n]);const ne=Z.useCallback(async()=>{try{if(!P.forceReconnect)throw new Error("Communication method unavailable");return await P.forceReconnect()}catch(Ae){return M(`[ServerStatus] Force reconnect error: ${Ae instanceof Error?Ae.message:String(Ae)}`),J(!0),!1}},[P]),ke=P.lastConnectionError||"",Be=Z.useCallback(async(Ae=!1)=>{try{if(!P.refreshTools)throw new Error("Communication method unavailable");return await P.refreshTools(Ae)}catch(gt){return M(`[ServerStatus] Refresh tools error: ${gt instanceof Error?gt.message:String(gt)}`),J(!0),[]}},[P]),Te=Z.useCallback(async()=>{try{if(!P.getServerConfig)throw new Error("Communication method unavailable");return await P.getServerConfig()}catch(Ae){throw M(`[ServerStatus] Get server config error: ${Ae instanceof Error?Ae.message:String(Ae)}`),J(!0),Ae}},[P]),Pe=Z.useCallback(async Ae=>{try{if(!P.updateServerConfig)throw new Error("Communication method unavailable");return await P.updateServerConfig(Ae)}catch(gt){return M(`[ServerStatus] Update server config error: ${gt instanceof Error?gt.message:String(gt)}`),J(!0),!1}},[P]);Z.useEffect(()=>{d.uri&&!he&&(re(d.uri),M(`[ServerStatus] Updated server URI from config: ${d.uri}`)),d.connectionType&&!Ee&&(ue(d.connectionType),M(`[ServerStatus] Updated connection type from config: ${d.connectionType}`))},[d.uri,d.connectionType,he,Ee]),Z.useEffect(()=>{const gt=setTimeout(async()=>{if(P.forceConnectionStatusCheck)try{M("[ServerStatus] Forcing immediate connection status check on mount"),await P.forceConnectionStatusCheck()}catch(Xt){M(`[ServerStatus] Immediate status check failed: ${Xt instanceof Error?Xt.message:String(Xt)}`)}},100);return()=>clearTimeout(gt)},[]),Z.useEffect(()=>{if(!(I||r))if(be)ce("Extension background services unavailable. Try reloading the page.");else switch(fe){case"connected":ce("MCP Server is connected and ready"),n||(Q(!0),setTimeout(()=>Q(!1),1e3));break;case"disconnected":ce("MCP Server is unavailable. Some features will be limited.");break;case"error":ce(s||"Error connecting to extension services. Try reloading the page.");break;default:ce("Checking MCP Server status...")}},[fe,s,be,I,r,n]),Z.useEffect(()=>{const Ae=[],gt=ge.on("connection:status-changed",Ne=>{M(`[ServerStatus] Connection status event: ${Ne.status}${Ne.error?` (${Ne.error})`:""}`),Ne.error?ze(Ne.error):ze(""),Ne.status==="connected"&&(_(new Date().toLocaleTimeString()),Q(!0),setTimeout(()=>Q(!1),1e3))});Ae.push(gt);const Xt=ge.on("context:bridge-invalidated",Ne=>{M(`[ServerStatus] Context bridge invalidated: ${Ne.error}`),J(!0),ce(`Extension context invalidated: ${Ne.error}`)});Ae.push(Xt);const Rn=ge.on("context:bridge-restored",()=>{M("[ServerStatus] Context bridge restored"),J(!1)});Ae.push(Rn);const Ve=ge.on("connection:heartbeat",Ne=>{M(`[ServerStatus] Heartbeat received: ${Ne.timestamp}`)});return Ae.push(Ve),()=>{Ae.forEach(Ne=>Ne())}},[]),Z.useEffect(()=>{const Ae=()=>{const Xt=typeof P.forceReconnect=="function"&&typeof P.refreshTools=="function"&&typeof P.getServerConfig=="function"&&typeof P.updateServerConfig=="function";!Xt&&!be?(J(!0),ce("Extension background services unavailable. Try reloading the page.")):Xt&&be&&J(!1)};Ae();const gt=setInterval(Ae,3e4);return()=>clearInterval(gt)},[P,be]),Z.useEffect(()=>{const Ae=async()=>{try{M("[ServerStatus] Fetching initial server configuration from background storage");const gt=await Te();gt?(gt.uri&&(re(gt.uri),M(`[ServerStatus] Initial server URI loaded: ${gt.uri}`)),gt.connectionType&&(ue(gt.connectionType),M(`[ServerStatus] Initial connection type loaded: ${gt.connectionType}`)),Ge(!0)):(M("[ServerStatus] No valid server configuration received from background storage"),re(""),Ge(!0))}catch(gt){M(`[ServerStatus] Error fetching server config: ${gt instanceof Error?gt.message:String(gt)}`),re(""),Ge(!0)}};P&&typeof P.getServerConfig=="function"&&!Fe&&!he&&!Ee&&Ae().catch(()=>{M("[ServerStatus] Failed to fetch server configuration"),re("")})},[P,he,Ee,Fe,Te]),Z.useEffect(()=>{if(!I)if(be)ce("Extension background services unavailable. Try reloading the page.");else switch(fe){case"connected":ce("MCP Server is connected and ready");break;case"disconnected":ce("MCP Server is unavailable. Some features will be limited.");break;case"error":ce("Error connecting to extension services. Try reloading the page.");break;default:ce("Checking MCP Server status...")}},[fe,be,I]);const Me=async()=>{const Ae=Date.now(),gt=1200;try{if(M("[ServerStatus] Reconnect button clicked"),R(!0),ce("Attempting to reconnect to MCP server..."),be){if(M("[ServerStatus] Attempting to recover background connection"),await new Promise(qe=>setTimeout(qe,2e3)),!P.forceReconnect)throw new Error("Background services still unavailable");J(!1)}M("[ServerStatus] Calling forceReconnect method");const Xt=await ne();M(`[ServerStatus] Reconnection ${Xt?"succeeded":"failed"}`),_(new Date().toLocaleTimeString());const Ve=Date.now()-Ae,Ne=Math.max(0,gt-Ve);if(Ne>0&&(M(`[ServerStatus] Waiting ${Ne}ms for smooth transition`),await new Promise(qe=>setTimeout(qe,Ne))),Xt){ce("Successfully reconnected to MCP server"),M("[ServerStatus] Reconnection successful, fetching fresh tool list");try{const qe=await Be(!0);M(`[ServerStatus] Successfully fetched ${qe.length} tools after reconnection`)}catch(qe){M(`[ServerStatus] Error fetching tools after reconnection: ${qe instanceof Error?qe.message:String(qe)}`)}}else ce("Failed to reconnect to MCP server. Some features will be limited.")}catch(Xt){const Rn=Date.now()-Ae,Ve=Math.max(0,gt-Rn);Ve>0&&await new Promise(qe=>setTimeout(qe,Ve)),M(`[ServerStatus] Reconnection error: ${Xt instanceof Error?Xt.message:String(Xt)}`);const Ne=Xt instanceof Error?Xt.message:String(Xt);ze(Ne),Ne.includes("404")||Ne.includes("not found")?ce("Server URL not found (404). Please verify your MCP server URL and ensure the server is running."):Ne.includes("403")?ce("Access forbidden (403). Please check server permissions and authentication settings."):Ne.includes("500")||Ne.includes("502")||Ne.includes("503")?ce("Server error detected. The MCP server may be experiencing issues."):Ne.includes("Connection refused")||Ne.includes("ECONNREFUSED")?ce("Connection refused. Please verify the MCP server is running at the configured URL."):Ne.includes("timeout")||Ne.includes("ETIMEDOUT")?ce("Connection timeout. The server may be slow to respond or unreachable."):Ne.includes("ENOTFOUND")?ce("Server not found. Please check the server URL and your network connection."):ce(`Connection failed: ${Ne}`)}finally{R(!1)}},$e=()=>{$(!0),setTimeout(()=>{w(!v),$(!1)},150),M(`[ServerStatus] Details ${v?"hidden":"shown"}, status: ${fe}`)},it=()=>{ee(!0),setTimeout(()=>{k(!S),ee(!1)},150),M(`[ServerStatus] Settings ${S?"hidden":"shown"}`)},Ke=Ae=>{re(Ae.target.value),ie(!0)},lt=()=>{ie(!0)},ht=()=>{},Vt=Ae=>{ue(Ae.target.value),de(!0)},ca=()=>{de(!0)},_e=()=>{},ot=async()=>{if(!P.updateServerConfig||be){M("[ServerStatus] Background communication not available");return}R(!0),_(new Date().toLocaleTimeString()),ce("Saving configuration and connecting..."),ze("");const gt=Date.now(),Xt=1500;try{M(`[ServerStatus] Saving server URI: ${H} with connection type: ${G}`),p({uri:H,connectionType:G}),await Pe({uri:H,connectionType:G}),M("[ServerStatus] Server config updated successfully"),ie(!1),de(!1);const Rn=await ne();M(`[ServerStatus] Reconnection ${Rn?"succeeded":"failed"}`);const Ve=Date.now()-gt,Ne=Math.max(0,Xt-Ve);if(Ne>0&&(M(`[ServerStatus] Waiting ${Ne}ms to prevent visual jitter`),await new Promise(qe=>setTimeout(qe,Ne))),Rn){ce("Successfully connected to MCP server");try{const qe=await Be(!0);M(`[ServerStatus] Successfully refreshed ${qe.length} tools after server change`)}catch(qe){M(`[ServerStatus] Error refreshing tools: ${qe instanceof Error?qe.message:String(qe)}`)}}else ce("Failed to connect to new MCP server");k(!1)}catch(Rn){const Ve=Date.now()-gt,Ne=Math.max(0,Xt-Ve);Ne>0&&await new Promise(gn=>setTimeout(gn,Ne));const qe=Rn instanceof Error?Rn.message:String(Rn);ze(qe),ce(`Configuration failed: ${qe}`),M(`[ServerStatus] Save config error: ${qe}`)}finally{R(!1)}},Jt=(()=>{const Ae={emerald:{text:"text-emerald-500",bg:"bg-emerald-100",darkBg:"dark:bg-emerald-900/20"},amber:{text:"text-amber-500",bg:"bg-amber-100",darkBg:"dark:bg-amber-900/20"},rose:{text:"text-rose-500",bg:"bg-rose-100",darkBg:"dark:bg-rose-900/20"},slate:{text:"text-slate-500",bg:"bg-slate-100",darkBg:"dark:bg-slate-900/20"}};switch(I?"reconnecting":fe){case"connected":return{color:Ae.emerald.text,bgColor:at(Ae.emerald.bg,Ae.emerald.darkBg),icon:C.jsx(an,{name:"check",className:Ae.emerald.text}),label:"Connected"};case"reconnecting":return{color:Ae.amber.text,bgColor:at(Ae.amber.bg,Ae.amber.darkBg),icon:C.jsx(an,{name:"refresh",className:at(Ae.amber.text,"animate-spin")}),label:"Reconnecting"};case"disconnected":return{color:Ae.rose.text,bgColor:at(Ae.rose.bg,Ae.rose.darkBg),icon:C.jsx(an,{name:"x",className:Ae.rose.text}),label:"Disconnected"};case"error":return{color:Ae.rose.text,bgColor:at(Ae.rose.bg,Ae.rose.darkBg),icon:C.jsx(an,{name:"info",className:Ae.rose.text}),label:"Error"};default:return{color:Ae.slate.text,bgColor:at(Ae.slate.bg,Ae.slate.darkBg),icon:C.jsx(an,{name:"info",className:Ae.slate.text}),label:"Unknown"}}})(),Un=fe==="disconnected"||fe==="error";return C.jsxs("div",{className:at("relative px-4 py-3 border-b border-slate-200 dark:border-slate-800 transition-all duration-300 ease-out server-status-stable",Un&&"bg-gradient-to-r from-rose-50 to-red-50 dark:from-rose-900/10 dark:to-red-900/10 border border-rose-200 dark:border-rose-800/50 rounded-sm shadow-sm"),children:[Xe&&C.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-100 to-green-100 dark:from-emerald-900/20 dark:to-green-900/20 opacity-30 animate-pulse rounded-sm"}),C.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:at("relative flex items-center justify-center w-8 h-8 rounded-full transition-all duration-300 ease-out server-status-icon",Jt.bgColor,I?"animate-spin":Un&&"animate-pulse"),children:C.jsx("div",{className:"transition-transform duration-200",children:Jt.icon})}),C.jsxs("div",{className:"flex flex-col",children:[C.jsxs(tn,{variant:"body",className:at("font-semibold transition-colors duration-200 leading-tight",Un?"text-rose-700 dark:text-rose-400":fe==="connected"?"text-emerald-700 dark:text-emerald-400":"text-slate-700 dark:text-slate-200"),children:["Server ",Jt.label]}),C.jsx("div",{className:at("text-xs mt-0.5 transition-all duration-200 ease-out max-h-20 overflow-hidden status-message-stable",Un?"text-rose-600 dark:text-rose-400 font-medium":"text-slate-500 dark:text-slate-400"),children:ye})]})]}),C.jsxs("div",{className:"flex items-center gap-1",children:[C.jsx("button",{onClick:Me,disabled:I,className:at("group relative p-2 rounded-lg transition-all duration-200 ease-out hover:scale-105 active:scale-95",I?"opacity-60 cursor-not-allowed":"hover:shadow-md",Un?"text-rose-600 hover:text-rose-700 hover:bg-rose-100 dark:text-rose-400 dark:hover:text-rose-300 dark:hover:bg-rose-900/30":"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-900/30"),"aria-label":"Reconnect to server",title:"Reconnect to server",children:C.jsx(an,{name:"refresh",size:"sm",className:at("transition-transform duration-300",I?"animate-spin":"group-hover:rotate-180")})}),C.jsx("button",{onClick:it,disabled:V,className:at("group relative p-2 rounded-lg transition-all duration-200 ease-out hover:scale-105 active:scale-95","text-slate-500 hover:text-slate-700 hover:bg-slate-100 hover:shadow-md dark:text-slate-400 dark:hover:text-slate-300 dark:hover:bg-slate-800"),"aria-label":"Server settings",title:"Server settings",children:C.jsx(an,{name:"settings",size:"sm",className:at("transition-transform duration-200",S?"rotate-90":"group-hover:rotate-45")})}),C.jsx("button",{onClick:$e,disabled:Oe,className:at("group relative p-2 rounded-lg transition-all duration-200 ease-out hover:scale-105 active:scale-95","text-slate-500 hover:text-slate-700 hover:bg-slate-100 hover:shadow-md dark:text-slate-400 dark:hover:text-slate-300 dark:hover:bg-slate-800"),"aria-label":"Show details",title:"Show details",children:C.jsx(an,{name:"info",size:"sm",className:"transition-transform duration-200 group-hover:scale-110"})})]})]}),Un&&C.jsx("div",{className:"mt-2 p-2 bg-rose-100 dark:bg-rose-900/20 rounded-md border border-rose-200 dark:border-rose-800/50",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(an,{name:"alert-triangle",size:"sm",className:"text-rose-600 dark:text-rose-400"}),C.jsxs("div",{className:"flex-1",children:[C.jsx(tn,{variant:"small",className:"text-rose-600 dark:text-rose-400 font-medium",children:fe==="disconnected"?"Server connection lost. Click the refresh button to reconnect.":"Server connection error. Check your configuration and try again."}),(ke||Ue)&&C.jsxs(tn,{variant:"small",className:"text-rose-500 dark:text-rose-300 mt-1 text-xs",children:["Details: ",ke||Ue]})]})]})}),(be||!P.sendMessage)&&C.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border-b border-amber-200/50 dark:border-amber-800/30 p-2 flex-shrink-0",children:C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("div",{className:"animate-spin w-3 h-3 border border-amber-500 border-t-transparent rounded-full"}),C.jsx(tn,{variant:"caption",className:"text-amber-700 dark:text-amber-300 text-xs",children:"Connecting to extension services..."})]})}),S&&C.jsx("div",{className:"mt-3 animate-in slide-in-from-top-2 duration-200",children:C.jsx(Bs,{className:"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-lg",children:C.jsxs(Hs,{className:"p-4 text-xs text-slate-700 dark:text-slate-300",children:[C.jsx(tn,{variant:"h4",className:"mb-3 text-slate-800 dark:text-slate-100 font-semibold",children:"Server Configuration"}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{htmlFor:"connection-type",className:"block mb-2 text-slate-600 dark:text-slate-400 font-medium",children:"Connection Type"}),C.jsxs("select",{id:"connection-type",value:G,onChange:Vt,onFocus:ca,onBlur:_e,className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg bg-white dark:bg-slate-800 dark:border-slate-600 dark:text-slate-200 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-600 focus:border-transparent outline-none transition-all duration-200 hover:border-slate-400 dark:hover:border-slate-500",children:[C.jsx("option",{value:"sse",children:"Server-Sent Events (SSE)"}),C.jsx("option",{value:"websocket",children:"WebSocket"}),C.jsx("option",{value:"streamable-http",children:"Streamable HTTP"})]}),C.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:G==="sse"?"HTTP-based streaming connection (traditional)":G==="websocket"?"Full-duplex WebSocket connection (faster, more features)":"Advanced HTTP streaming (modern MCP protocol)"})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{htmlFor:"server-uri",className:"block mb-2 text-slate-600 dark:text-slate-400 font-medium",children:"Server URI"}),C.jsx("input",{id:"server-uri",type:"text",value:H,onChange:Ke,onFocus:lt,onBlur:ht,placeholder:G==="sse"?"http://localhost:3006/sse":G==="websocket"?"ws://localhost:3006/message":"http://localhost:3006/mcp",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg bg-white dark:bg-slate-800 dark:border-slate-600 dark:text-slate-200 placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-600 focus:border-transparent outline-none transition-all duration-200 hover:border-slate-400 dark:hover:border-slate-500"}),C.jsxs("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:[C.jsx("div",{className:"mb-2",children:C.jsx("strong",{children:"To start MCP SuperAssistant Proxy:"})}),C.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-2 rounded font-mono text-xs border",children:["npx @srbhptl39/mcp-superassistant-proxy@latest --config ./config.json --outputTransport ",G==="sse"?"sse":G==="websocket"?"ws":"streamableHttp"]}),C.jsxs("div",{className:"mt-2 text-xs",children:[C.jsxs("div",{className:"mb-1",children:["Available transports: ",C.jsx("code",{children:"streamableHttp"}),", ",C.jsx("code",{children:"sse"}),", ",C.jsx("code",{children:"ws"})]}),C.jsxs("div",{className:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[C.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-1",children:"📡 Public Endpoints Supported:"}),C.jsxs("div",{className:"text-blue-700 dark:text-blue-300 space-y-1",children:[C.jsxs("div",{children:["• ",C.jsx("strong",{children:"Zapier:"})," Public MCP endpoints with CORS enabled"]}),C.jsxs("div",{children:["• ",C.jsx("strong",{children:"Composio:"})," SSE and Streamable HTTP endpoints"]}),C.jsxs("div",{children:["• ",C.jsx("strong",{children:"Custom servers:"})," Any MCP server with CORS headers"]})]}),C.jsxs("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:[C.jsx("strong",{children:"Note:"})," WebSocket connections require local servers or proxy due to browser security restrictions."]})]})]})]})]}),C.jsxs("div",{className:"flex justify-end gap-2",children:[C.jsx(Da,{onClick:()=>{k(!1),ie(!1),de(!1),d.uri&&re(d.uri),d.connectionType&&ue(d.connectionType)},variant:"outline",size:"sm",className:"h-8 px-3 text-xs font-medium transition-all duration-200 hover:scale-105 active:scale-95",children:"Cancel"}),C.jsx(Da,{onClick:ot,variant:"default",size:"sm",className:"h-8 px-3 text-xs font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white dark:text-white save-button-stable",disabled:be||I,children:I?C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connecting..."]}):"Save & Reconnect"})]}),be&&C.jsx("div",{className:"mt-3 p-3 bg-rose-50 dark:bg-rose-900/20 rounded-lg border border-rose-200 dark:border-rose-800 text-rose-800 dark:text-rose-200",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(an,{name:"alert-triangle",size:"sm",className:"text-rose-600 dark:text-rose-400"}),C.jsx("p",{className:"font-medium",children:"Extension background services unavailable. Try reloading the page."})]})})]})})}),v&&C.jsx("div",{className:"mt-3 animate-in slide-in-from-top-2 duration-200",children:C.jsx(Bs,{className:"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-lg",children:C.jsxs(Hs,{className:"p-4 text-xs text-slate-700 dark:text-slate-300",children:[C.jsx(tn,{variant:"h4",className:"mb-3 text-slate-800 dark:text-slate-100 font-semibold",children:"Connection Details"}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("div",{className:"flex justify-between items-center py-1",children:[C.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Status:"}),C.jsx("span",{className:at("px-2 py-1 rounded-full text-xs font-medium",fe==="connected"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400":fe==="disconnected"?"bg-rose-100 text-rose-700 dark:bg-rose-900/20 dark:text-rose-400":"bg-slate-100 text-slate-700 dark:bg-slate-900/20 dark:text-slate-400"),children:Jt.label})]}),C.jsxs("div",{className:"flex justify-between items-start py-1",children:[C.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Server URI:"}),C.jsx("span",{className:"text-right text-slate-600 dark:text-slate-300 max-w-[200px] break-all",children:H||"Not configured"})]}),C.jsxs("div",{className:"flex justify-between items-center py-1",children:[C.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Connection Type:"}),C.jsx("span",{className:at("px-2 py-1 rounded-full text-xs font-medium",G==="websocket"?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":G==="streamable-http"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-400"),children:G==="websocket"?"WebSocket":G==="streamable-http"?"Streamable HTTP":"SSE"})]}),C.jsxs("div",{className:"flex justify-between items-center py-1",children:[C.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Last updated:"}),C.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:new Date().toLocaleTimeString()})]}),A&&C.jsxs("div",{className:"flex justify-between items-center py-1",children:[C.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Last reconnect:"}),C.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:A})]})]}),fe==="disconnected"&&C.jsx("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200",children:C.jsxs("div",{className:"flex items-start gap-2",children:[C.jsx(an,{name:"info",size:"sm",className:"text-amber-600 dark:text-amber-400 mt-0.5"}),C.jsxs("div",{children:[C.jsx("p",{className:"font-medium mb-2",children:"Troubleshooting tips:"}),C.jsxs("ul",{className:"list-disc ml-4 space-y-1 text-xs",children:[C.jsx("li",{children:"Check if the MCP server is running at the configured URI"}),C.jsx("li",{children:"Verify network connectivity to the server"}),C.jsx("li",{children:"Restart the MCP server if needed"}),C.jsx("li",{children:"Use the Reconnect button to try again"})]}),(ke||Ue)&&C.jsxs("div",{className:"mt-3 p-2 bg-amber-100 dark:bg-amber-800/50 rounded border border-amber-200 dark:border-amber-700",children:[C.jsx("p",{className:"font-medium text-xs mb-1",children:"Last Error:"}),C.jsx("p",{className:"text-xs break-words",children:ke||Ue})]})]})]})}),be&&C.jsx("div",{className:"mt-4 p-3 bg-rose-50 dark:bg-rose-900/20 rounded-lg border border-rose-200 dark:border-rose-800 text-rose-800 dark:text-rose-200",children:C.jsxs("div",{className:"flex items-start gap-2",children:[C.jsx(an,{name:"alert-triangle",size:"sm",className:"text-rose-600 dark:text-rose-400 mt-0.5"}),C.jsxs("div",{children:[C.jsx("p",{className:"font-medium mb-2",children:"Extension Communication Issue:"}),C.jsxs("ul",{className:"list-disc ml-4 space-y-1 text-xs",children:[C.jsx("li",{children:"Try reloading the current page"}),C.jsx("li",{children:"If the issue persists, restart your browser"}),C.jsx("li",{children:"You may need to reinstall the extension if problems continue"})]})]})]})})]})})})]})},wk=({tools:h,onExecute:u,onRefresh:n,isRefreshing:r})=>{const{tools:s}=Ew(),{executions:d,isExecuting:p}=RT(),{enabledTools:v,enableTool:w,disableTool:S,enableAllTools:k,disableAllTools:I,isToolEnabled:R,loadToolEnablementState:A,isLoadingEnablement:_}=W0(),[H,re]=Z.useState(""),[G,ue]=Z.useState(new Set),[ye,ce]=Z.useState(!0),[be,J]=Z.useState(!1),[he,ie]=Z.useState(new Set),[Ee,de]=Z.useState(!1),Ue=s.length>0?s:h,ze=Z.useMemo(()=>Ue.length,[Ue.length]);Z.useEffect(()=>{ze>0&&M(`[AvailableTools] ${ze} tools available`)},[ze]),Z.useEffect(()=>{const Me=setTimeout(()=>{J(!0)},300);return()=>clearTimeout(Me)},[]),Z.useEffect(()=>{Ue.length>0&&A()},[Ue.length,A]);const Fe=Me=>{re(Me.target.value)},Ge=Me=>{const $e=new Set(G);$e.has(Me)?$e.delete(Me):$e.add(Me),ue($e)},Xe=()=>{ce(!ye),M(`[AvailableTools] Component ${ye?"collapsed":"expanded"}`)},{groupedTools:Q,ungroupedTools:V}=Z.useMemo(()=>{const Me=(Ue||[]).filter(Ke=>Ke.name.toLowerCase().includes(H.toLowerCase())||Ke.description&&Ke.description.toLowerCase().includes(H.toLowerCase())),$e={},it=[];return Me.forEach(Ke=>{const lt=Ke.name.indexOf(".");if(lt>0){const ht=Ke.name.substring(0,lt),Vt=Ke.name.substring(lt+1);$e[ht]||($e[ht]=[]),$e[ht].push({...Ke,displayName:Vt,originalName:Ke.name})}else it.push(Ke)}),Object.keys($e).forEach(Ke=>{$e[Ke].sort((lt,ht)=>{if(!Ee){const _e=R(lt.originalName||lt.name),ot=R(ht.originalName||ht.name);if(_e&&!ot)return-1;if(!_e&&ot)return 1}const Vt=lt.displayName||lt.name,ca=ht.displayName||ht.name;return Vt.localeCompare(ca)})}),it.sort((Ke,lt)=>{if(!Ee){const ht=R(Ke.name),Vt=R(lt.name);if(ht&&!Vt)return-1;if(!ht&&Vt)return 1}return Ke.name.localeCompare(lt.name)}),{groupedTools:$e,ungroupedTools:it}},[Ue,H,v,Ee]),ee=()=>{M("[AvailableTools] Refreshing available tools"),n()},Oe=Me=>{de(!0),ie($e=>{const it=new Set($e);return it.has(Me)?it.delete(Me):it.add(Me),it}),R(Me)?(S(Me),M(`[AvailableTools] Tool disabled: ${Me}`)):(w(Me),M(`[AvailableTools] Tool enabled: ${Me}`))},$=()=>{de(!1),ie(new Set),M("[AvailableTools] Tool changes saved and sorted")},P=()=>{he.forEach(Me=>{R(Me)?S(Me):w(Me)}),de(!1),ie(new Set),M("[AvailableTools] Tool changes discarded")},fe=()=>{de(!0),k(),M("[AvailableTools] All tools enabled")},ne=()=>{de(!0),I(),M("[AvailableTools] All tools disabled")},ke=(Me,$e)=>{de(!0);const it=$e.every(Ke=>R(Ke.originalName||Ke.name));$e.forEach(Ke=>{const lt=Ke.originalName||Ke.name;it?S(lt):w(lt)}),M(`[AvailableTools] Group ${Me} ${it?"disabled":"enabled"}`)},Be=Z.useMemo(()=>Object.values(Q).reduce(($e,it)=>$e+it.length,0)+V.length,[Q,V]),Te=Me=>Me.every($e=>R($e.originalName||$e.name)),Pe=Me=>{const $e=Me.filter(it=>R(it.originalName||it.name)).length;return $e>0&&$e<Me.length};return C.jsxs(Bs,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:[C.jsxs(rx,{className:"p-4 pb-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("button",{onClick:Xe,className:"p-1 mr-2 rounded transition-colors bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600","aria-label":ye?"Collapse tools":"Expand tools",children:C.jsx(an,{name:"chevron-right",size:"sm",className:at("text-slate-600 dark:text-slate-300 transition-transform",ye?"rotate-90":"")})}),C.jsx(tn,{variant:"h3",children:"Available Tools"})]}),C.jsx(Da,{onClick:ee,disabled:r,size:"sm",variant:"outline",className:at("h-9 w-9 p-0",r?"opacity-50":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"),"aria-label":"Refresh tools",children:C.jsx(an,{name:"refresh",size:"sm",className:at("text-slate-700 dark:text-slate-300",r?"animate-spin":"")})})]}),ye&&C.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[C.jsx("div",{className:"flex items-center gap-2",children:C.jsxs(tn,{variant:"small",className:"text-slate-600 dark:text-slate-400",children:[v.size," of ",Be," tools enabled"]})}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(Da,{onClick:fe,size:"sm",variant:"outline",disabled:r||_||Be===0,className:"h-8 px-3 text-xs bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800",children:"Enable All"}),C.jsx(Da,{onClick:ne,size:"sm",variant:"outline",disabled:r||_||Be===0,className:"h-8 px-3 text-xs bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800",children:"Disable All"}),Ee&&C.jsxs(C.Fragment,{children:[C.jsx(Da,{onClick:$,size:"sm",variant:"outline",className:"h-8 px-3 text-xs bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Save Changes"}),C.jsx(Da,{onClick:P,size:"sm",variant:"outline",className:"h-8 px-3 text-xs bg-orange-50 hover:bg-orange-100 dark:bg-orange-900/20 dark:hover:bg-orange-900/30 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Discard"})]})]})]})]}),ye&&C.jsxs(Hs,{className:"p-4 pt-4 bg-white dark:bg-slate-900",children:[C.jsx("div",{className:"mb-4",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"Search tools...",value:H,onChange:Fe,className:"w-full px-3 py-2 pl-10 border border-slate-300 dark:border-slate-600 rounded text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100"}),C.jsx("div",{className:"absolute left-3 top-2.5",children:C.jsx(an,{name:"search",size:"sm",className:"text-slate-400 dark:text-slate-500"})})]})}),(r||_)&&C.jsxs("div",{className:"flex items-center justify-center py-8 text-slate-500 dark:text-slate-400",children:[C.jsx(an,{name:"refresh",className:"w-8 h-8 animate-spin mr-3"}),C.jsx(tn,{variant:"body",className:"text-lg",children:r?"Refreshing tools...":"Loading tool preferences..."})]}),!r&&!_&&Be===0&&C.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:H?C.jsxs(C.Fragment,{children:[C.jsx(an,{name:"search",className:"w-12 h-12 mx-auto mb-3"}),C.jsx(tn,{variant:"body",className:"text-lg",children:"No tools match your search"}),C.jsx(tn,{variant:"small",className:"mt-1",children:"Try a different search term"})]}):C.jsxs(C.Fragment,{children:[C.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),C.jsx(tn,{variant:"body",className:"text-lg",children:be?"No tools available":"Loading tools..."}),C.jsx(tn,{variant:"small",className:"mt-1",children:be?C.jsxs(C.Fragment,{children:["Check your server connection or"," ",C.jsx("button",{onClick:ee,className:"text-slate-700 hover:text-slate-900 dark:text-slate-300 dark:hover:text-slate-100",children:"refresh"})]}):"Please wait while we connect to the server"})]})}),!r&&!_&&Be>0&&C.jsxs("div",{className:"space-y-4",children:[Object.entries(Q).map(([Me,$e])=>{const it=Te($e),Ke=Pe($e),lt=G.has(Me);return C.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[C.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-3",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("button",{onClick:()=>Ge(Me),className:"p-1 mr-2 rounded transition-colors hover:bg-slate-200 dark:hover:bg-slate-700","aria-label":lt?"Collapse group":"Expand group",children:C.jsx(an,{name:"chevron-right",size:"sm",className:at("text-slate-600 dark:text-slate-400 transition-transform",lt?"rotate-90":"")})}),C.jsx("input",{type:"checkbox",checked:it,ref:ht=>{ht&&(ht.indeterminate=Ke)},onChange:()=>ke(Me,$e),className:"w-4 h-4 mr-3 text-blue-600 bg-white border-slate-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-slate-800 focus:ring-2 dark:bg-slate-700 dark:border-slate-600"}),C.jsx(tn,{variant:"h4",className:"text-slate-800 dark:text-slate-200 font-semibold",children:Me}),C.jsxs(tn,{variant:"small",className:"ml-2 text-slate-500 dark:text-slate-400",children:["(",$e.length," tools)"]})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[Ke&&C.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded",children:"Partial"}),!it&&!Ke&&C.jsx("span",{className:"px-2 py-1 text-xs bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded",children:"Disabled"})]})]})}),lt&&C.jsx("div",{className:"bg-white dark:bg-slate-900",children:$e.map(ht=>{const Vt=ht.originalName||ht.name,ca=ht.displayName||ht.name,_e=R(Vt),ot=G.has(Vt);return C.jsxs("div",{className:"border-b border-slate-100 dark:border-slate-800 last:border-b-0",children:[C.jsx("div",{className:at("flex items-center justify-between p-3 cursor-pointer transition-colors",_e?"hover:bg-slate-50 dark:hover:bg-slate-800/50":"hover:bg-slate-50 dark:hover:bg-slate-800/30 opacity-60"),onClick:()=>Ge(Vt),children:C.jsxs("div",{className:"flex items-center",children:[C.jsx(an,{name:"chevron-right",size:"sm",className:at("mr-2 text-slate-400 dark:text-slate-500 transition-transform",ot?"rotate-90":"")}),C.jsx("input",{type:"checkbox",checked:_e,onChange:Yt=>{Yt.stopPropagation(),Oe(Vt)},onClick:Yt=>{Yt.stopPropagation()},className:"w-4 h-4 mr-3 text-blue-600 bg-white border-slate-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-slate-800 focus:ring-2 dark:bg-slate-700 dark:border-slate-600"}),C.jsx(tn,{variant:"body",className:at("font-medium transition-colors",_e?"text-slate-800 dark:text-slate-200":"text-slate-500 dark:text-slate-400"),children:ca}),!_e&&C.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded",children:"Disabled"})]})}),ot&&C.jsxs("div",{className:at("p-3 bg-slate-50 dark:bg-slate-800/50",!_e&&"opacity-60"),children:[ht.description&&C.jsx(tn,{variant:"body",className:at("mb-2",_e?"text-slate-600 dark:text-slate-300":"text-slate-500 dark:text-slate-400"),children:ht.description}),C.jsxs("div",{className:"mt-2",children:[C.jsx(tn,{variant:"caption",className:at("mb-1",_e?"text-slate-500 dark:text-slate-400":"text-slate-400 dark:text-slate-500"),children:"Schema"}),C.jsx("pre",{className:at("text-xs p-2 whitespace-pre-wrap max-h-60 overflow-y-auto rounded border",_e?"bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700":"bg-slate-100 dark:bg-slate-800/50 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-600"),children:(()=>{try{const Yt=ht.schema||ht.input_schema;if(!Yt)return"No schema available";const Jt=typeof Yt=="string"?JSON.parse(Yt):Yt;return JSON.stringify(Jt,null,2)}catch(Yt){console.error("Error processing tool schema:",Yt);const Jt=ht.schema||ht.input_schema;return typeof Jt=="string"?Jt:"Invalid schema format"}})()})]})]})]},Vt)})})]},Me)}),V.length>0&&C.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[C.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-3",children:[C.jsx(tn,{variant:"h4",className:"text-slate-800 dark:text-slate-200 font-semibold",children:"Individual Tools"}),C.jsxs(tn,{variant:"small",className:"text-slate-500 dark:text-slate-400",children:["(",V.length," tools)"]})]}),C.jsx("div",{className:"bg-white dark:bg-slate-900",children:V.map(Me=>{const $e=R(Me.name),it=G.has(Me.name);return C.jsxs("div",{className:"border-b border-slate-100 dark:border-slate-800 last:border-b-0",children:[C.jsx("div",{className:at("flex items-center justify-between p-3 cursor-pointer transition-colors",$e?"hover:bg-slate-50 dark:hover:bg-slate-800/50":"hover:bg-slate-50 dark:hover:bg-slate-800/30 opacity-60"),onClick:()=>Ge(Me.name),children:C.jsxs("div",{className:"flex items-center",children:[C.jsx(an,{name:"chevron-right",size:"sm",className:at("mr-2 text-slate-400 dark:text-slate-500 transition-transform",it?"rotate-90":"")}),C.jsx("input",{type:"checkbox",checked:$e,onChange:Ke=>{Ke.stopPropagation(),Oe(Me.name)},onClick:Ke=>{Ke.stopPropagation()},className:"w-4 h-4 mr-3 text-blue-600 bg-white border-slate-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-slate-800 focus:ring-2 dark:bg-slate-700 dark:border-slate-600"}),C.jsx(tn,{variant:"body",className:at("font-medium transition-colors",$e?"text-slate-800 dark:text-slate-200":"text-slate-500 dark:text-slate-400"),children:Me.name}),!$e&&C.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded",children:"Disabled"})]})}),it&&C.jsxs("div",{className:at("p-3 bg-slate-50 dark:bg-slate-800/50",!$e&&"opacity-60"),children:[Me.description&&C.jsx(tn,{variant:"body",className:at("mb-2",$e?"text-slate-600 dark:text-slate-300":"text-slate-500 dark:text-slate-400"),children:Me.description}),C.jsxs("div",{className:"mt-2",children:[C.jsx(tn,{variant:"caption",className:at("mb-1",$e?"text-slate-500 dark:text-slate-400":"text-slate-400 dark:text-slate-500"),children:"Schema"}),C.jsx("pre",{className:at("text-xs p-2 whitespace-pre-wrap max-h-60 overflow-y-auto rounded border",$e?"bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700":"bg-slate-100 dark:bg-slate-800/50 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-600"),children:(()=>{try{const Ke=Me.schema||Me.input_schema;if(!Ke)return"No schema available";const lt=typeof Ke=="string"?JSON.parse(Ke):Ke;return JSON.stringify(lt,null,2)}catch(Ke){console.error("Error processing tool schema:",Ke);const lt=Me.schema||Me.input_schema;return typeof lt=="string"?lt:"Invalid schema format"}})()})]})]})]},Me.name)})})]})]})]})]})},Ek=`
How you work as SuperAssistant:
  1. PRINT the function xml commands to be executed as part of the output/response
  2. There is a Capturing tool which needs printed text to run that tool manually, SO make sure you print the function xml commands with correct function name, parameters and call_id.
  3. Upon Capturing the function xml commands, it will be executed with the call_id provided.
  4. The result of the function execution will be provided in <function_results> tag.
  5. DO NOT USE canvas / canmore.
  6. ONLY BELOW SCHEMA WILL WORK FOR TOOL/FUNTION CALLING.

Example of a properly formatted tool call for ChatGPT:

\`\`\`xml
<function_calls>
<invoke name="tool_name" call_id="1">
<parameter name="param1">value1</parameter>
<parameter name="param2">value2</parameter>
</invoke>
</function_calls>
\`\`\`

`,Ck=`
How you work as SuperAssistant:
  1. PRINT the function xml commands to be executed as part of the output/response
  2. There is a Capturing tool which needs printed text to run that tool manually, SO make sure you print the function xml commands with correct function name, parameters and call_id.
  3. Upon Capturing the fucntion xml commands, it will be executed with the call_id provided.
  4. The result of the function execution will be provided in <function_results> tag.
  5. DO NOT GENERATE python tool code like 'print(notion.notion_retrieve_block_children(...))' command generation, now that WON'T work, that will result in error like 'NameError: name 'notion' is not defined'. You can still use python tool code for tools which are part of other tool sets, apart from tools given to you below.
  6. ONLY BELOW SCHEMA WILL WORK FOR TOOL/FUNTION CALLING.

Example of a properly formatted tool call for Gemini:

\`\`\`xml
<function_calls>
<invoke name="tool_name" call_id="1">
<parameter name="param1">value1</parameter>
<parameter name="param2">value2</parameter>
</invoke>
</function_calls>
\`\`\`

`,Tk=(h,u,n)=>{if(!h||h.length===0)return`# No tools available

Connect to the MCP server to see available tools.`;let r="";r+=`
[Start Fresh Session from here]

<SYSTEM>
You are SuperAssistant with the capabilities of invoke functions and make the best use of it during your assistance, a knowledgeable assistant focused on answering questions and providing information on any topics.
In this environment you have access to a set of tools you can use to answer the user's question.
You have access to a set of functions you can use to answer the user's question. You do NOT currently have the ability to inspect files or interact with external resources, except by invoking the below functions.

Function Call Structure:
- All function calls should be wrapped in 'xml' codeblocks tags like \`\`\`xml ... \`\`\`. This is strict requirement.
- Wrap all function calls in 'function_calls' tags
- Each function call uses 'invoke' tags with a 'name' attribute
- Parameters use 'parameter' tags with 'name' attributes
- Parameter Formatting:
  - String/scalar parameters: written directly as values
  - Lists/objects: must use proper JSON format
  - Required parameters must always be included
  - Optional parameters should only be included when needed
  - If there is xml inside the parameter value, do not use CDATA for wrapping it, just give the xml directly

The instructions regarding 'invoke' specify that:
- When invoking functions, use the 'invoke' tag with a 'name' attribute specifying the function name.
- The invoke tag must be nested within an 'function_calls' block.
- Parameters for the function should be included as 'parameter' tags within the invoke tag, each with a 'name' attribute.
- Include all required parameters for each function call, while optional parameters should only be included when necessary.
- String and scalar parameters should be specified directly as values, while lists and objects should use proper JSON format.
- Do not refer to function/tool names when speaking directly to users - focus on what I'm doing rather than the tool I'm using.
- When invoking a function, ensure all necessary context is provided for the function to execute properly.
- Each 'invoke' tag should represent a single, complete function call with all its relevant parameters.
- DO not generate any <function_calls> tag in your thinking/resoning process, because those will be interpreted as a function call and executed. just formulate the correct parameters for the function call.

The instructions regarding 'call_id="$CALL_ID">
- It is a unique identifier for the function call.
- It is a number that is incremented by 1 for each new function call, starting from 1.

You can invoke one or more functions by writing a "<function_calls>" block like the following as part of your reply to the user, MAKE SURE TO INVOKE ONLY ONE FUNCTION AT A TIME, meaning only one '<function_calls>' tag in your output :

<Example>
\`\`\`xml
<function_calls>
<invoke name="$FUNCTION_NAME" call_id="$CALL_ID">
<parameter name="$PARAMETER_NAME_1">$PARAMETER_VALUE</parameter>
<parameter name="$PARAMETER_NAME_2">$PARAMETER_VALUE</parameter>
...
</invoke>
</function_calls>
</Example>

String and scalar parameters should be specified as is, while lists and objects should use JSON format. Note that spaces for string values are not stripped. The output is not expected to be valid XML and is parsed with regular expressions.

When a user makes a request:
1. ALWAYS analyze what function calls would be appropriate for the task
2. ALWAYS format your function call usage EXACTLY as specified in the schema
3. NEVER skip required parameters in function calls
4. NEVER invent functions that arent available to you
5. ALWAYS wait for function call execution results before continuing
6. After invoking a function, STOP. 
7. NEVER invoke multiple functions in a single response
8. DO NOT STRICTLY GENERATE or form <function_results>.


Answer the user's request using the relevant tool(s), if they are available. Check that all the required parameters for each tool call are provided or can reasonably be inferred from context. IF there are no relevant tools or there are missing values for required parameters, ask the user to supply these values; otherwise proceed with the tool calls. If the user provides a specific value for a parameter (for example provided in quotes), make sure to use that value EXACTLY. DO NOT make up values for or ask about optional parameters. Carefully analyze descriptive terms in the request as they may indicate required parameter values that should be included even if not explicitly quoted.

<Output Format>
<Start HERE>
## Thoughts
  - User Query Elaboration:
  - Thoughts:
  - Observations:
  - Solutions:
  - Function to be used:
  - call_id: $CALL_ID + 1 = $CALL_ID


\`\`\`xml
<function_calls>
<invoke name="$FUNCTION_NAME" call_id="$CALL_ID">
<parameter name="$PARAMETER_NAME_1">$PARAMETER_VALUE</parameter>
<parameter name="$PARAMETER_NAME_2">$PARAMETER_VALUE</parameter>
...
</invoke>
</function_calls>
\`\`\`
<End HERE>
</Output Format>

Do not use <Start HERE> and <End HERE> in your output, that is just output format reference to where to start and end your output.
`;const s=window.location.hostname;return s.includes("gemini")&&(r+=Ck),s.includes("chatgpt")&&(r+=Ek),r+=`## AVAILABLE TOOLS FOR SUPERASSISTANT

`,h.forEach(d=>{r+=` - ${d.name}
`;try{const p=JSON.parse(d.schema);if(d.description&&(r+=`**Description**: ${d.description}
`),p.properties&&Object.keys(p.properties).length>0){r+=`**Parameters**:
`;const v=Array.isArray(p.required)?p.required:[];Object.entries(p.properties).forEach(([w,S])=>{const k=v.includes(w);r+=`- \`${w}\`: ${S.description?S.description:""} (${S.type||"any"}) (${k?"required":"optional"})
`,S.type==="object"&&S.properties&&(r+=`  - Properties:
`,Object.entries(S.properties).forEach(([I,R])=>{r+=`    - \`${I}\`: ${R.description||"No description"} (${R.type||"any"})
`})),S.type==="array"&&S.items&&S.items.type==="object"&&S.items.properties&&(r+=`  - Array items (objects) with properties:
`,Object.entries(S.items.properties).forEach(([I,R])=>{r+=`    - \`${I}\`: ${R.description||"No description"} (${R.type||"any"})
`}))}),r+=`
`}}catch{r+="Schema information not available. No Tools Available"}}),n&&u&&u.trim()&&(r+=`<custom_instructions>
`,r+=u.trim(),r+=`
</custom_instructions>

`),r+="<\\SYSTEM>",r+=`

`,r+=`

`,r+="User Interaction Starts here:",r+=`


`,r+=`

`,r+=`

`,r+=`

`,r},fn={instructions:"",updating:!1,setInstructions:h=>{if(fn.instructions!==h){if(fn.updating){console.warn("[InstructionsState] Prevented recursive update");return}fn.updating=!0,fn.instructions=h,console.debug(`[InstructionsState] Broadcasting instruction update to ${fn.listeners.length} listeners`);try{fn.listeners.forEach((u,n)=>{try{u(h)}catch(r){console.error(`[InstructionsState] Error in listener ${n}:`,r)}})}finally{fn.updating=!1}}},listeners:[],subscribe:h=>(fn.listeners.push(h),console.debug(`[InstructionsState] Listener subscribed (total: ${fn.listeners.length})`),()=>{const u=fn.listeners.indexOf(h);u!==-1&&(fn.listeners.splice(u,1),console.debug(`[InstructionsState] Listener unsubscribed (total: ${fn.listeners.length})`))})},yf=({onClick:h,disabled:u,loading:n,success:r,color:s,label:d})=>{const p={blue:"text-blue-700 dark:text-blue-500 bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-800/40",green:"text-green-700 dark:text-green-500 bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-800/40",red:"text-red-700 dark:text-red-500 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-800/40",amber:"text-amber-700 dark:text-amber-500 bg-amber-100 dark:bg-amber-900/30 hover:bg-amber-200 dark:hover:bg-amber-800/40",purple:"text-purple-700 dark:text-purple-500 bg-purple-100 dark:bg-purple-900/30 hover:bg-purple-200 dark:hover:bg-purple-800/40",slate:"bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-400"};return C.jsx("button",{onClick:h,disabled:u||n,className:at("px-2 py-1 text-xs font-medium rounded transition-colors w-[70px] text-center",u||n?p.slate:p[s]),children:n?`${d}...`:r?`${d} ✓`:d})},kk=({adapter:h,tools:u})=>{const{preferences:n,updatePreferences:r}=pv(),{enabledTools:s,isToolEnabled:d}=W0(),[p,v]=Z.useState(""),[w,S]=Z.useState(!1),[k,I]=Z.useState(!1),[R,A]=Z.useState(!1),[_,H]=Z.useState(!1),[re,G]=Z.useState(!1),[ue,ye]=Z.useState(!1),[ce,be]=Z.useState(!1),[J,he]=Z.useState(n.customInstructions||""),[ie,Ee]=Z.useState(n.customInstructionsEnabled||!1),[de,Ue]=Z.useState(!1),ze=Z.useMemo(()=>u.map(Te=>`${Te.name}:${Te.description||""}`).sort().join("|"),[u]),Fe=Z.useMemo(()=>u.filter(Pe=>d(Pe.name)).map(Pe=>Pe.name).sort().join("|"),[u,d]),Ge=Z.useMemo(()=>u.filter(Te=>d(Te.name)),[u,d]),Xe=Z.useMemo(()=>`${ie}:${J}`,[J,ie]);Z.useEffect(()=>{he(n.customInstructions||""),Ee(n.customInstructionsEnabled||!1)},[n]);const Q=Z.useCallback(()=>Tk(Ge,J,ie),[Ge,J,ie]),V=Z.useMemo(()=>Q(),[Q]);Z.useEffect(()=>(u.length>0&&(M(`[InstructionManager] Regenerating instructions based on ${Ge.length}/${u.length} enabled tools`),v(V),fn.setInstructions(V)),()=>{M("[InstructionManager] Cleaning up instruction generator effect")}),[ze,Fe,Xe,V,Ge.length,u.length]);const ee=Z.useCallback(()=>{if(u.length>0){const Te=Q();M(`[InstructionManager] Force updating instructions based on ${Ge.length}/${u.length} enabled tools`),v(Te),fn.setInstructions(Te)}},[u.length,Q,Ge.length]),[Oe,$]=Z.useState(Ge.length);Z.useEffect(()=>{Oe!==Ge.length&&($(Ge.length),setTimeout(()=>{ee()},50))},[Ge.length,Oe,ee]),Z.useEffect(()=>{M(`[InstructionManager] Instructions updated (${p.length} chars)`)},[p]),Z.useEffect(()=>{let Te;return Te=setInterval(()=>{if(u.length>0){const Me=Q();Me!==p&&(M("[InstructionManager] Detected tool enablement change, updating instructions"),v(Me),fn.setInstructions(Me))}},500),()=>{clearInterval(Te)}},[u.length,Q,p]),Z.useEffect(()=>{fn.updating||fn.instructions!==p&&p&&(M("[InstructionManager] Updating global state with new instructions"),fn.setInstructions(p))},[p]),Z.useEffect(()=>fn.subscribe(Pe=>{Pe!==p&&(M("[InstructionManager] Syncing instructions from global state"),v(Pe))}),[]),Z.useCallback(async()=>{if(p){I(!0),ye(!1);try{M("Inserting instructions into chat"),h.insertTextIntoInput(p),ye(!0),setTimeout(()=>ye(!1),2e3)}catch(Te){console.error("Error inserting instructions:",Te)}finally{I(!1)}}},[h,p]),Z.useCallback(async()=>{if(p){H(!0),G(!1);try{M("Copying instructions to clipboard"),await navigator.clipboard.writeText(p),G(!0),setTimeout(()=>G(!1),2e3)}catch(Te){console.error("Error copying instructions to clipboard:",Te)}finally{H(!1)}}},[p]),Z.useCallback(async()=>{if(!(!p||!h.supportsFileUpload())){A(!0),be(!1);try{const Te=h.name==="Perplexity",Pe=h.name==="Gemini",Me=Te||Pe?"text/plain":"text/markdown",it=`instructions${Te||Pe?".txt":".md"}`;M(`Attaching instructions as ${it}`);const Ke=new File([p],it,{type:Me});await h.attachFile(Ke),be(!0),setTimeout(()=>be(!1),2e3)}catch(Te){console.error("Error attaching instructions as file:",Te)}finally{A(!1)}}},[h,p]);const P=Z.useCallback(()=>{S(!1),fn.setInstructions(p)},[p]),fe=Z.useCallback(()=>{const Te=Q();v(Te),fn.setInstructions(Te),S(!1)},[Q]),ne=Z.useCallback(async Te=>{Ee(Te);try{r({customInstructionsEnabled:Te}),M(`Custom instructions ${Te?"enabled":"disabled"}`)}catch(Pe){M(`Error saving custom instructions toggle: ${Pe}`)}},[r]),ke=Z.useCallback(async()=>{Ue(!1);try{r({customInstructions:J}),M("Custom instructions saved")}catch(Te){M(`Error saving custom instructions: ${Te}`)}},[J,r]),Be=Z.useCallback(()=>{he(n.customInstructions||""),Ue(!1)},[n]);return C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"rounded-lg bg-white dark:bg-slate-900 shadow-sm border border-slate-200 dark:border-slate-800 sidebar-card",children:[C.jsxs("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(tn,{variant:"h4",className:"text-slate-700 dark:text-slate-300",children:"Custom Instructions"}),C.jsxs("label",{className:"flex items-center gap-1.5",children:[C.jsx("input",{type:"checkbox",checked:ie,onChange:Te=>ne(Te.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),C.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Enable"})]})]}),C.jsx("div",{className:"flex items-center gap-1.5",children:de?C.jsxs(C.Fragment,{children:[C.jsx(yf,{onClick:ke,color:"green",label:"Save"}),C.jsx(yf,{onClick:Be,color:"red",label:"Cancel"})]}):C.jsx(yf,{onClick:()=>Ue(!0),color:"blue",label:"Edit",disabled:!ie})})]}),C.jsx("div",{className:"p-3 bg-white dark:bg-slate-900",children:de?C.jsx("textarea",{value:J,onChange:Te=>he(Te.target.value),placeholder:"Enter your custom instructions here...",className:"w-full h-32 p-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-200"}):C.jsx("div",{className:"max-h-32 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent",children:ie&&J?C.jsx("pre",{className:"text-xs bg-slate-50 dark:bg-slate-800 p-3 rounded overflow-x-auto text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:J}):C.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 italic p-3",children:ie?"No custom instructions set":"Custom instructions disabled"})})})]}),C.jsxs("div",{className:"rounded-lg bg-white dark:bg-slate-900 shadow-sm border border-slate-200 dark:border-slate-800 sidebar-card",children:[C.jsxs("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[C.jsx(tn,{variant:"h4",className:"text-slate-700 dark:text-slate-300",children:"Instructions"}),C.jsx("div",{className:"flex items-center gap-1.5",children:w?C.jsxs(C.Fragment,{children:[C.jsx(yf,{onClick:P,color:"green",label:"Save"}),C.jsx(yf,{onClick:fe,color:"red",label:"Cancel"})]}):C.jsx(C.Fragment,{children:C.jsx(yf,{onClick:()=>S(!0),color:"blue",label:"Edit"})})})]}),C.jsx("div",{className:"p-3 bg-white dark:bg-slate-900",children:w?C.jsx("textarea",{value:p,onChange:Te=>v(Te.target.value),className:"w-full h-64 p-2 text-sm font-mono border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-200"}):C.jsx("div",{className:"max-h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent",children:C.jsx("pre",{className:"text-xs bg-slate-50 dark:bg-slate-800 p-3 rounded overflow-x-auto text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p})})})]})]})},Mk=({onSubmit:h,onToggleMinimize:u})=>{const[n,r]=Z.useState(""),[s,d]=Z.useState(!1),p=async w=>{if(w.preventDefault(),n.trim()){d(!0);try{const S=`<user>
${n}
</user>`;await new Promise(k=>setTimeout(k,300)),h(S),await new Promise(k=>setTimeout(k,100)),r("")}catch(S){console.error("Error submitting input:",S)}finally{d(!1)}}},v=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),n.trim()&&p(w))};return C.jsxs(Bs,{className:"mt-3 border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:[C.jsx(rx,{className:"p-3 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 flex items-center justify-between",children:C.jsxs(tn,{variant:"h4",className:"flex items-center",children:[C.jsx(an,{name:"menu",size:"sm",className:"mr-1.5 text-slate-700 dark:text-slate-300"}),"Input Area"]})}),C.jsx(Hs,{className:"p-3 bg-white dark:bg-slate-900",children:C.jsxs("form",{onSubmit:p,className:"flex flex-col gap-2",children:[C.jsx("div",{className:"relative",children:C.jsx("textarea",{value:n,onChange:w=>r(w.target.value),onKeyDown:v,placeholder:"Enter your text here... (Press Enter to submit, Shift+Enter for new line)",className:"w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md min-h-[100px] resize-y focus:outline-none focus:ring-1 focus:ring-slate-400 dark:focus:ring-slate-500 focus:border-slate-400 dark:focus:border-slate-500 dark:bg-slate-800 dark:text-slate-200 bg-white text-slate-900",disabled:s})}),C.jsx(Da,{type:"submit",disabled:s||!n.trim(),className:at("px-4 py-2 h-9",s||!n.trim()?"opacity-50":""),variant:s||!n.trim()?"outline":"default",children:s?C.jsxs(C.Fragment,{children:[C.jsx(an,{name:"refresh",size:"sm",className:"animate-spin mr-2"}),"Submitting..."]}):C.jsxs(C.Fragment,{children:[C.jsx(an,{name:"chevron-right",size:"sm",className:"mr-1.5"}),"Submit"]})})]})})]})};var Ak={};let Na={getUserPreferences:null,getCurrentAdapterState:null};async function Rk(){try{Na.getUserPreferences=async()=>{const{useUIStore:h}=await Promise.resolve().then(()=>eT);return h.getState().preferences},Na.getCurrentAdapterState=async()=>{const{useAdapterStore:h}=await Promise.resolve().then(()=>iT),u=h.getState(),n=u.getActiveAdapter(),r=n==null?void 0:n.plugin;return{plugin:r,insertText:r!=null&&r.insertText?r.insertText.bind(r):null,attachFile:r!=null&&r.attachFile?r.attachFile.bind(r):null,submitForm:r!=null&&r.submitForm?r.submitForm.bind(r):null,isReady:!!r&&n.status==="active"&&!u.lastAdapterError}},console.debug("[AutomationService] Store access functions initialized")}catch(h){console.error("[AutomationService] Error initializing store access:",h)}}const ku=class ku{constructor(){U(this,"isInitialized",!1);U(this,"eventListener",null)}static getInstance(){return ku.instance||(ku.instance=new ku),ku.instance}async initialize(){if(this.isInitialized){console.debug("[AutomationService] Already initialized, skipping");return}console.debug("[AutomationService] Initializing automation service"),await Rk(),this.setupToolExecutionListener(),this.setupMCPStateListener(),await this.exposeAutomationStateToWindow(),this.isInitialized=!0,console.debug("[AutomationService] Automation service initialized successfully")}cleanup(){this.isInitialized&&(console.debug("[AutomationService] Cleaning up automation service"),this.eventListener&&(document.removeEventListener("mcp:tool-execution-complete",this.eventListener),this.eventListener=null),this.isInitialized=!1,console.debug("[AutomationService] Automation service cleaned up"))}setupToolExecutionListener(){this.eventListener&&document.removeEventListener("mcp:tool-execution-complete",this.eventListener),this.eventListener=u=>{this.handleToolExecutionComplete(u)},document.addEventListener("mcp:tool-execution-complete",this.eventListener),console.debug("[AutomationService] Tool execution event listener registered")}setupMCPStateListener(){ge.on("connection:status-changed",({status:u})=>{console.debug("[AutomationService] MCP connection status changed:",u)})}async handleToolExecutionComplete(u){if(!u.detail){console.warn("[AutomationService] Tool execution complete event received without detail");return}const n=u.detail;console.debug("[AutomationService] Tool execution complete event received:",n);try{const r=await this.getAutomationState();if(!r){console.debug("[AutomationService] Could not get automation state, skipping automation");return}await this.exposeAutomationStateToWindow(),console.debug("[AutomationService] Current automation state:",r),r.autoExecute&&this.handleAutoExecute(n),r.autoInsert&&!n.skipAutoInsertCheck?await this.handleAutoInsert(n)&&r.autoSubmit&&await this.handleAutoSubmit(n):console.debug("[AutomationService] Auto Insert disabled, skipping insert and submit actions")}catch(r){console.error("[AutomationService] Error handling tool execution complete:",r)}}async getAutomationState(){try{if(!Na.getUserPreferences)return console.error("[AutomationService] Store access not initialized"),null;const u=await Na.getUserPreferences();return{autoInsert:u.autoInsert||!1,autoSubmit:u.autoSubmit||!1,autoExecute:u.autoExecute||!1,autoInsertDelay:u.autoInsertDelay||0,autoSubmitDelay:u.autoSubmitDelay||0,autoExecuteDelay:u.autoExecuteDelay||0}}catch(u){return console.error("[AutomationService] Error getting automation state:",u),null}}async handleAutoExecute(u){var s;const n=await((s=Na.getUserPreferences)==null?void 0:s.call(Na)),r=(n==null?void 0:n.autoExecuteDelay)||0;r>0&&(console.debug(`[AutomationService] Auto Execute: Waiting ${r} seconds before execution`),await new Promise(d=>setTimeout(d,r*1e3))),console.debug("[AutomationService] Auto Execute: Tool execution completed",{functionName:u.functionName,callId:u.callId,hasResult:!!u.result,isFileAttachment:u.isFileAttachment,fileName:u.fileName,appliedDelay:r})}async handleAutoInsert(u){var s,d;const n=await((s=Na.getUserPreferences)==null?void 0:s.call(Na)),r=(n==null?void 0:n.autoInsertDelay)||0;if(r>0&&(console.debug(`[AutomationService] Auto Insert: Waiting ${r} seconds before insertion`),await new Promise(p=>setTimeout(p,r*1e3))),console.debug("[AutomationService] Handling auto insert",{appliedDelay:r}),u.skipAutoInsertCheck)return console.debug("[AutomationService] Skipping auto insert due to skipAutoInsertCheck flag"),!1;try{if(!Na.getCurrentAdapterState)return console.error("[AutomationService] Adapter store access not initialized"),!1;const{plugin:p,insertText:v,attachFile:w,isReady:S}=await Na.getCurrentAdapterState();if(!S||!p)return console.warn("[AutomationService] No active adapter available for auto insert"),!1;if(console.debug("[AutomationService] Using adapter for auto insert:",p.name),u.isFileAttachment&&u.file&&w){console.debug("[AutomationService] Auto inserting file:",u.file.name);try{return await w(u.file)?(console.debug("[AutomationService] File attached successfully via auto insert"),u.confirmationText&&v&&(console.debug("[AutomationService] Inserting file confirmation text"),setTimeout(async()=>{try{await v(u.confirmationText)}catch(I){console.error("[AutomationService] Error inserting confirmation text:",I)}},100)),!0):(console.warn("[AutomationService] File attachment failed"),!1)}catch(k){return console.error("[AutomationService] Error calling attachFile method:",k),console.error("[AutomationService] attachFile context info:",{hasAttachFile:!!w,attachFileType:typeof w,activePluginName:p==null?void 0:p.name,fileName:(d=u.file)==null?void 0:d.name}),!1}}else if(u.result&&v){console.debug("[AutomationService] Auto inserting text result");try{return await v(u.result)?(console.debug("[AutomationService] Text inserted successfully via auto insert"),!0):(console.warn("[AutomationService] Text insertion failed"),!1)}catch(k){return console.error("[AutomationService] Error calling insertText method:",k),console.error("[AutomationService] insertText context info:",{hasInsertText:!!v,insertTextType:typeof v,activePluginName:p==null?void 0:p.name}),!1}}else return console.warn("[AutomationService] No valid insertion method found for auto insert",{hasResult:!!u.result,isFileAttachment:u.isFileAttachment,hasFile:!!u.file,hasInsertText:!!v,hasAttachFile:!!w}),!1}catch(p){return console.error("[AutomationService] Error during auto insert:",p),!1}}async handleAutoSubmit(u){var s;const n=await((s=Na.getUserPreferences)==null?void 0:s.call(Na)),r=(n==null?void 0:n.autoSubmitDelay)||0;r>0&&(console.debug(`[AutomationService] Auto Submit: Waiting ${r} seconds before submission`),await new Promise(d=>setTimeout(d,r*1e3))),console.debug("[AutomationService] Handling auto submit",{appliedDelay:r});try{if(!Na.getCurrentAdapterState)return console.error("[AutomationService] Adapter store access not initialized"),!1;const{plugin:d,submitForm:p,isReady:v}=await Na.getCurrentAdapterState();if(!v||!d||!p)return console.warn("[AutomationService] No active adapter or submit capability available for auto submit"),!1;console.debug("[AutomationService] Using adapter for auto submit:",d.name),await new Promise(w=>setTimeout(w,800));try{return await p()?(console.debug("[AutomationService] Form submitted successfully via auto submit"),!0):(console.warn("[AutomationService] Form submission failed"),!1)}catch(w){return console.error("[AutomationService] Error calling submitForm method:",w),console.error("[AutomationService] submitForm context info:",{hasSubmitForm:!!p,submitFormType:typeof p,activePluginName:d==null?void 0:d.name}),!1}}catch(d){return console.error("[AutomationService] Error during auto submit:",d),!1}}isServiceInitialized(){return this.isInitialized}async getCurrentAutomationState(){return await this.getAutomationState()}async triggerTestAutomation(u){console.debug("[AutomationService] Triggering test automation"),await this.handleToolExecutionComplete(new CustomEvent("mcp:tool-execution-complete",{detail:u}))}async exposeAutomationStateToWindow(){try{const u=await this.getAutomationState();u&&(window.__mcpAutomationState=u,console.debug("[AutomationService] Exposed automation state to window:",u))}catch(u){console.error("[AutomationService] Error exposing automation state to window:",u)}}async updateAutomationStateOnWindow(){await this.exposeAutomationStateToWindow()}};U(ku,"instance",null);let Gl=ku;const Vl=Gl.getInstance();async function Ok(){await Vl.initialize()}function zk(){Vl.cleanup()}typeof window<"u"&&Ak.NODE_ENV==="development"&&(window.__automationService={service:Vl,getState:async()=>await Vl.getCurrentAutomationState(),testAutoInsert:async h=>Vl.triggerTestAutomation({result:h,isFileAttachment:!1,skipAutoInsertCheck:!1}),testAutoSubmit:async()=>Vl.triggerTestAutomation({result:"Test result for auto submit",isFileAttachment:!1,skipAutoInsertCheck:!0}),testFileAttachment:async(h="test.txt",u="Test file content")=>{const n=new File([u],h,{type:"text/plain"});return Vl.triggerTestAutomation({isFileAttachment:!0,file:n,fileName:h,confirmationText:`File ${h} attached successfully`,skipAutoInsertCheck:!1})}},console.debug("[AutomationService] Debug utilities exposed on window.__automationService"));const Gw=Object.freeze(Object.defineProperty({__proto__:null,AutomationService:Gl,automationService:Vl,cleanupAutomationService:zk,initializeAutomationService:Ok},Symbol.toStringTag,{value:"Module"})),vv={autoInsertDelay:2,autoSubmitDelay:2,autoExecuteDelay:2},Dk=()=>{const{preferences:h,updatePreferences:u}=pv(),n=(r,s)=>{const d=Math.max(0,parseInt(s)||0);console.debug(`[Settings] ${r} delay changed to: ${d}`),u({[`${r}Delay`]:d});try{const p=JSON.parse(localStorage.getItem("mcpDelaySettings")||"{}");localStorage.setItem("mcpDelaySettings",JSON.stringify({...p,[`${r}Delay`]:d}))}catch(p){console.error("[Settings] Error storing delay settings:",p)}Gl.getInstance().updateAutomationStateOnWindow().catch(console.error)};return xu.useEffect(()=>{try{const r=JSON.parse(localStorage.getItem("mcpDelaySettings")||"{}");Object.keys(r).length===0?(u(vv),localStorage.setItem("mcpDelaySettings",JSON.stringify(vv))):u(r)}catch(r){console.error("[Settings] Error loading stored delay settings:",r),u(vv),localStorage.setItem("mcpDelaySettings",JSON.stringify(vv))}},[u]),C.jsx("div",{className:"p-4 space-y-4",children:C.jsx(Bs,{className:"border-slate-200 dark:border-slate-700 dark:bg-slate-800",children:C.jsxs(Hs,{className:"p-4",children:[C.jsx(tn,{variant:"h4",className:"mb-4 text-slate-700 dark:text-slate-300",children:"Automation Delay Settings"}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"auto-insert-delay",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Auto Insert Delay (seconds)"}),C.jsx("input",{id:"auto-insert-delay",type:"number",min:"0",value:h.autoInsertDelay||0,onChange:r=>n("autoInsert",r.target.value),disabled:!1,className:at("w-full p-2 text-sm border rounded-md","bg-white dark:bg-slate-900","border-slate-300 dark:border-slate-600","text-slate-900 dark:text-slate-100")}),C.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Delay before auto-inserting content"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"auto-submit-delay",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Auto Submit Delay (seconds)"}),C.jsx("input",{id:"auto-submit-delay",type:"number",min:"0",value:h.autoSubmitDelay||0,onChange:r=>n("autoSubmit",r.target.value),disabled:!1,className:at("w-full p-2 text-sm border rounded-md","bg-white dark:bg-slate-900","border-slate-300 dark:border-slate-600","text-slate-900 dark:text-slate-100")}),C.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Delay before auto-submitting form"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"auto-execute-delay",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Auto Execute Delay (seconds)"}),C.jsx("input",{id:"auto-execute-delay",type:"number",min:"0",value:h.autoExecuteDelay||0,onChange:r=>n("autoExecute",r.target.value),disabled:!1,className:at("w-full p-2 text-sm border rounded-md","bg-white dark:bg-slate-900","border-slate-300 dark:border-slate-600","text-slate-900 dark:text-slate-100")}),C.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Delay before auto-executing functions"})]})]})]})})})};var Nk={};const Vw=()=>{const h=!!window.activeSidebarManager;return M(`[Sidebar] checkActiveSidebarManager: ${h}`),h},sx=["light","dark","system"],Yw=56,yv=320,Ik=({initialPreferences:h})=>{const u=Z.useRef(`sidebar-${Date.now()}-${Math.random().toString(36).substring(2,11)}`);M(`[Sidebar] Component initializing with preferences: ${h?"loaded":"null"} (ID: ${u.current})`);const n=Cw(),r=Z.useMemo(()=>({insertTextIntoInput:Ve=>n.insertText(Ve),triggerSubmission:()=>n.submitForm(),supportsFileUpload:()=>n.hasCapability("file-attachment"),attachFile:Ve=>n.attachFile(Ve),name:n.activeAdapterName||"Unknown",isReady:n.isReady,status:n.status,capabilities:n.capabilities}),[n]),{theme:s,setTheme:d}=OT(),{isVisible:p,isMinimized:v,width:w,toggleSidebar:S,toggleMinimize:k,resizeSidebar:I,setSidebarVisibility:R}=zT(),{preferences:A,updatePreferences:_}=pv(),{status:H}=J0(),[re,G]=Z.useState(null),[ue,ye]=Z.useState(!1),[ce,be]=Z.useState(!1),[J,he]=Z.useState(0),[ie,Ee]=Z.useState(!0);let de;try{de=Tw()}catch(Ve){Ve instanceof Error&&Ve.message.includes("Extension context invalidated")?(M("[Sidebar] Extension context invalidated during hook initialization"),xu.useEffect(()=>{ye(!0),G("Extension was reloaded. Please refresh the page to restore functionality.")},[]),de={availableTools:[],sendMessage:async()=>"Extension context invalidated",refreshTools:async()=>[],forceReconnect:async()=>!1,serverStatus:"disconnected",updateServerConfig:async()=>!1,getServerConfig:async()=>({uri:""})}):(M(`[Sidebar] Unexpected error in useMcpCommunication: ${Ve instanceof Error?Ve.message:String(Ve)}`),de={availableTools:[],sendMessage:async()=>"Communication error",refreshTools:async()=>[],forceReconnect:async()=>!1,serverStatus:"disconnected",updateServerConfig:async()=>!1,getServerConfig:async()=>({uri:""})})}const Ue=H||(de==null?void 0:de.serverStatus)||"disconnected",ze=(de==null?void 0:de.availableTools)||[],Fe=(de==null?void 0:de.sendMessage)||(async()=>"Communication not available"),Ge=(de==null?void 0:de.refreshTools)||(async()=>[]),Xe=(de==null?void 0:de.forceReconnect)||(async()=>!1);Z.useEffect(()=>{be(!0),M(`[Sidebar] Component mounted (ID: ${u.current})`);const Ve=setTimeout(()=>{Ee(!1),M(`[Sidebar] Component initialization completed (ID: ${u.current})`)},100);return()=>{clearTimeout(Ve),be(!1),M(`[Sidebar] Component unmounting (ID: ${u.current})`)}},[]);const Q=ce&&!ie;Z.useEffect(()=>{Q&&M(`[Sidebar] serverStatus changed to: "${Ue}", passing to ServerStatus component`)},[Ue,Q]),Z.useEffect(()=>{Vw();const Ve=setInterval(()=>{Vw()||M("[Sidebar] WARNING: activeSidebarManager reference lost - this may cause push mode issues")},2e3);return()=>{clearInterval(Ve)}},[]),Z.useEffect(()=>{const Ve=[],Ne=ge.on("connection:status-changed",En=>{M(`[Sidebar] Connection status event received: ${En.status}${En.error?` (${En.error})`:""}`),En.status==="connected"&&(M("[Sidebar] Connection established, refreshing tools..."),Ge(!0).catch(Zi=>{M(`[Sidebar] Failed to refresh tools after connection: ${Zi}`)}))});Ve.push(Ne);const qe=ge.on("tool:list-updated",En=>{M(`[Sidebar] Tool list updated event received: ${En.tools.length} tools`)});Ve.push(qe);const gn=ge.on("tool:execution-completed",En=>{M(`[Sidebar] Tool execution completed: ${En.execution.toolName} (ID: ${En.execution.id})`)});Ve.push(gn);const hn=ge.on("tool:execution-failed",En=>{M(`[Sidebar] Tool execution failed: ${En.toolName} - ${En.error}`)});Ve.push(hn);const lr=ge.on("context:bridge-invalidated",En=>{M(`[Sidebar] Context bridge invalidated: ${En.error}`),ye(!0),G("Extension was reloaded. Please refresh the page to restore functionality.")});Ve.push(lr);const Kr=ge.on("context:bridge-restored",()=>{M("[Sidebar] Context bridge restored"),ye(!1),re!=null&&re.includes("Extension was reloaded")&&G(null),Xe().catch(En=>{M(`[Sidebar] Failed to reconnect after context restoration: ${En}`)})});return Ve.push(Kr),()=>{Ve.forEach(En=>En())}},[Ge,Xe,re]),Z.useEffect(()=>{const Ne=setTimeout(async()=>{if(Ue==="connected"&&ze.length===0){M("[Sidebar] Component mounted with connection, loading initial tools...");try{await Ge(!0)}catch(qe){M(`[Sidebar] Failed to load initial tools: ${qe}`)}}},1e3);return()=>clearTimeout(Ne)},[Ue,ze.length]);const V=v??(h==null?void 0:h.isMinimized)??!1,ee=w||(h==null?void 0:h.sidebarWidth)||yv,Oe=A.isPushMode??(h==null?void 0:h.isPushMode)??!1;A.autoSubmit??(h==null||h.autoSubmit),Z.useEffect(()=>{M(`[Sidebar] State update - visible: ${p}, minimized: ${V}, pushMode: ${Oe}, width: ${ee}`)},[p,V,Oe,ee]);const[$,P]=Z.useState("availableTools"),[fe,ne]=Z.useState(!1),[ke,Be]=Z.useState(!1),[Te,Pe]=Z.useState(!1),Me=Z.useRef(null),$e=Z.useRef(null),it=Z.useRef(!1),Ke=Z.useRef(yv),lt=Z.useRef(null),ht=Z.useCallback(async(Ve=10,Ne=50)=>{for(let qe=0;qe<Ve;qe++){const gn=window.activeSidebarManager;if(gn)return M(`[Sidebar] activeSidebarManager found after ${qe} attempts`),gn;const hn=Ne*Math.pow(2,qe);M(`[Sidebar] activeSidebarManager not available, retrying in ${hn}ms (attempt ${qe+1}/${Ve})`),await new Promise(lr=>setTimeout(lr,hn))}return M(`[Sidebar] activeSidebarManager not available after ${Ve} attempts`),null},[]),Vt=Z.useCallback(async Ve=>{try{const Ne=await ht(5,50);if(!Ne){M("[Sidebar] Sidebar manager not available for theme application - will apply when ready.");return}try{Ne.applyThemeClass(Ve)||M("[Sidebar] Theme application failed but continuing...")}catch(qe){M(`[Sidebar] Theme application error: ${qe instanceof Error?qe.message:String(qe)}`)}}catch(Ne){M(`[Sidebar] Error waiting for SidebarManager during theme application: ${Ne instanceof Error?Ne.message:String(Ne)}`)}},[ht]),ca=Z.useRef(0);Z.useEffect(()=>{const Ve=Date.now();if(Ve-ca.current<100)return;ca.current=Ve;try{Vt(s)}catch(gn){M(`[Sidebar] Theme application error during useEffect: ${gn instanceof Error?gn.message:String(gn)}`)}const Ne=window.matchMedia("(prefers-color-scheme: dark)"),qe=()=>{if(s==="system"){const gn=Date.now();if(gn-ca.current<100)return;ca.current=gn;try{Vt("system")}catch(hn){M(`[Sidebar] Theme reapplication error: ${hn instanceof Error?hn.message:String(hn)}`)}}};return Ne.addEventListener("change",qe),()=>{Ne.removeEventListener("change",qe)}},[s,Vt]),Z.useEffect(()=>{M(`[Sidebar] Push mode effect triggered - visible: ${p}, pushMode: ${Oe}, minimized: ${V}, width: ${ee}`),(async()=>{try{const Ne=await ht();if(Ne){M("[Sidebar] activeSidebarManager available: true");try{p?(M(`[Sidebar] Applying push mode (${Oe}, minimized: ${V}) and width (${ee})`),Ne.setPushContentMode(Oe,V?Yw:ee,V)):(M("[Sidebar] Disabling push mode - sidebar not visible"),Ne.setPushContentMode(!1))}catch(qe){M(`[Sidebar] Error applying push mode settings: ${qe instanceof Error?qe.message:String(qe)}`)}}else M("[Sidebar] activeSidebarManager not available after retries - cannot apply push mode")}catch(Ne){M(`[Sidebar] Error in push mode application process: ${Ne instanceof Error?Ne.message:String(Ne)}`)}})()},[Oe,ee,V,p,ht]),Z.useEffect(()=>()=>{(async()=>{try{const Ne=await ht(5,50);Ne?(M("[Sidebar] Component unmounting - disabling push mode"),Ne.setPushContentMode(!1)):M("[Sidebar] Component unmounting - could not access SidebarManager for cleanup")}catch(Ne){M(`[Sidebar] Error during push mode cleanup: ${Ne instanceof Error?Ne.message:String(Ne)}`)}})()},[ht]);const _e=()=>{lt.current!==null&&clearTimeout(lt.current),Be(!0),Me.current&&Me.current.classList.add("sidebar-transitioning"),lt.current=window.setTimeout(()=>{Be(!1),Me.current&&Me.current.classList.remove("sidebar-transitioning"),lt.current=null},500)},ot=()=>{_e(),Me.current&&(Me.current.style.transform="scale(0.98)",setTimeout(()=>{Me.current&&(Me.current.style.transform="")},100)),k("user action")},Yt=()=>Pe(Ve=>!Ve),Jt=Z.useCallback(Ve=>{it.current||(it.current=!0,Me.current&&Me.current.classList.add("resizing"));const Ne=Math.max(yv,Ve);if(Oe)try{const qe=window.activeSidebarManager;qe&&typeof qe.updatePushModeStyles=="function"&&qe.updatePushModeStyles(Ne)}catch(qe){M(`[Sidebar] Error updating push mode styles: ${qe instanceof Error?qe.message:String(qe)}`)}window.requestAnimationFrame?window.requestAnimationFrame(()=>{I(Ne),lt.current!==null&&clearTimeout(lt.current),lt.current=window.setTimeout(()=>{Me.current&&Me.current.classList.remove("resizing"),Ke.current=Ne,it.current=!1,lt.current=null},200)}):I(Ne)},[Oe]),Un=Ve=>{_({isPushMode:Ve}),M(`[Sidebar] Push mode ${Ve?"enabled":"disabled"}`)},Ae=async()=>{M("[Sidebar] Refreshing tools"),ne(!0);try{await Ge(!0),M("[Sidebar] Tools refreshed successfully")}catch(Ve){M(`[Sidebar] Error refreshing tools (non-blocking): ${Ve instanceof Error?Ve.message:String(Ve)}`)}finally{ne(!1)}},gt=()=>{const Ne=(sx.indexOf(s)+1)%sx.length,qe=sx[Ne];d(qe),M(`[Sidebar] Theme toggled to: ${qe}`)},Xt=ze.map(Ve=>({name:Ve.name,schema:Ve.schema,description:Ve.description||""}));typeof window<"u"&&(window.availableTools=ze);const Rn=()=>{switch(s){case"light":return"sun";case"dark":return"moon";case"system":return"laptop";default:return"laptop"}};return C.jsxs("div",{ref:Me,className:at("fixed top-0 right-0 h-screen bg-white dark:bg-slate-900 shadow-lg z-50 flex flex-col border-l border-slate-200 dark:border-slate-700 sidebar",Oe?"push-mode":"",it.current?"resizing":"",V?"collapsed":"",ke?"sidebar-transitioning":""),style:{width:V?`${Yw}px`:`${ee}px`},children:[!V&&C.jsx(hk,{onResize:Jt,minWidth:yv,maxWidth:500,className:"absolute left-0 top-0 bottom-0 w-1 cursor-ew-resize hover:bg-indigo-400 dark:hover:bg-indigo-600 z-[60] transition-colors duration-300"}),C.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 flex items-center justify-between flex-shrink-0 shadow-sm sidebar-header",children:V?C.jsx(Da,{variant:"ghost",size:"icon",onClick:ot,"aria-label":"Expand sidebar",className:"mx-auto hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-all duration-200 hover:scale-110",children:C.jsx(an,{name:"chevron-left",className:"h-4 w-4 text-slate-700 dark:text-slate-300"})}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsxs("a",{href:"https://mcpsuperassistant.ai/",target:"_blank",rel:"noopener noreferrer","aria-label":"Visit MCP Super Assistant Website",className:"block",children:[" ",C.jsx("img",{src:chrome.runtime.getURL("icon-34.png"),alt:"MCP Logo",className:"w-8 h-8 rounded-md "})]}),C.jsxs(C.Fragment,{children:[C.jsx("a",{href:"https://mcpsuperassistant.ai/",target:"_blank",rel:"noopener noreferrer",className:"text-slate-800 dark:text-slate-100 hover:text-slate-600 dark:hover:text-slate-300 transition-colors duration-150 no-underline","aria-label":"Visit MCP Super Assistant Website",children:C.jsx(tn,{variant:"h4",className:"font-semibold",children:"MCP SuperAssistant"})}),C.jsx("a",{href:"https://mcpsuperassistant.ai/",target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 transition-colors duration-150","aria-label":"Visit MCP Super Assistant Website",children:C.jsx(an,{name:"arrow-up-right",size:"xs",className:"inline-block align-baseline"})})]})]}),C.jsxs("div",{className:"flex items-center space-x-2 pr-1",children:[C.jsxs(Da,{variant:"ghost",size:"icon",onClick:gt,"aria-label":`Toggle theme (current: ${s})`,className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-all duration-200 hover:scale-105",children:[C.jsx(an,{name:Rn(),size:"sm",className:"transition-all text-indigo-600 dark:text-indigo-400"}),C.jsx("span",{className:"sr-only",children:"Toggle theme"})]}),C.jsx(Da,{variant:"ghost",size:"icon",onClick:ot,"aria-label":"Minimize sidebar",className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-all duration-200 hover:scale-105",children:C.jsx(an,{name:"chevron-right",className:"h-4 w-4 text-slate-700 dark:text-slate-300"})})]})]})}),C.jsx("div",{className:"sidebar-inner-content flex-1 relative overflow-hidden bg-white dark:bg-slate-900",children:C.jsx("div",{ref:$e,className:at("absolute top-0 bottom-0 right-0 transition-transform duration-200 ease-in-out",V?"translate-x-full":"translate-x-0",ke?"will-change-transform":""),style:{width:`${ee}px`},children:C.jsxs("div",{className:"flex flex-col h-full",children:[re&&C.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 p-3 flex-shrink-0",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-start space-x-2",children:[C.jsx(an,{name:"alert-triangle",size:"sm",className:"text-red-600 dark:text-red-400 mt-0.5"}),C.jsxs("div",{className:"flex-1",children:[C.jsx(tn,{variant:"subtitle",className:"text-red-800 dark:text-red-200 font-medium",children:ue?"Extension Reloaded":"Warning"}),C.jsx(tn,{variant:"caption",className:"text-red-700 dark:text-red-300",children:ue?"The extension was reloaded. Please refresh this page to restore full functionality.":`Some features may be limited: ${re}`}),ue&&C.jsx("div",{className:"mt-2",children:C.jsx(Da,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-800 mr-2",children:"Refresh Page"})})]})]}),!ue&&C.jsx(Da,{variant:"outline",size:"sm",onClick:()=>G(null),className:"border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-800",children:"Dismiss"})]})}),C.jsxs("div",{className:"py-4 px-4 space-y-4 overflow-y-auto flex-shrink-0",children:[C.jsx(Sk,{status:Ue}),C.jsx(Bs,{className:"sidebar-card border-slate-200 dark:border-slate-700 dark:bg-slate-800 flex-shrink-0 overflow-hidden rounded-lg shadow-sm transition-shadow duration-300",children:C.jsxs(Hs,{className:"p-3 space-y-3",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx(tn,{variant:"subtitle",className:"text-slate-700 dark:text-slate-300 font-medium",children:"Push Content Mode"}),C.jsx(pk,{label:"Push Content Mode",checked:Oe,onChange:Un})]}),Nk.NODE_ENV==="development"&&C.jsx(Da,{variant:"outline",size:"sm",className:"w-full mt-2 border-slate-200 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-700",onClick:()=>{var Ne;const Ve=(Ne=window.activeSidebarManager)==null?void 0:Ne.getShadowHost();Ve&&Ve.shadowRoot?M("Shadow DOM debug requested"):M("Cannot debug: Shadow DOM not found")},children:"Debug Styles"})]})}),C.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-2",children:C.jsxs("div",{className:"flex",children:[C.jsx("button",{className:at("py-2 px-4 font-medium text-sm transition-all duration-200",$==="availableTools"?"border-b-2 border-indigo-600 text-indigo-600 dark:border-indigo-400 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-t-lg"),onClick:()=>P("availableTools"),children:"Available Tools"}),C.jsx("button",{className:at("py-2 px-4 font-medium text-sm transition-all duration-200",$==="instructions"?"border-b-2 border-indigo-600 text-indigo-600 dark:border-indigo-400 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-t-lg"),onClick:()=>P("instructions"),children:"Instructions"}),C.jsx("button",{className:at("py-2 px-4 font-medium text-sm transition-all duration-200",$==="settings"?"border-b-2 border-indigo-600 text-indigo-600 dark:border-indigo-400 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-t-lg"),onClick:()=>P("settings"),children:"Settings"})]})})]}),C.jsxs("div",{className:"flex-1 min-h-0 px-4 pb-4 overflow-hidden",children:[C.jsx("div",{className:at("h-full overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent",{hidden:$!=="availableTools"}),children:C.jsx(Bs,{className:"border-slate-200 dark:border-slate-700 dark:bg-slate-800 rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300",children:C.jsx(Hs,{className:"p-0",children:C.jsx(wk,{tools:ze,onExecute:Fe,onRefresh:Ae,isRefreshing:fe})})})}),C.jsx("div",{className:at("h-full overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent",{hidden:$!=="instructions"}),children:C.jsx(Bs,{className:"border-slate-200 dark:border-slate-700 dark:bg-slate-800 rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300",children:C.jsx(Hs,{className:"p-0",children:C.jsx(kk,{adapter:r,tools:Xt})})})}),C.jsx("div",{className:at("h-full overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent",{hidden:$!=="settings"}),children:C.jsx(Dk,{})})]}),C.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-800 shadow-inner",children:Te?C.jsxs(Da,{variant:"default",size:"sm",onClick:Yt,className:"w-full h-10",children:[C.jsx(an,{name:"chevron-up",size:"sm",className:"mr-2"}),"Show Input"]}):C.jsxs("div",{className:"relative",children:[C.jsx(Da,{variant:"ghost",size:"sm",onClick:Yt,className:"absolute top-2 right-2",children:C.jsx(an,{name:"chevron-down",size:"sm"})}),C.jsx(Mk,{onSubmit:async Ve=>{await r.insertTextIntoInput(Ve),await new Promise(Ne=>setTimeout(Ne,300)),await r.triggerSubmission()},onToggleMinimize:Yt})]})})]})})})]})},lx=()=>{try{const h=JSON.parse(localStorage.getItem("mcp-super-assistant-ui-store")||"{}");if(h.state&&h.state.preferences)return h.state.preferences}catch(h){M(`[SidebarManager] Error reading Zustand store: ${h}`)}return{autoSubmit:!1,autoInsert:!1,autoExecute:!1,notifications:!0,theme:"system",language:navigator.language||"en-US",isPushMode:!1,sidebarWidth:320,isMinimized:!1,customInstructions:"",customInstructionsEnabled:!1}},Qe=class Qe extends kT{constructor(n){super(n);U(this,"lastToolOutputsHash","");U(this,"lastMcpToolsHash","");U(this,"isFirstLoad",!0);U(this,"isRendering",!1);U(this,"lastRenderTime",0);U(this,"isInitializing",!1);U(this,"initializationTimeout",null);window.activeSidebarManager=this}static getInstance(n){switch(n){case"perplexity":return Qe.perplexityInstance||(Qe.perplexityInstance=new Qe(n)),Qe.perplexityInstance;case"aistudio":return Qe.aistudioInstance||(Qe.aistudioInstance=new Qe(n)),Qe.aistudioInstance;case"chatgpt":return Qe.chatgptInstance||(Qe.chatgptInstance=new Qe(n)),Qe.chatgptInstance;case"grok":return Qe.grokInstance||(Qe.grokInstance=new Qe(n)),Qe.grokInstance;case"gemini":return Qe.geminiInstance||(Qe.geminiInstance=new Qe(n)),Qe.geminiInstance;case"openrouter":return Qe.openrouterInstance||(Qe.openrouterInstance=new Qe(n)),Qe.openrouterInstance;case"deepseek":return Qe.deepseekInstance||(Qe.deepseekInstance=new Qe(n)),Qe.deepseekInstance;case"kagi":return Qe.kagiInstance||(Qe.kagiInstance=new Qe(n)),Qe.kagiInstance;case"t3chat":return Qe.t3chatInstance||(Qe.t3chatInstance=new Qe(n)),Qe.t3chatInstance;default:return M(`Creating new SidebarManager for unknown site type: ${n}`),new Qe(n)}}async show(){(!window.activeSidebarManager||window.activeSidebarManager!==this)&&(M("[SidebarManager] Ensuring window.activeSidebarManager reference is set during show()"),window.activeSidebarManager=this),M("[SidebarManager] Loading preferences from Zustand store before show()");try{const n=lx();if(M(`[SidebarManager] Loaded Zustand preferences for show(): ${JSON.stringify(n)}`),await this.initialize(),this.shadowHost){const r=n.isMinimized??!1;this.shadowHost.setAttribute("data-initial-minimized",r?"true":"false"),M(`[SidebarManager] Set data-initial-minimized to '${r?"true":"false"}'`)}this.syncZustandVisibilityState(!0)}catch(n){M(`[SidebarManager] Error loading Zustand preferences in show(): ${n instanceof Error?n.message:String(n)}`)}return super.show()}createSidebarContent(){const n=lx();return M("[SidebarManager] Creating sidebar content with fresh Zustand preferences"),C.jsx(Ik,{initialPreferences:n})}showWithToolOutputs(){if((!window.activeSidebarManager||window.activeSidebarManager!==this)&&(M("[SidebarManager] Ensuring window.activeSidebarManager reference is set in showWithToolOutputs()"),window.activeSidebarManager=this),this.isInitializing){M("[SidebarManager] Already initializing, skipping duplicate call");return}this.initializationTimeout&&(clearTimeout(this.initializationTimeout),this.initializationTimeout=null),this.isInitializing=!0,M("[SidebarManager] Scheduling sidebar initialization with 500ms delay"),this.initializationTimeout=setTimeout(async()=>{var n;try{M("[SidebarManager] Starting delayed sidebar initialization"),(!window.activeSidebarManager||window.activeSidebarManager!==this)&&(M("[SidebarManager] Re-setting window.activeSidebarManager reference after delay"),window.activeSidebarManager=this);const s=((n=JSON.parse(localStorage.getItem("mcp-super-assistant-ui-store")||"{}").state)==null?void 0:n.mcpEnabled)??!1;M(`[SidebarManager] MCP enabled from persisted state: ${s}`),s?(M("[SidebarManager] MCP is enabled, showing sidebar"),await this.initializeCollapsedStateWithErrorHandling(),M("[SidebarManager] Sidebar shown successfully with preferences restored")):(M("[SidebarManager] MCP is disabled, initializing sidebar but keeping it hidden"),await this.safeInitialize(),this.shadowHost&&(this.shadowHost.style.display="none",this.shadowHost.style.opacity="0",this._isVisible=!1),M("[SidebarManager] Sidebar initialized but kept hidden due to MCP being disabled"))}catch(r){M(`[SidebarManager] Error during initialization: ${r instanceof Error?r.message:String(r)}`),await this.fallbackInitialization()}finally{this.isInitializing=!1,this.isFirstLoad=!1,this.initializationTimeout=null}},500)}getIsInitialized(){return!this.isFirstLoad}async initializeCollapsedState(){this.isFirstLoad=!1,(!window.activeSidebarManager||window.activeSidebarManager!==this)&&(M("[SidebarManager] Ensuring window.activeSidebarManager reference is set in initializeCollapsedState()"),window.activeSidebarManager=this),await this.initialize();try{const n=lx(),r=n.isMinimized??!1,s=n.isPushMode??!1,d=n.sidebarWidth||320;if(M(`[SidebarManager] Using Zustand preferences for initialization: minimized=${r}, pushMode=${s}, width=${d}`),this.shadowHost&&(r?(this.shadowHost.setAttribute("data-initial-minimized","true"),this.shadowHost.style.width="56px"):this.shadowHost.setAttribute("data-initial-minimized","false"),this.shadowHost.style.display="block",this.shadowHost.style.opacity="1",this.shadowHost.classList.add("initialized")),this._isVisible=!0,this.syncZustandVisibilityState(!0),s){const p=r?56:d;this.setPushContentMode(!0,p,r),this.verifyAndRetryPushMode(p,r)}setTimeout(()=>{(!window.activeSidebarManager||window.activeSidebarManager!==this)&&(M("[SidebarManager] Final check: Re-setting window.activeSidebarManager reference before React render"),window.activeSidebarManager=this),M("[SidebarManager] Rendering React component with all initial state ready"),this.render(),M(`[SidebarManager] Sidebar fully initialized: minimized=${r}, pushMode=${s}`)},20)}catch(n){M(`[SidebarManager] Error during initialization: ${n instanceof Error?n.message:String(n)}`),await this.initialize(),this.shadowHost&&(this.shadowHost.setAttribute("data-initial-minimized","false"),this.shadowHost.style.display="block",this.shadowHost.style.opacity="1",this.shadowHost.classList.add("initialized"),this._isVisible=!0,this.render(),M("[SidebarManager] Fallback initialization completed"))}}async initializeCollapsedStateWithErrorHandling(){try{await this.initializeCollapsedState()}catch(n){M(`[SidebarManager] Error in initializeCollapsedState: ${n instanceof Error?n.message:String(n)}`),await this.fallbackInitialization()}}async safeInitialize(){try{await this.initialize()}catch(n){M(`[SidebarManager] Error in safeInitialize: ${n instanceof Error?n.message:String(n)}`)}}async fallbackInitialization(){try{await this.initialize(),this.shadowHost&&(this.shadowHost.setAttribute("data-initial-minimized","false"),this.shadowHost.style.display="block",this.shadowHost.style.opacity="1",this.shadowHost.classList.add("initialized"),this._isVisible=!0,this.syncZustandVisibilityState(!0),setTimeout(()=>{try{this.render(),M("[SidebarManager] Fallback initialization completed")}catch(n){M(`[SidebarManager] Fallback render failed: ${n instanceof Error?n.message:String(n)}`)}},50))}catch(n){M(`[SidebarManager] Even fallback initialization failed: ${n instanceof Error?n.message:String(n)}`)}}verifyAndRetryPushMode(n,r){const s=document.documentElement.classList.contains("push-mode-enabled"),d=document.documentElement.style.marginRight!=="",p=document.documentElement.style.width!=="",v=s&&d&&p,S=window.getComputedStyle(document.documentElement).marginRight,k=`${n}px`,I=S===k;!v||!I?(M(`[SidebarManager] Push mode verification failed. Applied: ${v}, Margin correct: ${I} (expected: ${k}, got: ${S})`),I||(M("[SidebarManager] Falling back to transform-based push mode"),document.documentElement.classList.add("push-mode-transform"),document.documentElement.style.setProperty("transform",`translateX(-${n}px)`,"important")),setTimeout(()=>{this.setPushContentMode(!0,n,r),setTimeout(()=>{const R=document.documentElement.classList.contains("push-mode-enabled"),A=document.documentElement.style.marginRight!=="";document.documentElement.style.width;const _=window.getComputedStyle(document.documentElement),H=_.marginRight===k||_.transform.includes("translateX");R&&(A||H)?M("[SidebarManager] Push mode successfully applied after retry"):(M("[SidebarManager] Push mode still failed after retry - website may be interfering"),M(`[SidebarManager] Final state - margin-right: ${_.marginRight}, transform: ${_.transform}`))},100)},50)):M("[SidebarManager] Push mode verification successful")}refreshContent(){if(M("[SidebarManager] Content refresh requested - relying on React state updates instead of full re-render"),this.shadowHost){const n=new CustomEvent("mcpSidebarRefresh",{detail:{timestamp:Date.now()}});this.shadowHost.dispatchEvent(n)}}render(){const n=Date.now();if(this.isRendering){M("[SidebarManager] BLOCKED: Render already in progress, skipping duplicate render");return}if(n-this.lastRenderTime<100){M("[SidebarManager] BLOCKED: Render throttled, too soon since last render");return}this.isRendering=!0,this.lastRenderTime=n;try{M("[SidebarManager] Starting protected render"),super.render(),M("[SidebarManager] Protected render completed successfully")}catch(r){M(`[SidebarManager] Error in protected render: ${r instanceof Error?r.message:String(r)}`)}finally{setTimeout(()=>{this.isRendering=!1},50)}}syncZustandVisibilityState(n){try{za.getState().setSidebarVisibility(n,"sidebar-manager-sync"),M(`[SidebarManager] Synced Zustand visibility state to: ${n}`)}catch(r){M(`[SidebarManager] Error syncing Zustand visibility state: ${r}`);try{const s=JSON.parse(localStorage.getItem("mcp-super-assistant-ui-store")||"{}");s.state&&s.state.sidebar?(s.state.sidebar.isVisible=n,localStorage.setItem("mcp-super-assistant-ui-store",JSON.stringify(s)),M(`[SidebarManager] Fallback: Synced Zustand visibility state to: ${n}`)):M("[SidebarManager] Could not find Zustand sidebar state to update")}catch(s){M(`[SidebarManager] Fallback sync also failed: ${s}`)}}}destroy(){switch(window.activeSidebarManager===this&&(window.activeSidebarManager=void 0),this.siteType){case"perplexity":Qe.perplexityInstance===this&&(Qe.perplexityInstance=null);break;case"chatgpt":Qe.chatgptInstance===this&&(Qe.chatgptInstance=null);break;case"grok":Qe.grokInstance===this&&(Qe.grokInstance=null);break;case"gemini":Qe.geminiInstance===this&&(Qe.geminiInstance=null);break;case"aistudio":Qe.aistudioInstance===this&&(Qe.aistudioInstance=null);break;case"openrouter":Qe.openrouterInstance===this&&(Qe.openrouterInstance=null);break;case"deepseek":Qe.deepseekInstance===this&&(Qe.deepseekInstance=null);break;case"kagi":Qe.kagiInstance===this&&(Qe.kagiInstance=null);break;case"t3chat":Qe.t3chatInstance===this&&(Qe.t3chatInstance=null);break}M(`[SidebarManager] Destroyed sidebar manager for site type: ${this.siteType}`),super.destroy()}isNavigationEvent(){return window.location.hostname==="gemini.google.com"&&window.location.href.includes("/app")}safeDestroy(){if(this.isNavigationEvent()){M(`[SidebarManager] Skipping destroy during navigation for ${this.siteType}`);return}M(`[SidebarManager] Performing actual destroy for ${this.siteType}`),this.destroy()}async hide(){return this.syncZustandVisibilityState(!1),super.hide()}};U(Qe,"perplexityInstance",null),U(Qe,"chatgptInstance",null),U(Qe,"grokInstance",null),U(Qe,"geminiInstance",null),U(Qe,"aistudioInstance",null),U(Qe,"openrouterInstance",null),U(Qe,"deepseekInstance",null),U(Qe,"kagiInstance",null),U(Qe,"t3chatInstance",null);let cx=Qe;class Uk{constructor(){U(this,"name","sidebar-plugin");U(this,"version","1.0.0");U(this,"hostnames",[/.*/]);U(this,"capabilities",["dom-manipulation"]);U(this,"context",null);U(this,"sidebarManager",null);U(this,"isActive",!1);U(this,"cleanupFunctions",[]);U(this,"isShowingSidebar",!1)}async initialize(u){this.context=u,u.logger.debug("[SidebarPlugin] Initializing sidebar plugin..."),this.setupEventListeners(),u.logger.debug("[SidebarPlugin] Sidebar plugin initialized successfully")}async activate(){var r,s,d,p,v,w;if(this.isActive){(r=this.context)==null||r.logger.warn("[SidebarPlugin] Plugin already active");return}const u=window.location.hostname,n=window.location.pathname;if((u==="github.com"||u.endsWith(".github.com"))&&!n.startsWith("/copilot")){(s=this.context)==null||s.logger.debug(`[SidebarPlugin] Skipping activation on GitHub page: ${n}`);return}(d=this.context)==null||d.logger.debug("[SidebarPlugin] Activating sidebar plugin...");try{await this.initializeSidebarManager(),await this.showSidebar(),this.isActive=!0,(p=this.context)==null||p.logger.debug("[SidebarPlugin] Sidebar plugin activated successfully"),(v=this.context)==null||v.eventBus.emit("plugin:activated",{pluginName:this.name,timestamp:Date.now()})}catch(S){throw(w=this.context)==null||w.logger.error("[SidebarPlugin] Failed to activate:",S),S}}async deactivate(){var u,n,r,s;if(!this.isActive){(u=this.context)==null||u.logger.warn("[SidebarPlugin] Plugin not active");return}(n=this.context)==null||n.logger.debug("[SidebarPlugin] Deactivating sidebar plugin...");try{this.hideSidebar(),this.isActive=!1,this.isShowingSidebar=!1,(r=this.context)==null||r.logger.debug("[SidebarPlugin] Sidebar plugin deactivated successfully")}catch(d){(s=this.context)==null||s.logger.error("[SidebarPlugin] Error during deactivation:",d)}}async cleanup(){var u,n,r;(u=this.context)==null||u.logger.debug("[SidebarPlugin] Cleaning up sidebar plugin...");try{this.isActive&&await this.deactivate(),this.sidebarManager&&(this.sidebarManager.destroy(),this.sidebarManager=null),this.cleanupFunctions.forEach(s=>{var d;try{s()}catch(p){(d=this.context)==null||d.logger.error("[SidebarPlugin] Error in cleanup function:",p)}}),this.cleanupFunctions=[],this.isActive=!1,this.isShowingSidebar=!1,(n=this.context)==null||n.logger.debug("[SidebarPlugin] Sidebar plugin cleanup completed")}catch(s){(r=this.context)==null||r.logger.error("[SidebarPlugin] Error during cleanup:",s)}}isSupported(){return!0}getStatus(){return this.context?this.isActive?"active":"inactive":"pending"}async showSidebar(){var u,n,r,s;if(this.isShowingSidebar){(u=this.context)==null||u.logger.warn("[SidebarPlugin] Sidebar already showing, skipping to prevent loop");return}if(this.sidebarManager||await this.initializeSidebarManager(),this.sidebarManager){(n=this.context)==null||n.logger.debug("[SidebarPlugin] Showing sidebar..."),this.isShowingSidebar=!0;try{this.sidebarManager.showWithToolOutputs(),za.setState(d=>({sidebar:{...d.sidebar,isVisible:!0}})),(r=this.context)==null||r.logger.debug("[SidebarPlugin] Sidebar shown successfully")}catch(d){throw(s=this.context)==null||s.logger.error("[SidebarPlugin] Error showing sidebar:",d),this.isShowingSidebar=!1,d}}}hideSidebar(){var u,n;this.sidebarManager&&((u=this.context)==null||u.logger.debug("[SidebarPlugin] Hiding sidebar..."),this.isShowingSidebar=!1,this.sidebarManager.hide(),za.setState(r=>({sidebar:{...r.sidebar,isVisible:!1}})),(n=this.context)==null||n.logger.debug("[SidebarPlugin] Sidebar hidden successfully"))}toggleSidebar(){this.isShowingSidebar?this.hideSidebar():this.showSidebar()}getSidebarManager(){return this.sidebarManager}async initializeSidebarManager(){var u,n,r;if(!this.sidebarManager)try{(u=this.context)==null||u.logger.debug("[SidebarPlugin] Initializing sidebar manager...");const s=window.location.hostname,d=this.determineSiteType(s);this.sidebarManager=cx.getInstance(d),window.activeSidebarManager=this.sidebarManager,(n=this.context)==null||n.logger.debug(`[SidebarPlugin] Sidebar manager initialized for site type: ${d}`)}catch(s){throw(r=this.context)==null||r.logger.error("[SidebarPlugin] Failed to initialize sidebar manager:",s),s}}determineSiteType(u){return u.includes("perplexity.ai")?"perplexity":u.includes("chatgpt.com")||u.includes("chat.openai.com")?"chatgpt":u.includes("x.ai")||u.includes("grok")?"grok":u.includes("gemini.google.com")?"gemini":u.includes("aistudio.google.com")?"aistudio":u.includes("openrouter.ai")?"openrouter":u.includes("chat.deepseek.com")?"deepseek":u.includes("kagi.com")?"kagi":u.includes("t3.chat")?"t3chat":"perplexity"}setupEventListeners(){if(!this.context)return;const u=this.context.eventBus.on("app:initialized",()=>{var r;(r=this.context)==null||r.logger.debug("[SidebarPlugin] App initialized, auto-showing sidebar..."),setTimeout(()=>{this.isActive&&!this.isShowingSidebar&&this.showSidebar()},1e3)}),n=this.context.eventBus.on("app:site-changed",async r=>{var p,v,w;(p=this.context)==null||p.logger.debug(`[SidebarPlugin] Site changed to: ${r.hostname}`);const s=this.determineSiteType(r.hostname),d=this.sidebarManager?this.determineSiteType(window.location.hostname):null;if(d&&s===d){(v=this.context)==null||v.logger.debug(`[SidebarPlugin] URL changed within same site (${s}), preserving sidebar manager`);return}(w=this.context)==null||w.logger.debug(`[SidebarPlugin] Actual site change detected: ${d} -> ${s}`),this.isShowingSidebar=!1,this.sidebarManager&&(this.sidebarManager.destroy(),this.sidebarManager=null),this.isActive&&(await this.initializeSidebarManager(),await this.showSidebar())});this.cleanupFunctions.push(u,n)}onPageChanged(u,n){var r;(r=this.context)==null||r.logger.debug(`[SidebarPlugin] Page changed from ${n} to ${u}`),this.isActive&&n&&new URL(u).hostname!==new URL(n).hostname&&this.initializeSidebarManager().then(()=>{this.showSidebar()}).catch(s=>{var d;(d=this.context)==null||d.logger.error("[SidebarPlugin] Error reinitializing after page change:",s)})}onHostChanged(u,n){var r;(r=this.context)==null||r.logger.debug(`[SidebarPlugin] Host changed from ${n} to ${u}`),this.isActive&&this.initializeSidebarManager().then(()=>{this.showSidebar()}).catch(s=>{var d;(d=this.context)==null||d.logger.error("[SidebarPlugin] Error reinitializing after host change:",s)})}}const If=class If extends or{constructor(){super();U(this,"name","ChatGPTAdapter");U(this,"version","2.0.0");U(this,"hostnames",["chatgpt.com"]);U(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);U(this,"selectors",{CHAT_INPUT:'#prompt-textarea, .ProseMirror[contenteditable="true"], div[contenteditable="true"][data-id*="prompt"]',SUBMIT_BUTTON:'button[data-testid="send-button"], button[aria-label*="Send"], button[data-testid="fruitjuice-send-button"], button:has(svg) + button:has(svg[viewBox="0 0 20 20"])',FILE_UPLOAD_BUTTON:'#upload-file-btn, button[aria-label*="Add photos"], button[data-testid="composer-action-file-upload"] button',FILE_INPUT:'input[type="file"][multiple]',MAIN_PANEL:'main, .chat-container, [data-testid="conversation-turn-wrapper"]',DROP_ZONE:'#prompt-textarea, .ProseMirror, [data-testid="composer-text-input"], .composer-parent',FILE_PREVIEW:'.file-preview, .attachment-preview, [data-testid="file-attachment"]',BUTTON_INSERTION_CONTAINER:'[data-testid="composer-footer-actions"], .composer-footer-actions, .flex.items-center[data-testid*="composer"]',FALLBACK_INSERTION:'.composer-parent, .relative.flex.w-full.items-end, [data-testid="composer-trailing-actions"]'});U(this,"lastUrl","");U(this,"urlCheckInterval",null);U(this,"mcpPopoverContainer",null);U(this,"mcpPopoverRoot",null);U(this,"mutationObserver",null);U(this,"popoverCheckInterval",null);U(this,"storeEventListenersSetup",!1);U(this,"domObserversSetup",!1);U(this,"uiIntegrationSetup",!1);U(this,"instanceId");U(this,"chatgptStylesInjected",!1);If.instanceCount++,this.instanceId=If.instanceCount,console.debug(`[ChatGPTAdapter] Instance #${this.instanceId} created. Total instances: ${If.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`ChatGPT adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing ChatGPT adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`ChatGPT adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating ChatGPT adapter instance #${this.instanceId}...`),this.injectChatGPTButtonStyles(),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("ChatGPT adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating ChatGPT adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up ChatGPT adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers();const n=document.getElementById("mcp-chatgpt-button-styles");n&&(n.remove(),this.chatgptStylesInjected=!1),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.chatgptStylesInjected=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into ChatGPT chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const p of d)if(s=document.querySelector(p.trim()),s){this.context.logger.debug(`Found chat input using selector: ${p.trim()}`);break}}if(!s)return this.context.logger.error("Could not find ChatGPT chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{const d=s.textContent||"";s.focus();const p=s.querySelector("[data-placeholder]");p&&p.remove();const v=d?d+`
`+n:n;s.innerHTML="";const w=document.createElement("p");return w.textContent=v,s.appendChild(w),s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{bubbles:!0})),this.emitExecutionCompleted("insertText",{text:n},{success:!0,originalLength:d.length,newLength:n.length,totalLength:v.length}),this.context.logger.debug(`Text inserted successfully. Original: ${d.length}, Added: ${n.length}, Total: ${v.length}`),!0}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into ChatGPT chat input: ${p}`),this.emitExecutionFailed("insertText",p),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit ChatGPT chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const p of s)if(r=document.querySelector(p.trim()),r){this.context.logger.debug(`Found submit button using selector: ${p.trim()}`);break}if(!r)return this.context.logger.error("Could not find ChatGPT submit button"),this.emitExecutionFailed("submitForm","Submit button not found"),!1;try{if(r.disabled)return this.context.logger.warn("ChatGPT submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const p=r.getBoundingClientRect();return p.width===0||p.height===0?(this.context.logger.warn("ChatGPT submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("ChatGPT chat input submitted successfully"),!0)}catch(p){const v=p instanceof Error?p.message:String(p);return this.context.logger.error(`Error submitting ChatGPT chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async attachFile(n,r){var s;this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let d=(r==null?void 0:r.inputElement)||null;if(d||(d=document.querySelector(this.selectors.FILE_INPUT)),d){const v=new DataTransfer;v.items.add(n),d.files=v.files,d.dispatchEvent(new Event("change",{bubbles:!0}))}else if(!await this.simulateFileDrop(n))return this.emitExecutionFailed("attachFile","Failed to simulate file drop"),!1;return await this.checkFilePreview()?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,inputElement:((s=r==null?void 0:r.inputElement)==null?void 0:s.tagName)||"unknown"},{success:!0,previewFound:!0,method:d?"file-input":"drag-drop-simulation"}),this.context.logger.debug(`File attached successfully: ${n.name}`),!0):(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size},{success:!0,previewFound:!1,method:d?"file-input":"drag-drop-simulation"}),this.context.logger.debug(`File attachment initiated (preview not confirmed): ${n.name}`),!0)}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error attaching file to ChatGPT: ${p}`),this.emitExecutionFailed("attachFile",p),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if ChatGPT adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by ChatGPT adapter`),!1;const p=[/^https:\/\/chatgpt\.com\/$/,/^https:\/\/chatgpt\.com\/c\/.*/,/^https:\/\/chatgpt\.com\/g\/.*/,/^https:\/\/chatgpt\.com\/\?.*/].some(v=>v.test(r));return p?this.context.logger.debug(`ChatGPT adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),p}supportsFileUpload(){this.context.logger.debug("Checking file upload support for ChatGPT");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}getChatGPTButtonStyles(){return`
      /* ChatGPT MCP Button Styles - Matching composer-btn design */
      .mcp-chatgpt-button-base {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        box-sizing: border-box;
        min-width: 36px;
        height: 36px;
        padding: 8px;
        margin: 0 2px;
        border: none;
        border-radius: 8px;
        background: transparent;
        color: #8e8ea0;
        font-family: "Söhne", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, "Noto Sans", sans-serif;
        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.15s ease;
        overflow: hidden;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        outline: none;
        text-align: center;
        white-space: nowrap;
      }

      /* Hover state - matches ChatGPT's composer button hover */
      .mcp-chatgpt-button-base:hover {
        background-color: rgba(142, 142, 160, 0.1);
        color: #acacbe;
      }

      /* Active/pressed state */
      .mcp-chatgpt-button-base:active {
        background-color: rgba(142, 142, 160, 0.15);
        transform: scale(0.98);
      }

      /* Focus state for accessibility */
      .mcp-chatgpt-button-base:focus-visible {
        outline: 2px solid #1e90ff;
        outline-offset: 2px;
      }

      /* Active toggle state - matches ChatGPT's active button state */
      .mcp-chatgpt-button-base.mcp-button-active {
        background-color: rgba(30, 144, 255, 0.1);
        color: #1e90ff;
      }

      .mcp-chatgpt-button-base.mcp-button-active:hover {
        background-color: rgba(30, 144, 255, 0.15);
      }

      /* Button content container */
      .mcp-chatgpt-button-content {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        position: relative;
        z-index: 1;
      }

      /* Text styling to match ChatGPT's typography */
      .mcp-chatgpt-button-text {
        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
        white-space: nowrap;
      }

      /* Icon styling matching ChatGPT's icon system */
      .mcp-chatgpt-button-base .mcp-button-icon {
        width: 20px;
        height: 20px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        line-height: 1;
        flex-shrink: 0;
      }

      /* Dark mode support - ChatGPT's dark theme */
      @media (prefers-color-scheme: dark) {
        .mcp-chatgpt-button-base {
          color: #c5c5d2;
        }

        .mcp-chatgpt-button-base:hover {
          background-color: rgba(197, 197, 210, 0.1);
          color: #ececf1;
        }

        .mcp-chatgpt-button-base:active {
          background-color: rgba(197, 197, 210, 0.15);
        }

        .mcp-chatgpt-button-base.mcp-button-active {
          background-color: rgba(30, 144, 255, 0.15);
          color: #4da6ff;
        }

        .mcp-chatgpt-button-base.mcp-button-active:hover {
          background-color: rgba(30, 144, 255, 0.2);
        }
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        .mcp-chatgpt-button-base {
          border: 1px solid currentColor;
        }

        .mcp-chatgpt-button-base:focus-visible {
          outline-width: 3px;
        }
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        .mcp-chatgpt-button-base {
          transition: none;
        }

        .mcp-chatgpt-button-base:active {
          transform: none;
        }
      }

      /* Integration with ChatGPT's composer layout */
      [data-testid="composer-footer-actions"] .mcp-chatgpt-button-base,
      .composer-footer-actions .mcp-chatgpt-button-base {
        margin: 0 4px;
      }

      /* Ensure proper stacking with ChatGPT's UI elements */
      .mcp-chatgpt-button-base {
        position: relative;
        z-index: 1;
      }

      /* Responsive design for mobile */
      @media (max-width: 768px) {
        .mcp-chatgpt-button-base {
          min-width: 32px;
          height: 32px;
          padding: 6px;
        }

        .mcp-chatgpt-button-base .mcp-button-icon {
          width: 18px;
          height: 18px;
          font-size: 18px;
        }

        .mcp-chatgpt-button-text {
          font-size: 13px;
        }
      }

      /* Tooltip styling for better UX */
      .mcp-chatgpt-button-base[title]:hover::after {
        content: attr(title);
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        white-space: nowrap;
        z-index: 1000;
        pointer-events: none;
        margin-bottom: 4px;
      }

      /* Ensure button looks consistent with ChatGPT's composer */
      .relative.flex.w-full.items-end .mcp-chatgpt-button-base {
        align-self: flex-end;
        margin-bottom: 2px;
      }
    `}injectChatGPTButtonStyles(){if(this.chatgptStylesInjected){this.context.logger.debug("ChatGPT button styles already injected, skipping");return}try{const n="mcp-chatgpt-button-styles",r=document.getElementById(n);r&&r.remove();const s=document.createElement("style");s.id=n,s.textContent=this.getChatGPTButtonStyles(),document.head.appendChild(s),this.chatgptStylesInjected=!0,this.context.logger.debug("ChatGPT button styles injected successfully")}catch(n){this.context.logger.error("Failed to inject ChatGPT button styles:",n)}}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for ChatGPT adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for ChatGPT adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for ChatGPT adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,p=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(p,500)};setTimeout(p,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for ChatGPT adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for ChatGPT adapter");try{if(this.mcpPopoverRoot){try{this.mcpPopoverRoot.unmount(),this.context.logger.debug("React root unmounted successfully")}catch(r){this.context.logger.warn("Error unmounting React root during cleanup:",r)}this.mcpPopoverRoot=null}const n=document.getElementById("mcp-popover-container");if(n)if(n.isConnected&&n.parentNode)try{n.parentNode.removeChild(n),this.context.logger.debug("MCP popover container removed successfully")}catch(r){this.context.logger.warn("Error removing popover container, trying alternative method:",r);try{n.remove(),this.context.logger.debug("MCP popover container removed using alternative method")}catch(s){this.context.logger.error("Failed to remove popover container with both methods:",s)}}else this.context.logger.debug("MCP popover container already disconnected from DOM")}catch(n){this.context.logger.error("Error during UI integration cleanup:",n)}this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in ChatGPT adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("ChatGPT adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector('[data-testid="composer-footer-actions"]');if(n){this.context.logger.debug('Found insertion point: [data-testid="composer-footer-actions"]');const s=n.querySelectorAll("button"),d=s.length>0?s[s.length-1]:null;return{container:n,insertAfter:d}}const r=[".composer-footer-actions",'.flex.items-center[data-testid*="composer"]',".relative.flex.w-full.items-end",'[data-testid="composer-trailing-actions"]'];for(const s of r){const d=document.querySelector(s);if(d){this.context.logger.debug(`Found fallback insertion point: ${s}`);const p=d.querySelectorAll("button"),v=p.length>0?p[p.length-1]:null;return{container:d,insertAfter:v}}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into ChatGPT interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{if(!n||!n.isConnected){this.context.logger.warn("Container is not connected to DOM, skipping render");return}Promise.resolve().then(()=>tr).then(r=>{Promise.resolve().then(()=>ir).then(s=>{Promise.resolve().then(()=>sr).then(({MCPPopover:d})=>{if(!n||!n.isConnected){this.context.logger.warn("Container became invalid during async import, aborting render");return}const p=this.createToggleStateManager(),v={className:"mcp-chatgpt-button-base",contentClassName:"mcp-chatgpt-button-content",textClassName:"mcp-chatgpt-button-text",activeClassName:"mcp-button-active"};try{if(this.mcpPopoverRoot){this.context.logger.debug("Unmounting existing React root before creating new one");try{this.mcpPopoverRoot.unmount()}catch(w){this.context.logger.warn("Error unmounting existing React root:",w)}this.mcpPopoverRoot=null}this.mcpPopoverRoot=s.createRoot(n),this.mcpPopoverRoot.render(r.createElement(d,{toggleStateManager:p,adapterButtonConfig:v,adapterName:this.name})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}catch(w){if(this.context.logger.error("Error during React render:",w),this.mcpPopoverRoot){try{this.mcpPopoverRoot.unmount()}catch(S){this.context.logger.warn("Error cleaning up failed React root:",S)}this.mcpPopoverRoot=null}}}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,p=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${p}, autoSubmit=${v}`),{mcpEnabled:p,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,p;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(p=n.stores.ui)!=null&&p.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(w=>{n.logger.error("Error showing sidebar:",w)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(w=>{n.logger.error("Error hiding sidebar:",w)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),p=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(p)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}async simulateFileDrop(n){try{const r=this.selectors.DROP_ZONE.split(", ");let s=null;for(const S of r)if(s=document.querySelector(S.trim()),s)break;if(!s)return this.context.logger.error("No drop zone found for file simulation"),!1;const d=new DataTransfer;d.items.add(n);const p=new DragEvent("dragenter",{bubbles:!0,dataTransfer:d}),v=new DragEvent("dragover",{bubbles:!0,dataTransfer:d}),w=new DragEvent("drop",{bubbles:!0,dataTransfer:d});return s.dispatchEvent(p),s.dispatchEvent(v),s.dispatchEvent(w),!0}catch(r){return this.context.logger.error("Error simulating file drop:",r),!1}}async checkFilePreview(){return new Promise(n=>{setTimeout(()=>{document.querySelector(this.selectors.FILE_PREVIEW)?(this.context.logger.debug("File preview element found after attachment"),n(!0)):(this.context.logger.warn("File preview element not found after attachment"),n(!1))},500)})}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`chatgpt-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`ChatGPT page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(this.injectChatGPTButtonStyles(),setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`ChatGPT host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("ChatGPT adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in ChatGPT adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};U(If,"instanceCount",0);let ux=If;const Uf=class Uf extends or{constructor(){super();U(this,"name","KimiAdapter");U(this,"version","2.0.0");U(this,"hostnames",["kimi.com"]);U(this,"capabilities",["text-insertion","form-submission","file-attachment","dom-manipulation"]);U(this,"selectors",{CHAT_INPUT:'.chat-input-editor[contenteditable="true"], div[contenteditable="true"][data-lexical-editor="true"], .chat-input-editor, .chat-input, textarea[placeholder*="Ask"]',SUBMIT_BUTTON:'.send-button, .send-icon, svg.send-icon, button[aria-label*="Send"], .send-button-container:not(.disabled) .send-button',FILE_UPLOAD_BUTTON:'.attachment-button, .attachment-icon, input[type="file"], label.attachment-button',FILE_INPUT:'input[type="file"]',MAIN_PANEL:".chat-container, .main-content, .conversation-container, .chat-interface, .chat-editor",DROP_ZONE:".chat-editor, .chat-input-editor-container, .chat-input, .file-drop-area",FILE_PREVIEW:".file-preview, .attachment-preview, .uploaded-file",BUTTON_INSERTION_CONTAINER:".chat-editor-action .right-area, .right-area, .chat-editor-action, .actions-wrapper",FALLBACK_INSERTION:".chat-editor-action, .chat-input-editor-container, .left-area, .right-area"});U(this,"lastUrl","");U(this,"urlCheckInterval",null);U(this,"mcpPopoverContainer",null);U(this,"mutationObserver",null);U(this,"popoverCheckInterval",null);U(this,"storeEventListenersSetup",!1);U(this,"domObserversSetup",!1);U(this,"uiIntegrationSetup",!1);U(this,"instanceId");Uf.instanceCount++,this.instanceId=Uf.instanceCount,console.debug(`[KimiAdapter] Instance #${this.instanceId} created. Total instances: ${Uf.instanceCount}`)}async initialize(n){var r;if(this.currentStatus==="initializing"||this.currentStatus==="active"){(r=this.context)==null||r.logger.warn(`Kimi adapter instance #${this.instanceId} already initialized or active, skipping re-initialization`);return}await super.initialize(n),this.context.logger.debug(`Initializing Kimi adapter instance #${this.instanceId}...`),this.lastUrl=window.location.href,this.setupUrlTracking(),this.setupStoreEventListeners()}async activate(){var n;if(this.currentStatus==="active"){(n=this.context)==null||n.logger.warn(`Kimi adapter instance #${this.instanceId} already active, skipping re-activation`);return}await super.activate(),this.context.logger.debug(`Activating Kimi adapter instance #${this.instanceId}...`),this.setupDOMObservers(),this.setupUIIntegration(),this.context.eventBus.emit("adapter:activated",{pluginName:this.name,timestamp:Date.now()})}async deactivate(){var n;if(this.currentStatus==="inactive"||this.currentStatus==="disabled"){(n=this.context)==null||n.logger.warn("Kimi adapter already inactive, skipping deactivation");return}await super.deactivate(),this.context.logger.debug("Deactivating Kimi adapter..."),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1,this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()})}async cleanup(){await super.cleanup(),this.context.logger.debug("Cleaning up Kimi adapter..."),this.urlCheckInterval&&(clearInterval(this.urlCheckInterval),this.urlCheckInterval=null),this.popoverCheckInterval&&(clearInterval(this.popoverCheckInterval),this.popoverCheckInterval=null),this.cleanupUIIntegration(),this.cleanupDOMObservers(),this.storeEventListenersSetup=!1,this.domObserversSetup=!1,this.uiIntegrationSetup=!1}async insertText(n,r){this.context.logger.debug(`Attempting to insert text into Kimi chat input: ${n.substring(0,50)}${n.length>50?"...":""}`);let s=null;if(r!=null&&r.targetElement)s=r.targetElement;else{const d=this.selectors.CHAT_INPUT.split(", ");for(const p of d)if(s=document.querySelector(p.trim()),s){this.context.logger.debug(`Found chat input using selector: ${p.trim()}`);break}}if(!s)return this.context.logger.error("Could not find Kimi chat input element"),this.emitExecutionFailed("insertText","Chat input element not found"),!1;try{if(s.focus(),s.tagName==="TEXTAREA"){const d=s,p=d.value,v=p?p+`

`+n:n;d.value=v,d.selectionStart=d.selectionEnd=d.value.length,d.dispatchEvent(new InputEvent("input",{bubbles:!0})),d.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug(`Text inserted into textarea successfully. Original: ${p.length}, Added: ${n.length}, Total: ${v.length}`)}else if(s.getAttribute("contenteditable")==="true"){const d=s.textContent||"";s.focus();let p=!1;try{const v=navigator.userAgent.toLowerCase().includes("firefox");if(navigator.clipboard&&window.ClipboardEvent){let w=!0;if(v)try{await navigator.clipboard.readText().catch(()=>{})}catch(S){this.context.logger.warn("Firefox clipboard read test failed, trying write anyway:",S)}if(w){let S="";try{v||(S=await navigator.clipboard.readText())}catch(A){this.context.logger.warn("Could not read clipboard, continuing without backup:",A)}await navigator.clipboard.writeText(n);const k=new DataTransfer;k.setData("text/plain",n),k.setData("text/html",n.replace(/\n/g,"<br>"));const I=new ClipboardEvent("paste",{bubbles:!0,cancelable:!0,clipboardData:k}),R=new InputEvent("input",{bubbles:!0,cancelable:!0,inputType:"insertFromPaste",data:n});s.dispatchEvent(I),s.dispatchEvent(R),v&&(s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0}))),!v&&S&&setTimeout(async()=>{try{await navigator.clipboard.writeText(S)}catch(A){this.context.logger.warn("Could not restore clipboard:",A)}},100),p=!0,this.context.logger.debug(`Text inserted using clipboard simulation method (${v?"Firefox":"Chrome"} mode)`)}}else throw new Error("Clipboard API not available")}catch(v){if(this.context.logger.warn("Clipboard method failed, trying Firefox-specific method:",v),navigator.userAgent.toLowerCase().includes("firefox"))try{const S=document.createElement("textarea");if(S.value=n,S.style.position="fixed",S.style.left="-9999px",S.style.top="-9999px",S.style.opacity="0",S.style.pointerEvents="none",document.body.appendChild(S),S.select(),S.setSelectionRange(0,n.length),document.execCommand("copy"))if(s.focus(),document.execCommand("paste"))p=!0,this.context.logger.debug("Text inserted using Firefox hidden textarea method");else{const R=window.getSelection();R==null||R.removeAllRanges();const A=document.createRange();A.selectNodeContents(s),A.collapse(!1),R==null||R.addRange(A),d&&d.trim()!==""&&document.execCommand("insertText",!1,`

`),document.execCommand("insertText",!1,n),p=!0,this.context.logger.debug("Text inserted using Firefox execCommand fallback")}document.body.removeChild(S),p&&(s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new InputEvent("input",{bubbles:!0,inputType:"insertFromPaste",data:n})))}catch(S){this.context.logger.warn("Firefox-specific method failed:",S)}if(!p)try{const S=window.getSelection();S==null||S.removeAllRanges();const k=document.createRange();k.selectNodeContents(s),k.collapse(!1),S==null||S.addRange(k),d&&d.trim()!==""&&document.execCommand("insertText",!1,`

`),n.split(`
`).forEach((R,A)=>{A>0&&document.execCommand("insertLineBreak",!1),R.trim()!==""&&document.execCommand("insertText",!1,R)}),p=!0,this.context.logger.debug("Text inserted using execCommand method with line breaks")}catch(S){this.context.logger.warn("execCommand method failed, trying DOM manipulation:",S);try{let k="";d&&d.trim()!==""?k=d+`

`+n:k=n,s.innerHTML="";const I=k.split(`
`),R=document.createDocumentFragment();I.forEach((H,re)=>{re>0&&R.appendChild(document.createElement("br")),H.trim()!==""?R.appendChild(document.createTextNode(H)):re<I.length-1&&R.appendChild(document.createTextNode(""))}),s.appendChild(R);const A=window.getSelection(),_=document.createRange();_.selectNodeContents(s),_.collapse(!1),A==null||A.removeAllRanges(),A==null||A.addRange(_),p=!0,this.context.logger.debug("Text inserted using DOM manipulation fallback")}catch(k){this.context.logger.error("DOM manipulation method also failed:",k)}}}if(p)s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),s.dispatchEvent(new Event("paste",{bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keydown",{key:"Enter",bubbles:!0})),s.dispatchEvent(new KeyboardEvent("keyup",{key:"Enter",bubbles:!0})),this.context.logger.debug("Text inserted into Kimi Lexical editor with preserved formatting");else throw new Error("All insertion methods failed")}else{const d=s.value||s.textContent||"",p=d?d+`

`+n:n;"value"in s?s.value=p:s.textContent=p,s.dispatchEvent(new InputEvent("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug("Text inserted using fallback method")}return this.emitExecutionCompleted("insertText",{text:n},{success:!0,targetElementType:s.tagName,insertedLength:n.length}),!0}catch(d){const p=d instanceof Error?d.message:String(d);return this.context.logger.error(`Error inserting text into Kimi chat input: ${p}`),this.emitExecutionFailed("insertText",p),!1}}async submitForm(n){var d;this.context.logger.debug("Attempting to submit Kimi chat input");let r=null;const s=this.selectors.SUBMIT_BUTTON.split(", ");for(const p of s)if(r=document.querySelector(p.trim()),r){this.context.logger.debug(`Found submit button using selector: ${p.trim()}`);break}if(!r)return this.context.logger.warn("Could not find Kimi submit button, trying Enter key press"),this.tryEnterKeySubmission();try{if(r.disabled)return this.context.logger.warn("Kimi submit button is disabled"),this.emitExecutionFailed("submitForm","Submit button is disabled"),!1;const p=r.getBoundingClientRect();return p.width===0||p.height===0?(this.context.logger.warn("Kimi submit button is not visible"),this.emitExecutionFailed("submitForm","Submit button is not visible"),!1):(r.click(),this.emitExecutionCompleted("submitForm",{formElement:((d=n==null?void 0:n.formElement)==null?void 0:d.tagName)||"unknown"},{success:!0,method:"submitButton.click",buttonSelector:s.find(v=>document.querySelector(v.trim())===r)}),this.context.logger.debug("Kimi chat input submitted successfully"),!0)}catch(p){const v=p instanceof Error?p.message:String(p);return this.context.logger.error(`Error submitting Kimi chat input: ${v}`),this.emitExecutionFailed("submitForm",v),!1}}async tryEnterKeySubmission(){try{const n=document.querySelector(this.selectors.CHAT_INPUT.split(", ")[0].trim());if(!n)return this.context.logger.error("Cannot find chat input for Enter key submission"),this.emitExecutionFailed("submitForm","Chat input not found for Enter key submission"),!1;const r=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});return n.focus(),n.dispatchEvent(r),this.emitExecutionCompleted("submitForm",{},{success:!0,method:"enterKey",fallback:!0}),this.context.logger.debug("Kimi chat input submitted using Enter key"),!0}catch(n){const r=n instanceof Error?n.message:String(n);return this.context.logger.error(`Error submitting Kimi chat input via Enter key: ${r}`),this.emitExecutionFailed("submitForm",r),!1}}async attachFile(n,r){this.context.logger.debug(`Attempting to attach file: ${n.name} (${n.size} bytes, ${n.type})`);try{if(!n||n.size===0)return this.emitExecutionFailed("attachFile","Invalid file: file is empty or null"),!1;if(!this.supportsFileUpload())return this.emitExecutionFailed("attachFile","File upload not supported on current page"),!1;let s=null;return r!=null&&r.inputElement?s=r.inputElement:s=document.querySelector(this.selectors.FILE_INPUT),s&&await this.attachFileToInput(n,s)?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,method:"fileInput"},{success:!0,attachmentMethod:"direct-input"}),!0):await this.simulateFileDrop(n)?(this.emitExecutionCompleted("attachFile",{fileName:n.name,fileType:n.type,fileSize:n.size,method:"dragDrop"},{success:!0,attachmentMethod:"drag-drop-simulation"}),!0):(this.emitExecutionFailed("attachFile","All file attachment methods failed"),!1)}catch(s){const d=s instanceof Error?s.message:String(s);return this.context.logger.error(`Error attaching file to Kimi: ${d}`),this.emitExecutionFailed("attachFile",d),!1}}async attachFileToInput(n,r){try{const s=new DataTransfer;return s.items.add(n),r.files=s.files,r.dispatchEvent(new Event("change",{bubbles:!0})),this.context.logger.debug(`File attached directly to input: ${n.name}`),!0}catch(s){return this.context.logger.error("Error attaching file to input:",s),!1}}async simulateFileDrop(n){try{const r=this.selectors.DROP_ZONE.split(", ");let s=null;for(const S of r)if(s=document.querySelector(S.trim()),s)break;if(!s)return this.context.logger.warn("No drop zone found for file drop simulation"),!1;const d=new DataTransfer;d.items.add(n);const p=new DragEvent("dragenter",{bubbles:!0,dataTransfer:d}),v=new DragEvent("dragover",{bubbles:!0,dataTransfer:d}),w=new DragEvent("drop",{bubbles:!0,dataTransfer:d});return s.dispatchEvent(p),s.dispatchEvent(v),s.dispatchEvent(w),this.context.logger.debug(`File drop simulated for: ${n.name}`),!0}catch(r){return this.context.logger.error("Error simulating file drop:",r),!1}}isSupported(){const n=window.location.hostname,r=window.location.href;if(this.context.logger.debug(`Checking if Kimi adapter supports: ${r}`),!this.hostnames.some(v=>typeof v=="string"?n.includes(v):v.test(n)))return this.context.logger.debug(`Host ${n} not supported by Kimi adapter`),!1;const p=[/^https?:\/\/(?:www\.)?kimi\.com\/.*/,/^https?:\/\/(?:www\.)?kimi\.com$/].some(v=>v.test(r));return p?this.context.logger.debug(`Kimi adapter supports current page: ${r}`):this.context.logger.debug(`URL pattern not supported: ${r}`),p}supportsFileUpload(){this.context.logger.debug("Checking file upload support for Kimi");const n=this.selectors.DROP_ZONE.split(", ");for(const d of n)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found drop zone with selector: ${d.trim()}`),!0;const r=this.selectors.FILE_UPLOAD_BUTTON.split(", ");for(const d of r)if(document.querySelector(d.trim()))return this.context.logger.debug(`Found upload button with selector: ${d.trim()}`),!0;return document.querySelector(this.selectors.FILE_INPUT)?(this.context.logger.debug("Found file input element"),!0):(this.context.logger.debug("No file upload support detected"),!1)}setupUrlTracking(){this.urlCheckInterval||(this.urlCheckInterval=setInterval(()=>{const n=window.location.href;n!==this.lastUrl&&(this.context.logger.debug(`URL changed from ${this.lastUrl} to ${n}`),this.onPageChanged&&this.onPageChanged(n,this.lastUrl),this.lastUrl=n)},1e3))}setupStoreEventListeners(){if(this.storeEventListenersSetup){this.context.logger.warn(`Store event listeners already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up store event listeners for Kimi adapter instance #${this.instanceId}`),this.context.eventBus.on("tool:execution-completed",n=>{this.context.logger.debug("Tool execution completed:",n),this.handleToolExecutionCompleted(n)}),this.context.eventBus.on("ui:sidebar-toggle",n=>{this.context.logger.debug("Sidebar toggled:",n)}),this.storeEventListenersSetup=!0}setupDOMObservers(){if(this.domObserversSetup){this.context.logger.warn(`DOM observers already set up for instance #${this.instanceId}, skipping`);return}this.context.logger.debug(`Setting up DOM observers for Kimi adapter instance #${this.instanceId}`),this.mutationObserver=new MutationObserver(n=>{let r=!1;n.forEach(s=>{s.type==="childList"&&(document.getElementById("mcp-popover-container")||(r=!0))}),r&&this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover removed, attempting to re-inject"),this.setupUIIntegration())}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}),this.domObserversSetup=!0}setupUIIntegration(){this.uiIntegrationSetup?this.context.logger.debug(`UI integration already set up for instance #${this.instanceId}, re-injecting for page changes`):(this.context.logger.debug(`Setting up UI integration for Kimi adapter instance #${this.instanceId}`),this.uiIntegrationSetup=!0),this.waitForPageReady().then(()=>{this.injectMCPPopoverWithRetry()}).catch(n=>{this.context.logger.warn("Failed to wait for page ready:",n)})}async waitForPageReady(){return new Promise((n,r)=>{let s=0;const d=5,p=()=>{s++,this.findButtonInsertionPoint()?(this.context.logger.debug("Page ready for MCP popover injection"),n()):s>=d?(this.context.logger.warn("Page ready check timed out - no insertion point found"),r(new Error("No insertion point found after maximum attempts"))):setTimeout(p,500)};setTimeout(p,100)})}injectMCPPopoverWithRetry(n=5){const r=s=>{if(this.context.logger.debug(`Attempting MCP popover injection (attempt ${s}/${n})`),document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists");return}const d=this.findButtonInsertionPoint();d?this.injectMCPPopover(d):s<n?(this.context.logger.debug(`Insertion point not found, retrying in 1 second (attempt ${s}/${n})`),setTimeout(()=>r(s+1),1e3)):this.context.logger.warn("Failed to inject MCP popover after maximum retries")};r(1)}setupPeriodicPopoverCheck(){this.popoverCheckInterval||(this.popoverCheckInterval=setInterval(()=>{document.getElementById("mcp-popover-container")||this.findButtonInsertionPoint()&&(this.context.logger.debug("MCP popover missing, attempting to re-inject"),this.injectMCPPopoverWithRetry(3))},5e3))}cleanupDOMObservers(){this.context.logger.debug("Cleaning up DOM observers for Kimi adapter"),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}cleanupUIIntegration(){this.context.logger.debug("Cleaning up UI integration for Kimi adapter");const n=document.getElementById("mcp-popover-container");n&&n.remove(),this.mcpPopoverContainer=null}handleToolExecutionCompleted(n){if(this.context.logger.debug("Handling tool execution completion in Kimi adapter:",n),!this.shouldHandleEvents()){this.context.logger.debug("Kimi adapter should not handle events, ignoring tool execution event");return}this.context.stores.ui&&n.execution&&this.context.logger.debug("Tool execution handled with new architecture integration")}findButtonInsertionPoint(){this.context.logger.debug("Finding button insertion point for MCP popover");const n=document.querySelector(".chat-editor-action .right-area");if(n){this.context.logger.debug("Found Kimi button container (.right-area)");const s=n.querySelector(".attachment-button");if(s)return this.context.logger.debug("Found attachment button, will insert after it"),{container:n,insertAfter:s};const d=n.querySelector(".prompt-library-button");if(d)return this.context.logger.debug("Found prompt library button, will insert after it"),{container:n,insertAfter:d};const p=n.lastElementChild;if(p)return this.context.logger.debug("Using last child element as insertion point"),{container:n,insertAfter:p}}const r=[".chat-editor-action",".right-area",".chat-editor",".chat-input-editor-container",".chat-input-actions",".input-actions",".actions-wrapper"];for(const s of r){const d=document.querySelector(s);if(d)return this.context.logger.debug(`Found fallback insertion point: ${s}`),d.parentElement?{container:d.parentElement,insertAfter:d}:{container:d,insertAfter:null}}return this.context.logger.debug("Could not find suitable insertion point for MCP popover"),null}injectMCPPopover(n){this.context.logger.debug("Injecting MCP popover into Kimi interface");try{if(document.getElementById("mcp-popover-container")){this.context.logger.debug("MCP popover already exists, skipping injection");return}const r=document.createElement("div");r.id="mcp-popover-container",r.style.display="inline-block",r.style.margin="0 4px";const{container:s,insertAfter:d}=n;d&&d.parentNode===s?(s.insertBefore(r,d.nextSibling),this.context.logger.debug("Inserted popover container after specified element")):(s.appendChild(r),this.context.logger.debug("Appended popover container to container element")),this.mcpPopoverContainer=r,this.renderMCPPopover(r),this.context.logger.debug("MCP popover injected and rendered successfully")}catch(r){this.context.logger.error("Failed to inject MCP popover:",r)}}renderMCPPopover(n){this.context.logger.debug("Rendering MCP popover with new architecture integration");try{Promise.resolve().then(()=>tr).then(r=>{Promise.resolve().then(()=>ir).then(s=>{Promise.resolve().then(()=>sr).then(({MCPPopover:d})=>{const p=this.createToggleStateManager();s.createRoot(n).render(r.createElement(d,{toggleStateManager:p})),this.context.logger.debug("MCP popover rendered successfully with new architecture")}).catch(d=>{this.context.logger.error("Failed to import MCPPopover component:",d)})}).catch(s=>{this.context.logger.error("Failed to import ReactDOM:",s)})}).catch(r=>{this.context.logger.error("Failed to import React:",r)})}catch(r){this.context.logger.error("Failed to render MCP popover:",r)}}createToggleStateManager(){const n=this.context;this.name;const r={getState:()=>{var s;try{const d=n.stores.ui,p=(d==null?void 0:d.mcpEnabled)??!1,v=((s=d==null?void 0:d.preferences)==null?void 0:s.autoSubmit)??!1;return n.logger.debug(`Getting MCP toggle state: mcpEnabled=${p}, autoSubmit=${v}`),{mcpEnabled:p,autoInsert:v,autoSubmit:v,autoExecute:!1}}catch(d){return n.logger.error("Error getting toggle state:",d),{mcpEnabled:!1,autoInsert:!1,autoSubmit:!1,autoExecute:!1}}},setMCPEnabled:s=>{var d,p;n.logger.debug(`Setting MCP ${s?"enabled":"disabled"} - controlling sidebar visibility via MCP state`);try{(d=n.stores.ui)!=null&&d.setMCPEnabled?(n.stores.ui.setMCPEnabled(s,"mcp-popover-toggle"),n.logger.debug(`MCP state set to: ${s} via UI store`)):(n.logger.warn("UI store setMCPEnabled method not available"),(p=n.stores.ui)!=null&&p.setSidebarVisibility&&(n.stores.ui.setSidebarVisibility(s,"mcp-popover-toggle-fallback"),n.logger.debug(`Sidebar visibility set to: ${s} via UI store fallback`)));const v=window.activeSidebarManager;v?s?(n.logger.debug("Showing sidebar via activeSidebarManager"),v.show().catch(w=>{n.logger.error("Error showing sidebar:",w)})):(n.logger.debug("Hiding sidebar via activeSidebarManager"),v.hide().catch(w=>{n.logger.error("Error hiding sidebar:",w)})):n.logger.warn("activeSidebarManager not available on window - will rely on UI store only"),n.logger.debug(`MCP toggle completed: MCP ${s?"enabled":"disabled"}, sidebar ${s?"shown":"hidden"}`)}catch(v){n.logger.error("Error in setMCPEnabled:",v)}r.updateUI()},setAutoInsert:s=>{var d;n.logger.debug(`Setting Auto Insert ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoSubmit:s=>{var d;n.logger.debug(`Setting Auto Submit ${s?"enabled":"disabled"}`),(d=n.stores.ui)!=null&&d.updatePreferences&&n.stores.ui.updatePreferences({autoSubmit:s}),r.updateUI()},setAutoExecute:s=>{n.logger.debug(`Setting Auto Execute ${s?"enabled":"disabled"}`),r.updateUI()},updateUI:()=>{n.logger.debug("Updating MCP popover UI");const s=document.getElementById("mcp-popover-container");if(s){const d=r.getState(),p=new CustomEvent("mcp:update-toggle-state",{detail:{toggleState:d}});s.dispatchEvent(p)}}};return r}injectMCPPopoverManually(){this.context.logger.debug("Manual MCP popover injection requested"),this.injectMCPPopoverWithRetry()}isMCPPopoverInjected(){return!!document.getElementById("mcp-popover-container")}emitExecutionCompleted(n,r,s){this.context.eventBus.emit("tool:execution-completed",{execution:{id:this.generateCallId(),toolName:n,parameters:r,result:s,timestamp:Date.now(),status:"success"}})}emitExecutionFailed(n,r){this.context.eventBus.emit("tool:execution-failed",{toolName:n,error:r,callId:this.generateCallId()})}generateCallId(){return`kimi-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}checkAndRestoreSidebar(){this.context.logger.debug("Checking sidebar state after page navigation");try{if(!window.activeSidebarManager){this.context.logger.warn("No active sidebar manager found after navigation");return}this.ensureMCPPopoverConnection()}catch(n){this.context.logger.error("Error checking sidebar state after navigation:",n)}}ensureMCPPopoverConnection(){this.context.logger.debug("Ensuring MCP popover connection after navigation");try{this.isMCPPopoverInjected()?this.context.logger.debug("MCP popover is still present after navigation"):(this.context.logger.debug("MCP popover missing after navigation, re-injecting"),this.injectMCPPopoverWithRetry(3))}catch(n){this.context.logger.error("Error ensuring MCP popover connection:",n)}}onPageChanged(n,r){this.context.logger.debug(`Kimi page changed: from ${r||"N/A"} to ${n}`),this.lastUrl=n,this.isSupported()?(setTimeout(()=>{this.setupUIIntegration()},1e3),setTimeout(()=>{this.checkAndRestoreSidebar()},1500)):this.context.logger.warn("Page no longer supported after navigation"),this.context.eventBus.emit("app:site-changed",{site:n,hostname:window.location.hostname})}onHostChanged(n,r){this.context.logger.debug(`Kimi host changed: from ${r||"N/A"} to ${n}`),this.isSupported()?this.setupUIIntegration():(this.context.logger.warn("Kimi adapter no longer supported on this host/page"),this.context.eventBus.emit("adapter:deactivated",{pluginName:this.name,timestamp:Date.now()}))}onToolDetected(n){this.context.logger.debug("Tools detected in Kimi adapter:",n),n.forEach(r=>{var s,d;(d=(s=this.context.stores.tool)==null?void 0:s.addDetectedTool)==null||d.call(s,r)})}};U(Uf,"instanceCount",0);let dx=Uf;class Pk{constructor(){U(this,"name","remote-config-plugin");U(this,"version","1.0.0");U(this,"type","extension");U(this,"hostnames",[/.*/]);U(this,"capabilities",["dom-manipulation"]);U(this,"context",null);U(this,"isActive",!1);U(this,"fetchInterval",null);U(this,"userProperties",{});U(this,"retryCount",0);U(this,"maxRetries",3)}async initialize(u){this.context=u,await this.initializeUserProperties(),this.setupEventListeners(),u.logger.debug("[RemoteConfigPlugin] Remote Config plugin initialized successfully")}async activate(){var u,n,r,s;if(!this.isActive){(u=this.context)==null||u.logger.debug("[RemoteConfigPlugin] Activating Remote Config plugin");try{await this.fetchConfig(!0),this.startPeriodicFetch(),this.isActive=!0,(n=this.context)==null||n.eventBus.emit("remote-config:initialized",{timestamp:Date.now(),version:this.version}),(r=this.context)==null||r.logger.debug("[RemoteConfigPlugin] Remote Config plugin activated successfully")}catch(d){throw(s=this.context)==null||s.logger.error("[RemoteConfigPlugin] Failed to activate:",d),d}}}async deactivate(){var u,n;this.isActive&&((u=this.context)==null||u.logger.debug("[RemoteConfigPlugin] Deactivating Remote Config plugin"),this.stopPeriodicFetch(),this.isActive=!1,(n=this.context)==null||n.logger.debug("[RemoteConfigPlugin] Remote Config plugin deactivated"))}async cleanup(){await this.deactivate(),this.context=null,this.userProperties={},this.retryCount=0}isSupported(){return typeof window<"u"&&typeof chrome<"u"&&!!chrome.runtime}getStatus(){return this.isActive?"active":"inactive"}async fetchConfig(u=!1){var n,r,s,d,p,v;if(this.context)try{const w=await this.getLastFetchTime(),S=Date.now();if(!u&&w&&S-w<36e5){this.context.logger.debug("[RemoteConfigPlugin] Skipping fetch due to minimum interval");return}this.context.logger.debug("[RemoteConfigPlugin] Fetching remote config via background script...");const I=(r=(n=this.context.stores).config)==null?void 0:r.call(n);I==null||I.setLoading(!0),I==null||I.setError(null);const R=await chrome.runtime.sendMessage({command:"remote-config:fetch",force:u});if(!R.success)throw new Error(R.error||"Failed to fetch remote config");await this.processConfigurationFromBackground(),await this.setLastFetchTime(S),I==null||I.updateLastFetchTime(S),this.retryCount=0,this.context.eventBus.emit("remote-config:fetched",{timestamp:S,success:!0,configCount:R.configCount||0}),this.context.logger.debug("[RemoteConfigPlugin] Remote config fetched successfully")}catch(w){this.retryCount++;const S=w instanceof Error?w.message:String(w);this.context.logger.error("[RemoteConfigPlugin] Failed to fetch config:",S);const k=(d=(s=this.context.stores).config)==null?void 0:d.call(s);if(k==null||k.setError(S),this.context.eventBus.emit("remote-config:fetch-failed",{error:S,timestamp:Date.now(),retryCount:this.retryCount}),this.retryCount<=this.maxRetries){const I=Math.pow(2,this.retryCount)*1e3;setTimeout(()=>this.fetchConfig(u),I)}throw w}finally{const w=(v=(p=this.context.stores).config)==null?void 0:v.call(p);w==null||w.setLoading(!1)}}async processConfigurationFromBackground(){if(this.context)try{const u=await chrome.runtime.sendMessage({command:"remote-config:get-config"});if(!u.success)throw new Error(u.error||"Failed to get config from background");const n=u.config||{},r=[];await this.processFeatureFlagsFromBackground(n,r),await this.processNotificationsFromBackground(n,r),await this.processUserConfigurationFromBackground(n,r),r.length>0&&this.context.eventBus.emit("remote-config:updated",{changes:r,timestamp:Date.now()})}catch(u){throw this.context.logger.error("[RemoteConfigPlugin] Failed to process configuration:",u),u}}async processFeatureFlagsFromBackground(u,n){var r,s,d,p,v,w;try{const S=u.features;if(S){const k=JSON.parse(S);if(k&&typeof k=="object"){const I=(d=(r=this.context)==null?void 0:(s=r.stores).config)==null?void 0:d.call(s);I==null||I.updateFeatureFlags(k),n.push("feature_flags"),(p=this.context)==null||p.eventBus.emit("feature-flags:updated",{flags:k,timestamp:Date.now()}),(v=this.context)==null||v.logger.debug(`[RemoteConfigPlugin] Updated ${Object.keys(k).length} feature flags`)}}}catch(S){(w=this.context)==null||w.logger.error("[RemoteConfigPlugin] Failed to process feature flags:",S)}}async processNotificationsFromBackground(u,n){var r,s,d,p,v,w,S,k,I,R;try{const A=u.active_notifications;if(A){const _=JSON.parse(A);if(Array.isArray(_)){const H=(d=(r=this.context)==null?void 0:(s=r.stores).config)==null?void 0:d.call(s);for(const re of _)if(H!=null&&H.canShowNotification(re)){(p=this.context)==null||p.eventBus.emit("notification:remote-received",{notification:re,timestamp:Date.now()});const G=(S=(v=this.context)==null?void 0:(w=v.stores).ui)==null?void 0:S.call(w);G!=null&&G.addRemoteNotification&&G.addRemoteNotification(re),H==null||H.markNotificationShown(re.id),H==null||H.addNotificationToHistory(re.id)}else(k=this.context)==null||k.eventBus.emit("notification:frequency-limited",{notificationId:re.id,reason:"Frequency limits or targeting criteria not met"});n.push("notifications"),(I=this.context)==null||I.logger.debug(`[RemoteConfigPlugin] Processed ${_.length} notifications`)}}}catch(A){(R=this.context)==null||R.logger.error("[RemoteConfigPlugin] Failed to process notifications:",A)}}async processUserConfigurationFromBackground(u,n){var r,s,d,p;try{const v=u.notifications_config;if(v){const w=JSON.parse(v);if(w&&typeof w=="object"){const S=(d=(r=this.context)==null?void 0:(s=r.stores).config)==null?void 0:d.call(s);S==null||S.updateNotificationConfig(w),n.push("notification_config")}}}catch(v){(p=this.context)==null||p.logger.error("[RemoteConfigPlugin] Failed to process user configuration:",v)}}isFeatureEnabled(u){var r,s,d;const n=(d=(r=this.context)==null?void 0:(s=r.stores).config)==null?void 0:d.call(s);return(n==null?void 0:n.isFeatureEnabled(u))||!1}getFeatureConfig(u){var r,s,d;const n=(d=(r=this.context)==null?void 0:(s=r.stores).config)==null?void 0:d.call(s);return n==null?void 0:n.getFeatureConfig(u)}async initializeUserProperties(){var u,n,r,s,d,p,v,w;try{const S=(r=(u=this.context)==null?void 0:(n=u.stores).app)==null?void 0:r.call(n),k=(p=(s=this.context)==null?void 0:(d=s.stores).config)==null?void 0:p.call(d),I={extensionVersion:chrome.runtime.getManifest().version,platform:navigator.platform,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,installDate:await this.getInstallDate(),userSegment:await this.getUserSegment()};this.userProperties=I,k==null||k.setUserProperties(I),(v=this.context)==null||v.logger.debug("[RemoteConfigPlugin] User properties initialized:",I)}catch(S){(w=this.context)==null||w.logger.error("[RemoteConfigPlugin] Failed to initialize user properties:",S)}}setupEventListeners(){this.context&&(this.context.eventBus.on("app:version-updated",async u=>{var n;(n=this.context)==null||n.logger.debug("[RemoteConfigPlugin] Extension version updated, fetching config"),await this.handleVersionUpdate(u)}),this.context.eventBus.on("user:segment-changed",u=>{var n;(n=this.context)==null||n.logger.debug("[RemoteConfigPlugin] User segment changed:",u),this.fetchConfig(!0)}))}startPeriodicFetch(){var u;this.fetchInterval=setInterval(()=>{this.fetchConfig(!1)},12*60*60*1e3),(u=this.context)==null||u.logger.debug("[RemoteConfigPlugin] Started periodic config fetching")}stopPeriodicFetch(){var u;this.fetchInterval&&(clearInterval(this.fetchInterval),this.fetchInterval=null,(u=this.context)==null||u.logger.debug("[RemoteConfigPlugin] Stopped periodic config fetching"))}async getLastFetchTime(){var n;const u=await((n=this.context)==null?void 0:n.chrome.storage.local.get(["remoteConfigLastFetch"]));return(u==null?void 0:u.remoteConfigLastFetch)||null}async setLastFetchTime(u){var n;await((n=this.context)==null?void 0:n.chrome.storage.local.set({remoteConfigLastFetch:u}))}async getInstallDate(){var n,r;const u=await((n=this.context)==null?void 0:n.chrome.storage.local.get(["installDate"]));if(u!=null&&u.installDate)return u.installDate;{const s=new Date().toISOString();return await((r=this.context)==null?void 0:r.chrome.storage.local.set({installDate:s})),s}}async getUserSegment(){var n,r,s;const u=(s=(n=this.context)==null?void 0:(r=n.stores).config)==null?void 0:s.call(r);return(u==null?void 0:u.userSegment)||"new"}async handleVersionUpdate(u){var n,r;try{const s=await chrome.runtime.sendMessage({command:"remote-config:get-config",key:"update_notifications"});if(s.success&&s.value&&JSON.parse(s.value).enabled){const p={id:`version-update-${u.newVersion}`,type:"info",title:`Updated to v${u.newVersion}`,message:"MCP SuperAssistant has been updated. Check out what's new!",actions:[{text:"View Changelog",action:"view-changelog",style:"primary"},{text:"Dismiss",action:"dismiss",style:"secondary"}],campaignId:"version-update",priority:1};(n=this.context)==null||n.eventBus.emit("notification:remote-received",{notification:p,timestamp:Date.now()})}}catch(s){(r=this.context)==null||r.logger.error("[RemoteConfigPlugin] Failed to process update notification:",s)}}}class $k{constructor(){U(this,"plugins",new Map);U(this,"adapterFactories",new Map);U(this,"activePlugin",null);U(this,"context",null);U(this,"isInitialized",!1);U(this,"initializationPromise",null);U(this,"isPerformingInitialActivation",!1)}async initialize(u){return this.initializationPromise?this.initializationPromise:(this.initializationPromise=this.performInitialization(u),this.initializationPromise)}async performInitialization(u){try{this.context=u,this.setupEventListeners(),this.isInitialized=!0,await this.registerBuiltInAdapters(),ge.emit("plugin:registry-initialized",{registeredPlugins:this.plugins.size,timestamp:Date.now()}),console.debug("[PluginRegistry] Initialized with",this.plugins.size,"plugins")}catch(n){this.isInitialized=!1,this.context=null;const r=n instanceof Error?n.message:"Unknown initialization error";throw Ri.handleError(n,{component:"plugin-registry",operation:"initialization",source:"[PluginRegistry]",details:{pluginCount:this.plugins.size,errorMessage:r}}),new Error(`Plugin registry initialization failed: ${r}`)}}setupEventListeners(){if(!this.context)return;const u=ge.on("app:site-changed",async({hostname:s})=>{if(console.debug(`[PluginRegistry] Site change event received for ${s}, initial activation flag: ${this.isPerformingInitialActivation}`),this.isPerformingInitialActivation){console.debug(`[PluginRegistry] Skipping site-change activation for ${s} (initial activation in progress)`);return}console.debug(`[PluginRegistry] Site changed to ${s}, attempting plugin activation`),await this.activatePluginForHostname(s)}),n=ge.on("plugin:activation-requested",async({pluginName:s})=>{await this.activatePlugin(s)}),r=ge.on("plugin:deactivation-requested",async({pluginName:s})=>{var d;((d=this.activePlugin)==null?void 0:d.name)===s&&await this.deactivateCurrentPlugin()});this.context.cleanupFunctions=this.context.cleanupFunctions||[],this.context.cleanupFunctions.push(u,n,r)}async register(u,n){if(!this.isInitialized||!this.context)throw new Error("Plugin registry not initialized");const r=u.name;if(this.plugins.has(r)){console.warn(`[PluginRegistry] Plugin ${r} is already registered`);return}try{this.validatePlugin(u);const s={plugin:u,config:this.createPluginConfig(u,n),registeredAt:Date.now(),lastUsedAt:void 0,status:"registered"};await u.initialize(this.context),this.plugins.set(r,s);try{await Xi.getState().registerPlugin(u,{id:s.config.id,name:s.config.name,description:s.config.description,version:s.config.version,enabled:s.config.enabled,priority:s.config.priority||0,settings:s.config.settings||{}}),console.debug(`[PluginRegistry] Also registered ${r} in AdapterStore for React integration`)}catch(d){console.warn(`[PluginRegistry] Failed to register ${r} in AdapterStore:`,d)}ge.emit("plugin:registered",{name:r,version:u.version}),console.debug(`[PluginRegistry] Registered plugin: ${r} v${u.version}`)}catch(s){const d=s instanceof Error?s.message:"Unknown registration error";throw Ri.handleError(s,{component:"plugin-registry",operation:"registration",source:"[PluginRegistry]",details:{pluginName:r,error:d}}),ge.emit("adapter:error",{name:r,error:d}),new Error(`Failed to register plugin ${r}: ${d}`)}}registerAdapterFactory(u){if(!this.isInitialized)throw new Error("Plugin registry not initialized");const n=u.name;if(this.adapterFactories.has(n)){console.warn(`[PluginRegistry] Adapter factory ${n} is already registered`);return}if(this.plugins.has(n)){console.warn(`[PluginRegistry] Plugin ${n} is already registered as instance`);return}try{this.validateAdapterFactory(u);const r={factory:u,registeredAt:Date.now()};this.adapterFactories.set(n,r),console.debug(`[PluginRegistry] Registered adapter factory: ${n} v${u.version}`)}catch(r){const s=r instanceof Error?r.message:"Unknown factory registration error";throw console.error(`[PluginRegistry] Failed to register adapter factory ${n}:`,s),new Error(`Failed to register adapter factory ${n}: ${s}`)}}async initializeAdapterFromFactory(u){const n=this.adapterFactories.get(u);if(!n||!this.context)return null;try{console.debug(`[PluginRegistry] Lazily initializing adapter: ${u}`);const r=n.factory.create();return await this.register(r,n.factory.config),this.adapterFactories.delete(u),console.debug(`[PluginRegistry] Successfully initialized adapter: ${u}`),r}catch(r){const s=r instanceof Error?r.message:"Unknown initialization error";return console.error(`[PluginRegistry] Failed to initialize adapter ${u}:`,s),Ri.handleError(r,{component:"plugin-registry",operation:"lazy-initialization",source:"[PluginRegistry]",details:{factoryName:u,error:s}}),null}}async unregister(u){var r;const n=this.plugins.get(u);if(!n){console.warn(`[PluginRegistry] Plugin ${u} is not registered`);return}try{((r=this.activePlugin)==null?void 0:r.name)===u&&await this.deactivateCurrentPlugin(),await n.plugin.cleanup(),this.plugins.delete(u),ge.emit("plugin:unregistered",{name:u}),console.debug(`[PluginRegistry] Unregistered plugin: ${u}`)}catch(s){const d=s instanceof Error?s.message:"Unknown unregistration error";throw Ri.handleError(s,{component:"plugin-registry",operation:"unregistration",source:"[PluginRegistry]",details:{pluginName:u,error:d}}),s}}async activatePluginForHostname(u,n=!1){var r;n&&(this.isPerformingInitialActivation=!0);try{console.debug(`[PluginRegistry] activatePluginForHostname called for: ${u}${n?" (initial)":""}`);const s=await this.findOrInitializePluginForHostname(u);if(!s){console.debug(`[PluginRegistry] No plugin found for hostname: ${u}`),this.activePlugin&&await this.deactivateCurrentPlugin();return}if(((r=this.activePlugin)==null?void 0:r.name)===s.name){console.debug(`[PluginRegistry] Plugin ${s.name} already active for ${u}, skipping activation`);return}console.debug(`[PluginRegistry] Activating plugin ${s.name} for hostname: ${u}`),await this.activatePlugin(s.name)}finally{n&&(this.isPerformingInitialActivation=!1)}}async activatePlugin(u){const n=this.plugins.get(u);if(!n)throw new Error(`Plugin ${u} is not registered`);if(this.activePlugin&&this.activePlugin.name===u&&n.status==="active"){console.debug(`[PluginRegistry] Plugin ${u} is already active, skipping activation`);return}try{this.activePlugin&&this.activePlugin.name!==u&&await this.deactivateCurrentPlugin();const r=n.plugin;await Vn.time(`plugin-activation-${u}`,async()=>{await r.activate()}),this.activePlugin=r,n.instance=r,n.status="active",n.lastUsedAt=Date.now();try{await Xi.getState().activateAdapter(u),console.debug(`[PluginRegistry] Also activated ${u} in AdapterStore for React integration`)}catch(s){console.warn(`[PluginRegistry] Failed to activate ${u} in AdapterStore:`,s)}ge.emit("adapter:activated",{pluginName:u,timestamp:Date.now()}),console.debug(`[PluginRegistry] Activated plugin: ${u}`)}catch(r){const s=r instanceof Error?r.message:"Unknown activation error";throw Ri.handleError(r,{component:"plugin-registry",operation:"activation",source:"[PluginRegistry]",details:{pluginName:u,error:s}}),ge.emit("plugin:activation-failed",{name:u,error:s}),new Error(`Failed to activate plugin ${u}: ${s}`)}}async deactivateCurrentPlugin(){if(!this.activePlugin)return;const u=this.activePlugin.name;try{await Vn.time(`plugin-deactivation-${u}`,async()=>{await this.activePlugin.deactivate()});try{await Xi.getState().deactivateAdapter(u,"manual-deactivation"),console.debug(`[PluginRegistry] Also deactivated ${u} in AdapterStore`)}catch(n){console.warn(`[PluginRegistry] Failed to deactivate ${u} in AdapterStore:`,n)}ge.emit("adapter:deactivated",{pluginName:u,reason:"manual-deactivation",timestamp:Date.now()}),this.activePlugin=null,console.debug(`[PluginRegistry] Deactivated plugin: ${u}`)}catch(n){const r=n instanceof Error?n.message:"Unknown deactivation error";Ri.handleError(n,{component:"plugin-registry",operation:"deactivation",source:"[PluginRegistry]",details:{pluginName:u,error:r}}),this.activePlugin=null,ge.emit("adapter:error",{name:u,error:r})}}findPluginForHostname(u){console.debug(`[PluginRegistry] findPluginForHostname called with hostname: ${u}`);let n=null,r=0;for(const[,s]of this.plugins){const{plugin:d,config:p}=s;if(!p.enabled){console.debug(`[PluginRegistry] Skipping disabled plugin: ${d.name}`);continue}if(d.name==="sidebar-plugin"){console.debug(`[PluginRegistry] Skipping sidebar plugin: ${d.name}`);continue}const v=d.type||"website-adapter";if(console.debug(`[PluginRegistry] Checking plugin: ${d.name} (type: ${v})`),v!=="website-adapter"){console.debug(`[PluginRegistry] Skipping non-website-adapter plugin: ${d.name} (type: ${v})`);continue}for(const w of d.hostnames){let S=!1,k=0;if(typeof w=="string"?(console.debug(`[PluginRegistry] Checking string hostname: ${w} against ${u}`),u.includes(w)&&(S=!0,k=w.length,console.debug(`[PluginRegistry] String match found: ${w} matches ${u}`))):(console.debug(`[PluginRegistry] Checking RegExp hostname: ${w.source} against ${u}`),w.test(u)&&(S=!0,k=w.source.length,console.debug(`[PluginRegistry] RegExp match found: ${w.source} matches ${u}`))),S){const I=k+(p.priority||0);console.debug(`[PluginRegistry] Match found for ${d.name}: score ${I} (length: ${k}, priority: ${p.priority||0})`),I>r&&(n=d,r=I,console.debug(`[PluginRegistry] New best match: ${d.name} with score ${I}`))}}}return console.debug(`[PluginRegistry] Best plugin match for ${u}:`,(n==null?void 0:n.name)||"none"),n}findFactoryForHostname(u){console.debug(`[PluginRegistry] findFactoryForHostname called with hostname: ${u}`);let n=null,r=0;for(const[,s]of this.adapterFactories){const{factory:d}=s;if(console.debug(`[PluginRegistry] Checking factory: ${d.name} (type: ${d.type}) with hostnames:`,d.hostnames),d.type!=="website-adapter"){console.debug(`[PluginRegistry] Skipping factory ${d.name} - not a website-adapter (type: ${d.type})`);continue}for(const p of d.hostnames){let v=!1,w=0;if(typeof p=="string"?(console.debug(`[PluginRegistry] Checking string hostname: ${p} against ${u}`),u.includes(p)&&(v=!0,w=p.length,console.debug(`[PluginRegistry] String match found: ${p} matches ${u}`))):(console.debug(`[PluginRegistry] Checking RegExp hostname: ${p.source} against ${u}`),p.test(u)&&(v=!0,w=p.source.length,console.debug(`[PluginRegistry] RegExp match found: ${p.source} matches ${u}`))),v){const S=d.config.priority||0,k=w+S;console.debug(`[PluginRegistry] Match found for ${d.name}: score ${k} (length: ${w}, priority: ${S})`),k>r&&(n=d,r=k,console.debug(`[PluginRegistry] New best match: ${d.name} with score ${k}`))}}}return console.debug(`[PluginRegistry] Best factory match for ${u}:`,(n==null?void 0:n.name)||"none"),n}async findOrInitializePluginForHostname(u){console.debug(`[PluginRegistry] findOrInitializePluginForHostname called with: ${u}`);let n=this.findPluginForHostname(u);if(n)return console.debug(`[PluginRegistry] Found initialized plugin for ${u}: ${n.name}`),n;const r=this.findFactoryForHostname(u);return r&&(console.debug(`[PluginRegistry] Found factory for ${u}: ${r.name}, initializing lazily`),n=await this.initializeAdapterFromFactory(r.name),n)?(console.debug(`[PluginRegistry] Successfully initialized ${n.name} for ${u}`),n):(console.debug(`[PluginRegistry] No plugin or factory found for hostname: ${u}`),null)}validatePlugin(u){const n=["name","version","hostnames","capabilities","initialize","activate","deactivate","cleanup"];for(const r of n)if(!(r in u))throw new Error(`Plugin missing required property: ${r}`);if(!Array.isArray(u.hostnames)||u.hostnames.length===0)throw new Error("Plugin must specify at least one hostname");if(!Array.isArray(u.capabilities)||u.capabilities.length===0)throw new Error("Plugin must specify at least one capability");if(u.type&&!["sidebar","website-adapter","core-ui","extension"].includes(u.type))throw new Error(`Plugin has invalid type: ${u.type}`)}validateAdapterFactory(u){const n=["name","version","type","hostnames","capabilities","create"];for(const r of n)if(!(r in u))throw new Error(`Adapter factory missing required property: ${r}`);if(!Array.isArray(u.hostnames)||u.hostnames.length===0)throw new Error("Adapter factory must specify at least one hostname");if(!Array.isArray(u.capabilities)||u.capabilities.length===0)throw new Error("Adapter factory must specify at least one capability");if(typeof u.create!="function")throw new Error("Adapter factory must have a create function")}createPluginConfig(u,n){const r={};return u.capabilities&&u.capabilities.forEach(d=>{r[d]=!0}),{id:(n==null?void 0:n.id)||u.name,name:(n==null?void 0:n.name)||u.name,description:(n==null?void 0:n.description)||`Configuration for ${u.name}`,version:(n==null?void 0:n.version)||u.version,enabled:(n==null?void 0:n.enabled)!==void 0?n.enabled:!0,priority:(n==null?void 0:n.priority)||0,settings:(n==null?void 0:n.settings)||{},customSelectors:(n==null?void 0:n.customSelectors)||{},features:{...r,...(n==null?void 0:n.features)||{}}}}async registerBuiltInAdapters(){try{const u=new Pk;await this.register(u,{id:"remote-config-plugin",name:"Remote Config Plugin",description:"Firebase Remote Config integration for feature flags and notifications",version:"1.0.0",enabled:!0,priority:2,settings:{logLevel:"info",autoActivate:!0}});const n=new Uk;await this.register(n,{id:"sidebar-plugin",name:"Sidebar Plugin",description:"Universal sidebar management plugin that auto-shows on page load",version:"1.0.0",enabled:!0,priority:1,settings:{logLevel:"info",autoShow:!0,showDelay:1e3}}),this.registerAdapterFactory({name:"gemini-adapter",version:"1.0.0",type:"website-adapter",hostnames:["gemini.google.com"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new F0,config:{id:"gemini-adapter",name:"Gemini Adapter",description:"Specialized adapter for Google Gemini with chat input, form submission, and file attachment support",version:"1.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"github-copilot-adapter",version:"2.0.0",type:"website-adapter",hostnames:["github.com"],capabilities:["text-insertion","form-submission"],create:()=>new q0,config:{id:"github-copilot-adapter",name:"GitHub Copilot Adapter",description:"Specialized adapter for GitHub Copilot with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"chatgpt-adapter",version:"2.0.0",type:"website-adapter",hostnames:["chatgpt.com"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new ux,config:{id:"chatgpt-adapter",name:"ChatGPT Adapter",description:"Specialized adapter for OpenAI ChatGPT with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"deepseek-adapter",version:"2.0.0",type:"website-adapter",hostnames:["chat.deepseek.com"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new G0,config:{id:"deepseek-adapter",name:"DeepSeek Adapter",description:"Specialized adapter for DeepSeek Chat with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"grok-adapter",version:"2.0.0",type:"website-adapter",hostnames:["grok.com",/x\.com.*grok/,/twitter\.com.*grok/],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new V0,config:{id:"grok-adapter",name:"Grok Adapter",description:"Specialized adapter for Grok (X.com/Grok.com) with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"perplexity-adapter",version:"2.0.0",type:"website-adapter",hostnames:["perplexity.ai"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new Y0,config:{id:"perplexity-adapter",name:"Perplexity Adapter",description:"Specialized adapter for Perplexity AI with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"aistudio-adapter",version:"2.0.0",type:"website-adapter",hostnames:["aistudio.google.com"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new X0,config:{id:"aistudio-adapter",name:"AI Studio Adapter",description:"Specialized adapter for Google AI Studio with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"openrouter-adapter",version:"2.0.0",type:"website-adapter",hostnames:["openrouter.ai"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new Z0,config:{id:"openrouter-adapter",name:"OpenRouter Adapter",description:"Specialized adapter for OpenRouter with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"t3chat-adapter",version:"2.0.0",type:"website-adapter",hostnames:["t3.chat"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new Q0,config:{id:"t3chat-adapter",name:"T3Chat Adapter",description:"Specialized adapter for T3 Chat with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"mistralchat-adapter",version:"2.0.0",type:"website-adapter",hostnames:["chat.mistral.ai"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new K0,config:{id:"mistralchat-adapter",name:"Mistral Adapter",description:"Specialized adapter for Mistral chat with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),this.registerAdapterFactory({name:"kimi-adapter",version:"2.0.0",type:"website-adapter",hostnames:["kimi.com"],capabilities:["text-insertion","form-submission","file-attachment"],create:()=>new dx,config:{id:"kimi-adapter",name:"Kimi Adapter",description:"Specialized adapter for Kimi AI with chat input, form submission, and file attachment support",version:"2.0.0",enabled:!0,priority:5,settings:{logLevel:"info",urlCheckInterval:1e3}}}),console.debug(`[PluginRegistry] Successfully registered SidebarPlugin (initialized) and ${this.adapterFactories.size} adapter factories (lazy)`)}catch(u){const n=u instanceof Error?u.message:"Unknown registration error";throw console.error("[PluginRegistry] Failed to register built-in adapters:",n),new Error(`Built-in adapter registration failed: ${n}`)}}getActivePlugin(){return this.activePlugin}getRegisteredPlugins(){return Array.from(this.plugins.entries()).map(([u,n])=>({name:u,plugin:n.plugin,config:n.config}))}getRegisteredFactories(){return Array.from(this.adapterFactories.entries()).map(([u,n])=>({name:u,factory:n.factory}))}getPluginByName(u){const n=this.plugins.get(u);return n?n.plugin:null}isPluginRegistered(u){return this.plugins.has(u)}isFactoryRegistered(u){return this.adapterFactories.has(u)}updatePluginConfig(u,n){const r=this.plugins.get(u);if(!r)throw new Error(`Plugin ${u} is not registered`);const s={...r.config,...n};r.config=s,ge.emit("plugin:config-updated",{name:u,config:s,timestamp:Date.now()})}setInitialActivationFlag(u){console.debug(`[PluginRegistry] setInitialActivationFlag called with: ${u}, current flag: ${this.isPerformingInitialActivation}`),this.isPerformingInitialActivation=u,console.debug(`[PluginRegistry] Initial activation flag set to: ${u}`)}getDebugInfo(){var u;return{isInitialized:this.isInitialized,activePlugin:((u=this.activePlugin)==null?void 0:u.name)||null,registeredPluginsCount:this.plugins.size,registeredFactoriesCount:this.adapterFactories.size,plugins:Array.from(this.plugins.keys()),factories:Array.from(this.adapterFactories.keys())}}async cleanup(){var u;try{await this.deactivateCurrentPlugin();for(const[n,r]of this.plugins.entries())try{await r.plugin.cleanup(),console.debug(`[PluginRegistry] Cleaned up plugin: ${n}`)}catch(s){const d=s instanceof Error?s.message:"Unknown cleanup error";console.error(`[PluginRegistry] Failed to cleanup plugin ${n}:`,d)}if(this.plugins.clear(),this.adapterFactories.clear(),(u=this.context)!=null&&u.cleanupFunctions){for(const n of this.context.cleanupFunctions)try{n()}catch(r){console.error("[PluginRegistry] Error during context cleanup:",r)}this.context.cleanupFunctions=[]}this.isInitialized=!1,this.activePlugin=null,this.context=null,this.initializationPromise=null,console.debug("[PluginRegistry] Cleanup completed")}catch(n){const r=n instanceof Error?n.message:"Unknown cleanup error";throw console.error("[PluginRegistry] Cleanup failed:",r),n}}}const xv=new $k;async function _k(){const h={eventBus:ge,stores:{app:ar,connection:Oa,tool:Yi,ui:za,adapter:Xi,config:hf},utils:{createElement:(u,n,r)=>{const s=document.createElement(u);return n&&Object.entries(n).forEach(([d,p])=>{s.setAttribute(d,String(p))}),r&&r.forEach(d=>{s.appendChild(typeof d=="string"?document.createTextNode(d):d)}),s},waitForElement:async(u,n=5e3,r=document)=>new Promise(s=>{const d=r.querySelector(u);if(d){s(d);return}const p=new MutationObserver(()=>{const v=r.querySelector(u);v&&(p.disconnect(),s(v))});p.observe(r,{childList:!0,subtree:!0}),setTimeout(()=>{p.disconnect(),s(null)},n)}),injectCSS:(u,n)=>{const r=document.createElement("style");return r.textContent=u,n&&(r.id=n),document.head.appendChild(r),r},observeChanges:(u,n,r)=>{const s=new MutationObserver(n);return s.observe(u,r),s},debounce:(u,n)=>{let r;return(...s)=>{clearTimeout(r),r=setTimeout(()=>u(...s),n)}},throttle:(u,n)=>{let r=0;return(...s)=>{const d=Date.now();if(d-r>=n)return r=d,u(...s)}},getUniqueId:(u="id")=>`${u}-${Date.now()}-${Math.random().toString(36).substring(2,11)}`},chrome:typeof chrome<"u"?{runtime:chrome.runtime,storage:chrome.storage,tabs:chrome.tabs}:{runtime:{},storage:{}},logger:{debug:(...u)=>console.debug("[Plugin]",...u),info:(...u)=>console.debug("[Plugin]",...u),warn:(...u)=>console.warn("[Plugin]",...u),error:(...u)=>console.error("[Plugin]",...u)},cleanupFunctions:[]};await xv.initialize(h)}const op=Object.freeze(Object.defineProperty({__proto__:null,initializePluginRegistry:_k,pluginRegistry:xv},Symbol.toStringTag,{value:"Module"}));function jk(h,u={},n=[]){const r=document.createElement(h);for(const s in u)Object.prototype.hasOwnProperty.call(u,s)&&r.setAttribute(s,u[s]);return n.forEach(s=>{typeof s=="string"?r.appendChild(document.createTextNode(s)):r.appendChild(s)}),console.debug(`[Utils.createElement] Created <${h}> element.`),r}function Lk(h,u=5e3,n=document){return console.debug(`[Utils.waitForElement] Waiting for selector: "${h}" with timeout ${u}ms.`),new Promise(r=>{const s=Date.now(),d=new MutationObserver((v,w)=>{const S=n.querySelector(h);if(S){w.disconnect(),console.debug(`[Utils.waitForElement] Element "${h}" found.`),r(S);return}Date.now()-s>u&&(w.disconnect(),console.warn(`[Utils.waitForElement] Timeout waiting for element "${h}".`),r(null))}),p=n.querySelector(h);if(p){console.debug(`[Utils.waitForElement] Element "${h}" already exists.`),r(p);return}d.observe(n===document?document.documentElement:n,{childList:!0,subtree:!0})})}function Bk(h,u){const n=document.createElement("style");return u&&(n.id=u),n.textContent=h,document.head.appendChild(n),console.debug(`[Utils.injectCSS] CSS injected${u?" with ID: "+u:""}.`),n}function Hk(h,u,n){const r=new MutationObserver(u);return r.observe(h,n),console.debug("[Utils.observeChanges] Mutation observer started."),r}function Fk(h,u){let n=null;return function(...r){n&&clearTimeout(n),n=setTimeout(()=>{h.apply(this,r)},u)}}function qk(h,u){let n=0,r=null;return function(...s){const d=Date.now(),p=u-(d-n);p<=0?(r&&(clearTimeout(r),r=null),n=d,h.apply(this,s)):r||(r=setTimeout(()=>{n=Date.now(),r=null,h.apply(this,s)},p))}}function Gk(h="id_"){const u=()=>((1+Math.random())*65536|0).toString(16).substring(1),n=`${u()}${u()}-${u()}-${u()}-${u()}-${u()}${u()}${u()}`,r=h+n;return console.debug(`[Utils.getUniqueId] Generated ID: ${r}`),r}const Vk={createElement:jk,waitForElement:Lk,injectCSS:Bk,observeChanges:Hk,debounce:Fk,throttle:qk,getUniqueId:Gk};function Yk(h){return{eventBus:ge,stores:{app:ar.getState,connection:Oa.getState,tool:Yi.getState,ui:za.getState,adapter:Xi.getState,config:hf.getState},utils:Vk,chrome:{runtime:chrome.runtime,storage:chrome.storage,tabs:chrome.tabs},logger:{debug:(...n)=>console.debug(`[${h}]`,...n),info:(...n)=>console.info(`[${h}]`,...n),warn:(...n)=>console.warn(`[${h}]`,...n),error:(...n)=>console.error(`[${h}]`,...n)},getConfig:()=>{var r;return(r=Xi.getState().registeredPlugins[h])==null?void 0:r.config.settings}}}var Xk={};async function Xw(){try{const{pluginRegistry:h}=await Promise.resolve().then(()=>op);await h.cleanup(),console.debug("[Plugin System] Cleaned up successfully")}catch(h){console.error("[Plugin System] Failed to cleanup:",h)}}Xk.NODE_ENV==="development"&&(window.__pluginSystem={async getRegistry(){const{pluginRegistry:h}=await Promise.resolve().then(()=>op);return h},cleanup:Xw,async initialize(){const{initializePluginRegistry:h}=await Promise.resolve().then(()=>op);return h()}});var Zk={};class Qk{constructor(u){this.prefix=u}log(u,...n){M(`${this.prefix} ${u}`),n.length>0&&console.debug(...n)}warn(u,...n){console.warn(`${this.prefix} ${u}`,...n)}error(u,...n){console.error(`${this.prefix} ${u}`,...n)}}const jt=new Qk("[MainInitializer]");let Fs=!1,fx=!1,Sv=0;async function Kk(){jt.log("Initializing core services..."),Zk.NODE_ENV==="development"&&(jt.log("Development mode enabled."),typeof window<"u"&&(window._appDebug={eventBus:ge,stores:{app:ar,connection:Oa,tool:Yi,ui:za,adapter:Xi},services:{globalErrorHandler:Ri,performanceMonitor:Vn,circuitBreaker:pf,contextBridge:fi},getStats:()=>({performance:Vn.getStats(),errors:Ri.getErrorStats(),circuitBreaker:pf.getStats()}),clearData:()=>{Vn.clear(),Ri.clearErrorReports()}},jt.log("Debug utilities exposed on window._appDebug"))),await D1(),jt.log("Event bus initialized."),Ri.initialize(ge,pf),jt.log("GlobalErrorHandler initialized."),Vn.initialize(ge),jt.log("PerformanceMonitor initialized."),pf.initialize({eventBus:ge}),jt.log("CircuitBreaker initialized."),fi.initialize(),jt.log("ContextBridge initialized."),V1(),jt.log("GlobalEventHandlers initialized."),await Vn.time("store-initialization",async()=>{await oT()}),jt.log("All stores initialized.")}async function Jk(){jt.log("Initializing plugin system..."),await Vn.time("plugin-system-initialization",async()=>{const h=Yk("system");await xv.initialize(h),jt.log("Plugin system initialized successfully.")})}async function Wk(){jt.log("Activating sidebar plugin...");try{await Vn.time("sidebar-plugin-activation",async()=>{await xv.activatePlugin("sidebar-plugin"),jt.log("Sidebar plugin activated successfully.")})}catch(h){jt.error("Failed to activate sidebar plugin:",h)}}async function eM(){if(fx){jt.warn("Application state already initialized, skipping.");return}jt.log("Initializing application state..."),await Vn.time("app-state-initialization",async()=>{if(ar.getState().isInitialized||(await ar.getState().initialize(),jt.log("AppStore initialized (settings loaded, etc.).")),typeof window<"u"&&window.location&&window.location.hostname){const n=window.location.hostname,r=window.location.href,{pluginRegistry:s}=await Promise.resolve().then(()=>op);s.setInitialActivationFlag(!0);try{ar.getState().setCurrentSite({site:r,host:n}),jt.log(`Current site set to: ${n}`),jt.log(`Attempting to auto-activate adapter for hostname: ${n}`),await s.activatePluginForHostname(n,!0),jt.log(`Adapter auto-activation completed for hostname: ${n}`)}finally{s.setInitialActivationFlag(!1)}}const u=Oa.getState().serverConfig;u&&u.uri&&(jt.log("Server configuration found, connection will be handled by background script and MCP client"),await pf.execute(async()=>{jt.log("Deferring connection management to background script")},"config-check"))}),fx=!0,jt.log("Application state initialization completed.")}async function Zw(){if(Fs){jt.warn("Application already initialized.");return}Sv=performance.now(),jt.log("Application initialization started...");try{Vn.mark("app-init-start"),await Kk(),Vn.mark("core-services-initialized"),await Jk(),Vn.mark("plugin-system-initialized"),await Wk(),Vn.mark("sidebar-plugin-activated"),await eM(),Vn.mark("app-state-initialized"),Vn.mark("app-init-complete");const h=performance.now()-Sv;Vn.measure("total-initialization","app-init-start","app-init-complete"),Fs=!0,jt.log(`Application initialization completed successfully in ${h.toFixed(2)}ms`),ge.emit("app:initialized",{version:"1.0.0",timestamp:Date.now(),initializationTime:h})}catch(h){const u=performance.now()-Sv;throw jt.error(`Application initialization failed after ${u.toFixed(2)}ms:`,h),Ri.handleError(h instanceof Error?h:new Error(String(h)),{component:"main-initializer",operation:"application-initialization",metadata:{initializationTime:u}},"critical"),ge.emit("app:initialization-failed",{error:h instanceof Error?h:new Error(String(h)),timestamp:Date.now(),initializationTime:u}),h}}async function wv(){if(!Fs){jt.warn("Application not initialized, nothing to clean up.");return}jt.log("Application cleanup started...");try{Vn.mark("app-cleanup-start"),await Xw(),jt.log("Plugin system cleaned up."),fi.cleanup(),pf.cleanup(),Vn.cleanup(),Ri.cleanup(),jt.log("Core services cleaned up."),Y1(),jt.log("Global event handlers cleaned up."),Vn.mark("app-cleanup-complete"),Fs=!1,fx=!1,jt.log("Application cleanup completed."),ge.emit("app:shutdown",{reason:"Application cleanup initiated",timestamp:Date.now()})}catch(h){jt.error("Error during application cleanup:",h),Ri.handleError(h instanceof Error?h:new Error(String(h)),{component:"main-initializer",operation:"application-cleanup"},"high")}}function tM(){return{isInitialized:Fs,initializationTime:Fs?performance.now()-Sv:void 0,errorCount:Ri.getErrorStats().totalErrors,performanceStats:Vn.getStats()}}async function nM(){jt.warn("Force re-initialization requested..."),Fs&&await wv(),Fs=!1,await Zw()}typeof window<"u"&&window.addEventListener("beforeunload",()=>{wv().catch(h=>{console.error("Error during beforeunload cleanup:",h)})}),typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onSuspend&&chrome.runtime.onSuspend.addListener(()=>{wv().catch(h=>{console.error("Error during extension suspend cleanup:",h)})});const aM={getStatus:tM,forceReinit:nM,isInitialized:()=>Fs},iM={knownLanguages:["xml","html","python","javascript","js","ruby","bash","shell","css","json","java","c","cpp","csharp","php","typescript","ts","go","rust","swift","kotlin","sql"],handleLanguageTags:!0,maxLinesAfterLangTag:3,targetSelectors:["pre","code"],enableDirectMonitoring:!0,streamingContainerSelectors:[".pre",".code"],function_result_selector:[],updateThrottle:25,streamingMonitoringInterval:100,largeContentThreshold:Number.MAX_SAFE_INTEGER,progressiveUpdateInterval:250,maxContentPreviewLength:Number.MAX_SAFE_INTEGER,usePositionFixed:!1,stabilizeTimeout:500,debug:!0,useHostTheme:!0,enableStalledStreamDetection:!0,stalledStreamTimeout:3e3,stalledStreamCheckInterval:1e3},oM=[{urlPattern:"aistudio",config:{targetSelectors:["pre"],streamingContainerSelectors:[".pre"],function_result_selector:["div.user-prompt-container"]}},{urlPattern:"perplexity",config:{targetSelectors:["pre"],streamingContainerSelectors:[".pre"],function_result_selector:["div.group\\/query",".group\\/query",'div[class*="group/query"]']}},{urlPattern:"gemini",config:{targetSelectors:["code-block"],streamingContainerSelectors:[".code-block"],function_result_selector:["div.query-content"]}},{urlPattern:"grok.com",config:{targetSelectors:["code"],streamingContainerSelectors:["code"],function_result_selector:["div.relative.items-end"]}},{urlPattern:"openrouter.ai",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:["div.min-w-0.w-full.overflow-hidden"]}},{urlPattern:"chatgpt.com",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:['div[data-message-author-role="user"]']}},{urlPattern:"chat.openai.com",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:['div[data-message-author-role="user"]']}},{urlPattern:"kagi.com",config:{targetSelectors:[".content pre",".codehilite","pre"],streamingContainerSelectors:["pre",".content"],function_result_selector:['div[data-author="user"]']}},{urlPattern:"chat.deepseek.com",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:["div._9663006"]}},{urlPattern:"t3.chat",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:['div[aria-label="Your message"]']}},{urlPattern:"chat.mistral.ai",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:['div[data-message-part-type="answer"]',".select-text"]}},{urlPattern:"github.com/copilot",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:[".UserMessage-module__container--cAvvK",".ChatMessage-module__userMessage--xvIFp"]}},{urlPattern:"kimi.com",config:{targetSelectors:["pre"],streamingContainerSelectors:["pre"],function_result_selector:['div[class*="user-content"]']}}];function rM(){const h=window.location.href;let u={...iM};for(const n of oM){const{urlPattern:r,config:s}=n;if(typeof r=="string"?h.includes(r):r.test(h)){u={...u,...s};break}}return u}const De=rM(),Qw=h=>{if(!De.handleLanguageTags)return{tag:null,content:h};const u=[/^```(\w+)[\s:]?\s*\n([\s\S]+)$/,/^\[(\w+)\]\s*\n([\s\S]+)$/];for(const d of u){const p=h.match(d);if(p){const v=p[1].toLowerCase();if(De.knownLanguages.includes(v))return{tag:v,content:p[2]}}}const n=[/^\/\/\s*language:\s*(\w+)\s*\n([\s\S]+)$/i,/^#\s*language:\s*(\w+)\s*\n([\s\S]+)$/i,/^<!--\s*language:\s*(\w+)\s*-->\s*\n([\s\S]+)$/i];for(const d of n){const p=h.match(d);if(p){const v=p[1].toLowerCase();if(De.knownLanguages.includes(v))return{tag:v,content:p[2]}}}const r=h.split(`
`),s=Math.min(De.maxLinesAfterLangTag,r.length);for(let d=0;d<s;d++){const p=r[d].trim().toLowerCase();if(d===0&&p.startsWith("#!")){if(p.includes("python"))return{tag:"python",content:h};if(p.includes("node"))return{tag:"javascript",content:h};if(p.includes("bash")||p.includes("/sh"))return{tag:"bash",content:h};if(p.includes("ruby"))return{tag:"ruby",content:h}}if(p.includes("<?php"))return{tag:"php",content:h};if(p.includes("<!doctype html>")||p.includes("<html"))return{tag:"html",content:h};if(p.match(/^(import|from)\s+[\w.]+\s+import/))return{tag:"python",content:h};if(p.match(/^(const|let|var)\s+\w+\s*=/))return{tag:"javascript",content:h};if(p.match(/^function\s+\w+\(/))return{tag:"javascript",content:h};if(p.match(/^package\s+\w+;?/))return{tag:"java",content:h};if(p.match(/^using\s+[\w.]+;/))return{tag:"csharp",content:h};if(p.match(/^#include\s+[<"][\w.]+[>"]/))return{tag:"c",content:h}}return{tag:null,content:h}},sM=h=>{var d;const u=((d=h.textContent)==null?void 0:d.trim())||"",n={hasFunctionCalls:!1,isComplete:!1,hasInvoke:!1,hasParameters:!1,hasClosingTags:!1,languageTag:null,detectedBlockType:null,partialTagDetected:!1};if(!u.includes("<")&&!u.includes("<function_calls>")&&!u.includes("<invoke")&&!u.includes("</invoke>")&&!u.includes("<parameter"))return n;const r=Qw(u);r.tag&&(n.languageTag=r.tag);const s=r.content||u;if(s.includes("<function_calls>")||s.includes("<invoke")){if(n.hasFunctionCalls=!0,n.detectedBlockType="antml",n.hasInvoke=s.includes("<invoke"),n.hasParameters=s.includes("<parameter"),n.hasInvoke){const w=s.match(/<invoke name="([^"]+)"(?:\s+call_id="([^"]+)")?>/);w&&w[1]&&(n.invokeName=w[1])}const p=s.includes("<function_calls>"),v=s.includes("</function_calls>");n.hasClosingTags=p&&v,n.isComplete=n.hasClosingTags}return n},Kw=new Map,xf=new Map,lM=(h,u=null)=>{const n=[],r=/<parameter\s+(?:name="([^"]+)"[^>]*|[^>]*name="([^"]+)")(?:>|$)/g,s=u?Kw.get(u)||{}:{};let d;const p={};for(;(d=r.exec(h))!==null;){const v=d[1]||d[2],w=d[0],S=d.index+w.length;if(!w.endsWith(">")){const _=h.substring(S);p[v]=_,n.push({name:v,value:_,isComplete:!1,isNew:!s[v]||s[v]!==_,isStreaming:!0,originalContent:_,isIncompleteTag:!0});continue}let I=S,R=1,A=!1;for(let _=S;_<h.length;_++)if(_+10<h.length&&h.substring(_,_+10)==="<parameter")(h.charAt(_+10)===" "||h.charAt(_+10)===">")&&R++;else if(_+12<h.length&&h.substring(_,_+12)==="</parameter>"){if(R--,R===0){I=_,A=!0;break}_+=11}if(A){const _=h.substring(S,I);u&&_.length>De.largeContentThreshold&&xf.set(`${u}-${v}`,_.length),n.push({name:v,value:_,isComplete:!0})}else{const _=h.substring(S);if(p[v]=_,u){const H=`${u}-${v}`,re=xf.get(H)||0,G=_.length;xf.set(H,G);const ue=G>De.largeContentThreshold,ye=G>re,ce=!s[v]||s[v]!==_;n.push({name:v,value:_,isComplete:!1,isNew:ce||ye,isStreaming:!0,originalContent:_,isLargeContent:ue,contentLength:G,truncated:ue})}else n.push({name:v,value:_,isComplete:!1,isNew:!s[v]||s[v]!==_,isStreaming:!0,originalContent:_})}}if(u&&h.includes("<parameter")){const v=/<parameter(?:\s+(?:name="([^"]*)")?[^>]*)?$/,w=h.match(v);if(w){const I=w[1]||"unnamed_parameter",R=w[0];p[`__partial_tag_${Date.now()}`]=R,I!=="unnamed_parameter"&&(n.find(_=>_.name===I)||n.push({name:I,value:"(streaming...)",isComplete:!1,isStreaming:!0,isIncompleteTag:!0}))}const S=/<parameter\s+(?:name="([^"]+)"[^>]*|[^>]*name="([^"]+)")>([^<]*?)$/i,k=h.match(S);if(k){const I=k[1]||k[2],R=k[3]||"";I&&R&&(p[`__streaming_content_${I}`]=R,n.find(_=>_.name===I)||n.push({name:I,value:R,isComplete:!1,isStreaming:!0,originalContent:R}))}}return u&&Kw.set(u,p),n},Jw="mcp_url_based_function_history",Ww=(h,u,n,r)=>{const s=window.location.href,d={functionName:h,callId:u,contentSignature:r,executedAt:Date.now(),params:n},p=eE(h,u,r),v=Ev();v[s]||(v[s]={}),v[s][p]=d;try{let S=0,k=!1;for(;!k&&S<3;)try{localStorage.setItem(Jw,JSON.stringify(v)),k=!0}catch{S++,S<3&&console.warn(`Storage write failed, retrying (${S}/3)`)}k||console.error("Failed to store executed function after multiple attempts")}catch(w){console.error("Failed to store executed function:",w)}return d},eE=(h,u,n)=>`${h}:${u}:${n}`,Ev=()=>{try{const h=localStorage.getItem(Jw);return h?JSON.parse(h):{}}catch(h){return console.error("Failed to retrieve URL-based function history:",h),{}}},cM=()=>{const h=window.location.href,u=Ev();return u[h]?Object.values(u[h]):[]},Cv=(h,u,n)=>{const r=window.location.href,s=Ev();if(!s[r])return null;const d=eE(h,u,n);return s[r][d]||null},uM=(h,u)=>{const n=window.location.href,r=Ev();if(!r[n])return null;const s=Object.entries(r[n]).find(([d,p])=>p.callId===h&&p.contentSignature===u);return s?s[1]:null},tE=(h,u)=>{try{const n={};Object.keys(u).sort().forEach(d=>{n[d]=u[d]});const r=JSON.stringify({name:h,params:n});let s=0;for(let d=0;d<r.length;d++){const p=r.charCodeAt(d);s=(s<<5)-s+p,s=s&s}return s.toString(16)}catch(n){return console.error("Failed to generate content signature:",n),Date.now().toString(16)}},dM=h=>{try{return new Date(h).toLocaleString()}catch{return"Unknown date"}},nE=(h,u,n)=>{if(h.querySelectorAll(".function-history-panel").forEach(d=>d.remove()),h.classList.contains("function-buttons")){const d=h.closest(".function-block");d&&d.querySelectorAll(".function-history-panel").forEach(v=>v.remove())}const s=document.createElement("div");if(s.className="function-history-panel",s.style.display="none",h.classList.contains("function-buttons")){const d=h.closest(".function-block");d?d.appendChild(s):h.appendChild(s)}else h.appendChild(s);return s},gx=(h,u,n)=>{h.innerHTML="";const r=document.createElement("div");r.className="function-history-header",r.textContent="Execution History",h.appendChild(r);const s=document.createElement("div");s.className="function-execution-info";const d=dM(u.executedAt);s.innerHTML=`
    <div>Function: <strong>${u.functionName}</strong></div>
    <div>Last executed: <strong>${d}</strong></div>
  `,h.appendChild(s);const p=document.createElement("button");p.className="function-reexecute-button",p.textContent="Re-execute",p.onclick=async()=>{var S,k;let v=(S=h.parentElement)==null?void 0:S.querySelector(`.function-results-panel[data-call-id="${u.callId}"]`);v&&(v.style.overflow="auto",v.style.maxHeight="200px"),v?(v.style.display="block",v.innerHTML=""):(v=document.createElement("div"),v.className="function-results-panel",v.setAttribute("data-call-id",u.callId),v.setAttribute("data-function-name",u.functionName),v.style.display="block",(k=h.parentElement)==null||k.appendChild(v));const w=document.createElement("div");w.className="function-results-loading",w.textContent="Executing...",v.appendChild(w);try{if(!n){Yr(v,w,!1,"Error: mcpClient not found");return}if(!n.isReady||!n.isReady()){Yr(v,w,!1,"Error: MCP client not ready");return}console.debug(`Re-executing function ${u.functionName} with arguments:`,u.params);try{const I=await n.callTool(u.functionName,u.params);Yr(v,w,!0,I);const R=Ww(u.functionName,u.callId,u.params,u.contentSignature);gx(h,R,n)}catch(I){let R=I instanceof Error?I.message:String(I);R.includes("not connected")||R.includes("connection")?R="Connection lost. Please check your MCP server connection.":R.includes("timeout")?R="Request timed out. Please try again.":(R.includes("server unavailable")||R.includes("SERVER_UNAVAILABLE"))&&(R="MCP server is unavailable. Please check the server status."),Yr(v,w,!1,R)}}catch(I){const R=I instanceof Error?I.message:String(I);console.error("Re-execute error:",I),Yr(v,w,!1,`Unexpected error: ${R}`)}},h.appendChild(p),h.style.display="block"},fM=(h,u,n,r)=>{const s=cM(),d=Cv(u,n,r),p=d?[d]:[];if(d||s.filter(w=>w.callId===n&&w.contentSignature===r).forEach(w=>p.push(w)),p.length>0){const v=p.sort((k,I)=>I.executedAt-k.executedAt)[0],w=nE(h),S=window.mcpClient;gx(w,v,S),console.debug(`Showing only the latest execution from ${p.length} matches for function ${u}`)}};function Tv(){var h,u;try{const n=window.pluginRegistry;if(n&&typeof n.getActivePlugin=="function"){const s=n.getActivePlugin();if(s&&s.capabilities&&s.capabilities.length>0)return console.debug("[AdapterAccess] Using active plugin adapter:",s.name),s}const r=window.mcpAdapter||((h=window.getCurrentAdapter)==null?void 0:h.call(window));return r?(console.debug("[AdapterAccess] Using legacy adapter access"),r):(console.warn("[AdapterAccess] No adapter found through plugin registry or legacy access"),null)}catch(n){console.error("[AdapterAccess] Error getting current adapter:",n);try{const r=window.mcpAdapter||((u=window.getCurrentAdapter)==null?void 0:u.call(window));if(r)return console.debug("[AdapterAccess] Using legacy adapter as fallback"),r}catch(r){console.error("[AdapterAccess] Fallback adapter access also failed:",r)}return null}}function kv(h){var u;try{const n=Tv();if(!n)return!1;if(n.capabilities&&Array.isArray(n.capabilities))return n.capabilities.includes(h);switch(h){case"text-insertion":return typeof n.insertText=="function";case"form-submission":return typeof n.submitForm=="function";case"file-attachment":return typeof n.attachFile=="function"&&((u=n.supportsFileUpload)==null?void 0:u.call(n))===!0;case"dom-manipulation":return typeof n.insertText=="function";default:return!1}}catch(n){return console.error("[AdapterAccess] Error checking capability:",n),!1}}const Mv=39e3,aE=["perplexity"],iE=window.location.hostname.toLowerCase().replace(/^www\./i,"").split(".")[0],gM=/<invoke name="([^"]+)"(?:\s+call_id="([^"]+)")?>/,oE=/<parameter\s+name="([^"]+)"\s*(?:type="([^"]+)")?\s*>(.*?)<\/parameter>/gs,rE=/<!\[CDATA\[([\s\S]*?)\]\]>/,hM=/^-?\d+(\.\d+)?$/,pM=/^(true|false)$/i,Sa={CODE:'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z" fill="currentColor"/></svg>',PLAY:'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7z" fill="currentColor"/></svg>',INSERT:'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 12l-7-7v4H2v6h7v4l7-7z" fill="currentColor"/></svg>',ATTACH:'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="2" width="16" height="20" rx="2" fill="none" stroke="currentColor" stroke-width="2"/><path d="M8 6h8M8 10h8M8 14h4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>',SPINNER:'<svg width="16" height="16" viewBox="0 0 50 50"><circle cx="25" cy="25" r="20" fill="none" stroke="currentColor" stroke-width="5" stroke-linecap="round" stroke-dasharray="31.4 31.4" transform="rotate(-90 25 25)"><animateTransform attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.8s" repeatCount="indefinite"/></circle></svg>'};class rp{static get(u,n){const r=`${u}:${n||""}`,s=this.pools.get(r)||[];if(s.length>0){const p=s.pop();return p.innerHTML="",p.className=n||"",p.removeAttribute("style"),p}const d=document.createElement(u);return n&&(d.className=n),d}static release(u){const n=`${u.tagName.toLowerCase()}:${u.className}`,r=this.pools.get(n)||[];r.length<10&&(r.push(u),this.pools.set(n,r))}}U(rp,"pools",new Map);const qa=(h,u={})=>{const n=rp.get(h,u.className);return u.textContent&&(n.textContent=u.textContent),u.innerHTML&&(n.innerHTML=u.innerHTML),u.styles&&Object.assign(n.style,u.styles),u.attributes&&Object.entries(u.attributes).forEach(([r,s])=>{n.setAttribute(r,s)}),n},mM=(h,u)=>{var k;if(h.querySelector(".raw-toggle"))return;const n=h.getAttribute("data-block-id");if(n){const I=document.querySelector(`pre[data-block-id="${n}"]`);I&&(u=((k=I.textContent)==null?void 0:k.trim())||u)}const r=document.createDocumentFragment(),s=qa("div",{className:"function-results-panel xml-results-panel",styles:{display:"none",marginTop:"12px",marginBottom:"4px"}}),d=qa("pre",{textContent:u,styles:{whiteSpace:"pre-wrap",margin:"0",padding:"12px",fontFamily:"inherit",fontSize:"13px",lineHeight:"1.5"}}),p=qa("button",{className:"raw-toggle",innerHTML:`${Sa.CODE}<span>Show Raw XML</span>`,styles:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"}}),v=p.querySelector("span");let w=!1;p.onclick=()=>{w=!w,requestAnimationFrame(()=>{s.style.display=w?"block":"none",v.textContent=w?"Hide Raw XML":"Show Raw XML"})},s.appendChild(d),r.appendChild(p);const S=h.classList.contains("function-buttons")&&h.closest(".function-block")||h;h.appendChild(r),S.appendChild(s)},bM=(h,u)=>{if(h.querySelector(".execute-button"))return;const n=vM(u),r=hx(u);if(!n)return;const s=gM.exec(u),d=(s==null?void 0:s[2])||`call-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,p=tE(n,r),v=document.createDocumentFragment(),w=qa("button",{className:"execute-button",innerHTML:`${Sa.PLAY}<span>Run</span>`,styles:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",marginLeft:"0"}}),S=qa("div",{className:"function-results-panel",styles:{display:"none",maxHeight:"200px",overflow:"auto"},attributes:{"data-call-id":d,"data-function-name":n}}),k=qa("div",{className:"function-loading",styles:{display:"none",marginTop:"12px",padding:"10px",borderRadius:"8px",backgroundColor:"rgba(0, 0, 0, 0.03)",border:"1px solid rgba(0, 0, 0, 0.06)"}}),I=w.querySelector("span");w.onclick=async()=>{w.disabled=!0,I.style.display="none";const A=qa("span",{className:"execute-spinner",innerHTML:Sa.SPINNER,styles:{display:"inline-flex",marginLeft:"8px"}});w.appendChild(A),S.style.display="none",S.innerHTML="";const _=()=>{w.disabled=!1,I.style.display="",w.contains(A)&&(w.removeChild(A),rp.release(A))};try{const H=window.mcpClient;if(!H){_(),Yr(S,k,!1,"Error: mcpClient not found"),S.style.display="block";return}if(!H.isReady||!H.isReady()){_(),Yr(S,k,!1,"Error: MCP client not ready"),S.style.display="block";return}console.debug(`Executing function ${n}, call_id: ${d} with arguments:`,r),S.style.display="block",S.innerHTML="",S.appendChild(k);try{const re=await H.callTool(n,r);_(),Yr(S,k,!0,re);const G=Ww(n,d,r,p),ue=h.querySelector(".function-history-panel")||nE(h,d,p);gx(ue,G,H)}catch(re){_();let G=re instanceof Error?re.message:String(re);G.includes("not connected")||G.includes("connection")?G="Connection lost. Please check your MCP server connection.":G.includes("timeout")?G="Request timed out. Please try again.":(G.includes("server unavailable")||G.includes("SERVER_UNAVAILABLE"))&&(G="MCP server is unavailable. Please check the server status."),Yr(S,k,!1,G)}}catch(H){_(),S.style.display="block";const re=H instanceof Error?H.message:String(H);console.error("Execute button error:",H),Yr(S,k,!1,`Unexpected error: ${re}`)}},v.appendChild(w),h.appendChild(v),(h.classList.contains("function-buttons")&&h.closest(".function-block")||h).appendChild(S),fM(h,n,d,p)},vM=h=>{const u=h.match(/<invoke name="([^"]+)"(?:\s+call_id="([^"]+)")?>/);return u&&u[1]?u[1]:null},hx=h=>{const u={};let n;for(;(n=oE.exec(h))!==null;){const r=n[1],s=n[2]||"string";let d=n[3].trim();const p=rE.exec(d);if(p)try{d=p[1].trim(),De.debug&&console.debug(`Extracted CDATA content for parameter ${r}`)}catch(v){console.error(`Failed to extract CDATA content for parameter ${r}:`,v)}switch(s){case"json":try{d=JSON.parse(d)}catch(w){console.warn(`Failed to parse JSON for parameter '${r}'.`,w)}break;case"number":const v=parseFloat(d);isNaN(v)||(d=v);break;case"boolean":d=d.toLowerCase()==="true";break;default:if(hM.test(d))d=parseFloat(d);else if(pM.test(d))d=d.toLowerCase()==="true";else{const w=d.trim();if(w.startsWith("{")&&w.endsWith("}")||w.startsWith("[")&&w.endsWith("]"))try{d=JSON.parse(w),De.debug&&console.debug(`Auto-parsed JSON for parameter ${r}:`,d)}catch{De.debug&&console.debug(`Failed to auto-parse JSON for parameter ${r}, keeping as string`)}}}u[r]=d}return oE.lastIndex=0,rE.lastIndex=0,u},px=async(h,u,n,r,s,d,p=!1)=>{if(!h)return console.error("No adapter provided for file attachment."),(()=>{const A=s.classList.contains("insert-result-button")?"Insert":"Attach File";s.innerHTML=`${Sa.ATTACH}<span>No Adapter</span>`,s.classList.add("attach-error"),setTimeout(()=>{s.innerHTML=`${Sa.ATTACH}<span>${A}</span>`,s.classList.remove("attach-error")},2e3)})(),{success:!1,message:null};if(!kv("file-attachment"))return console.error("Current adapter does not support file attachment."),(()=>{const A=s.classList.contains("insert-result-button")?"Insert":"Attach File";s.innerHTML=`${Sa.ATTACH}<span>Attach Not Supported</span>`,s.classList.add("attach-error"),setTimeout(()=>{s.innerHTML=`${Sa.ATTACH}<span>${A}</span>`,s.classList.remove("attach-error")},2e3)})(),{success:!1,message:null};const v=`${u}_result_call_id_${n}.txt`,w=new File([r],v,{type:"text/plain"});s.textContent;let S=null;const k=(R,A,_=!0)=>{s.innerHTML="";const H=qa("span",{innerHTML:Sa.ATTACH,styles:{display:"inline-flex",marginRight:"6px"}}),re=qa("span",{textContent:R});s.appendChild(H),s.appendChild(re),s.disabled=_,A&&s.classList.add(A)},I=(R=2e3)=>{setTimeout(()=>{s.innerHTML=`${Sa.ATTACH}<span>Attach File</span>`,s.classList.remove("attach-success","attach-error"),s.disabled=!1},R)};try{if(k("Attaching...",void 0,!0),typeof h.attachFile=="function")try{if(await h.attachFile(w)){if(S=`File attached successfully: ${v}`,k("Attached!","attach-success",!0),typeof h.insertText=="function")try{await h.insertText(S),console.debug("Confirmation text inserted successfully")}catch(_){if(console.warn("Failed to insert confirmation text:",_),typeof h.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:S,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(H){console.warn("Legacy insertion also failed:",H)}}else if(typeof h.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:S,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(_){console.warn("Legacy insertion failed:",_)}const A={file:w,result:S,isFileAttachment:!0,fileName:v,confirmationText:S,skipAutoInsertCheck:p};return requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:A}))}),I(),{success:!0,message:S}}else throw new Error("Adapter attachFile method returned false")}catch(R){if(console.error("New adapter attachFile method failed:",R),S=`File attachment initiated: ${v}`,k("Attached!","attach-success",!0),typeof h.insertText=="function")try{await h.insertText(S),console.debug("Confirmation text inserted successfully")}catch(_){if(console.warn("Failed to insert confirmation text:",_),typeof h.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:S,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(H){console.warn("Legacy insertion also failed:",H)}}else if(typeof h.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:S,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(_){console.warn("Legacy insertion failed:",_)}const A={file:w,result:S,isFileAttachment:!0,fileName:v,confirmationText:S,skipAutoInsertCheck:p};return requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:A}))}),I(),{success:!0,message:S}}else{if(console.debug("Adapter does not have attachFile method, using optimistic success"),S=`File attachment completed: ${v}`,k("Attached!","attach-success",!0),typeof h.insertText=="function")try{await h.insertText(S),console.debug("Confirmation text inserted successfully")}catch(A){if(console.warn("Failed to insert confirmation text:",A),typeof h.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:S,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(_){console.warn("Legacy insertion also failed:",_)}}else if(typeof h.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:S,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(A){console.warn("Legacy insertion failed:",A)}const R={file:w,result:S,isFileAttachment:!0,fileName:v,confirmationText:S,skipAutoInsertCheck:p};return requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:R}))}),I(),{success:!0,message:S}}}catch(R){console.error("File attachment error:",R),k("Failed","attach-error",!0),I()}return{success:!1,message:null}},Yr=(h,u,n,r)=>{var w;const s=h.getAttribute("data-call-id")||"",d=h.getAttribute("data-function-name")||"",p=()=>{var I;u.parentNode===h&&h.removeChild(u),h.querySelectorAll(".function-result-success, .function-result-error").forEach(R=>h.removeChild(R));const k=h.nextElementSibling;k!=null&&k.classList.contains("insert-button-container")&&((I=k.parentNode)==null||I.removeChild(k))},v=S=>{let k="";if(typeof S=="string"?k=S:S&&typeof S=="object"?k=S.message||"An unknown error occurred":k="An unknown error occurred",typeof k=="string"){const I={SERVER_UNAVAILABLE:"Server is disconnected. Please check your connection settings.",CONNECTION_ERROR:"Connection to server failed. Please try reconnecting.",RECONNECT_ERROR:"Connection to server failed. Please try reconnecting.",SERVER_ERROR:"Server error occurred. Please check server status."};for(const[R,A]of Object.entries(I))if(k.includes(R))return A}return k};if(p(),u.style.display="none",n){let S="";const k=qa("div",{className:"function-result-success"});if(typeof r=="object")try{S=JSON.stringify(r,null,2);const re=qa("pre",{textContent:S,styles:{fontFamily:"inherit",fontSize:"13px",lineHeight:"1.5",padding:"0",margin:"0"}});k.appendChild(re)}catch{S=String(r),k.textContent=S}else S=String(r),k.textContent=S;h.appendChild(k);const I=document.createDocumentFragment(),R=qa("div",{className:"function-buttons insert-button-container",styles:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px"}}),A=qa("button",{className:"insert-result-button",innerHTML:`${Sa.INSERT}<span>Insert</span>`,styles:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},attributes:{"data-result-id":`result-${s}-${Date.now()}`}});A.querySelector("span"),A.onclick=async()=>{const re=Tv();if(!re){(()=>{A.textContent="Failed (No Adapter)",A.classList.add("insert-error"),setTimeout(()=>{A.innerHTML=`${Sa.INSERT}<span>Insert</span>`,A.classList.remove("insert-error")},2e3)})(),console.error("No adapter available for text insertion.");return}if(!kv("text-insertion")){(()=>{A.textContent="Not Supported",A.classList.add("insert-error"),setTimeout(()=>{A.innerHTML=`${Sa.INSERT}<span>Insert</span>`,A.classList.remove("insert-error")},2e3)})(),console.error("Current adapter does not support text insertion.");return}const G=`<function_result call_id="${s}">
${S}
</function_result>`;if(S.length>Mv&&aE.includes(iE))console.debug(`Result length (${G.length}) exceeds ${Mv}. Attaching as file.`),await px(re,d,s,G,A,A.querySelector("span"),!0);else if(typeof re.insertText=="function")try{if(await re.insertText(G))A.textContent="Inserted!",A.classList.add("insert-success"),A.disabled=!0,setTimeout(()=>{A.innerHTML=`${Sa.INSERT}<span>Insert</span>`,A.classList.remove("insert-success"),A.disabled=!1},2e3),requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:G,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))});else throw new Error("Adapter insertText method returned false")}catch(ue){console.error("New adapter insertText method failed:",ue),typeof re.insertTextIntoInput=="function"?(console.debug("Falling back to legacy insertTextIntoInput method"),requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:G,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))}),A.textContent="Inserted!",A.classList.add("insert-success"),A.disabled=!0,setTimeout(()=>{A.innerHTML=`${Sa.INSERT}<span>Insert</span>`,A.classList.remove("insert-success"),A.disabled=!1},2e3)):(console.error("No valid insert method found on adapter"),A.textContent="Failed (No Insert Method)",A.classList.add("insert-error"),setTimeout(()=>{A.innerHTML=`${Sa.INSERT}<span>Insert</span>`,A.classList.remove("insert-error")},2e3))}else typeof re.insertTextIntoInput=="function"?(console.debug("Using legacy insertTextIntoInput method"),requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:G,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))}),A.textContent="Inserted!",A.classList.add("insert-success"),A.disabled=!0,setTimeout(()=>{A.innerHTML=`${Sa.INSERT}<span>Insert</span>`,A.classList.remove("insert-success"),A.disabled=!1},2e3)):(console.error("Adapter has no insert method available"),A.textContent="Failed (No Insert Method)",A.classList.add("insert-error"),setTimeout(()=>{A.innerHTML=`${Sa.INSERT}<span>Insert</span>`,A.classList.remove("insert-error")},2e3))};const _=qa("button",{className:"attach-file-button",innerHTML:`${Sa.ATTACH}<span>Attach File</span>`,styles:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},attributes:{"data-result-id":`attach-${s}-${Date.now()}`}});_.onclick=async()=>{const re=Tv();await px(re,d,s,S,_,null,!0)},R.appendChild(A);const H=Tv();if(H&&kv("file-attachment")&&R.appendChild(_),I.appendChild(R),(w=h.parentNode)==null||w.insertBefore(I,h.nextSibling),S.length>Mv&&H&&kv("file-attachment")&&aE.includes(iE)){console.debug(`Auto-attaching file: Result length (${S.length}) exceeds ${Mv}`);const re={button:qa("button",{className:"insert-result-button",styles:{display:"none"}})};px(H,d,s,S,re.button,null,!0).then(async({success:G,message:ue})=>{if(G&&ue){if(console.debug(`Auto-attached file successfully: ${ue}`),typeof H.insertText=="function")try{await H.insertText(ue),console.debug("Auto-attachment confirmation text inserted successfully")}catch(ye){if(console.warn("Failed to insert auto-attachment confirmation text:",ye),typeof H.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:ue,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(ce){console.warn("Legacy insertion for auto-attachment also failed:",ce)}}else if(typeof H.insertTextIntoInput=="function")try{requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:ue,isFileAttachment:!1,fileName:"",skipAutoInsertCheck:!0}}))})}catch(ye){console.warn("Legacy insertion for auto-attachment failed:",ye)}}else console.error("Failed to auto-attach file."),setTimeout(()=>_.click(),100);rp.release(re.button)}).catch(G=>{console.error("Error auto-attaching file:",G),rp.release(re.button)})}else{const re=`<function_result call_id="${s}">
${S}
</function_result>`;requestAnimationFrame(()=>{document.dispatchEvent(new CustomEvent("mcp:tool-execution-complete",{detail:{result:re,skipAutoInsertCheck:!1}}))})}}else{const S=v(r),k=qa("div",{className:"function-result-error",textContent:S});h.appendChild(k)}},yM=16,Sf=3,xM=1e3,SM=1500,Eu={paramStartRegex:/<parameter\s+name="([^"]+)"[^>]*>/gs,invokeMatch:/<invoke name="([^"]+)"(?:\s+call_id="([^"]+)")?>/i,cdataMatch:/<!\[CDATA\[(.*?)(?:\]\]>)?$/s,endParameterTag:"</parameter>"},sE=new WeakMap,qs=new WeakMap,Yl=new Map,mx=new Map,Xr=new Map;let bx=!1;function wM(){const h=window.__mcpAutomationState;if(h)return{autoInsert:h.autoInsert||!1,autoSubmit:h.autoSubmit||!1,autoExecute:h.autoExecute||!1};const u=window.toggleState;return{autoInsert:(u==null?void 0:u.autoInsert)===!0,autoSubmit:(u==null?void 0:u.autoSubmit)===!0,autoExecute:(u==null?void 0:u.autoExecute)===!0}}const Av={pre:{margin:"0",padding:"12px 14px",whiteSpace:"pre-wrap",wordWrap:"break-word",width:"100%",fontFamily:"var(--font-mono)",fontSize:"13px",lineHeight:"1.5",transition:"opacity 0.1s ease-out",transform:"translateZ(0)",backfaceVisibility:"hidden",perspective:"1000px",color:"inherit",background:"transparent",border:"none",overflow:"auto",maxHeight:"300px",scrollBehavior:"smooth"},paramValue:{transition:"all 0.15s cubic-bezier(0.4, 0, 0.2, 1)",transformOrigin:"top left",willChange:"auto",contain:"layout style paint",minHeight:"1.2em",position:"relative"},contentWrapper:{position:"relative",overflow:"hidden",minHeight:"inherit"},paramsContainer:{display:"flex",flexDirection:"column",gap:"4px",width:"100%"}},Bt={applyStyles:(h,u)=>{Object.assign(h.style,u)},createElement:(h,u,n,r)=>{const s=document.createElement(h);return u&&(s.className=u),n&&Object.entries(n).forEach(([d,p])=>{s.setAttribute(d,p)}),r&&Bt.applyStyles(s,r),s},setContent:(h,u,n=!1)=>{n?h.innerHTML=u:h.textContent=u},updateTextIfChanged:(h,u)=>h.textContent!==u?(h.textContent=u,!0):!1},vx={generateContentHash:h=>{let u=0;for(let n=0;n<h.length;n++){const r=h.charCodeAt(n);u=(u<<5)-u+r,u=u&u}return u.toString(36)},getCachedElements:h=>{const u=Date.now();let n=qs.get(h);return(!n||u-n.lastCacheTime>xM)&&(n={functionNameElement:h.querySelector(".function-name")||void 0,paramsContainer:h.querySelector(".function-params")||void 0,buttonContainer:h.querySelector(".function-buttons")||void 0,lastCacheTime:u},qs.set(h,n)),n},parseContentEfficiently:(h,u)=>{const n=vx.generateContentHash(u);let r=sE.get(h);if(r&&r.lastHash===n)return{functionName:r.functionName,callId:r.callId,parameters:r.parameters};const s=Eu.invokeMatch.exec(u),d=s?s[1]:"function",p=s&&s[2]?s[2]:`block-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,v={};Eu.paramStartRegex.lastIndex=0;let w;for(;(w=Eu.paramStartRegex.exec(u))!==null;){const S=w[1],k=w.index+w[0].length,I=u.indexOf(Eu.endParameterTag,k);let R=I!==-1?u.substring(k,I):u.substring(k);const A=Eu.cdataMatch.exec(R);R=A?A[1]:R.trim(),v[S]=R}return r={content:u,functionName:d,callId:p,parameters:v,lastHash:n},sE.set(h,r),{functionName:d,callId:p,parameters:v}}},sp={batchDOMOperation:(h,u)=>{Yl.has(h)||Yl.set(h,[]),Yl.get(h).push(u),bx||(bx=!0,requestAnimationFrame(()=>{Yl.forEach(n=>{n.forEach(r=>r())}),Yl.clear(),bx=!1}))},batchStreamingUpdate:(h,u)=>{const n=mx.get(h);n&&clearTimeout(n),mx.set(h,window.setTimeout(()=>{requestAnimationFrame(()=>{u(),mx.delete(h)})},yM))},cleanupTimeout:h=>{const u=Xr.get(h);u&&(clearTimeout(u),Xr.delete(h))},setManagedTimeout:(h,u,n)=>{sp.cleanupTimeout(h);const r=window.setTimeout(()=>{u(),Xr.delete(h)},n);Xr.set(h,r)}},Rv={createScrollHandler:h=>{let u;const n=()=>{h._userHasScrolled=!0,u&&clearTimeout(u),u=window.setTimeout(()=>{h.scrollTop>=h.scrollHeight-h.clientHeight-50&&(h._userHasScrolled=!1)},3e3)},r=()=>{h.removeEventListener("scroll",n),u&&clearTimeout(u),h._scrollInitialized=!1};return h.addEventListener("scroll",n,{passive:!0}),h._scrollInitialized=!0,h._scrollCleanup=r,{element:h,timeout:u,cleanup:r}},setupScrollTracking:h=>{if(!h._scrollHandlersInitialized){Rv.createScrollHandler(h);const u=h.querySelector("pre");u&&Rv.createScrollHandler(u),h._scrollHandlersInitialized=!0}},performOptimizedScroll:h=>{requestAnimationFrame(()=>{if(h.scrollHeight>h.clientHeight&&!h._userHasScrolled){const r=h.scrollHeight-h.clientHeight,s=h.scrollTop;r-s>100?h.scrollTo({top:r,behavior:"smooth"}):h.scrollTop=r}const u=h.querySelector("pre");if(u&&u.scrollHeight>u.clientHeight&&!u._userHasScrolled){const r=u.scrollHeight-u.clientHeight,s=u.scrollTop;r-s>50?u.scrollTo({top:r,behavior:"smooth"}):u.scrollTop=r}})}},EM=()=>{if(typeof window<"u"&&window.monaco)try{window.monaco.editor.onDidCreateEditor(h=>{h.updateOptions({wordBasedSuggestions:!1,snippetSuggestions:!1,suggestOnTriggerCharacters:!1,semanticHighlighting:{enabled:!1},codeLens:!1,formatOnType:!1,folding:!1})}),window.MonacoEnvironment={getWorkerUrl:()=>'data:text/javascript;charset=utf-8,console.debug("Monaco worker disabled for CSP compatibility");'},console.debug("Monaco editor configured for CSP compatibility")}catch(h){console.error("Failed to configure Monaco editor for CSP:",h)}},CM=(()=>{let h=!1;return()=>{if(h)return;h=!0;const u=Bt.createElement("style");u.textContent=`
      .streaming-param-name {
        position: relative;
      }
      
      .param-value[data-streaming="true"] {
        position: relative;
        background: linear-gradient(135deg, 
          rgba(0, 212, 255, 0.03) 0%, 
          rgba(0, 153, 204, 0.01) 100%);
        border-left: 2px solid rgba(0, 212, 255, 0.2);
        padding-left: 8px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .param-value[data-streaming="true"] .content-wrapper {
        animation: subtle-breathe 3s ease-in-out infinite;
      }
      
      @keyframes subtle-breathe {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.001); }
      }
      
      /* Enhanced scrolling styles */
      .param-value[data-streaming="true"] {
        overflow-y: auto !important;
        max-height: 300px !important;
        scroll-behavior: smooth !important;
      }
      
      .param-value[data-streaming="true"]::-webkit-scrollbar {
        width: 6px;
      }
      
      .param-value[data-streaming="true"]::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 3px;
      }
      
      .param-value[data-streaming="true"]::-webkit-scrollbar-thumb {
        background: rgba(0, 212, 255, 0.5);
        border-radius: 3px;
        transition: background 0.2s ease;
      }
      
      .param-value[data-streaming="true"]::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 212, 255, 0.8);
      }
      
      /* Fix text color inheritance for both themes */
      .function-block.theme-light .param-value[data-streaming="true"] pre,
      .function-block:not(.theme-dark) .param-value[data-streaming="true"] pre {
        color: inherit !important;
      }
      
      .function-block.theme-dark .param-value[data-streaming="true"] pre {
        color: inherit !important;
      }
    `,document.head.appendChild(u)}})(),lp=new WeakSet,rr=new Map,Zr={attempts:new Map,executed:new Set,executedFunctions:new Set,isFunctionExecuted(h,u,n){console.debug(`[Debug] isFunctionExecuted called with: callId='${h}', signature='${u}', funcName='${n||"undefined"}'`);let r=n;if(typeof r>"u"||r===null){let s="";for(const d of this.executedFunctions){const p=d.split(":");if(p.length===3&&p[1]===h&&p[2]===u){s=p[0];break}}s&&(r=s,console.debug(`[Debug] Found functionName='${r}' from executedFunctions set`))}if(typeof r=="string"){const s=`${r}:${h}:${u}`,d=this.executedFunctions.has(s),p=Cv(r,h,u)!==null;return console.debug(`[Debug] isFunctionExecuted (Standard Check): Key='${s}', inMemory=${d}, inStorage=${p}`),d||p}else{const s=`${h}:${u}`,d=this.executedFunctions.has(s)||this.executedFunctions.has(`:${h}:${u}`),p=uM(h,u)!==null;return console.debug(`[Debug] isFunctionExecuted (Legacy Check): Key='${s}', inMemory=${d}, inStorage=${p}`),d||p}},markFunctionExecuted(h,u,n){const r=n?`${n}:${h}:${u}`:`${h}:${u}`;this.executedFunctions.add(r)},isBlockExecuted(h){return this.executed.has(h)===!0},markBlockExecuted(h){this.executed.add(h)},getAttempts(h){return this.attempts.get(h)||0},incrementAttempts(h){const n=this.getAttempts(h)+1;return this.attempts.set(h,n),n},cleanupBlock(h){this.attempts.delete(h)}},Ov={createFunctionNameSection:(h,u,n,r)=>{const s=Bt.createElement("div","function-name"),d=Bt.createElement("div","function-name-left"),p=Bt.createElement("span","function-name-text");if(p.textContent=h,d.appendChild(p),!n&&!r){const w=Bt.createElement("div","spinner");d.appendChild(w)}const v=Bt.createElement("div","function-name-right");if(u){const w=Bt.createElement("span","call-id");w.textContent=u,v.appendChild(w)}return s.appendChild(d),s.appendChild(v),s},createExpandButton:()=>{const h=Bt.createElement("button","expand-button");return h.innerHTML=`
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 10l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    `,h.title="Expand function details",h},createExpandableContent:()=>{const h=Bt.createElement("div","expandable-content");return Bt.applyStyles(h,{display:"none",overflow:"hidden",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",maxHeight:"0px",opacity:"0"}),h},setupExpandCollapse:(h,u,n)=>{u.onclick=r=>{r.preventDefault(),r.stopPropagation();const s=h.classList.contains("expanded"),d=u.querySelector("svg path");if(s){h.classList.remove("expanded");const p=n.scrollHeight;n.style.maxHeight=p+"px",n.offsetHeight,requestAnimationFrame(()=>{Bt.applyStyles(n,{maxHeight:"0px",opacity:"0",paddingTop:"0",paddingBottom:"0"}),d&&d.setAttribute("d","M8 10l4 4 4-4"),u.title="Expand function details"}),setTimeout(()=>{h.classList.contains("expanded")||(n.style.display="none")},250)}else{h.classList.add("expanded"),Bt.applyStyles(n,{display:"block",maxHeight:"0px",opacity:"0",paddingTop:"0",paddingBottom:"0"});const p=n.scrollHeight+24;requestAnimationFrame(()=>{Bt.applyStyles(n,{maxHeight:p+"px",opacity:"1",paddingTop:"12px",paddingBottom:"12px"}),d&&d.setAttribute("d","M16 14l-4-4-4 4"),u.title="Collapse function details"})}}}},Cu={createParamName:(h,u)=>{const n=Bt.createElement("div","param-name",{"data-param-id":u});return n.textContent=h,n},createParamValue:(h,u)=>{const n=Bt.createElement("div","param-value",{"data-param-id":h,"data-param-name":u});return Bt.applyStyles(n,Av.paramValue),n},createStreamingContent:h=>{h.innerHTML="";const u=Bt.createElement("div","content-wrapper");Bt.applyStyles(u,Av.contentWrapper);const n=Bt.createElement("pre");return Bt.applyStyles(n,Av.pre),u.appendChild(n),h.appendChild(u),{preElement:n,contentWrapper:u}},updateContent:(h,u,n)=>{const r=h.textContent||"";r!==u&&(n&&u.length>r.length+50?(h.style.opacity="0.85",setTimeout(()=>{h.textContent=u,h.style.opacity="1"},8)):h.textContent=u)},handleStreamingState:(h,u,n,r)=>{const s=`streaming-timeout-${n}`;sp.cleanupTimeout(s),r?(h.classList.contains("streaming-param-name")||h.classList.add("streaming-param-name"),u.setAttribute("data-streaming","true"),u.hasAttribute("data-streaming-styled")||(Bt.applyStyles(u,{willChange:"scroll-position, contents",containIntrinsicSize:"auto 1.2em"}),Cu.checkAndApplyOverflow(u),u.setAttribute("data-streaming-styled","true"),Rv.setupScrollTracking(u)),Rv.performOptimizedScroll(u),sp.setManagedTimeout(s,()=>{h&&document.body.contains(h)&&(h.classList.remove("streaming-param-name"),u&&(u.removeAttribute("data-streaming"),u.removeAttribute("data-streaming-styled"),Bt.applyStyles(u,{willChange:"auto",containIntrinsicSize:"auto"})))},SM)):(h.classList.contains("streaming-param-name")&&setTimeout(()=>{h.classList.remove("streaming-param-name"),u.removeAttribute("data-streaming"),u.removeAttribute("data-streaming-styled"),Bt.applyStyles(u,{willChange:"auto",containIntrinsicSize:"auto"})},100),setTimeout(()=>Cu.checkAndApplyOverflow(u),200))},checkAndApplyOverflow:h=>{const u=h.scrollHeight>300,n=h.style.overflow==="auto";u&&!n?Bt.applyStyles(h,{overflow:"auto",maxHeight:"300px",scrollBehavior:"smooth",scrollbarWidth:"thin"}):!u&&n&&Bt.applyStyles(h,{overflow:"visible",maxHeight:"none"})}},lE={setupOptimizedAutoExecution:(h,u)=>{const n=()=>{const r=Zr.incrementAttempts(h);if(r>Sf){console.debug(`Auto-execute: Giving up on block ${h} after ${r-1} attempts`),Zr.cleanupBlock(h);return}console.debug(`Auto-execute attempt ${r}/${Sf} for block ${h}`);const s=window.__mcpAutomationState,d=((s==null?void 0:s.autoExecuteDelay)||0)*1e3;console.debug(`[AutoExecution] Using delay of ${d}ms for block ${h}`),sp.setManagedTimeout(`auto-exec-${h}-${r}`,()=>{let p=document.querySelector(`.function-block[data-block-id="${h}"]`);if(p||(console.debug(`Auto-execute: Original block ${h} not found. Searching for replacement...`),p=lE.findReplacementBlock(u)),!p){console.debug(`Auto-execute: Block ${h} not found (attempt ${r}/${Sf})`),r<Sf?n():(console.debug(`Auto-execute: Giving up on block ${h} - not found in DOM`),Zr.cleanupBlock(h));return}if(Cv(u.functionName,u.callId,u.contentSignature)){console.debug("Auto-execute: Function already executed, skipping."),Zr.cleanupBlock(h);return}const w=p.querySelector(".execute-button");w?(console.debug(`Auto-execute: Executing function ${u.functionName}`),w.click(),Zr.cleanupBlock(h)):(console.debug(`Auto-execute: Execute button not found (attempt ${r}/${Sf})`),r<Sf?n():(console.debug(`Auto-execute: Giving up on block ${h} - button not found`),Zr.cleanupBlock(h)))},d+500)};n()},findReplacementBlock:h=>{const u=document.querySelectorAll(".function-block");for(const n of u){const r=n.querySelector("pre");if(!(r!=null&&r.textContent))continue;const s=Eu.invokeMatch.exec(r.textContent);if(Eu.invokeMatch.lastIndex=0,s&&s[1]===h.functionName&&s[2]===h.callId&&!Cv(h.functionName,h.callId,h.contentSignature))return console.debug("Auto-execute: Found replacement block, attempting execution."),n}return null}};typeof window<"u"&&EM();const zv=(h,u)=>{var de,Ue,ze;CM();const n=sM(h);if(!n.hasFunctionCalls||h.closest(".function-block")||(((de=h.textContent)==null?void 0:de.trim())||"").length<10)return!1;const s=h.getAttribute("data-block-id")||`block-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;if((Ue=window.resyncingBlocks)!=null&&Ue.has(s))return De.debug&&console.debug(`Skipping render for resyncing block ${s}`),!1;const d=document.querySelector(`.function-block[data-block-id="${s}"]`);if(d&&d.classList.contains("function-complete"))return De.debug&&console.debug(`Skipping render for completed block ${s}`),!1;const v=(window.preExistingIncompleteBlocks||new Set).has(s);let w=rr.get(s),S=!1,k=null;lp.has(h)&&(w||(w=document.querySelector(`.function-block[data-block-id="${s}"]`)||void 0,w?rr.set(s,w):lp.delete(h))),w?k=!w.classList.contains("function-loading"):(S=!0,lp.has(h)||(lp.add(h),h.setAttribute("data-block-id",s)));const I=((ze=h.textContent)==null?void 0:ze.trim())||"",{tag:R,content:A}=Qw(I),{functionName:_,callId:H,parameters:re}=vx.parseContentEfficiently(h,I),G=w||Bt.createElement("div");if(S&&(G.className="function-block",G.setAttribute("data-block-id",s),yx(G),rr.set(s,G)),S){if(!n.isComplete&&!v&&G.classList.add("function-loading"),R||n.languageTag){const Fe=Bt.createElement("div","language-tag");Fe.textContent=R||n.languageTag,G.appendChild(Fe)}}else{const Fe=k===!1&&n.isComplete,Ge=k===!0&&!n.isComplete;if(Fe){G.classList.remove("function-loading"),G.classList.add("function-complete");const Xe=G.querySelector(".spinner");Xe&&Xe.remove()}else Ge&&(G.classList.remove("function-complete"),G.classList.add("function-loading"))}const ue=vx.getCachedElements(G);let ye=ue.functionNameElement;if(!ye)ye=Ov.createFunctionNameSection(_,H,n.isComplete,v),G.appendChild(ye),ue.functionNameElement=ye,qs.set(G,{...ue,lastCacheTime:Date.now()});else{const Fe=ye.querySelector(".function-name-text");Fe&&Bt.updateTextIfChanged(Fe,_);const Ge=ye.querySelector(".call-id");if(H)if(Ge)Bt.updateTextIfChanged(Ge,H);else{const Xe=Bt.createElement("span","call-id");Xe.textContent=H,ye.appendChild(Xe)}}let ce=ye==null?void 0:ye.querySelector(".expand-button"),be=G.querySelector(".expandable-content");if(!ce&&ye){ce=Ov.createExpandButton();const Fe=ye.querySelector(".function-name-right");Fe?Fe.appendChild(ce):ye.appendChild(ce)}be||(be=Ov.createExpandableContent(),G.appendChild(be)),ce&&be&&Ov.setupExpandCollapse(G,ce,be);let J=ue.paramsContainer;J||(J=Bt.createElement("div","function-params"),Bt.applyStyles(J,Av.paramsContainer),be.appendChild(J),ue.paramsContainer=J,qs.set(G,{...ue,lastCacheTime:Date.now()})),Object.entries(re).forEach(([Fe,Ge])=>{const Xe=!I.includes("</parameter>")||I.indexOf("</parameter>",I.indexOf(`<parameter name="${Fe}"`))===-1,Q=`${s}-${Fe}`;sp.batchStreamingUpdate(Q,()=>{TM(J,Fe,Ge,s,S,Xe)})});let he=null;n.isComplete&&(he=hx(I));let ie=null;if(n.isComplete&&he&&(ie=tE(_,he)),S)if(h.parentNode)h.parentNode.insertBefore(G,h),h.style.display="none";else return De.debug&&console.warn("Function call block has no parent element, cannot insert rendered block"),!1;let Ee=ue.buttonContainer;if(Ee||(Ee=Bt.createElement("div","function-buttons"),Ee.style.marginTop="12px",G.appendChild(Ee),ue.buttonContainer=Ee,qs.set(G,{...ue,lastCacheTime:Date.now()})),n.isComplete&&(G.querySelector(".raw-toggle")||mM(Ee,I),!G.querySelector(".execute-button"))){he||(he=hx(I)),bM(Ee,I);const Ge=wM().autoExecute;if(ie&&!Zr.isFunctionExecuted(H,ie,_)){if(Ge!==!0)return console.debug(`Auto-execution disabled by user settings for block ${s} (${_})`),!0;if(Zr.isBlockExecuted(s)===!0)return console.debug(`Auto-execution skipped: Block ${s} (${_}) has already been processed`),!0;Zr.markFunctionExecuted(H,ie,_),Zr.markBlockExecuted(s),console.debug(`Setting up auto-execution for block ${s} (${_})`);const Xe={functionName:_,callId:H,contentSignature:ie,params:he||{}};lE.setupOptimizedAutoExecution(s,Xe)}}return!0},TM=(h,u,n,r,s,d=!1)=>{const p=`${r}-${u}`,w=qs.get(h)||{lastCacheTime:Date.now()};let S=w[`name-${p}`],k=w[`value-${p}`];(!S||!k)&&(S=S||h.querySelector(`.param-name[data-param-id="${p}"]`)||document.querySelector(`.param-name[data-param-id="${p}"]`)||void 0,k=k||h.querySelector(`.param-value[data-param-id="${p}"]`)||document.querySelector(`.param-value[data-param-id="${p}"]`)||void 0,S&&(w[`name-${p}`]=S),k&&(w[`value-${p}`]=k),qs.set(h,w)),S||(S=Cu.createParamName(u,p),h.appendChild(S),w[`name-${p}`]=S,qs.set(h,w)),k||(k=Cu.createParamValue(p,u),h.appendChild(k),w[`value-${p}`]=k,qs.set(h,w));const I=typeof n=="object"?JSON.stringify(n,null,2):String(n);if(!(k.getAttribute("data-current-value")===I&&!d)){if(k.setAttribute("data-current-value",I),d||k.hasAttribute("data-streaming")){let A=k.querySelector("pre"),_=k.querySelector(".content-wrapper");if(!A||!_){const re=Cu.createStreamingContent(k);A=re.preElement,_=re.contentWrapper}const H=()=>{Cu.updateContent(A,I,d)};d?requestAnimationFrame(H):H()}else k.textContent!==I&&(k.textContent&&k.textContent.length>0?(k.style.opacity="0.9",setTimeout(()=>{k.textContent=I,k.style.opacity="1"},50)):k.textContent=I);k.setAttribute("data-param-value",JSON.stringify(n)),Cu.handleStreamingState(S,k,p,d)}},kM={clearAllCaches:()=>{rr.clear(),Yl.clear(),Xr.forEach(h=>clearTimeout(h)),Xr.clear()},clearBlockCache:h=>{rr.delete(h),Yl.delete(h),Array.from(Xr.keys()).filter(n=>n.includes(h)).forEach(n=>{const r=Xr.get(n);r&&(clearTimeout(r),Xr.delete(n))})},getCacheStats:()=>({contentParsingCacheSize:"WeakMap (size not available - auto-managed)",elementQueryCacheSize:"WeakMap (size not available - auto-managed)",renderedFunctionBlocksSize:rr.size,pendingDOMUpdatesSize:Yl.size,activeTimeoutsSize:Xr.size})};typeof window<"u"&&window.addEventListener("beforeunload",()=>{kM.clearAllCaches()});let Et=null,Gs={bodyClasses:"",htmlClasses:"",bodyDataTheme:"",htmlDataTheme:"",bodyBgColor:"",isDark:!1};const MM=[];let Dv=null;const AM=100;function ft(h,u){De.debug&&console.debug(`[ThemeDetector] ${h}`,u||"")}function RM(){let h=0,u=0;const n={classNames:8,dataAttributes:8,metaTags:6,backgroundColors:5,cssVariables:4,textColors:3,systemColors:2,urlPatterns:1};try{const p=document.body,v=document.documentElement;if(!p||!v)return{theme:"system",confidence:0,scores:{dark:0,light:0}};const w=p.className.toLowerCase()||"",S=v.className.toLowerCase()||"",k=w+" "+S,I=["dark-theme","theme-dark","dark-mode","dark","night-mode","nightmode","black-theme","theme-black","noir","midnight","shadow","carbon","slate","charcoal","obsidian","dim","dusky","darker","darkened","invert","inverted","contrast-dark","scheme-dark","color-scheme-dark","theme-dark-mode","darktheme","dark_theme","dark_mode"],R=["light-theme","theme-light","light-mode","light","day-mode","daymode","white-theme","theme-white","bright","default-theme","normal","classic","standard","vanilla","clean","minimal","bright-mode","contrast-light","scheme-light","color-scheme-light","theme-light-mode","lighttheme","light_theme","light_mode"],A=I.filter(Ee=>new RegExp(`\\b${Ee}\\b`,"i").test(k)),_=R.filter(Ee=>new RegExp(`\\b${Ee}\\b`,"i").test(k));A.length>0&&(h+=n.classNames*A.length,ft("Dark class patterns found",A)),_.length>0&&(u+=n.classNames*_.length,ft("Light class patterns found",_)),[p.getAttribute("data-theme"),v.getAttribute("data-theme"),p.getAttribute("data-color-scheme"),v.getAttribute("data-color-scheme"),p.getAttribute("data-color-mode"),v.getAttribute("data-color-mode"),p.getAttribute("data-bs-theme"),v.getAttribute("data-bs-theme")].filter(Boolean).forEach(Ee=>{const de=Ee==null?void 0:Ee.toLowerCase();de!=null&&de.includes("dark")&&(h+=n.dataAttributes),de!=null&&de.includes("light")&&(u+=n.dataAttributes)}),document.querySelectorAll('meta[name*="theme"], meta[name*="color-scheme"]').forEach(Ee=>{var Ue;const de=(Ue=Ee.getAttribute("content"))==null?void 0:Ue.toLowerCase();de!=null&&de.includes("dark")&&(h+=n.metaTags),de!=null&&de.includes("light")&&(u+=n.metaTags)});const G=[p,v,...Array.from(document.querySelectorAll('main, [role="main"], .main-content, #main, #content, .content')).slice(0,3),...Array.from(document.querySelectorAll(".app, #app, .wrapper, .container, .page, .layout")).slice(0,3),...Array.from(document.querySelectorAll("header, nav, .header, .navbar")).slice(0,2)],ue={darkCount:0,lightCount:0,totalAnalyzed:0};for(const Ee of G)if(Ee)try{const Ue=window.getComputedStyle(Ee).backgroundColor;if(Ue&&Ue!=="rgba(0, 0, 0, 0)"&&Ue!=="transparent"){const ze=Xl(Ue);ze!==null&&(ue.totalAnalyzed++,ze<120?ue.darkCount++:ze>180&&ue.lightCount++)}}catch{}if(ue.totalAnalyzed>0){const Ee=ue.darkCount/ue.totalAnalyzed,de=ue.lightCount/ue.totalAnalyzed;h+=n.backgroundColors*Ee*3,u+=n.backgroundColors*de*3}const ye=["--background-color","--bg-color","--background","--bg","--color-bg","--color-background","--theme-bg","--primary-bg","--surface","--surface-color","--base-color","--canvas","--page-bg","--body-bg","--main-bg","--content-bg"],ce={darkCount:0,lightCount:0};ye.forEach(Ee=>{const de=getComputedStyle(document.documentElement).getPropertyValue(Ee);if(de){const Ue=Xl(de.trim());Ue!==null&&(Ue<120?ce.darkCount++:Ue>180&&ce.lightCount++)}}),ce.darkCount>0&&(h+=n.cssVariables*ce.darkCount),ce.lightCount>0&&(u+=n.cssVariables*ce.lightCount);const be=[document.querySelector("h1, h2, h3"),document.querySelector("p"),document.querySelector("a"),document.querySelector(".content, article, section")].filter(Boolean),J={lightTextCount:0,darkTextCount:0};be.forEach(Ee=>{try{const de=window.getComputedStyle(Ee).color,Ue=Xl(de);Ue!==null&&(Ue>180?J.lightTextCount++:Ue<100&&J.darkTextCount++)}catch{}}),J.lightTextCount>J.darkTextCount?h+=n.textColors*J.lightTextCount:J.darkTextCount>J.lightTextCount&&(u+=n.textColors*J.darkTextCount);try{const Ee=document.createElement("div");Ee.style.cssText="position:absolute;top:-9999px;background-color:canvas;color:canvastext;",document.body.appendChild(Ee);const de=window.getComputedStyle(Ee).backgroundColor,Ue=Xl(de);document.body.removeChild(Ee),Ue!==null&&(Ue<128?h+=n.systemColors:u+=n.systemColors)}catch{}const he=window.location.hostname.toLowerCase();({dark:["github.com","stackoverflow.com","reddit.com","discord.com","twitter.com"],light:["google.com","wikipedia.org","stackoverflow.com","reddit.com"]}).dark.some(Ee=>he.includes(Ee))&&(window.location.href.toLowerCase().includes("dark")||document.querySelector('[data-theme*="dark"]'))&&(h+=n.urlPatterns)}catch(p){ft("Error in theme scoring",p)}const r=h+u,s=Math.min(r/20,1);let d;return r===0||Math.abs(h-u)<2?d="system":d=h>u?"dark":"light",ft("Theme detection scoring complete",{darkScore:h,lightScore:u,totalScore:r,confidence:s,finalTheme:d}),{theme:d,confidence:s,scores:{dark:h,light:u}}}function Xl(h){if(!h)return null;const u=h.trim(),n=u.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(n){const[d,p,v,w]=n.map(Number);return(p*299+v*587+w*114)/1e3}const r=u.match(/#([0-9a-f]{3,6})/i);if(r){const d=r[1];let p,v,w;if(d.length===3?(p=parseInt(d[0]+d[0],16),v=parseInt(d[1]+d[1],16),w=parseInt(d[2]+d[2],16)):(p=parseInt(d.substring(0,2),16),v=parseInt(d.substring(2,4),16),w=parseInt(d.substring(4,6),16)),!isNaN(p)&&!isNaN(v)&&!isNaN(w))return(p*299+v*587+w*114)/1e3}const s=u.match(/hsla?\(\d+,\s*\d+%?,\s*(\d+)%?/i);return s?parseInt(s[1],10)/100*255:null}function OM(){const h=window.location.hostname.toLowerCase();if(window.location.pathname.toLowerCase(),window.location.search.toLowerCase(),h.includes("github.com")){if(document.querySelector('[data-color-mode="dark"]')||document.body.getAttribute("data-color-mode")==="dark"||document.documentElement.getAttribute("data-color-mode")==="dark"||document.querySelector('[data-color-scheme="dark"]')||document.body.getAttribute("data-color-scheme")==="dark"||document.documentElement.getAttribute("data-color-scheme")==="dark")return"dark";if(document.querySelector('[data-color-mode="light"]')||document.body.getAttribute("data-color-mode")==="light"||document.documentElement.getAttribute("data-color-mode")==="light"||document.querySelector('[data-color-scheme="light"]')||document.body.getAttribute("data-color-scheme")==="light"||document.documentElement.getAttribute("data-color-scheme")==="light")return"light"}return h.includes("reddit.com")&&(document.querySelector('[data-theme="dark"]')||document.documentElement.className.includes("theme-dark"))||h.includes("discord.com")&&(document.querySelector('[class*="theme-dark"]')||document.body.className.includes("theme-dark"))||(h.includes("twitter.com")||h.includes("x.com"))&&(document.querySelector('[data-theme="dark"]')||document.documentElement.style.colorScheme==="dark")||h.includes("youtube.com")&&(document.querySelector("[dark]")||document.documentElement.getAttribute("dark")!==null)||h.includes("stackoverflow.com")&&(document.querySelector(".theme-dark")||document.body.className.includes("theme-dark"))?"dark":null}function Nv(){var h;if(Et)return ft("Returning cached theme",Et),Et;ft("Starting theme detection");try{const u=document.body,n=document.documentElement;if(!u||!n)return ft("Body or HTML element not found, defaulting to system"),Et="system",Et;const r=OM();if(r)return ft("Theme detected from website-specific patterns",r),Et=r,Et;const s=RM();if(s.confidence>.3)return ft("Theme detected from scoring mechanism",s),Et=s.theme,Et;if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return ft("Dark theme detected from prefers-color-scheme"),Et="dark",Et;const d=[u.getAttribute("data-theme"),n.getAttribute("data-theme"),u.getAttribute("data-color-mode"),n.getAttribute("data-color-mode"),u.getAttribute("data-color-scheme"),n.getAttribute("data-color-scheme"),u.getAttribute("data-bs-theme"),n.getAttribute("data-bs-theme"),u.getAttribute("theme"),n.getAttribute("theme")];ft("Checking data attributes",d);for(const ce of d)if(ce){const be=ce.toLowerCase();if(be.includes("dark")||be==="dark")return ft("Dark theme detected from data attributes",ce),Et="dark",Et;if(be.includes("light")||be==="light")return ft("Light theme detected from data attributes",ce),Et="light",Et}const p=document.querySelectorAll('meta[name*="theme"], meta[name*="color-scheme"], meta[name*="theme-color"]');for(const ce of p){const be=(h=ce.getAttribute("content"))==null?void 0:h.toLowerCase();if(be!=null&&be.includes("dark"))return ft("Dark theme detected from meta tags"),Et="dark",Et;if(be!=null&&be.includes("light"))return ft("Light theme detected from meta tags"),Et="light",Et}const v=u.className.toLowerCase()||"",w=n.className.toLowerCase()||"",S=`${v} ${w}`;ft("Checking class names",{bodyClasses:v,htmlClasses:w});const k=["dark-theme","theme-dark","dark-mode","dark","night-mode","nightmode","black-theme","theme-black","noir","midnight","shadow","carbon","slate","charcoal","obsidian","dim","dusky","darker","darkened","invert","inverted","contrast-dark","scheme-dark","color-scheme-dark","theme-dark-mode","darktheme","dark_theme","dark_mode","mode-dark","is-dark","has-dark-theme"],I=["light-theme","theme-light","light-mode","light","day-mode","daymode","white-theme","theme-white","bright","default-theme","normal","classic","standard","vanilla","clean","minimal","bright-mode","contrast-light","scheme-light","color-scheme-light","theme-light-mode","lighttheme","light_theme","light_mode","mode-light","is-light","has-light-theme"],R=k.some(ce=>new RegExp(`\\b${ce}\\b`,"i").test(S)),A=I.some(ce=>new RegExp(`\\b${ce}\\b`,"i").test(S));if(R)return ft("Dark theme detected from class names"),Et="dark",Et;if(A)return ft("Light theme detected from class names"),Et="light",Et;const _=[{element:u,name:"body"},{element:n,name:"html"},...Array.from(document.querySelectorAll('main, [role="main"], .main-content, #main, #content, .content')).slice(0,3).map((ce,be)=>({element:ce,name:`main-${be}`})),...Array.from(document.querySelectorAll(".app, #app, .wrapper, .container, .page, .layout")).slice(0,2).map((ce,be)=>({element:ce,name:`wrapper-${be}`})),...Array.from(document.querySelectorAll("header, nav, .header, .navbar")).slice(0,2).map((ce,be)=>({element:ce,name:`nav-${be}`}))],H=[];for(const{element:ce,name:be}of _)try{if(!ce)continue;const he=window.getComputedStyle(ce).backgroundColor;if(he&&he!=="rgba(0, 0, 0, 0)"&&he!=="transparent"){const ie=Xl(he);if(ie!==null){const Ee=ie<120;H.push({name:be,brightness:ie,isDark:Ee}),ft(`Background analysis for ${be}`,{bgColor:he,brightness:ie,isDark:Ee})}}}catch(J){ft(`Error analyzing background color for ${be}`,J)}if(H.length>0){const ce=H.filter(J=>J.isDark).length,be=H.length-ce;if(ft("Background analysis summary",{total:H.length,dark:ce,light:be,results:H}),ce>be)return ft("Dark theme detected from background color analysis"),Et="dark",Et;if(be>ce)return ft("Light theme detected from background color analysis"),Et="light",Et}const re=["--background-color","--bg-color","--background","--bg","--color-bg","--color-background","--theme-bg","--primary-bg","--surface","--surface-color","--base-color","--canvas","--page-bg","--body-bg","--main-bg","--content-bg","--theme-background","--app-background","--global-background"];ft("Checking CSS variables",re);for(const ce of re){const be=getComputedStyle(document.documentElement).getPropertyValue(ce);if(be){const J=be.trim(),he=Xl(J);if(he!==null){if(ft(`CSS variable ${ce} brightness`,{colorValue:J,brightness:he}),he<120)return ft("Dark theme detected from CSS variables"),Et="dark",Et;if(he>180)return ft("Light theme detected from CSS variables"),Et="light",Et}}}const G=[document.querySelector("h1, h2, h3"),document.querySelector("p"),document.querySelector("a"),document.querySelector(".content, article, section"),document.querySelector("span"),document.querySelector("div")].filter(Boolean);let ue=0,ye=0;for(const ce of G.slice(0,5))try{const J=window.getComputedStyle(ce).color;if(J&&J!=="rgba(0, 0, 0, 0)"){const he=Xl(J);he!==null&&(he>180?ue++:he<100&&ye++,ft(`Text color analysis for ${ce.tagName}`,{textColor:J,brightness:he,classification:he>180?"light-text":he<100?"dark-text":"neutral"}))}}catch(be){ft(`Error analyzing text color for ${ce.tagName}`,be)}if(ft("Text color analysis summary",{lightTextCount:ue,darkTextCount:ye}),ue>ye&&ue>=2)return ft("Dark theme detected from text color analysis"),Et="dark",Et;if(ye>ue&&ye>=2)return ft("Light theme detected from text color analysis"),Et="light",Et;try{const ce=document.createElement("div");ce.style.cssText=`
        position: absolute;
        top: -9999px;
        left: -9999px;
        width: 1px;
        height: 1px;
        background-color: canvas;
        color: canvastext;
      `,document.body.appendChild(ce);const J=window.getComputedStyle(ce).backgroundColor;if(document.body.removeChild(ce),J){const he=Xl(J);if(he!==null)return ft("System canvas color analysis",{bgColor:J,brightness:he}),he<128?(ft("Dark theme detected from system canvas colors"),Et="dark",Et):(ft("Light theme detected from system canvas colors"),Et="light",Et)}}catch(ce){ft("Error in system color analysis",ce)}}catch(u){ft("Error in theme detection",u)}return ft("Could not determine theme, defaulting to system"),Et="system",Et}function cE(){const h=document.body,u=document.documentElement;return{bodyClasses:(h==null?void 0:h.className)||"",htmlClasses:(u==null?void 0:u.className)||"",bodyDataTheme:(h==null?void 0:h.getAttribute("data-theme"))||"",htmlDataTheme:(u==null?void 0:u.getAttribute("data-theme"))||"",bodyBgColor:h?window.getComputedStyle(h).backgroundColor:"",isDark:Nv()==="dark"}}function zM(){if(Dv)return;let h;const u=()=>{clearTimeout(h),h=setTimeout(()=>{const d=cE();(d.isDark!==Gs.isDark||d.bodyClasses!==Gs.bodyClasses||d.htmlClasses!==Gs.htmlClasses||d.bodyDataTheme!==Gs.bodyDataTheme||d.htmlDataTheme!==Gs.htmlDataTheme||d.bodyBgColor!==Gs.bodyBgColor)&&(ft("Theme change detected",{old:Gs,new:d}),Et=null,Gs=d,MM.forEach(p=>{try{p(d.isDark)}catch(v){ft("Error in theme change callback",v)}}),NM())},AM)};if(Dv=new MutationObserver(d=>{var v;let p=!1;for(const w of d){if(w.type==="attributes"&&(w.attributeName==="class"||(v=w.attributeName)!=null&&v.startsWith("data-"))){p=!0;break}if(w.type==="attributes"&&w.attributeName==="style"){p=!0;break}}p&&u()}),Dv.observe(document.documentElement,{attributes:!0,attributeFilter:["class","data-theme","data-color-mode","data-color-scheme","data-bs-theme","style"],subtree:!1}),Dv.observe(document.body,{attributes:!0,attributeFilter:["class","data-theme","data-color-mode","data-color-scheme","data-bs-theme","style"],subtree:!1}),window.matchMedia){const d=window.matchMedia("(prefers-color-scheme: dark)"),p=window.matchMedia("(prefers-color-scheme: light)"),v=w=>{ft("Media query change detected",{matches:w.matches,media:w.media}),u()};d.addEventListener("change",v),p.addEventListener("change",v),window._themeMediaQueryListeners={dark:{query:d,handler:v},light:{query:p,handler:v}}}const n=d=>{d.key&&(d.key.includes("theme")||d.key.includes("dark")||d.key.includes("light")||d.key.includes("color"))&&(ft("Storage change detected for theme-related key",{key:d.key,newValue:d.newValue}),u())};window.addEventListener("storage",n),window._themeStorageListener=n;const r=["themechange","theme-change","colorschemechange","color-scheme-change","darkmodechange","dark-mode-change","lightmodechange","light-mode-change"],s=d=>{ft("Custom theme event detected",{type:d.type,detail:d.detail}),u()};if(r.forEach(d=>{document.addEventListener(d,s),window.addEventListener(d,s)}),window._themeCustomEventListeners={handler:s,events:r},window.ResizeObserver){const d=document.createElement("div");d.style.cssText=`
      position: absolute;
      top: -9999px;
      left: -9999px;
      width: 1px;
      height: 1px;
      background: var(--background-color, var(--bg-color, var(--background, transparent)));
      color: var(--text-color, var(--color, inherit));
      pointer-events: none;
    `,document.body.appendChild(d);const p=window.getComputedStyle(d);let v=p.backgroundColor,w=p.color;const S=new ResizeObserver(()=>{const I=window.getComputedStyle(d),R=I.backgroundColor,A=I.color;(R!==v||A!==w)&&(ft("CSS variable change detected",{bgColor:{old:v,new:R},textColor:{old:w,new:A}}),v=R,w=A,u())});setInterval(()=>{d.style.width=d.style.width==="1px"?"2px":"1px"},1e3),S.observe(d),window._themeVariableWatcher={element:d,observer:S}}Gs=cE(),ft("Enhanced theme monitoring started with multiple detection methods")}function DM(){return Et=null,Nv()}function Iv(){return Nv()==="dark"}function yx(h){const u=Nv();h.classList.remove("theme-light","theme-dark","theme-system"),h.classList.add(`theme-${u}`),h.setAttribute("data-theme",u),ft(`Applied theme class: theme-${u}`,{element:h.className})}function NM(){rr&&rr.size>0&&(rr.forEach((h,u)=>{yx(h)}),ft(`Updated theme for ${rr.size} function blocks`))}function uE(){zM(),DM(),ft("Theme detection initialized")}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",uE):uE()),Iv();const IM=`
  /* CSS Custom Properties for Performance */
  .function-block {
    /* Light theme variables */
    --light-bg: #ffffff;
    --light-text: #202124;
    --light-text-secondary: #5f6368;
    --light-text-tertiary: #3c4043;
    --light-border: rgba(0,0,0,0.03);
    --light-border-secondary: rgba(0,0,0,0.06);
    --light-border-tertiary: rgba(0,0,0,0.12);
    --light-shadow: 0 3px 12px rgba(0,0,0,0.08), 0 1px 4px rgba(0,0,0,0.05);
    --light-surface: #f1f3f4;
    --light-surface-secondary: #f5f7f9;
    --light-surface-tertiary: #f8f9fa;
    --light-primary: #1a73e8;
    --light-primary-hover: #1967d2;
    --light-primary-surface: #e8f0fe;
    --light-success: #34a853;
    --light-error: #ea4335;
    --light-warning: #fbbc04;
    
    /* Dark theme variables */
    --dark-bg: #1e1e1e;
    --dark-text: #e8eaed;
    --dark-text-secondary: #9aa0a6;
    --dark-text-tertiary: #dadce0;
    --dark-border: rgba(255,255,255,0.03);
    --dark-border-secondary: rgba(255,255,255,0.05);
    --dark-border-tertiary: rgba(255,255,255,0.12);
    --dark-shadow: 0 3px 12px rgba(0,0,0,0.25), 0 1px 4px rgba(0,0,0,0.15);
    --dark-surface: #2d2d2d;
    --dark-surface-secondary: #282828;
    --dark-surface-tertiary: #1e1e1e;
    --dark-primary: #8ab4f8;
    --dark-primary-hover: #7ba9f0;
    --dark-primary-surface: #174ea6;
    --dark-success: #34a853;
    --dark-error: #f28b82;
    --dark-warning: #ffcb6b;
    
    /* Common variables */
    --font-mono: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    --font-system: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
    --border-radius: 8px;
    --border-radius-sm: 4px;
    --border-radius-lg: 10px;
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 12px;
    --spacing-lg: 16px;
    --spacing-xl: 18px;
    --spacing-xxl: 20px;
    --transition-fast: 0.15s ease;
    --transition-normal: 0.2s ease;
    --transition-slow: 0.25s ease-in-out;
  }

  /* Base styles with CSS variables and GPU acceleration */
  .function-block {
    margin: var(--spacing-xxl) 0;
    padding: var(--spacing-xl);
    border-radius: var(--border-radius-lg);
    font-family: var(--font-system);
    position: relative;
    transition: all var(--transition-slow);
    will-change: transform, opacity, box-shadow;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    perspective: 1000px;
    box-sizing: border-box;
    overflow: hidden;
    width: 100%;
    min-width: 0;
  }
  
  /* Theme-specific styles using CSS variables */
  .function-block.theme-light,
  .function-block:not(.theme-dark) {
    background: var(--light-bg);
    color: var(--light-text);
    box-shadow: var(--light-shadow);
    border: 1px solid var(--light-border);
  }
  
  .function-block.theme-dark {
    background: var(--dark-bg);
    color: var(--dark-text);
    box-shadow: var(--dark-shadow);
    border: 1px solid var(--dark-border);
  }
  
  /* Optimized stabilized blocks */
  .function-block-stabilized {
    position: fixed !important;
    z-index: 1000 !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
    transform: translate3d(0,0,0); /* Hardware acceleration */
  }
  
  /* Optimized function name styles - Always visible header */
  .function-name {
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: var(--spacing-lg);
    position: relative;
    width: 100%;
    max-width: 100%;
    line-height: 1.4;
    padding: 12px;
    margin-bottom: 0;
    transition: all var(--transition-normal);
    cursor: pointer;
    border-radius: var(--border-radius-md) var(--border-radius-md) 0 0;
    will-change: transform, opacity, background-color;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    box-sizing: border-box;
    overflow: hidden;
  }
  
  /* Left section of function header (function name) */
  .function-name-left {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex: 1;
    min-width: 0; /* Allow text truncation */
    max-width: 100%;
    overflow: hidden;
    will-change: transform;
    transform: translate3d(0, 0, 0);
  }
  
  /* Right section of function header (expand button + call-id) */
  .function-name-right {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex-shrink: 0;
    max-width: 40%;
    overflow: hidden;
    will-change: transform;
    transform: translate3d(0, 0, 0);
  }
  
  /* Collapsed state - rounded corners all around */
  .function-block:not(.expanded) .function-name {
    border-radius: var(--border-radius-md);
    margin-bottom: 0;
  }
  
  /* Expanded state - rounded top corners only */
  .function-block.expanded .function-name {
    border-radius: var(--border-radius-md) var(--border-radius-md) 0 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  /* Optimized expand button styles */
  .expand-button {
    background: none;
    border: 1px solid rgba(0, 0, 0, 0.1);
    cursor: pointer;
    padding: 6px;
    border-radius: var(--border-radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-normal);
    opacity: 0.8;
    will-change: transform, opacity, box-shadow;
    min-width: 28px;
    height: 28px;
    margin-left: var(--spacing-sm);
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
  }
  
  .expand-button:hover {
    opacity: 1;
    transform: scale(1.05) translate3d(0, 0, 0);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  }
  
  .expand-button:active {
    transform: scale(0.95) translate3d(0, 0, 0);
  }
  
  .expand-button svg {
    transition: transform var(--transition-normal);
    will-change: transform;
  }
  
  /* Consolidated expand button theme styles */
  .function-block.theme-light .expand-button,
  .function-block:not(.theme-dark) .expand-button {
    color: var(--light-text-secondary);
    border-color: rgba(26, 115, 232, 0.2);
    background-color: rgba(26, 115, 232, 0.05);
  }
  
  .function-block.theme-light .expand-button:hover,
  .function-block:not(.theme-dark) .expand-button:hover {
    color: var(--light-primary);
    background-color: rgba(26, 115, 232, 0.1);
    border-color: rgba(26, 115, 232, 0.4);
  }
  
  .function-block.theme-dark .expand-button {
    color: var(--dark-text-secondary);
    border-color: rgba(138, 180, 248, 0.2);
    background-color: rgba(138, 180, 248, 0.05);
  }
  
  .function-block.theme-dark .expand-button:hover {
    color: var(--dark-primary);
    background-color: rgba(138, 180, 248, 0.1);
    border-color: rgba(138, 180, 248, 0.4);
  }
  
  /* Optimized expandable content with smooth animations */
  .expandable-content {
    overflow: hidden;
    width: 100%;
    box-sizing: border-box;
    transition: max-height 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), 
                opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                padding 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                border-color 0.4s ease-out;
    will-change: max-height, opacity, padding;
    border: 1px solid transparent;
    border-top: none;
    border-radius: 0 0 var(--border-radius-md) var(--border-radius-md);
    background-color: rgba(0, 0, 0, 0.02);
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    max-height: 0;
    opacity: 0;
    padding: 0 12px;
  }
  
  .function-block:not(.expanded) .expandable-content {
    max-height: 0;
    opacity: 0;
    padding: 0 12px;
    border-color: transparent;
  }
  
  .function-block.expanded .expandable-content {
    max-height: 2000px; /* Large enough to accommodate content */
    opacity: 1;
    padding: 12px;
  }
  
  /* Theme styles for expandable content */
  .function-block.theme-light .expandable-content,
  .function-block:not(.theme-dark) .expandable-content {
    background-color: rgba(26, 115, 232, 0.02);
    border-color: rgba(26, 115, 232, 0.2);
  }
  
  .function-block.theme-dark .expandable-content {
    background-color: rgba(138, 180, 248, 0.02);
    border-color: rgba(138, 180, 248, 0.2);
  }
  
  /* Consolidated theme styles for function name */
  .function-block.theme-light .function-name,
  .function-block:not(.theme-dark) .function-name {
    color: var(--light-primary);
    background-color: rgba(26, 115, 232, 0.05);
    border: 1px solid rgba(26, 115, 232, 0.2);
  }
  
  .function-block.theme-dark .function-name {
    color: var(--dark-primary);
    background-color: rgba(138, 180, 248, 0.05);
    border: 1px solid rgba(138, 180, 248, 0.2);
  }
  
  /* Expanded state border styling */
  .function-block.expanded.theme-light .function-name,
  .function-block.expanded:not(.theme-dark) .function-name {
    border-bottom-color: rgba(26, 115, 232, 0.3);
  }
  
  .function-block.expanded.theme-dark .function-name {
    border-bottom-color: rgba(138, 180, 248, 0.3);
  }
  
  /* Hover effect for function name */
  .function-name:hover {
    opacity: 0.8;
    transform: translateY(-1px) translate3d(0, 0, 0);
  }
  
  /* Function name text styling */
  .function-name-text {
    font-weight: inherit;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    min-width: 0;
    will-change: transform;
    transform: translate3d(0, 0, 0);
  }
  
  /* Call ID styling */
  .call-id {
    font-size: 0.85em;
    opacity: 0.7;
    font-weight: 400;
    background-color: rgba(0, 0, 0, 0.05);
    padding: 2px 6px;
    border-radius: var(--border-radius-sm);
    font-family: monospace;
    flex-shrink: 0;
    transition: opacity var(--transition-normal);
    will-change: opacity;
    transform: translate3d(0, 0, 0);
  }
  
  /* Consolidated call ID theme styles */
  .function-block.theme-light .call-id,
  .function-block:not(.theme-dark) .call-id {
    background-color: rgba(26, 115, 232, 0.1);
    color: var(--light-text-secondary);
  }
  
  .function-block.theme-dark .call-id {
    background-color: rgba(138, 180, 248, 0.1);
    color: var(--dark-text-secondary);
  }
  
  .function-block:hover .call-id {
    opacity: 1;
    transform: scale(1.02) translate3d(0, 0, 0);
  }
  
  /* Optimized parameter styles */
  .param-name {
    font-weight: 500;
    margin-top: 14px;
    margin-bottom: 6px;
    padding-left: 2px;
    font-size: 14px;
    display: flex;
    align-items: center;
    contain: layout style;
    will-change: opacity;
    transform: translate3d(0, 0, 0);
  }
  
  /* Consolidated parameter name theme styles */
  .function-block.theme-light .param-name,
  .function-block:not(.theme-dark) .param-name {
    color: var(--light-text);
  }
  
  .function-block.theme-dark .param-name {
    color: var(--dark-text);
  }
  
  /* Optimized parameter value with hardware acceleration */
  .param-value {
    padding: var(--spacing-md) 14px;
    border-radius: var(--border-radius);
    font-family: var(--font-mono);
    white-space: pre-wrap;
    overflow: auto;
    font-size: 13px;
    line-height: 1.5;
    max-height: 300px;
    scrollbar-width: thin;
    position: relative;
    pointer-events: auto !important;
    transition: background-color var(--transition-normal), border-color var(--transition-normal);
    border: 1px solid transparent;
    contain: layout style;
    transform: translate3d(0,0,0); /* Hardware acceleration for scrolling */
  }

  /* Specific styles for system message content */
  .system-message-content {
    white-space: pre-wrap !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    font-family: var(--font-system) !important;
  }

  /* Specific styles for function result content */
  .function-result-content {
    white-space: pre-wrap !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
  }

  /* Ensure all text content in function results preserves newlines */
  .function-result-text {
    white-space: pre-wrap !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
  }
  
  /* Optimized scrollbar styles */
  .param-value::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .param-value::-webkit-scrollbar-track {
    background: transparent;
    margin: var(--spacing-xs);
  }
  
  .param-value::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.15);
    border-radius: 20px;
    transition: background-color var(--transition-normal);
  }
  
  .param-value::-webkit-scrollbar-thumb:hover {
    background-color: rgba(0, 0, 0, 0.25);
  }
  
  /* Dark theme scrollbar */
  .function-block.theme-dark .param-value::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.15);
  }
  
  .function-block.theme-dark .param-value::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, 0.25);
  }
  
  /* Consolidated parameter value theme styles */
  .function-block.theme-light .param-value,
  .function-block:not(.theme-dark) .param-value {
    background-color: var(--light-surface-secondary);
    border-color: var(--light-border-secondary);
    color: var(--light-text);
  }
  
  .function-block.theme-dark .param-value {
    background-color: var(--dark-surface-secondary);
    border-color: var(--dark-border-secondary);
    color: var(--dark-text);
  }
  
  /* Optimized large content styles */
  .large-content {
    position: relative;
    contain: layout;
  }
  
  .large-content::after,
  .content-truncated {
    display: none;
  }
  
  /* Optimized streaming parameter styles with hardware acceleration */
  .param-value[data-streaming="true"] {
    padding: 0;
    overflow: auto;
    display: flex;
    flex-direction: column;
    max-height: 300px;
    border-color: rgba(26, 115, 232, 0.3);
    animation: subtle-pulse 2s infinite ease-in-out;
    will-change: border-color;
    transform: translate3d(0,0,0);
    scroll-behavior: smooth !important;
  }
  
  /* Enhanced streaming content structure */
  .param-value[data-streaming="true"] .content-wrapper {
    flex: 1;
    overflow: hidden;
    position: relative;
    min-height: 50px;
  }
  
  /* Optimized streaming pre element */
  .param-value[data-streaming="true"] > pre,
  .param-value[data-streaming="true"] .content-wrapper > pre {
    margin: 0;
    padding: var(--spacing-md) 14px;
    overflow: auto;
    max-height: 300px;
    flex: 1;
    font-family: var(--font-mono);
    font-size: 13px;
    line-height: 1.5;
    white-space: pre-wrap;
    background-color: inherit;
    color: inherit !important;
    border: none;
    scroll-behavior: smooth;
    contain: layout style;
    transform: translate3d(0,0,0);
    width: 100%;
    min-height: inherit;
  }
  
  /* Enhanced scrollbar for streaming content */
  .param-value[data-streaming="true"]::-webkit-scrollbar,
  .param-value[data-streaming="true"] pre::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .param-value[data-streaming="true"]::-webkit-scrollbar-track,
  .param-value[data-streaming="true"] pre::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 3px;
  }
  
  .param-value[data-streaming="true"]::-webkit-scrollbar-thumb,
  .param-value[data-streaming="true"] pre::-webkit-scrollbar-thumb {
    background: rgba(0, 212, 255, 0.5);
    border-radius: 3px;
    transition: background 0.2s ease;
  }
  
  .param-value[data-streaming="true"]::-webkit-scrollbar-thumb:hover,
  .param-value[data-streaming="true"] pre::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 212, 255, 0.8);
  }
  
  /* Dark theme scrollbar for streaming */
  .function-block.theme-dark .param-value[data-streaming="true"]::-webkit-scrollbar-track,
  .function-block.theme-dark .param-value[data-streaming="true"] pre::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
  }
  
  .function-block.theme-dark .param-value[data-streaming="true"]::-webkit-scrollbar-thumb,
  .function-block.theme-dark .param-value[data-streaming="true"] pre::-webkit-scrollbar-thumb {
    background: rgba(138, 180, 248, 0.5);
  }
  
  .function-block.theme-dark .param-value[data-streaming="true"]::-webkit-scrollbar-thumb:hover,
  .function-block.theme-dark .param-value[data-streaming="true"] pre::-webkit-scrollbar-thumb:hover {
    background: rgba(138, 180, 248, 0.8);
  }
  
  /* Optimized streaming indicator */
  .streaming-param-name {
    position: relative;
    display: flex;
    align-items: center;
    contain: layout style;
  }
  
  .streaming-param-name::before {
    content: "";
    margin-right: var(--spacing-sm);
    width: var(--spacing-sm);
    height: var(--spacing-sm);
    border-radius: 50%;
    background-color: var(--light-primary);
    animation: pulse 1.5s infinite ease-in-out;
    pointer-events: none;
    flex-shrink: 0;
    will-change: opacity;
  }
  
  .function-block.theme-dark .streaming-param-name::before {
    background-color: var(--dark-primary);
  }
  
  /* Optimized stalled indicator styles */
  .stalled-indicator {
    margin-top: 10px;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--border-radius-sm);
    font-size: 14px;
    animation: fadeIn 0.3s ease-in-out;
    contain: layout style;
  }
  
  .stalled-indicator[data-pre-existing="true"] {
    background-color: rgba(180, 180, 180, 0.1);
    border: 1px solid rgba(180, 180, 180, 0.3);
    color: #555;
  }
  
  /* Consolidated stalled indicator theme styles */
  .function-block.theme-light .stalled-indicator,
  .function-block:not(.theme-dark) .stalled-indicator {
    background-color: rgba(255, 200, 0, 0.1);
    border: 1px solid rgba(255, 200, 0, 0.3);
    color: #664d00;
  }
  
  .function-block.theme-dark .stalled-indicator {
    background-color: rgba(255, 200, 0, 0.15);
    border: 1px solid rgba(255, 200, 0, 0.3);
    color: var(--dark-warning);
  }
  
  .stalled-message {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-family: var(--font-system);
  }
  
  .stalled-message svg {
    flex-shrink: 0;
  }
  
  .stalled-retry-button {
    margin-top: var(--spacing-sm);
    padding: var(--spacing-xs) 10px;
    background-color: rgba(255, 200, 0, 0.2);
    border: 1px solid rgba(255, 200, 0, 0.4);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    font-size: var(--spacing-md);
    color: #664d00;
    font-family: var(--font-system);
    transition: background-color var(--transition-normal);
  }
  
  .stalled-retry-button:hover {
    background-color: rgba(255, 200, 0, 0.3);
  }
  
  /* Optimized keyframe animations */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-4px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes pulse {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 1; }
  }
  
  /* Optimized incomplete tag */
  .incomplete-tag {
    border-left: 3px dashed var(--light-primary) !important;
    background-color: var(--light-primary-surface) !important;
  }
  
  .function-block.theme-dark .incomplete-tag {
    border-left: 3px dashed var(--dark-primary) !important;
    background-color: var(--dark-primary-surface) !important;
  }
  
  /* Optimized button container */
  .function-buttons {
    display: flex;
    gap: var(--spacing-md);
    margin-top: var(--spacing-xl);
    justify-content: flex-start;
    align-items: center;
    contain: layout;
    will-change: transform;
    transform: translate3d(0, 0, 0);
  }

  /* Unified button base styles */
  .raw-toggle,
  .execute-button,
  .insert-result-button,
  .attach-file-button {
    padding: var(--spacing-sm) var(--spacing-lg);
    border-radius: var(--border-radius-sm);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-normal);
    box-shadow: 0 1px 3px rgba(0,0,0,0.12);
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    will-change: transform, box-shadow;
    contain: layout style;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
  }
  
  /* Optimized active states with hardware acceleration */
  .execute-button:active,
  .insert-result-button:active,
  .attach-file-button:active,
  .raw-toggle:active {
    transform: translateY(1px) translate3d(0,0,0);
    box-shadow: 0 0 1px rgba(0,0,0,0.12);
  }
  
  /* Consolidated raw toggle theme styles */
  .function-block.theme-light .raw-toggle,
  .function-block:not(.theme-dark) .raw-toggle {
    background: var(--light-surface);
    color: var(--light-text-secondary);
    border: 1px solid var(--light-border-tertiary);
  }
  
  .function-block.theme-light .raw-toggle:hover,
  .function-block:not(.theme-dark) .raw-toggle:hover {
    background: #e8eaed;
    color: var(--light-text);
  }
  
  .function-block.theme-dark .raw-toggle {
    background: var(--dark-surface);
    color: var(--dark-text-tertiary);
    border: 1px solid var(--dark-border-tertiary);
  }
  
  .function-block.theme-dark .raw-toggle:hover {
    background: #3c4043;
    color: var(--dark-text);
  }
  
  /* Consolidated primary button styles - light theme */
  .function-block.theme-light .execute-button,
  .function-block:not(.theme-dark) .execute-button,
  .function-block.theme-light .insert-result-button,
  .function-block.theme-light .attach-file-button,
  .function-block:not(.theme-dark) .insert-result-button,
  .function-block:not(.theme-dark) .attach-file-button {
    background: var(--light-primary);
    color: white;
    background-image: linear-gradient(to bottom, var(--light-primary), var(--light-primary-hover));
  }
  
  .function-block.theme-light .execute-button:hover,
  .function-block:not(.theme-dark) .execute-button:hover,
  .function-block.theme-light .insert-result-button:hover,
  .function-block.theme-light .attach-file-button:hover,
  .function-block:not(.theme-dark) .insert-result-button:hover,
  .function-block:not(.theme-dark) .attach-file-button:hover {
    background: var(--light-primary-hover);
    background-image: linear-gradient(to bottom, var(--light-primary-hover), #1765cc);
  }
  
  /* Consolidated primary button styles - dark theme */
  .function-block.theme-dark .execute-button,
  .function-block.theme-dark .insert-result-button,
  .function-block.theme-dark .attach-file-button {
    background: var(--dark-primary);
    color: var(--light-text);
    background-image: linear-gradient(to bottom, var(--dark-primary), var(--dark-primary-hover));
  }
  
  .function-block.theme-dark .execute-button:hover,
  .function-block.theme-dark .insert-result-button:hover,
  .function-block.theme-dark .attach-file-button:hover {
    background: var(--dark-primary-hover);
    background-image: linear-gradient(to bottom, var(--dark-primary-hover), #6ca0e8);
  }
  
  /* Optimized function results panel */
  .mcp-function-results-panel,
  .xml-results-panel {
    border-radius: 6px;
    margin-top: 10px;
    overflow: auto;
    font-family: var(--font-mono);
    font-size: 13px;
    line-height: 1.5;
    contain: layout style;
    transform: translate3d(0,0,0);
    will-change: transform, opacity;
    transition: all var(--transition-normal);
  }
  
  .mcp-function-results-panel:hover,
  .xml-results-panel:hover {
    transform: scale(1.005) translate3d(0, 0, 0);
  }
  
  /* Consolidated results panel theme styles */
  .function-block.theme-light .mcp-function-results-panel,
  .function-block.theme-light .xml-results-panel,
  .function-block:not(.theme-dark) .mcp-function-results-panel,
  .function-block:not(.theme-dark) .xml-results-panel {
    background-color: var(--light-surface-tertiary);
    border: 1px solid #eaecef;
    color: var(--light-text);
    box-shadow: 0 2px 6px rgba(0,0,0,0.04);
    margin-top: var(--spacing-md);
  }
  
  .function-block.theme-dark .mcp-function-results-panel,
  .function-block.theme-dark .xml-results-panel {
    background-color: var(--dark-surface-tertiary);
    border: 1px solid var(--dark-border);
    color: var(--dark-text);
    box-shadow: var(--dark-shadow);
    margin-top: var(--spacing-md);
  }
  
  .function-results-loading {
    padding: 10px;
    color: var(--light-text-secondary);
    font-style: italic;
  }
  
  .function-result-success pre {
    margin: 0;
    padding: 10px;
    white-space: pre-wrap;
    word-break: break-word;
  }
  
  /* Consolidated error theme styles */
  .function-block.theme-light .function-result-error,
  .function-block:not(.theme-dark) .function-result-error {
    padding: 10px;
    color: var(--light-error);
    background-color: rgba(211, 47, 47, 0.05);
    border-radius: var(--border-radius-sm);
  }
  
  .function-block.theme-dark .function-result-error {
    color: var(--dark-error);
    background-color: rgba(242, 139, 130, 0.1);
  }
  
  /* Consolidated language tag theme styles */
  .function-block.theme-light .language-tag,
  .function-block:not(.theme-dark) .language-tag {
    background: var(--light-primary-surface);
    color: var(--light-primary);
  }
  
  .function-block.theme-dark .language-tag {
    background: var(--dark-primary-surface);
    color: var(--dark-text);
  }
  
  .language-tag {
    display: inline-block;
    padding: 2px 6px;
    border-radius: var(--border-radius-sm);
    font-size: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
    font-family: var(--font-system);
    contain: layout style;
    will-change: transform;
    transform: translate3d(0, 0, 0);
    transition: all var(--transition-normal);
  }
  
  .language-tag:hover {
    transform: scale(1.02) translate3d(0, 0, 0);
  }
  
  /* Optimized XML pre element */
  .xml-pre {
    white-space: pre-wrap;
    margin: 0;
    padding: var(--spacing-md);
    font-family: inherit;
    font-size: 13px;
    line-height: 1.5;
    contain: layout style;
  }
  
  /* Optimized spinner with hardware acceleration for function name */
  .spinner {
    display: inline-block;
    width: 14px;
    height: 14px;
    border: 2px solid rgba(26, 115, 232, 0.3);
    border-top: 2px solid var(--light-primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    flex-shrink: 0;
    will-change: transform;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    contain: layout style;
  }
  
  .function-block.theme-dark .spinner {
    border: 2px solid rgba(138, 180, 248, 0.3);
    border-top: 2px solid var(--dark-primary);
  }
  
  /* Optimized mobile layout with efficient media query */
  @media (max-width: 768px) {
    .function-block {
      padding: 14px;
      margin: 15px 0;
    }
    .function-name {
      font-size: 15px;
      padding-bottom: var(--spacing-sm);
      margin-bottom: var(--spacing-md);
    }
    .param-name {
      font-size: 13px;
      margin-top: var(--spacing-md);
      margin-bottom: var(--spacing-xs);
    }
    .param-value {
      max-height: 200px;
      padding: 10px var(--spacing-md);
      font-size: 12.5px;
    }
    .call-id {
      font-size: 0.8em;
      padding: 2px 6px;
    }
  }
  
  /* Optimized spinner with hardware acceleration */
  .function-spinner {
    display: inline-block;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    flex-shrink: 0;
    will-change: transform;
    contain: layout style;
  }
  
  /* Consolidated spinner theme styles */
  .function-block.theme-light .function-spinner,
  .function-block:not(.theme-dark) .function-spinner {
    border: 2px solid rgba(26,115,232,0.3);
    border-top: 2px solid var(--light-primary);
  }
  
  .function-block.theme-dark .function-spinner {
    border: 2px solid rgba(138, 180, 248, 0.3);
    border-top: 2px solid var(--dark-primary);
  }
  
  /* Optimized keyframe with transform3d */
  @keyframes spin {
    0% { transform: rotate(0deg) translate3d(0,0,0); }
    100% { transform: rotate(360deg) translate3d(0,0,0); }
  }
  
  .function-loading .function-name {
    position: relative;
  }
  
  /* Optimized insert button container */
  .insert-button-container {
    margin-top: 10px;
    margin-bottom: 10px;
    display: flex;
    justify-content: flex-end;
    contain: layout;
  }
  
  .insert-result-button {
    padding: var(--spacing-xs) var(--spacing-md);
  }
  
  /* Optimized button state styles */
  .insert-result-button.insert-success,
  .attach-file-button.attach-success {
    background: var(--light-success) !important;
    color: white !important;
  }
  
  .insert-result-button.insert-error,
  .attach-file-button.attach-error {
    background: var(--light-error) !important;
    color: white !important;
  }
  
  .attach-file-button {
    padding: var(--spacing-xs) var(--spacing-md);
    margin-left: 6px;
  }
  
  /* Optimized content transitions with hardware acceleration */
  .function-content-wrapper {
    position: relative;
    width: 100%;
    transition: opacity var(--transition-normal), transform var(--transition-normal);
    will-change: opacity, transform;
    contain: layout;
  }
  
  .function-content-new {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
  }
  
  [data-smooth-updating] {
    position: relative;
  }
  
  /* Optimized function history panel */
  .function-history-panel {
    margin-top: 10px;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--border-radius-sm);
    font-size: 0.9em;
    contain: layout style;
  }
  
  /* Consolidated history panel theme styles */
  .function-block.theme-light .function-history-panel,
  .function-block:not(.theme-dark) .function-history-panel {
    background-color: var(--light-surface-tertiary);
    border: 1px solid #dadce0;
    color: var(--light-text);
  }
  
  .function-block.theme-dark .function-history-panel {
    background-color: var(--dark-surface);
    border: 1px solid var(--light-text-secondary);
    color: var(--dark-text);
  }
  
  .function-history-header {
    font-weight: bold;
    margin-bottom: 5px;
  }
  
  .function-execution-info {
    margin-bottom: var(--spacing-sm);
    line-height: 1.4;
  }
  
  /* Base re-execute button styles */
  .function-reexecute-button {
    border: none;
    padding: var(--spacing-sm) var(--spacing-lg);
    border-radius: var(--border-radius-sm);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-normal);
    box-shadow: 0 1px 3px rgba(0,0,0,0.12);
    display: flex;
    align-items: center;
    justify-content: center;
    will-change: transform, box-shadow;
    contain: layout style;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    min-height: 32px;
    min-width: 80px;
  }

  .function-reexecute-button:active {
    transform: translateY(1px) translate3d(0,0,0);
    box-shadow: 0 0 1px rgba(0,0,0,0.12);
  }

  /* Consolidated re-execute button theme styles */
  .function-block.theme-light .function-reexecute-button,
  .function-block:not(.theme-dark) .function-reexecute-button {
    background: var(--light-primary);
    color: white;
    background-image: linear-gradient(to bottom, var(--light-primary), var(--light-primary-hover));
  }
  
  .function-block.theme-light .function-reexecute-button:hover,
  .function-block:not(.theme-dark) .function-reexecute-button:hover {
    background: var(--light-primary-hover);
    background-image: linear-gradient(to bottom, var(--light-primary-hover), #1765cc);
  }
  
  .function-block.theme-dark .function-reexecute-button {
    background: var(--dark-primary);
    color: var(--light-text);
    background-image: linear-gradient(to bottom, var(--dark-primary), var(--dark-primary-hover));
  }
  
  .function-block.theme-dark .function-reexecute-button:hover {
    background: var(--dark-primary-hover);
    background-image: linear-gradient(to bottom, var(--dark-primary-hover), #6ca0e8);
  }
`;let xx=null;if(typeof window<"u"&&window.trustedTypes&&window.trustedTypes.createPolicy)try{xx=window.trustedTypes.createPolicy("scriptSanitizerPolicy",{createHTML:h=>h})}catch(h){window.trustedTypes&&window.trustedTypes.policies&&(xx=window.trustedTypes.policies.get("scriptSanitizerPolicy")||null),!xx&&console&&console.warn('Could not create or retrieve Trusted Types policy "scriptSanitizerPolicy".',h)}const UM=(h,u)=>{let n=null;return(...r)=>{const s=()=>{n=null,h(...r)};n!==null&&clearTimeout(n),n=setTimeout(s,u)}};typeof window<"u"&&(window.themeControl={forceLight:()=>{const{forceThemeMode:h,clearCachedTheme:u}=require("./themeDetector");h("light"),console.debug("Forced light theme. Refresh the page to see changes.")},forceDark:()=>{const{forceThemeMode:h,clearCachedTheme:u}=require("./themeDetector");h("dark"),console.debug("Forced dark theme. Refresh the page to see changes.")},useSystem:()=>{const{forceThemeMode:h,clearCachedTheme:u}=require("./themeDetector");h("system"),console.debug("Using system theme preference. Refresh the page to see changes.")},reset:()=>{const{clearCachedTheme:h}=require("./themeDetector");h(),console.debug("Theme detection reset. Refresh the page to see changes.")},detect:()=>{const{detectHostTheme:h,isDarkTheme:u}=require("./themeDetector"),n=h(),r=u();return console.debug(`Detected theme: ${n}`),console.debug(`Using ${r?"dark":"light"} theme`),{theme:n,isDark:r}}},console.debug("[Theme Detector] Global theme control available via window.themeControl"));const Sx=new WeakSet,PM=new Map,dE=h=>{const u=document.createElement("div");return u.className=h,u.style.width="100%",u.style.boxSizing="border-box",u.style.whiteSpace="pre-wrap",u.style.wordBreak="break-word",Iv()?(u.style.backgroundColor="#2d2d2d",u.style.border="1px solid rgba(255, 255, 255, 0.1)",u.style.color="#e8eaed"):(u.style.backgroundColor="#f8f9fa",u.style.border="1px solid rgba(0, 0, 0, 0.1)",u.style.color="#202124"),u},fE=()=>{const h=document.createElement("div");return h.className="expandable-content",h.style.overflow="hidden",h.style.maxHeight="0px",h.style.opacity="0",h.style.padding="0 12px",h.style.width="100%",h.style.boxSizing="border-box",h.style.transition="all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",h},gE=h=>{const u=document.createElement("div");u.className=h.className.includes("system")?"function-name system-header":"function-name";const n=document.createElement("div");n.className="function-name-left";const r=document.createElement("div");r.className="function-name-text",r.textContent=h.headerText,n.appendChild(r);const s=document.createElement("div");if(s.className="function-name-right",h.callId){const p=document.createElement("div");p.className="call-id",p.textContent=h.callId,s.appendChild(p)}const d=document.createElement("button");return d.className="expand-button",d.innerHTML=`
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M8 10l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  `,d.title=h.expandTitle,s.appendChild(d),u.appendChild(n),u.appendChild(s),{header:u,expandButton:d}},hE=(h,u,n,r)=>{n.onclick=s=>{s.preventDefault(),s.stopPropagation();const d=h.classList.contains("expanded"),p=n.querySelector("svg path");if(d){h.classList.remove("expanded");const v=u.scrollHeight;u.style.maxHeight=v+"px",u.offsetHeight,requestAnimationFrame(()=>{u.style.maxHeight="0px",u.style.opacity="0",u.style.paddingTop="0",u.style.paddingBottom="0",p&&p.setAttribute("d","M8 10l4 4 4-4"),n.title=r.expandTitle})}else{h.classList.add("expanded"),u.style.display="block",u.style.maxHeight="0px",u.style.opacity="0",u.style.paddingTop="0",u.style.paddingBottom="0";const v=u.scrollHeight+24;requestAnimationFrame(()=>{u.style.maxHeight=v+"px",u.style.opacity="1",u.style.paddingTop="12px",u.style.paddingBottom="12px",p&&p.setAttribute("d","M16 14l-4-4-4 4"),n.title=r.collapseTitle})}}},pE=(h,u)=>{const n=document.createElement("div");return n.className=h,n.setAttribute("data-block-id",u),n.style.width="100%",n.style.boxSizing="border-box",De.useHostTheme&&(yx(n),Iv()?n.classList.add("theme-dark"):n.classList.add("theme-light")),n},mE=(h,u)=>{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(u)},$M=(h,u)=>{try{const n=`system-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;h.setAttribute("data-block-id",n);const r=pE("function-block system-message-container",n),s={blockId:n,className:"system-message-container",headerText:"MCP SuperAssistant",expandTitle:"Expand system message",collapseTitle:"Collapse system message"},{header:d,expandButton:p}=gE(s),v=fE(),w=dE("param-value system-message-content");Iv()?w.style.border="solid rgba(255, 255, 255, 0.1)":w.style.border="solid rgba(0, 0, 0, 0.1)",w.style.whiteSpace="pre-wrap",w.style.wordBreak="break-word",w.style.overflowWrap="break-word",w.style.fontFamily='var(--font-system), -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',w.textContent=u,v.appendChild(w),hE(r,v,p,s),r.appendChild(d),r.appendChild(v),mE(h,r)}catch(n){console.error("[renderSystemMessageBox] Error rendering system message:",n)}},_M=(h,u)=>{try{const n=JSON.parse(h);if(n&&n.content&&Array.isArray(n.content))n.content.forEach(r=>{if(r.type==="text"){const s=document.createElement("div");s.className="function-result-text",s.style.margin="0 0 10px 0",s.style.whiteSpace="pre-wrap",s.style.wordBreak="break-word",s.textContent=r.text,u.appendChild(s)}else if(r.type==="image"&&r.url){const s=document.createElement("div");s.className="function-result-image",s.style.margin="10px 0";const d=document.createElement("img");d.src=r.url,d.alt=r.alt||"Image",d.style.maxWidth="100%",d.style.borderRadius="4px",s.appendChild(d),u.appendChild(s)}else if(r.type==="code"&&r.code){const s=document.createElement("div");s.className="function-result-code",s.style.margin="10px 0",s.style.backgroundColor="rgba(0, 0, 0, 0.05)",s.style.borderRadius="4px",s.style.padding="10px";const d=document.createElement("pre");d.style.margin="0",d.style.whiteSpace="pre-wrap",d.style.wordBreak="break-word",d.style.fontFamily="monospace",d.textContent=r.code,s.appendChild(d),u.appendChild(s)}else{const s=document.createElement("div");s.className="function-result-unknown",s.style.margin="5px 0",s.style.fontFamily="monospace",s.style.fontSize="12px",s.textContent=JSON.stringify(r,null,2),u.appendChild(s)}});else{const r=document.createElement("pre");r.style.margin="0",r.style.whiteSpace="pre-wrap",r.style.wordBreak="break-word",r.style.fontFamily="monospace",r.textContent=JSON.stringify(n,null,2),u.appendChild(r)}}catch{u.style.whiteSpace="pre-wrap",u.style.wordBreak="break-word",u.textContent=h}},jM=(h,u)=>{const n=pE("function-block "+h.className,h.blockId),{header:r,expandButton:s}=gE(h),d=fE();return d.appendChild(u),hE(n,d,s,h),n.appendChild(r),n.appendChild(d),n},LM=(h,u)=>{try{if(Sx.has(h))return!1;Sx.add(h);const n=h.textContent||"";if(n.includes("<SYSTEM>")||n.includes("</SYSTEM>")){const d=n;if(d){const p=d.trim();return $M(h,p),!0}}if(!n.includes("<function_result")&&!n.includes("</function_result>"))return!1;const r=`result-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;h.setAttribute("data-block-id",r);let s="";try{const d=n.match(/<function_result[^>]*>([\s\S]*?)<\/function_result>/);d&&d[1]&&(s=d[1].trim());const p=n.match(/call_id="([^"]*)"/),v=p?p[1]:"",w={blockId:r,className:"function-result-container",headerText:"Function Result",expandTitle:"Expand function result",collapseTitle:"Collapse function result",callId:v},S=dE("param-value function-result-content");_M(s,S);const k=jM(w,S);return mE(h,k),PM.set(r,k),!0}catch(d){return console.error("Error parsing function result:",d),!1}}catch(n){return console.error("Error rendering function result:",n),!1}finally{u.current=!1}},wf=new Map,Uv=new Map,Vs=new Map,BM=!1,wx=new Set,Pv=new Set,$v=new Map,bE={allFunctionPatterns:/(<function_calls>|<\/function_calls>|<invoke[^>]*>|<\/invoke>|<parameter[^>]*>|<\/parameter>)/g},cp=new Map,HM=50;typeof window<"u"&&(window.resyncingBlocks=Pv);const up={functionStart:/<function_calls>/,invokeStart:/<invoke\s+name="[^"]*"/,parameterStart:/<parameter\s+name="[^"]*">/,anyClosingTag:/<\/(?:function_calls|invoke|parameter)>/,significantChunk:/(<function_calls>|<invoke|<parameter|<\/)/},vE=new Map,FM=(h,u)=>{const n=lM(u);if(n.length>0){const r=vE.get(h)||new Map;n.forEach(s=>{const d=r.get(s.name)||"";s.value.length>d.length&&r.set(s.name,s.value)}),vE.set(h,r),De.debug&&console.debug(`Cached parameter content for ${h}:`,Array.from(r.entries()))}},qM=(h,u="")=>{const n=h.slice(u.length);return n.length===0?{hasNewChunk:!1,chunkType:null,isSignificant:!1}:up.functionStart.test(n)?{hasNewChunk:!0,chunkType:"function_start",isSignificant:!0}:up.invokeStart.test(n)?{hasNewChunk:!0,chunkType:"invoke",isSignificant:!0}:up.parameterStart.test(n)?{hasNewChunk:!0,chunkType:"parameter",isSignificant:!0}:up.anyClosingTag.test(n)?{hasNewChunk:!0,chunkType:"closing",isSignificant:!0}:up.significantChunk.test(n)||n.length>20?{hasNewChunk:!0,chunkType:"content",isSignificant:n.length>20}:{hasNewChunk:!1,chunkType:null,isSignificant:!1}},yE=new Map,GM=(h,u,n)=>{if(!n.hasNewChunk||!n.isSignificant)return;const r=document.querySelector(`pre[data-block-id="${h}"]`);if(!r||$v.has(h)||Pv.has(h))return;De.debug&&console.debug(`Immediate chunk detected for ${h}: ${n.chunkType}, content length: ${u.length}`);let s=25;n.chunkType==="function_start"?s=10:n.chunkType==="parameter"?s=100:n.chunkType==="content"&&(s=150);const d=setTimeout(()=>{!$v.has(h)&&!Pv.has(h)&&((window._updateQueue||Vs).set(h,r),typeof window<"u"&&window._processUpdateQueue&&window._processUpdateQueue())},s),p=cp.get(h);p&&clearTimeout(p),cp.set(h,d)},VM=(h,u)=>{const n=cp.get(h);n&&clearTimeout(n);const r=setTimeout(()=>{cp.delete(h),!$v.has(h)&&!Pv.has(h)&&((window._updateQueue||Vs).set(h,u),typeof window<"u"&&window._processUpdateQueue&&window._processUpdateQueue())},HM);cp.set(h,r)},YM=(h,u)=>{var v;if(wf.has(u))return;De.debug&&console.debug(`Setting up direct monitoring for block: ${u}`),Uv.set(u,Date.now()),h.setAttribute("data-monitored-node",u);let n=0,r=((v=h.textContent)==null?void 0:v.length)||0,s=!1;const d=setInterval(()=>{if(!document.body.contains(h)){clearInterval(d);return}const w=h.textContent||"",S=w.length,k=w.includes("<function_calls>")&&!w.includes("</function_calls>"),I=w.includes("<invoke")&&!w.includes("</invoke>"),R=(w.match(/<parameter[^>]*>/g)||[]).length>(w.match(/<\/parameter>/g)||[]).length;if((k||I||R)&&(s=!0),s&&S===r){if(n++,n>=3){wx.add(u);const A=document.querySelector(`.function-block[data-block-id="${u}"]`);if(A&&A.classList.contains("function-loading")){const _=new CustomEvent("stream-abruptly-ended",{detail:{blockId:u,element:A}});document.dispatchEvent(_),De.debug&&console.debug(`Detected abruptly ended stream for block ${u}`),clearInterval(d)}}}else n=0,r=S},1e3),p=new MutationObserver(w=>{var _;if((window._isProcessing!==void 0?window._isProcessing:BM)||$v.has(u))return;const k=document.querySelector(`.function-block[data-block-id="${u}"]`);if(k!=null&&k.hasAttribute("data-completing"))return;let I=!1,R=!1,A=!1;for(const H of w)if(H.type==="characterData"||H.type==="childList"){I=!0;const G=H.target.textContent||"";if(A||(bE.allFunctionPatterns.lastIndex=0,A=bE.allFunctionPatterns.test(G)),H.type==="characterData"){const ue=H.oldValue||"",ye=G,ce=yE.get(u)||"",be=qM(ye,ce);be.hasNewChunk&&be.isSignificant?(R=!0,FM(u,ye),GM(u,ye,be)):Math.abs(ye.length-ue.length)>10&&(R=!0),yE.set(u,ye)}H.type==="childList"&&(H.addedNodes.length>0||H.removedNodes.length>0)&&(R=!0)}if(I){n=0,r=((_=h.textContent)==null?void 0:_.length)||0,Uv.set(u,Date.now()),wx.has(u)&&wx.delete(u);let H=h;for(;H&&!De.targetSelectors.includes(H.tagName.toLowerCase())&&(H=H.parentElement,!!H););H&&(De.debug&&(R||A)&&console.debug(`Significant content change detected in block ${u}`,{significantChange:R,functionCallPattern:A}),VM(u,H))}});p.observe(h,{childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0,attributes:!1}),wf.set(u,p)},xE=()=>{De.debug&&console.debug("Checking streaming updates...");const h=[];for(const u of De.streamingContainerSelectors){const n=document.querySelectorAll(u);h.push(...Array.from(n))}for(const u of h)for(const n of De.targetSelectors){const r=u.querySelectorAll(n);for(const s of r)s.getAttribute("data-block-id")&&zv(s)}};let dp=null;const XM=()=>{dp&&clearInterval(dp),dp=setInterval(()=>{if(!document.body.contains(document.querySelector(".large-content"))){clearInterval(dp),dp=null;return}xE()},De.progressiveUpdateInterval)},ZM=new Set,Ex=new Map,SE=new Set,wE=h=>{const u=document.createElementNS("http://www.w3.org/2000/svg","svg");if(u.setAttribute("width","16"),u.setAttribute("height","16"),u.setAttribute("viewBox","0 0 16 16"),u.setAttribute("fill","none"),h){const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","M8 15A7 7 0 108 1a7 7 0 000 14z"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-opacity","0.8"),n.setAttribute("stroke-width","1.5"),n.setAttribute("fill","none");const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M8 4v4.5l3 1.5"),r.setAttribute("stroke","currentColor"),r.setAttribute("stroke-opacity","0.8"),r.setAttribute("stroke-width","1.5"),r.setAttribute("stroke-linecap","round"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("fill","none"),u.appendChild(n),u.appendChild(r)}else{const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","M7.5 1.5l-5.6 8.8c-.5.8.1 1.7 1 1.7h11.2c.9 0 1.5-.9 1-1.7l-5.6-8.8c-.5-.7-1.5-.7-2 0z"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1.5"),n.setAttribute("fill","none");const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M8 6v2.5"),r.setAttribute("stroke","currentColor"),r.setAttribute("stroke-width","1.5"),r.setAttribute("stroke-linecap","round"),r.setAttribute("fill","none");const s=document.createElementNS("http://www.w3.org/2000/svg","circle");s.setAttribute("cx","8"),s.setAttribute("cy","11"),s.setAttribute("r","0.75"),s.setAttribute("fill","currentColor"),u.appendChild(n),u.appendChild(r),u.appendChild(s)}return u},QM=()=>{if(!document.body)return;const h=document.querySelectorAll(".function-block.function-loading"),u=Array.from(document.querySelectorAll("pre, code")).filter(r=>{const s=r.textContent||"";return s.includes("<function_calls>")||s.includes("<invoke")||s.includes("<parameter")}),n=new Set([...Array.from(h),...u]);for(const r of n){const s=r.getAttribute("data-block-id")||`pre-existing-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;if(r.getAttribute("data-block-id")||r.setAttribute("data-block-id",s),SE.add(s),!r.querySelector('.stalled-indicator[data-pre-existing="true"]')){const p=document.createElement("div");p.className="stalled-indicator",p.setAttribute("data-stalled-for",s),p.setAttribute("data-pre-existing","true");const v=document.createElement("div");v.className="stalled-message";const w=wE(!0),S=document.createElement("span");S.textContent="This function call was incomplete when the page loaded.",v.appendChild(w),v.appendChild(S),p.appendChild(v),r.appendChild(p)}const d=new CustomEvent("render-function-call",{detail:{blockId:s,element:r}});document.dispatchEvent(d)}},KM=(h,u,n=!1)=>{ZM.add(h),Ex.set(h,0),u.classList.remove("function-loading"),u.classList.add("function-stalled");const r=u.querySelector(`.stalled-indicator[data-stalled-for="${h}"]`);r&&r.remove();const s=document.createElement("div");s.className="stalled-indicator",s.setAttribute("data-stalled-for",h),n&&s.classList.add("abruptly-ended-indicator");const d=document.createElement("div");d.className="stalled-message";const p=document.createElement("span");if(p.textContent=n?"Stream ended abruptly. Function call may be incomplete.":"Stream appears to be stalled. Updates may be incomplete.",!n){const w=wE(!1);d.appendChild(w)}d.appendChild(p);const v=document.createElement("button");v.className="stalled-retry-button",v.textContent="Check for updates",v.onclick=()=>{const w=(Ex.get(h)||0)+1;Ex.set(h,w),v.textContent=w>1?`Check again (${w})`:"Check again",xE();const S=new CustomEvent("render-function-call",{detail:{blockId:h,element:u}});document.dispatchEvent(S)},s.appendChild(d),s.appendChild(v),u.appendChild(s)},EE=()=>{De.stalledStreamTimeout>3e3&&(De.stalledStreamTimeout=3e3),De.stalledStreamCheckInterval>1e3&&(De.stalledStreamCheckInterval=1e3)},CE=()=>{De.enableStalledStreamDetection&&(EE(),typeof window<"u"&&!window.hasOwnProperty("customRenderEvent")&&(window.customRenderEvent=!0,document.addEventListener("render-function-call",h=>{const u=h.detail;u&&u.element&&zv(u.element)}),document.addEventListener("stream-abruptly-ended",h=>{const u=h.detail;u&&u.element&&u.blockId&&(De.debug&&console.debug("Handling abruptly ended stream",u),KM(u.blockId,u.element,!0))})),JM(),QM())},JM=()=>{if(document.getElementById("stalled-stream-styles"))return;const h=document.createElement("style");h.id="stalled-stream-styles",h.textContent=`
        .function-stalled .stalled-indicator {
            background-color: rgba(255, 200, 0, 0.1);
            border-left: 3px solid #ff9800;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        .function-stalled .abruptly-ended-indicator {
            /* Optional: Style abruptly ended indicators differently */
            /* background-color: rgba(255, 100, 0, 0.1); */
            /* border-left-color: #e65100; */
            border-top: 1px solid rgba(255, 152, 0, 0.3); /* Add a top border */
            border-left: none; /* Remove left border */
            margin-top: 15px; /* Add some space above */
            padding-top: 15px; /* Add padding above */
        }
        
        .function-stalled .stalled-message {
            display: flex;
            align-items: center;
            color: #e65100;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .function-stalled .stalled-message svg {
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        .function-stalled .stalled-retry-button {
            background-color: #ff9800;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background-color 0.2s;
        }
        
        .function-stalled .stalled-retry-button:hover {
            background-color: #f57c00;
        }
    `,document.head.appendChild(h)};let Zl=!1,fp=null;const WM=()=>{const h=new Map;if(Vs.forEach((u,n)=>{if(document.body.contains(u)){if(h.set(n,u),Uv.set(n,Date.now()),window._stalledStreams&&window._stalledStreams.has(n)){window._stalledStreams.delete(n);const r=document.querySelector(`.stalled-indicator[data-stalled-for="${n}"]`);r&&r.remove()}}else{De.debug&&console.debug(`Node for block ${n} removed, skipping update and cleaning up.`);const r=wf.get(n);r&&(r.disconnect(),wf.delete(n)),rr.delete(n),Uv.delete(n),window._stalledStreams&&window._stalledStreams.delete(n),Array.from(xf.keys()).filter(s=>s.startsWith(`${n}-`)).forEach(s=>xf.delete(s))}}),h.size===0){Vs.clear(),Zl&&(Zl=!1,window._isProcessing=!1);return}if(Vs.clear(),h.forEach((u,n)=>Vs.set(n,u)),!Zl){Zl=!0,window._isProcessing=!0;try{Vs.forEach((n,r)=>{De.debug&&console.debug(`Processing update for block: ${r}`),zv(n,{current:Zl})}),Vs.clear(),Array.from(xf.values()).some(n=>n>De.largeContentThreshold)&&XM()}catch(u){console.error("Error processing update queue:",u)}finally{Zl=!1,window._isProcessing=!1}}};typeof window<"u"&&(window._isProcessing=Zl,window._updateQueue=Vs,window._stalledStreams=window._stalledStreams||new Set,window._stalledStreamRetryCount=window._stalledStreamRetryCount||new Map,window.preExistingIncompleteBlocks=SE,window._processUpdateQueue=WM);const Ef=()=>gp(),gp=()=>{let h=0;const n=(()=>{const r=[];for(const s of De.targetSelectors){const d=document.querySelectorAll(s);r.push(...Array.from(d))}return r})();for(const r of n)if(!lp.has(r)&&!r.closest(".function-block")){const s=r.getAttribute("data-block-id")||`block-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;zv(r)&&(h++,YM(r,s))}return h},_v=()=>{if(!De.enableDirectMonitoring)return;Cx(),Ef(),CE();const h=UM(()=>{if(!Zl){const u=gp();u>0&&De.debug&&console.debug(`Processed ${u} new function blocks`)}},De.updateThrottle);fp=new MutationObserver(u=>{let n=!1,r=!1;for(const s of u){if(s.type==="childList"&&s.addedNodes.length>0){for(const d of Array.from(s.addedNodes))if(d.nodeType===Node.ELEMENT_NODE){const p=d,v=De.targetSelectors.some(I=>p.matches(I)),w=p.querySelectorAll(De.targetSelectors.join(",")).length>0,S=De.streamingContainerSelectors.some(I=>p.matches(I)),k=p.querySelectorAll(De.streamingContainerSelectors.join(",")).length>0;if(p.textContent&&(p.textContent.includes("<function_calls>")||p.textContent.includes("<invoke")||p.textContent.includes("<function_calls>")||p.textContent.includes("<invoke"))&&(r=!0),v||w||S||k||r){n=!0;break}}else if(d.nodeType===Node.TEXT_NODE){const p=d.textContent||"";if(p.includes("<function_calls>")||p.includes("<invoke")||p.includes("<function_calls>")||p.includes("<invoke")){r=!0,n=!0;break}}}else if(s.type==="characterData"){const d=s.target.textContent||"";(d.includes("<function_calls>")||d.includes("<invoke")||d.includes("<function_calls>")||d.includes("<invoke"))&&(r=!0,n=!0)}if(n)break}n&&(r&&De.debug&&console.debug("Potential function call detected, processing DOM changes"),h())}),fp.observe(document.body,{childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}),De.debug&&console.debug("Direct monitoring started for function calls")},Cx=()=>{fp&&(fp.disconnect(),fp=null),wf.forEach(h=>h.disconnect()),wf.clear(),De.debug&&console.debug("Direct monitoring stopped for function calls")},eA=()=>{De.enableDirectMonitoring&&_v()},tA=!1;let Cf=null;const Tx=()=>!De.function_result_selector||De.function_result_selector.length===0?0:nA(),nA=()=>{if(!De.function_result_selector||De.function_result_selector.length===0)return 0;const h=aA();let u=0;for(const n of h)Sx.has(n)||LM(n,{current:tA})&&u++;return De.debug&&u>0&&console.debug(`Processed ${u} function results`),u},aA=()=>{if(!De.function_result_selector||De.function_result_selector.length===0)return[];const h=[];for(const u of De.function_result_selector)try{const n=document.querySelectorAll(u);for(const r of n)r instanceof HTMLElement&&h.push(r);u.includes(".")&&u.includes(" ")?iA(u,h):u.startsWith("div.")&&u.split(".").length>2&&oA(u,h)}catch(n){console.error(`Invalid selector: ${u}`,n),u.includes(".")&&rA(u,h)}return h},iA=(h,u)=>{const n=h.split(" ");let r=Array.from(document.querySelectorAll(n[0]));for(let s=1;s<n.length;s++){const d=n[s],p=[];for(const v of r)v.querySelectorAll(d).forEach(S=>p.push(S));r=p}for(const s of r)s instanceof HTMLElement&&!u.includes(s)&&u.push(s)},oA=(h,u)=>{const[n,...r]=h.split("."),s=document.querySelectorAll(n);for(const d of s)r.every(p=>d.classList.contains(p))&&d instanceof HTMLElement&&!u.includes(d)&&u.push(d)},rA=(h,u)=>{De.debug&&console.debug(`Using fallback method for selector: ${h}`);const n=h.match(/^([a-z]+)\.(.*)/i);if(!n)return;const[,r,s]=n,d=s.split("."),p=document.querySelectorAll(r);for(const v of p)d.some(S=>v.classList.contains(S))&&v instanceof HTMLElement&&!u.includes(v)&&u.push(v)},sA=()=>{setTimeout(()=>{Tx()},0)},TE=()=>{if(!De.function_result_selector||De.function_result_selector.length===0){De.debug&&console.debug("Function result monitoring disabled: no selectors configured");return}Cf&&kE(),De.debug&&console.debug("Starting function result monitoring"),Tx(),Cf=new MutationObserver(h=>{var r,s;let u=!1,n=!1;for(const d of h){if(d.type==="childList"){for(const p of Array.from(d.addedNodes))if(p.nodeType===Node.ELEMENT_NODE){const v=p,w=(r=De.function_result_selector)==null?void 0:r.some(k=>{try{return v.matches(k)}catch{return!1}}),S=(s=De.function_result_selector)==null?void 0:s.some(k=>{try{return v.querySelectorAll(k).length>0}catch{return!1}});if(v.textContent&&(v.textContent.includes("<function_result")||v.textContent.includes("</function_result>"))&&(n=!0),w||S||n){u=!0;break}}else if(p.nodeType===Node.TEXT_NODE){const v=p.textContent||"";if(v.includes("<function_result")||v.includes("</function_result>")){n=!0,u=!0;break}}}else if(d.type==="characterData"){const p=d.target.textContent||"";(p.includes("<function_result")||p.includes("</function_result>"))&&(n=!0,u=!0)}if(u)break}u&&(n&&De.debug&&console.debug("Potential function result detected, processing DOM changes"),sA())}),Cf.observe(document.body,{childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}),De.debug&&console.debug("Function result monitoring started")},kE=()=>{Cf&&(Cf.disconnect(),Cf=null,De.debug&&console.debug("Function result monitoring stopped"))},lA=()=>{if(!De.function_result_selector||De.function_result_selector.length===0){De.debug&&console.debug("Function result observer not initialized: no selectors configured");return}TE()};let ME=!1;const cA=()=>{if(ME||typeof document>"u")return;const h=document.createElement("style");h.textContent=IM,document.head.appendChild(h),ME=!0};EE();const kx=()=>{if(typeof window>"u"||typeof document>"u"){console.warn("Function Call Renderer: Not running in a browser environment.");return}cA(),Ef(),De.function_result_selector&&De.function_result_selector.length>0&&Tx(),eA(),_v(),De.function_result_selector&&De.function_result_selector.length>0&&lA(),CE(),console.debug("Function call renderer initialized with improved parameter extraction and streaming support.")},uA=h=>{var r;let u=!1;const n={...h};if(De.usePositionFixed=!1,De.largeContentThreshold=Number.MAX_SAFE_INTEGER,De.maxContentPreviewLength=Number.MAX_SAFE_INTEGER,n.knownLanguages!==void 0&&(De.knownLanguages=[...n.knownLanguages]),n.handleLanguageTags!==void 0&&(De.handleLanguageTags=!!n.handleLanguageTags),n.maxLinesAfterLangTag!==void 0&&(De.maxLinesAfterLangTag=n.maxLinesAfterLangTag),n.updateThrottle!==void 0&&(De.updateThrottle=n.updateThrottle,u=!0),n.enableDirectMonitoring!==void 0&&(De.enableDirectMonitoring=!!n.enableDirectMonitoring,u=!0),n.streamingContainerSelectors!==void 0&&(De.streamingContainerSelectors=[...n.streamingContainerSelectors]),n.function_result_selector!==void 0){const s=((r=De.function_result_selector)==null?void 0:r.length)||0;De.function_result_selector=[...n.function_result_selector],(s===0&&De.function_result_selector.length>0||s>0&&De.function_result_selector.length===0)&&(u=!0)}n.streamingMonitoringInterval!==void 0&&(De.streamingMonitoringInterval=n.streamingMonitoringInterval,u=!0),n.largeContentThreshold!==void 0&&(De.largeContentThreshold=n.largeContentThreshold),n.maxContentPreviewLength!==void 0&&(De.maxContentPreviewLength=n.maxContentPreviewLength),n.usePositionFixed!==void 0&&(De.usePositionFixed=!!n.usePositionFixed),n.progressiveUpdateInterval!==void 0&&(De.progressiveUpdateInterval=n.progressiveUpdateInterval,u=!0),n.stabilizeTimeout!==void 0&&(De.stabilizeTimeout=n.stabilizeTimeout),n.debug!==void 0&&(De.debug=!!n.debug),n.enableStalledStreamDetection!==void 0&&(De.enableStalledStreamDetection=!!n.enableStalledStreamDetection,u=!0),n.stalledStreamTimeout!==void 0&&(De.stalledStreamTimeout=n.stalledStreamTimeout),n.stalledStreamCheckInterval!==void 0&&(De.stalledStreamCheckInterval=n.stalledStreamCheckInterval,u=!0),u&&(Cx(),De.enableDirectMonitoring&&_v(),kE(),De.function_result_selector&&De.function_result_selector.length>0&&TE()),console.debug("Function call renderer configuration updated:",De),Ef()};async function dA(){console.debug("[Services] Initializing all application services...");try{const{initializeAutomationService:h}=await Promise.resolve().then(()=>Gw);h(),console.debug("[Services] All services initialized successfully")}catch(h){throw console.error("[Services] Error initializing services:",h),h}}async function fA(){console.debug("[Services] Cleaning up all application services...");try{const{cleanupAutomationService:h}=await Promise.resolve().then(()=>Gw);h(),console.debug("[Services] All services cleaned up successfully")}catch(h){console.error("[Services] Error cleaning up services:",h)}}var gA={CLI_CEB_DEV:"false",CLI_CEB_FIREFOX:"true",CEB_GA_MEASUREMENT_ID:"G-6ENY3Y3H9X",CEB_GA_API_SECRET:"I0PHa_CWTbuTlXSb3T-kXg",CEB_NODE_ENV:"production"};function hA(){const h=setInterval(()=>{try{const u=window.activeSidebarManager;if(!u)return;if(document.documentElement.classList.contains("push-mode-enabled")){const r=u.getShadowHost();r?(r.style.display!=="block"||window.getComputedStyle(r).display==="none"||r.style.opacity!=="1"||parseFloat(window.getComputedStyle(r).opacity)<.9)&&(M("[SidebarRecovery] Detected invisible sidebar with push mode enabled, forcing visibility"),r.style.display="block",r.style.opacity="1",r.classList.add("initialized"),M("[SidebarRecovery] Sidebar visibility restored - skipping re-render to avoid performance issues")):(M("[SidebarRecovery] Push mode enabled but shadow host missing, re-initializing sidebar"),u.initialize().then(()=>{u.show()}))}}catch(u){console.error("[SidebarRecovery] Error:",u)}},1e3);window.addEventListener("unload",()=>{clearInterval(h)}),M("[SidebarRecovery] Sidebar recovery mechanism set up")}M("Content script loaded - initializing with Session 10 architecture");let jv=window.location.href;const AE=pA();try{chrome.runtime.sendMessage({command:"trackAnalyticsEvent",eventName:"page_view",eventParams:{page_title:document.title,page_location:document.location.href,...AE}}),M("[Analytics] Initial page view tracked with demographic data")}catch(h){console.error("[ContentScript] Error sending page view analytics:",h instanceof Error?h.message:String(h))}setInterval(()=>{const h=window.location.href;if(h!==jv){M(`[Analytics] URL changed from ${jv} to ${h}`);try{chrome.runtime.sendMessage({command:"trackAnalyticsEvent",eventName:"url_change",eventParams:{page_title:document.title,page_location:h,previous_page:jv,...AE}}),jv=h}catch(u){console.error("[ContentScript] Error sending URL change analytics:",u instanceof Error?u.message:String(u))}}},1e3);try{chrome.runtime.sendMessage({command:"trackAnalyticsEvent",eventName:"content_script_loaded",eventParams:{hostname:window.location.hostname,path:window.location.pathname}})}catch(h){console.error("[ContentScript] Error sending analytics tracking message:",h instanceof Error?h.message:String(h))}hA();function pA(){try{const h=navigator.userAgent,u=navigator.language;let n="Unknown",r="Unknown",s="Unknown",d="Unknown";if(h.indexOf("Firefox")>-1){n="Firefox";const R=h.match(/Firefox\/(\d+\.\d+)/);r=R&&R[1]?R[1]:"Unknown"}else if(h.indexOf("Edg")>-1){n="Edge";const R=h.match(/Edg\/(\d+\.\d+)/);r=R&&R[1]?R[1]:"Unknown"}else if(h.indexOf("Chrome")>-1){n="Chrome";const R=h.match(/Chrome\/(\d+\.\d+)/);r=R&&R[1]?R[1]:"Unknown"}else if(h.indexOf("Safari")>-1){n="Safari";const R=h.match(/Version\/(\d+\.\d+)/);r=R&&R[1]?R[1]:"Unknown"}else if(h.indexOf("MSIE")>-1||h.indexOf("Trident/")>-1){n="Internet Explorer";const R=h.match(/(?:MSIE |rv:)(\d+\.\d+)/);r=R&&R[1]?R[1]:"Unknown"}if(h.indexOf("Windows")>-1){s="Windows";const R=h.match(/Windows NT (\d+\.\d+)/),A=R&&R[1]?R[1]:"Unknown";d={"10.0":"10/11","6.3":"8.1","6.2":"8","6.1":"7","6.0":"Vista","5.2":"XP x64","5.1":"XP"}[A]||A}else if(h.indexOf("Mac")>-1){s="macOS";const R=h.match(/Mac OS X ([\d_]+)/);d=R&&R[1]?R[1].replace(/_/g,"."):"Unknown"}else if(h.indexOf("Linux")>-1){s="Linux";const R=h.match(/Linux ([\w\d\.]+)/);d=R&&R[1]?R[1]:"Unknown"}else if(h.indexOf("Android")>-1){s="Android";const R=h.match(/Android ([\d\.]+)/);d=R&&R[1]?R[1]:"Unknown"}else if(h.indexOf("iOS")>-1||h.indexOf("iPhone")>-1||h.indexOf("iPad")>-1){s="iOS";const R=h.match(/OS ([\d_]+)/);d=R&&R[1]?R[1].replace(/_/g,"."):"Unknown"}let p="desktop";/Mobi|Android|iPhone|iPad|iPod/i.test(h)&&(p=/iPad|tablet/i.test(h)?"tablet":"mobile");const v=window.screen.width,w=window.screen.height,S=`${v}x${w}`,k=window.devicePixelRatio||1,I=u.split("-")[1]||u;return{browser:n,browser_version:r,operating_system:s,os_version:d,language:u,region:I,screen_resolution:S,pixel_ratio:k,device_type:p}}catch(h){return console.error("[Analytics] Error collecting demographic data:",h),{error:"Failed to collect demographic data"}}}(function(){try{kx(),M("Function call renderer initialized immediately at script load")}catch(u){console.error("Error in immediate renderer initialization:",u)}})(),async function(){try{M("Starting comprehensive application initialization...");try{nr.isReady()?M("MCP client is ready for communication"):M("MCP client not ready, initialization will be handled by the client itself"),window.mcpClient=nr,M("MCP client exposed on window.mcpClient")}catch(u){console.error("MCP client initialization warning:",u)}await Zw(),await dA(),M("Application initialized successfully with Session 10 architecture");try{const{pluginRegistry:u}=await Promise.resolve().then(()=>op);window.pluginRegistry=u,M("Plugin registry exposed on window.pluginRegistry")}catch(u){console.warn("Failed to expose plugin registry globally:",u)}gA.NODE_ENV==="development"&&(window.appInitUtils=aM,M("Initialization utilities exposed on window.appInitUtils"))}catch(u){console.error("Failed to initialize application with Session 10 architecture:",u),M("Attempting fallback initialization...");try{kx(),M("Fallback renderer initialization completed")}catch(n){console.error("Fallback initialization also failed:",n)}}}(),ge.on("connection:status-changed",({status:h})=>{const u=h==="connected";M(`[Content Script] MCP connection status changed: ${u?"Connected":"Disconnected"}`);const n=Xi.getState(),r=n.getActiveAdapter();r&&r.instance&&(ge.emit("adapter:connection-status-changed",{isConnected:u,adapterId:n.activeAdapterName}),window.mcpAdapter=r.instance)});let Ql=!1;const Lv=(h=3,u=300)=>{if(!Ql)if(document.readyState==="complete"||document.readyState==="interactive")try{kx(),Ql=!0,M("Function call renderer initialized successfully on retry."),setTimeout(()=>{Ql&&(Ef(),gp())},500)}catch(n){console.error("Error initializing function call renderer:",n),h>0?(M(`Retrying renderer initialization in ${u}ms... (${h} retries left)`),setTimeout(()=>Lv(h-1,u),u)):M("Failed to initialize function call renderer after multiple retries.")}else M("DOM not ready for renderer initialization, retrying..."),setTimeout(()=>Lv(h,u),100)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Ql||Lv()}):Ql||Lv();function mA(h,u){console.debug(`[Content] Processing Remote Config message: ${h.type}`);try{switch(h.type){case"remote-config:feature-flags-updated":{const{flags:n,timestamp:r}=h.data;console.debug(`[Content] Received feature flags update: ${Object.keys(n).length} flags`),hf.getState().updateFeatureFlags(n),ge.emit("feature-flags:updated",{flags:n,timestamp:r}),u({success:!0,timestamp:Date.now()});break}case"remote-config:notifications-received":{const{notifications:n,timestamp:r}=h.data;console.debug(`[Content] Received notifications: ${n.length} notifications`);const s=za.getState(),d=hf.getState();for(const p of n)d.canShowNotification(p)&&s.addRemoteNotification(p);u({success:!0,processed:n.length,timestamp:Date.now()});break}case"remote-config:version-config-updated":{const{config:n,timestamp:r}=h.data;console.debug("[Content] Received version-specific config update"),ge.emit("remote-config:updated",{changes:["version_config"],timestamp:r}),u({success:!0,timestamp:Date.now()});break}case"remote-config:adapter-configs-updated":{const{adapterConfigs:n,timestamp:r}=h.data;console.debug(`[Content] Received adapter configs update: ${Object.keys(n).length} adapters`),ge.emit("remote-config:adapter-configs-updated",{adapterConfigs:n,timestamp:r}),ge.emit("remote-config:updated",{changes:Object.keys(n).map(s=>`${s}_adapter_config`),timestamp:r}),u({success:!0,timestamp:Date.now()});break}default:console.warn(`[Content] Unknown remote config message type: ${h.type}`),u({success:!1,error:`Unknown message type: ${h.type}`})}}catch(n){const r=n instanceof Error?n.message:String(n);console.error("[Content] Error handling remote config message:",n),u({success:!1,error:r})}}function bA(h,u){try{const{oldVersion:n,newVersion:r,timestamp:s}=h.data;console.debug(`[Content] Extension updated from ${n} to ${r}`),hf.getState().setUserProperties({extensionVersion:r,lastActiveDate:new Date().toISOString()}),ge.emit("app:version-updated",{oldVersion:n,newVersion:r,timestamp:s}),u({success:!0,timestamp:Date.now()})}catch(n){const r=n instanceof Error?n.message:String(n);console.error("[Content] Error handling version update:",n),u({success:!1,error:r})}}chrome.runtime.onMessage.addListener((h,u,n)=>{M(`Message received in content script: ${JSON.stringify(h)}`);const s=Xi.getState().getActiveAdapter(),d=s==null?void 0:s.instance;if(h.command==="getStats")n({success:!0,stats:{mcpConnected:Oa.getState().status==="connected",activeSite:(d==null?void 0:d.name)||"Unknown"}});else if(h.command==="toggleSidebar")ge.emit("sidebar:toggle-requested",{}),n({success:!0});else if(h.command==="showSidebarWithToolOutputs")ge.emit("sidebar:show-with-outputs",{}),n({success:!0});else if(h.command==="callMcpTool"){const{toolName:p,args:v}=h;if(p&&v)return nr.callTool(p,v).then(w=>{n({success:!0,result:w})}).catch(w=>{const S=w instanceof Error?w.message:String(w);n({success:!1,error:S})}),!0;n({success:!1,error:"Invalid tool call request"})}else if(h.command==="refreshSidebarContent")ge.emit("sidebar:refresh-content",{}),n({success:!0});else if(h.command==="setFunctionCallRendering"){const{enabled:p}=h;Ql?(p?(M("Starting function call monitoring."),_v(),Ef(),gp()):(M("Stopping function call monitoring."),Cx()),n({success:!0})):(M("Cannot toggle function call rendering: Renderer not initialized."),n({success:!1,error:"Renderer not initialized"}))}else if(h.command==="forceRenderFunctionCalls")Ql?(M("Forcing function call render check."),Ef(),gp(),n({success:!0})):(M("Cannot force render: Renderer not initialized."),n({success:!1,error:"Renderer not initialized"}));else if(h.command==="configureRenderer")Ql?(M(`Configuring function call renderer with options: ${JSON.stringify(h.options)}`),uA(h.options),n({success:!0})):(M("Cannot configure renderer: Not initialized."),n({success:!1,error:"Renderer not initialized"}));else{if(h.type&&h.type.startsWith("remote-config:"))return mA(h,n),!0;if(h.type==="app:version-updated")return bA(h,n),!0}return!0}),window.addEventListener("beforeunload",async()=>{M("Page unloading - starting comprehensive cleanup...");try{await fA(),await wv(),M("Comprehensive cleanup completed")}catch(h){console.error("Error during comprehensive cleanup:",h)}}),window.mcpClient=nr,console.debug("[Content Script] mcpClient exposed to window object for renderer use.");const Bv=Xi.getState().getActiveAdapter();Bv&&Bv.instance?(window.mcpAdapter=Bv.instance,console.debug(`[Content Script] Current adapter (${Bv.plugin.name}) exposed to window object as mcpAdapter.`)):console.debug("[Content Script] No active adapter found to expose to window object.");var RE=L0();const vA=({children:h,isOpen:u,triggerRef:n,onMouseEnter:r,onMouseLeave:s})=>{const[d,p]=Z.useState(null),[v,w]=Z.useState(!1),[S,k]=Z.useState({x:0,y:0}),[I,R]=Z.useState({x:0,y:0}),A=Z.useRef(null);Z.useEffect(()=>{if(!d){const G=document.createElement("div");G.id="mcp-popover-portal",G.style.position="absolute",G.style.zIndex="10000",G.style.top="0",G.style.left="0",document.body.appendChild(G),p(G)}return()=>{d&&document.body.contains(d)&&document.body.removeChild(d)}},[d]),Z.useEffect(()=>{const G=()=>{var ue;if(u&&d&&n.current&&!v){const ye=n.current.getBoundingClientRect(),ce=window.innerWidth,be=window.innerHeight,J=(ue=d.firstElementChild)==null?void 0:ue.firstElementChild;if(!J)return;const he=J.offsetWidth,ie=J.offsetHeight;let Ee=ye.left+ye.width/2,de=ye.top-10,Ue="center bottom",ze="translate(-50%, -100%)";Ee-he/2<10&&(Ee=he/2+10),Ee+he/2>ce-10&&(Ee=ce-he/2-10);const Fe=ye.top,Ge=be-ye.bottom;ye.top<ie+30||Fe<ie+20&&Ge>=ie+20?(de=ye.bottom+10,ze="translate(-50%, 0)",Ue="center top",de+ie>be-10&&(de=Math.min(de,be-ie-10)),J.classList&&(J.classList.remove("position-above"),J.classList.add("position-below"))):(de=ye.top-10,ze="translate(-50%, -100%)",Ue="center bottom",de-ie<10&&(de=ie+10),J.classList&&(J.classList.remove("position-below"),J.classList.add("position-above"))),d.style.position="fixed",d.style.left=`${Ee}px`,d.style.top=`${de}px`,d.style.transform=ze,R({x:Ee,y:de}),J&&(J.style.transformOrigin=Ue)}};if(u&&d&&n.current)return G(),window.addEventListener("scroll",G),window.addEventListener("resize",G),()=>{window.removeEventListener("scroll",G),window.removeEventListener("resize",G)}},[u,d,n]);const _=G=>{if(!d)return;w(!0);const ue=d.getBoundingClientRect();k({x:G.clientX-ue.left,y:G.clientY-ue.top}),G.preventDefault()},H=G=>{if(!v||!d)return;const ue=G.clientX-S.x,ye=G.clientY-S.y;d.style.left=`${ue}px`,d.style.top=`${ye}px`,d.style.transform="none",R({x:ue,y:ye})},re=()=>{w(!1)};return Z.useEffect(()=>(v?(window.addEventListener("mousemove",H),window.addEventListener("mouseup",re)):(window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",re)),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",re)}),[v]),!d||!u?null:RE.createPortal(C.jsx("div",{onMouseEnter:r,onMouseLeave:s,style:{display:"contents"},children:C.jsxs("div",{className:"mcp-popover-wrapper",style:{position:"relative",opacity:v?.9:1,backdropFilter:v?"blur(12px)":"none",WebkitBackdropFilter:v?"blur(12px)":"none",transition:"opacity 0.15s ease, backdrop-filter 0.15s ease, background-color 0.15s ease"},children:[h,C.jsx("div",{ref:A,className:"mcp-drag-handle",onMouseDown:_,title:"Drag to move"})]})}),d)},OE=()=>{const[h,u]=Z.useState(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return Z.useEffect(()=>{const n=window.matchMedia("(prefers-color-scheme: dark)"),r=s=>u(s.matches);return n.addEventListener("change",r),()=>n.removeEventListener("change",r)},[]),h},yA=`
.mcp-popover-container {
  position: relative;
  display: inline-block;
}

.mcp-main-button {
  display: flex;
  align-items: center;
  width: max-content;
  height: max-content;
  justify-content: center;
  padding: 4px 8px;
  border-radius: 10px;
  background-color: #e8f0fe;
  border: 1px solid #dadce0;
  cursor: pointer;
  transition: all 0.2s ease;
  color: #202124;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
  font-size: 14px;
  font-weight: 600;
  box-shadow: 0 1px 3px rgba(60,64,67,0.08);
  letter-spacing: 0.3px;
  white-space: nowrap;
}

.mcp-main-button:hover {
  background-color: #aecbfa;
  box-shadow: 0 2px 4px rgba(60,64,67,0.12);
}

.mcp-main-button:active {
  transform: translateY(1px);
  box-shadow: 0 0 1px rgba(60,64,67,0.08);
}

.mcp-main-button.inactive {
  background-color: #f5f7f9;
  border-color: #dadce0;
  color: #5f6368;
}

.mcp-popover {
  width: 650px;
  background-color: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(60,64,67,0.10), 0 2px 8px rgba(60,64,67,0.06);
  padding: 0;
  z-index: 1000;
  border: 1px solid #dadce0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
  overflow: visible;
  max-height: 90vh;
  position: relative;
}

.mcp-close-button {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  background: transparent;
  border: none;
  color: #5f6368;
  font-size: 18px;
  font-weight: 500;
  z-index: 1002;
  transition: all 0.2s ease;
}

.mcp-close-button:hover {
  background-color: #e8f0fe;
  color: #1a73e8;
}

.mcp-close-button:active {
  transform: scale(0.95);
}

/* Default arrow (positioned at the bottom for popover above trigger) */
.mcp-popover.position-above::after {
  content: '';
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%) rotate(45deg);
  width: 14px;
  height: 14px;
  background-color: #ffffff;
  border-right: 1px solid #dadce0;
  border-bottom: 1px solid #dadce0;
}

/* Arrow for popover positioned below the trigger */
.mcp-popover.position-below::after {
  content: '';
  position: absolute;
  top: -8px;
  left: 50%;
  transform: translateX(-50%) rotate(-135deg);
  width: 14px;
  height: 14px;
  background-color: #ffffff;
  border-right: 1px solid #dadce0;
  border-bottom: 1px solid #dadce0;
}

.mcp-toggle-item {
  display: block;
  margin-bottom: 6px;
  padding: 8px 10px;
  cursor: pointer;
  border-bottom: 1px solid #dadce0;
  transition: background-color 0.15s ease;
  box-sizing: border-box;
  width: 100%;
  background: #ffffff;
}

.mcp-toggle-item:hover {
  background-color: #e8f0fe;
}

.mcp-toggle-item:last-child {
  margin-bottom: 0;
  border-bottom: none;
}

.mcp-toggle-checkbox {
  position: relative;
  width: 36px;
  height: 18px;
  flex-shrink: 0;
  display: inline-block;
  margin-right: 10px;
  vertical-align: middle;
  border-radius: 34px;
  
}

.mcp-toggle-checkbox input {
  opacity: 0;
  width: 0;
  height: 0;
  margin: 0;
  padding: 0;
}

.mcp-toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #dadce0;
  transition: .3s;
  border-radius: 34px;
  box-sizing: border-box;
  overflow: hidden;
}

.mcp-toggle-slider:before {
  position: absolute;
  content: "";
  height: 12px;
  width: 12px;
  left: 3px;
  bottom: 3px;
  background-color: #ffffff;
  transition: .3s;
  border-radius: 50%;
  box-shadow: 0 1px 2px rgba(60,64,67,0.08);
  z-index: 1;
}

input:checked + .mcp-toggle-slider {
  background-color: #1a73e8;
}

input:checked + .mcp-toggle-slider:before {
  transform: translateX(18px);
}

.mcp-toggle-label {
  font-size: 13px;
  color: #202124;
  font-weight: 500;
  letter-spacing: 0.2px;
  white-space: nowrap;
  vertical-align: middle;
}

.mcp-toggle-item.disabled {
  opacity: 0.65;
  cursor: not-allowed;
  background-color: #f5f7f9;
}

.mcp-toggle-item.disabled .mcp-toggle-slider {
  background-color: #dadce0;
  cursor: not-allowed;
  border-radius: 34px;
  overflow: hidden;
}

.mcp-instruction-btn {
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 8px;
  font-weight: 500;
  transition: all 0.2s ease;
  box-shadow: 0 1px 2px rgba(60,64,67,0.05);
}

.mcp-instruction-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(60,64,67,0.10);
}

.mcp-instruction-btn:active {
  transform: translateY(0);
}

.mcp-instructions-container {
  background-color: #f8f9fa;
  border: 1px solid #eaecef;
  border-radius: 10px;
  padding: 16px;
  font-family: monospace;
  font-size: 13px;
  line-height: 1.5;
  color: #3c4043;
  box-shadow: inset 0 1px 2px rgba(60,64,67,0.03);
  width: 100%;
  box-sizing: border-box;
  overflow-wrap: break-word;
}

.mcp-popover {
  position: relative;
}

.mcp-drag-handle {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 6px;
  cursor: move;
  z-index: 1001;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  background-color: #dadce0;
  border-bottom-left-radius: 3px;
  border-bottom-right-radius: 3px;
  border: none;
}

.mcp-drag-handle:hover {
  background-color: #e8f0fe;
}

.mcp-drag-handle:hover .mcp-drag-handle-bar {
  background-color: #1a73e8;
}

.mcp-drag-handle-bar {
  width: 12px;
  height: 3px;
  background-color: #5f6368;
  border-radius: 1.5px;
  margin: 0 1px;
  transition: background-color 0.2s ease;
}

@media (prefers-color-scheme: dark) {
  .mcp-main-button {
    background-color: #174ea6;
    border-color: #8ab4f8;
    color: #e8eaed;
  }

  .mcp-main-button:hover {
    background-color: #8ab4f8;
    color: #202124;
  }

  .mcp-main-button.inactive {
    background-color: #2d2d2d;
    border-color: #444;
    color: #9aa0a6;
  }

  .mcp-popover {
    background-color: #2d2d2d;
    box-shadow: 0 4px 20px rgba(20,20,20,0.25), 0 2px 8px rgba(20,20,20,0.15);
    border: 1px solid #444;
    overflow: visible;
  }

  .mcp-popover.position-above::after,
  .mcp-popover.position-below::after {
    background-color: #2d2d2d;
    border-right: 1px solid #444;
    border-bottom: 1px solid #444;
  }

  .mcp-toggle-item {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    border-bottom: 1px solid #444;
    background: #2d2d2d;
  }

  .mcp-toggle-item:hover {
    background-color: #174ea6;
  }

  .mcp-toggle-slider {
    background-color: #444;
  }

  input:checked + .mcp-toggle-slider {
    background-color: #8ab4f8;
  }

  .mcp-toggle-label {
    color: #e8eaed;
  }

  .mcp-toggle-item.disabled {
    background-color: #282828;
  }

  .mcp-toggle-item.disabled .mcp-toggle-slider {
    background-color: #444;
    border-radius: 34px;
    overflow: hidden;
  }

  .mcp-instructions-container {
    background-color: #2d2d2d;
    border: 1px solid #444;
    color: #e8eaed;
    box-shadow: inset 0 1px 2px rgba(20,20,20,0.10);
  }

  .mcp-close-button {
    color: #9aa0a6;
  }

  .mcp-close-button:hover {
    background-color: #174ea6;
    color: #8ab4f8;
  }
  
  .mcp-drag-handle {
    background-color: #444;
    border: none;
  }

  .mcp-drag-handle-bar {
    background-color: #9aa0a6;
  }
  
  .mcp-drag-handle:hover {
    background-color: #174ea6;
  }

  .mcp-drag-handle:hover .mcp-drag-handle-bar {
    background-color: #8ab4f8;
  }
}

/* Hover overlay styles */
.mcp-hover-overlay {
  position: fixed !important;
  background: #ffffff !important;
  border: 1px solid #e1e5e9 !important;
  border-radius: 10px !important;
  box-shadow: 0 6px 20px rgba(60,64,67,0.12), 0 2px 8px rgba(60,64,67,0.06) !important;
  padding: 8px !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 4px !important;
  align-items: stretch !important;
  opacity: 0 !important;
  visibility: hidden !important;
  transform: translateY(-8px) scale(0.95) !important;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
  z-index: 2147483647 !important;
  white-space: nowrap !important;
  pointer-events: none !important;
  width: 130px !important;
  min-width: 130px !important;
  max-width: 130px !important;
  box-sizing: border-box !important;
  font-family: inherit !important;
  font-synthesis: none !important;
  text-rendering: optimizeLegibility !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

.mcp-hover-overlay.visible {
  opacity: 1 !important;
  visibility: visible !important;
  transform: translateY(0) scale(1) !important;
  pointer-events: auto !important;
}

.mcp-hover-button {
  display: flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  gap: 8px !important;
  padding: 10px 12px !important;
  border-radius: 6px !important;
  border: none !important;
  background: #f8f9fa !important;
  color: #374151 !important;
  font-size: 13px !important;
  font-weight: 500 !important;
  cursor: pointer !important;
  transition: all 0.2s ease !important;
  width: 100% !important;
  min-width: 110px !important;
  max-width: none !important;
  box-sizing: border-box !important;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !important;
  text-align: left !important;
  letter-spacing: -0.01em !important;
  white-space: nowrap !important;
  overflow: hidden !important;
}

.mcp-hover-button:hover {
  background: #e3f2fd !important;
  color: #1565c0 !important;
  transform: scale(1.02) !important;
  box-shadow: 0 2px 8px rgba(21, 101, 192, 0.15) !important;
}

.mcp-hover-button:active {
  transform: scale(0.98) !important;
  box-shadow: 0 1px 3px rgba(21, 101, 192, 0.2) !important;
}

@media (prefers-color-scheme: dark) {
  .mcp-hover-overlay {
    background: #1f2937 !important;
    border-color: #374151 !important;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3), 0 3px 10px rgba(0,0,0,0.2) !important;
  }

  .mcp-hover-button {
    background: #374151 !important;
    color: #d1d5db !important;
  }

  .mcp-hover-button:hover {
    background: #1e3a8a !important;
    color: #93c5fd !important;
    box-shadow: 0 2px 8px rgba(147, 197, 253, 0.2) !important;
  }
}
`;function xA(){Z.useEffect(()=>{if(!document.getElementById("mcp-popover-styles")){const h=document.createElement("style");h.id="mcp-popover-styles",h.textContent=yA,document.head.appendChild(h)}},[])}const Hv=({id:h,label:u,checked:n,disabled:r,onChange:s})=>{const d=OE(),p={itemBackground:d?"#2d2d2d":"#ffffff",itemBorderColor:d?"#444":"#dadce0",labelColor:d?"#e8eaed":"#202124",toggleBackground:d?"#444":"#dadce0",toggleBackgroundChecked:d?"#8ab4f8":"#1a73e8",toggleBackgroundDisabled:d?"#444":"#dadce0"};return C.jsx("div",{className:`mcp-toggle-item${r?" disabled":""}`,style:{borderBottom:`1px solid ${p.itemBorderColor}`,backgroundColor:p.itemBackground},children:C.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[C.jsx("div",{style:{width:"36px",marginRight:"10px"},children:C.jsxs("label",{className:"mcp-toggle-checkbox",style:{display:"block"},children:[C.jsx("input",{type:"checkbox",id:h,checked:n,disabled:r,onChange:v=>s(v.target.checked)}),C.jsx("span",{className:"mcp-toggle-slider",style:{backgroundColor:r?p.toggleBackgroundDisabled:n?p.toggleBackgroundChecked:p.toggleBackground}})]})}),C.jsx("label",{htmlFor:h,className:"mcp-toggle-label",style:{cursor:r?"not-allowed":"pointer",color:p.labelColor},children:u})]})})},sr=Object.freeze(Object.defineProperty({__proto__:null,MCPPopover:({toggleStateManager:h,adapterButtonConfig:u,adapterName:n})=>{const r=OE(),{plugin:s,insertText:d,attachFile:p,isReady:v}=Cw(),{preferences:w,updatePreferences:S}=pv(),{mcpEnabled:k,setMCPEnabled:I}=DT();Z.useEffect(()=>{console.debug("[MCPPopover] Adapter state changed:",{isAdapterActive:v,hasActivePlugin:!!s,pluginName:s==null?void 0:s.name,hasInsertText:!!d,hasAttachFile:!!p,capabilities:s==null?void 0:s.capabilities,adapterName:n,hasAdapterButtonConfig:!!u})},[v,s,d,p,n,u]),Z.useEffect(()=>{console.debug("[MCPPopover] Instructions state:",{hasInstructions:!!fn.instructions,instructionsLength:fn.instructions.length,preferences:w})},[fn.instructions,w]);const R={mainBackground:r?"#2d2d2d":"#ffffff",secondaryBackground:r?"#2d2d2d":"#f8f9fa",buttonBackground:r?"#174ea6":"#e8f0fe",primaryText:r?"#e8eaed":"#202124",secondaryText:r?"#9aa0a6":"#5f6368",borderColor:r?"#444":"#dadce0",dividerColor:r?"#444":"#dadce0",boxShadow:r?"0 6px 24px rgba(20,20,20,0.25), 0 2px 8px rgba(20,20,20,0.15)":"0 6px 24px rgba(60,64,67,0.10), 0 2px 8px rgba(60,64,67,0.06)",innerShadow:r?"inset 0 1px 2px rgba(20,20,20,0.10)":"inset 0 1px 2px rgba(60,64,67,0.03)"};xA();const[A,_]=Z.useState(()=>({...h.getState(),mcpEnabled:k})),[H,re]=Z.useState(fn.instructions||""),[G,ue]=Z.useState("Copy"),[ye,ce]=Z.useState("Insert"),[be,J]=Z.useState("Attach"),[he,ie]=Z.useState(!1),[Ee,de]=Z.useState(!1),[Ue,ze]=Z.useState({x:0,y:0}),Fe=Z.useRef(null),Ge=Z.useRef(null),Xe=Z.useRef(null),Q=Z.useRef(null),V=Z.useCallback(()=>{const _e=h.getState();_(ot=>({..._e,mcpEnabled:k}))},[h,k]);Z.useEffect(()=>{console.debug(`[MCPPopover] MCP state changed to: ${k}, updating MCP toggle UI`),_(_e=>{const ot={..._e,mcpEnabled:k};return console.debug("[MCPPopover] State updated:",ot),ot})},[k]),Z.useEffect(()=>{re(fn.instructions||"");const _e=fn.subscribe(ot=>{re(ot)});return()=>{_e()}},[]),Z.useEffect(()=>{const _e=h.getState();console.debug(`[MCPPopover] Initial state sync - toggleManager: ${_e.mcpEnabled}, store MCP: ${k}`);const ot={..._e,mcpEnabled:k,autoInsert:w.autoInsert||!1,autoSubmit:w.autoSubmit||!1,autoExecute:w.autoExecute||!1};_(ot),h.setAutoInsert(w.autoInsert||!1),h.setAutoSubmit(w.autoSubmit||!1),h.setAutoExecute(w.autoExecute||!1)},[h,k,w.autoInsert,w.autoSubmit,w.autoExecute]);const ee=_e=>{console.debug(`[MCPPopover] MCP toggle changed to: ${_e}`),I(_e,"mcp-popover-user-toggle"),h.setMCPEnabled(_e)},Oe=_e=>{console.debug(`[MCPPopover] Auto Insert toggle changed to: ${_e}`),S({autoInsert:_e}),h.setAutoInsert(_e),V(),Gl.getInstance().updateAutomationStateOnWindow().catch(console.error)},$=_e=>{console.debug(`[MCPPopover] Auto Submit toggle changed to: ${_e}`),S({autoSubmit:_e}),h.setAutoSubmit(_e),V(),Gl.getInstance().updateAutomationStateOnWindow().catch(console.error)},P=_e=>{console.debug(`[MCPPopover] Auto Execute toggle changed to: ${_e}`),S({autoExecute:_e}),h.setAutoExecute(_e),V(),Gl.getInstance().updateAutomationStateOnWindow().catch(console.error)},fe=async()=>{try{await navigator.clipboard.writeText(H),ue("Copied!"),setTimeout(()=>ue("Copy"),1200)}catch{ue("Error"),setTimeout(()=>ue("Copy"),1200)}},ne=async()=>{if(!H.trim()){ce("No Content"),setTimeout(()=>ce("Insert"),1200);return}if(console.debug(`[MCPPopover] handleInsert called - isAdapterActive: ${v}, activePlugin: ${!!s}, insertText: ${!!d}`),s&&console.debug("[MCPPopover] Active plugin details:",{name:s.name,capabilities:s.capabilities,hasInsertText:!!s.insertText}),(!v||!s||!d)&&(console.debug("[MCPPopover] Adapter not immediately ready, waiting 100ms and retrying..."),await new Promise(_e=>setTimeout(_e,100))),v&&s&&d)try{console.debug(`[MCPPopover] Attempting to insert text using ${s.name} adapter`),await d(H)?(ce("Inserted!"),console.debug(`[MCPPopover] Text inserted successfully using ${s.name} adapter`)):(ce("Failed"),console.warn(`[MCPPopover] Text insertion failed using ${s.name} adapter`))}catch(_e){console.error("[MCPPopover] Error inserting text:",_e),ce("Failed")}else ce("No Adapter"),console.warn(`[MCPPopover] No active adapter available for text insertion. isAdapterActive: ${v}, activePlugin: ${!!s}, insertText: ${!!d}`),s&&console.warn("[MCPPopover] Active plugin details:",{name:s.name,capabilities:s.capabilities,hasInsertTextMethod:!!s.insertText});setTimeout(()=>ce("Insert"),1200)},ke=async()=>{if(console.debug(`[MCPPopover] handleAttach called - isAdapterActive: ${v}, activePlugin: ${!!s}, attachFile: ${!!p}`),s&&console.debug("[MCPPopover] Active plugin details for attach:",{name:s.name,capabilities:s.capabilities,hasAttachFile:!!s.attachFile,supportsFileAttachment:s.capabilities.includes("file-attachment")}),!H.trim()){J("No File"),setTimeout(()=>J("Attach"),1200);return}if((!v||!s||!p)&&(console.debug("[MCPPopover] Adapter not immediately ready for attachment, waiting 100ms and retrying..."),await new Promise(_e=>setTimeout(_e,100))),v&&s&&p){if(!s.capabilities.includes("file-attachment")){J("Not Supported"),console.warn(`[MCPPopover] File attachment not supported by ${s.name} adapter`);return}const _e=s.name==="Perplexity",ot=s.name==="Gemini",Yt=_e||ot?"text/plain":"text/markdown",Un=`mcp_superassistant_instructions${_e||ot?".txt":".md"}`,Ae=new File([H],Un,{type:Yt});try{console.debug(`[MCPPopover] Attempting to attach file using ${s.name} adapter`),await p(Ae)?(J("Attached!"),console.debug(`[MCPPopover] File attached successfully using ${s.name} adapter`)):(J("Error"),console.warn(`[MCPPopover] File attachment failed using ${s.name} adapter`))}catch(gt){console.error("[MCPPopover] Error attaching file:",gt),J("Error")}}else J("No File"),console.warn(`[MCPPopover] Cannot attach file. isAdapterActive: ${v}, activePlugin: ${!!s}, attachFile: ${!!p}`),s&&console.warn("[MCPPopover] Active plugin details:",{name:s.name,capabilities:s.capabilities,hasAttachFileMethod:!!s.attachFile});setTimeout(()=>J("Attach"),1200)},Be=Z.useCallback(()=>{if(Ge.current){const _e=Ge.current.getBoundingClientRect(),ot=130,Yt=140;let Jt=_e.right-ot+10,Un=_e.top-Yt-10;const Ae=window.innerWidth;Jt<10?Jt=10:Jt+ot>Ae-10&&(Jt=Ae-ot-10),Un<10&&(Un=_e.bottom+10),ze({x:Jt,y:Un})}},[]),Te=Z.useCallback(()=>{Xe.current&&clearTimeout(Xe.current),Be(),de(!0)},[Be]),Pe=Z.useCallback(()=>{Xe.current=setTimeout(()=>{de(!1)},200)},[]),Me=()=>{Xe.current&&clearTimeout(Xe.current)},$e=()=>{de(!1)},it=Z.useRef(null);Z.useEffect(()=>{const _e=ot=>{var Ae;const Yt=Ge.current&&Ge.current.contains(ot.target),Jt=Fe.current&&Fe.current.contains(ot.target),Un=(Ae=document.getElementById("mcp-popover-portal"))==null?void 0:Ae.contains(ot.target);!Yt&&!Jt&&!Un&&ie(!1)};return he?setTimeout(()=>{document.addEventListener("mousedown",_e)},10):document.removeEventListener("mousedown",_e),()=>{document.removeEventListener("mousedown",_e)}},[he]),Z.useEffect(()=>{if(Ee){Be();const _e=()=>{Be()};return window.addEventListener("scroll",_e,!0),window.addEventListener("resize",_e),()=>{window.removeEventListener("scroll",_e,!0),window.removeEventListener("resize",_e)}}},[Ee,Be]),Z.useEffect(()=>()=>{Xe.current&&clearTimeout(Xe.current)},[]);const Ke=!A.mcpEnabled,lt=!A.mcpEnabled||!A.autoInsert,ht=!A.mcpEnabled,Vt=u!=null&&u.className?`${u.className}${A.mcpEnabled&&u.activeClassName?` ${u.activeClassName}`:""}`:`mcp-main-button${A.mcpEnabled?"":" inactive"}`,ca=u!=null&&u.contentClassName?C.jsxs("span",{className:u.contentClassName,children:[C.jsx("img",{src:chrome.runtime.getURL("icon-34.png"),alt:"MCP Logo",className:u.iconClassName||"",style:{width:"20px",height:"20px",borderRadius:"50%"}}),C.jsx("span",{className:u.textClassName||"",children:"MCP"})]}):C.jsxs(C.Fragment,{children:[C.jsx("img",{src:chrome.runtime.getURL("icon-34.png"),alt:"MCP Logo",style:{width:"20px",height:"20px",marginRight:"1px",verticalAlign:"middle",borderRadius:"50%"}}),"MCP"]});return C.jsxs("div",{className:"mcp-popover-container",id:"mcp-popover-container",ref:it,children:[C.jsx("div",{style:{position:"relative",display:"inline-block"},onMouseEnter:Te,onMouseLeave:Pe,children:C.jsx("button",{className:Vt,"aria-label":`MCP Settings - ${A.mcpEnabled?"Active":"Inactive"}`,title:`MCP Settings - ${A.mcpEnabled?"Sidebar Visible":"Sidebar Hidden"}`,type:"button",ref:Ge,onClick:()=>ie(!he),children:ca})}),Ee&&RE.createPortal(C.jsxs("div",{className:`mcp-hover-overlay ${Ee?"visible":""}`,ref:Q,onMouseEnter:Me,onMouseLeave:$e,style:{left:`${Ue.x}px`,top:`${Ue.y}px`},children:[C.jsxs("button",{className:"mcp-hover-button",onClick:ne,title:"Insert instructions",type:"button",children:[C.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{flexShrink:0},children:C.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Insert"]}),C.jsxs("button",{className:"mcp-hover-button",onClick:ke,title:"Attach instructions as file",type:"button",children:[C.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{flexShrink:0},children:C.jsx("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"})}),"Attach"]}),C.jsxs("button",{className:"mcp-hover-button",onClick:()=>ie(!he),title:"Configure MCP settings",type:"button",children:[C.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{flexShrink:0},children:C.jsx("path",{d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})}),"Configure"]})]}),document.body),C.jsx(vA,{isOpen:he,triggerRef:Ge,children:C.jsxs("div",{className:"mcp-popover position-above",ref:Fe,style:{display:"flex",flexDirection:"row",minHeight:280,padding:0,width:"650px",position:"relative",borderRadius:"16px",boxShadow:R.boxShadow,overflow:"hidden",backgroundColor:R.mainBackground,border:`1px solid ${R.borderColor}`},children:[C.jsx("button",{className:"mcp-close-button",onClick:()=>ie(!1),"aria-label":"Close",title:"Close",type:"button",style:{color:R.secondaryText},children:"✕"}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",width:160,padding:"20px 12px",gap:12,borderRight:`1px solid ${R.dividerColor}`,background:R.mainBackground,boxSizing:"border-box"},children:[C.jsx(Hv,{id:"mcp-toggle",label:"MCP",checked:A.mcpEnabled,disabled:!1,onChange:ee}),C.jsx(Hv,{id:"auto-insert-toggle",label:"Auto Insert",checked:A.autoInsert,disabled:Ke,onChange:Oe}),C.jsx(Hv,{id:"auto-submit-toggle",label:"Auto Submit",checked:A.autoSubmit,disabled:lt,onChange:$}),C.jsx(Hv,{id:"auto-execute-toggle",label:"Auto Execute",checked:A.autoExecute,disabled:ht,onChange:P})]}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1,padding:"20px 20px 16px 20px",background:R.mainBackground,boxSizing:"border-box",overflow:"auto"},children:[C.jsx("div",{style:{fontWeight:"600",fontSize:16,marginBottom:16,letterSpacing:.5,color:R.primaryText,paddingBottom:4,borderBottom:`1px solid ${R.dividerColor}`},children:"Instructions"}),C.jsx("div",{className:"mcp-instructions-container",style:{flex:1,minHeight:180,maxHeight:320,overflowY:"auto",overflowX:"auto",margin:"0 0 20px 0",whiteSpace:"pre-wrap",width:"100%",boxSizing:"border-box",backgroundColor:R.secondaryBackground,color:R.primaryText,border:`1px solid ${R.borderColor}`,boxShadow:R.innerShadow},children:H||C.jsx("div",{style:{color:R.secondaryText,fontStyle:"italic",padding:"10px",textAlign:"center"},children:fn.instructions?"Generating instructions...":"Loading instructions..."})}),C.jsxs("div",{style:{display:"flex",gap:20,justifyContent:"space-between",width:"100%",marginTop:0,marginBottom:16,paddingRight:16},children:[C.jsx("button",{className:"mcp-instruction-btn",style:{flex:1,padding:"12px 0",fontSize:14,fontWeight:500,borderRadius:8,border:`1px solid ${R.borderColor}`,background:R.secondaryBackground,cursor:"pointer",color:R.primaryText},onClick:fe,onMouseEnter:_e=>_e.currentTarget.style.background=R.buttonBackground,onMouseLeave:_e=>_e.currentTarget.style.background=R.secondaryBackground,type:"button",children:G}),C.jsx("button",{className:"mcp-instruction-btn",style:{flex:1,padding:"12px 0",fontSize:14,fontWeight:500,borderRadius:8,border:`1px solid ${R.borderColor}`,background:R.secondaryBackground,cursor:"pointer",color:R.primaryText},onClick:ne,onMouseEnter:_e=>_e.currentTarget.style.background=R.buttonBackground,onMouseLeave:_e=>_e.currentTarget.style.background=R.secondaryBackground,type:"button",children:ye}),C.jsx("button",{className:"mcp-instruction-btn",style:{flex:1,padding:"12px 0",fontSize:14,fontWeight:500,borderRadius:8,border:`1px solid ${R.borderColor}`,background:R.secondaryBackground,cursor:"pointer",color:R.primaryText},onClick:ke,onMouseEnter:_e=>_e.currentTarget.style.background=R.buttonBackground,onMouseLeave:_e=>_e.currentTarget.style.background=R.secondaryBackground,type:"button",children:be})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"}))})();
